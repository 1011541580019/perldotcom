{
   "thumbnail" : null,
   "description" : " My, doesn't time fly? Another fortnight gone and another summary to write. It's a hard life, I tell you! This Week in perl6-compiler Where's Everyone Gone? It seems that most of the Perl 6 compiler development discussions occur at...",
   "tags" : [
      "compiler",
      "internals",
      "parrot",
      "perl-6",
      "pge",
      "pugs",
      "vm-development"
   ],
   "categories" : "perl-6",
   "image" : null,
   "authors" : [
      "piers-cawley"
   ],
   "draft" : null,
   "slug" : "/pub/2005/07/p6pdigest/20050707.html",
   "date" : "2005-07-07T00:00:00-08:00",
   "title" : "This Week in Perl 6, June 29-July 5, 2005"
}





\
My, doesn't time fly? Another fortnight gone and another summary to
write. It's a hard life, I tell you!

### This Week in *perl6-compiler*

#### Where's Everyone Gone?

It seems that most of the Perl 6 compiler development discussions occur
at Hackathons and on IRC, with summaries appearing in developers'
weblogs. What's a summarizer to do? For now, I'll point you at [Planet
Perl 6](http://planetsix.perl-foundation.org/), which aggregates a bunch
of relevant blogs.

#### [PGE Now Supports Grammars, Built-In Rules](http://groups.google.com/groups?threadm=b7a12d0375515a6b4381efe3d71ef61e@perl.org)

Allison Randal raved about the "totally awesome" PGE grammar support. I
doubt she's alone in her enthusiasm.

#### [Multiple Implementations Are Good, M'kay?](http://groups.google.com/groups?threadm=20050702165140.GH5089@pmichaud.com)

Patrick discussed the idea of a "final" Perl 6 compiler, pointing out
that it isn't clear that there needs to be a "final" compiler. As long
as multiple implementations are compatible.

### Meanwhile, in *perl6-internals*

#### [New Calling Conventions](http://groups.google.com/groups?threadm=42C16B5A.7040101@home.nl)

Klaas-Jan Stol asked a bunch of questions about the new calling
conventions and Leo answered them.

#### [Parrot Segfaults](http://groups.google.com/groups?threadm=200506291354.19610.parrot@jensbeimsurfen.de)

What's a tester to do? You find a bug that makes Parrot dump core, so
you write a test to document the bug and make sure it gets fixed. But
the test leaves core files lying about. It goes without saying that
Parrot should never dump core without the active assistance of an NCI
call or some other unsafe call blowing up in its face.

This makes it a little embarrassing that PIR code generated by Pugs can
cause a Parrot segfault, though the cause appears be mixed up calling
convention style in the generated call.

[Brian Wheeler's segfaulting Pugs
script](http://groups.google.com/groups?threadm=1120142239.14968.20.camel@wombat%0A.dlib.indiana.edu)

#### [Python PMCs](http://groups.google.com/groups?threadm=42C395FE.7010701@toetsch.at)

Leo pointed out that the various *dynclasses/py\*.pmc* Parrot support
PMCs don't yet support all the semantics that Python needs. He outlined
some outstanding issues and announced that, as calling conventions and
context handling were changing, he'd be turning off compiling *py\*.pmc*
for the time being.

#### [PGE Bug](http://groups.google.com/groups?threadm=42C40534.1000102@toetsch.at)

It appears that the upcoming changes in Parrot's context handling tweak
a bug in PGE. The discussion moved onto a discussion of PGE's
implementation strategy; Nicholas Clark was keen to make sure it didn't
repeat some of the Perl 5's regex engine's infelicities. While this
discussion continued, Leo spent half a day with `gdb` and tracked down
the problem, which turned out to be that a register wasn't getting
initialized in the right place.

#### [Left-Recursive Grammars Are Bad, M'kay?](http://groups.google.com/groups?threadm=rt-3.0.11-36437-116436.17.8864180085717@perl.org)

While experimenting with PGE grammars, Will Coleda managed to write a
left-recursive grammar that blew Parrot's call stack with impressive
ease. Luke apologized for things blowing up so spectacularly, but
pointed out that PGE didn't support left-recursive grammars and showed a
rewritten grammar that didn't have the same problem (but which doesn't
appear to match the same expressions).

#### [Coroutines](http://groups.google.com/groups?threadm=ebb4ed649916ee6a195be937c1921d48@toetsch.at)

Leo pointed to [a summary of
coroutines](ftp://ftp.inf.puc-rio.br/pub/docs/techreports/04_15_moura.pdf)
(PDF), and noted that we still hadn't defined the syntax of Parrot
coroutines, especially with respect to argument passing. He discussed it
with Matt Fowles and solicited a set of tests that expressed the
semantics they came up with.

#### [ParTcl, Perl 6 Grammars](http://groups.google.com/groups?threadm=D1E396F5-6AE6-43D3-B0A0-08CC710DBA6C@coleda.com)

Will Coleda announced that, thanks to Matt Diephouse's work, ParTcl (Tcl
on Parrot) is now able to run part of Tcl's cvs-latest test suite. The
tests aren't fully native yet, being currently driven through a Perl
test harness and only passing ten percent of the tests, but hopefully
the situation will improve and ParTcl will end up able to run the tests
completely natively (while passing far more of them). Congratulations on
the work so far, though.

#### [Python and Parrot](http://groups.google.com/groups?threadm=42C51CCB.7010008@tewk.com)

Kevin Tew popped up to say that he too is working on a Python compiler
targeting Parrot and wondered how to handle things like Python's `self`
parameter. Michal Wallace and Leo chipped in with suggestions.

#### [Another Month, Another Release](http://groups.google.com/groups?threadm=42C7C447.8000302@toetsch.at)

Has it really been a month? Seems so. Parrot walked through the
traditional feature freeze and code freeze before being released on
Sunday. The latest release is [Geeksunite](http://geeksunite.org/),
referencing the website that discusses Chip's problems with his former
employer. You should definitely visit the Geeksunite site--Chip needs
our help.

#### [`lower` in Default `find_name` Scope](http://groups.google.com/groups?threadm=20050702012449.GA25256@pmichaud.com)

Patrick posted a code fragment whose output surprised him--it turned out
that looking up `lower` as a name in the default scope returns an NCI
object. Leo explained why this was so, prompting Patrick to suggest that
it would be useful if, somewhere in the Parrot documentation, there were
some descriptions of Parrot's built-in namespace. Leo encourage others
to comment on namespace issues, and hoped for some decisions as well.

#### [Copyrights](http://groups.google.com/groups?threadm=FECF197F-DEF8-4E4F-8FE9-EE0B2036516E@coleda.com)

If you're like me, discussion of copyrights and licenses is the sort of
thing that either really winds you up or induces serious drowsiness,
depending on your mood as you read the thread. It's one of those "too
important not to think about, but too tedious to think about any more
than is absolutely necessary" topics. That said, Will Coleda said that
he had thought that all of Parrot's code should to have its copyright
assigned to the Perl Foundation. However, on inspection, he noticed a
multiplicity of copyright notices in the actual code, including one file
in the repository with a Microsoft copyright.

#### [PGE: Code Blocks](http://groups.google.com/groups?threadm=198c873805070414191b878a4d@mail.gmail.com)

Matt Diephouse wondered about the plan for integrating code blocks into
PGE. He thought it'd be nice to be able to specify a compiler to use
along with the code block (or, for the time being, just to be able to
use PIR code). Patrick said that there is a plan (or several) for
handling this, but getting blocks to work well needs coordination
between PGE and the compiler language. In essence, when PGE encounters a
code block, it needs to hand off to the target language's compiler to
parse to the end of the code block, and get back from the compiler the
length of the block thus parsed.

#### [Possible Bug Calculating Denominators](http://groups.google.com/groups?threadm=45ec99fc05070423504732f4fd@mail.gmail.com)

Curtis Rawls posted a fragment of code that seems to break Inc's
`computed_denominators` algorithm. Leo wasn't surprised that there were
probably bugs in that part of IMCC, which was contributed by Angel Faus,
who no longer seems to be participating in Parrot development. Which
means it's not been maintained for a while for lack of tuits. Anyone
with an appropriate supply of tuits is welcome (nay, encouraged) to take
it on.

### Meanwhile, in *perl6-language*

#### [Type Variables Vs. Type Literals](http://www.nntp.perl.org/group/perl.perl6.language/22041)

Autrijus had a question about the difference between

    sub (::T $x, ::T $y) {...}

and

    sub (T $x, T $y) {...}

Larry answered about four times, mulling over various options. It's
times like that remind me why it's worth following the list in detail
rather than reading the summaries--it's good to see Larry thinking
aloud, considering all sorts of (seemingly) wacky options and getting
feedback.

#### [Mr. Clean Vs. Perl 6](http://www.nntp.perl.org/group/perl.perl6.language/22042)

Yuval Kogman had some comments about fascism, strong (but I think he
meant static) typing, cleaning products, Perl 6, and type inferencing.
Stephane Payrard hoped that "Perl6 could become the playground of type
theory searchers." (To which I can only respond with a highly personal
"Ick!")

#### [Documentation Trait/Docstring Equivalent](http://www.nntp.perl.org/group/perl.perl6.language/22044)

The Platypus (AKA David Formosa) wondered if documentation traits on
subs would be useful. The first to hope that it would be was Chromatic,
commenting that it's a shame for Perl 6 to throw away potentially useful
data recklessly. Larry commented that he always cringes when he hears
"the documentation" as if it's the only thing. Again, Larry's thinking
aloud on this subject is well worth your time.

#### [SMD Is for Weenies](http://www.nntp.perl.org/group/perl.perl6.language/22045)

So says Yuval Kogman, and who are we to doubt him? Yuval wanted to make
multimethods the default type. Sam Vilain disagreed, pointing up the
usefulness of warnings like "method foo redefined at ...."

#### [DBI v2: The Plan and How You Can Help](http://www.nntp.perl.org/group/perl.perl6.language/22054)

Tim Bunce outlined his current thinking on how DBI v2 will work (DBI
v2's going to be Perl-6-only) and a local roadmap for the first things
that need doing. He then opened the floor for detailed proposals for
what a Perl 6 DBI API should look like. (I wonder if DBI v2's going to
be an important enough tool that it'll want an RFC type process.)

I'm glossing over [the ensuing
discussion](http://www.nntp.perl.org/group/perl.perl6.language/22058)--it's
at the stage where, if you're interested, you're better off joining in
directly.

#### [Should `.assuming` Always Be Non-Mutating?](http://www.nntp.perl.org/group/perl.perl6.language/22060)

Ingo Blechschmidt had some suggestions about the behavior of the
currying method `.assuming`, arguing that it should always return a new
thing and not alter the state of the underlying object. Larry agreed.

#### [`return()` in Pointy Blocks](http://www.nntp.perl.org/group/perl.perl6.language/22061)

Coo. The pointy block thread returns. The question is, where to?

#### [Time::Local](http://www.nntp.perl.org/group/perl.perl6.language/22076)

Gaal Yahas announced that he'd added `localtime` to Pugs in order to
address Dave Rolsky's needs when porting the very lovely and worthwhile
DateTime family of modules. He noted that Perl 6's final time-related
interfaces were rather underspecified and had a bunch of questions. The
one thing that's absolutely certain is that the default Perl time API
will use subsecond resolution by default.

I've noticed that, every time you start to discuss how computers handle
"human" things such as time, dates, or writing systems, people often
seem to have very strong and deeply held ideas of the Right Way of doing
things, and those Right Ways are almost all different. Larry's job is
probably going to be to work out the Least Wrong Way. (If you've not
heard [Dave Rolsky's talks about the underlying reasons for writing
DateTime](http://perlcast.com/audio/Perlcast_015.mp3) (MP3) and the
headaches it gave him, then I suggest you seek it out.)

#### [Autogenerated Attribute Accessor Names](http://www.nntp.perl.org/group/perl.perl6.language/22097)

MetaModel maker Stevan Little wondered what to do when attribute names
clashed, as in:

    class Foo { has @.bar; has $.bar; }

No answers yet.

### Acknowledgements, Adverts, Apologies, and Alliteration

Summarizing a week is definitely way easier than summarizing a
fortnight.

I'm apologizing in advance for the fact that, for those of you who read
this via the mailing list, some of the links probably don't work yet.
The thing is, the thread links are generated directly from the
`message-id`s because that's the information I have access to and, so
far as I know, Google Groups is the only archive that has a RESTful
search interface that lets me use `message-id`s as my key. If you know
of an archive site that does this, but is more timely in its archiving
of *perl6-language* in particular, then please let me know and I'll
start using that instead. Ideally, it should allow me to directly
address a message complete with its thread context.

If you haven't already done so, you really should pay a visit to
[Geeksunite](http://geeksunite.org/). For the life of me, I can't see
what I would have done differently in Chip's situation, and I'm
staggered by what's happened to him.

Right, back to our standard coda:

If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of
Perl.

-   [The Perl Foundation](http://donate.perl-foundation.org/)
-   [Perl 6 development site](http://dev.perl.org/perl6/)


