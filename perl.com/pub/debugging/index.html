<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.02" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
    <title>Perl.com: Debugging Archives</title>


</head>
<body id="perl-com" class="mt-archive-listing mt-category-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <div id="top_advert"> 
<!-- Put any landscape advert in here -->
<a href="http://www.perlfoundation.org/" target="_new">
<img src="/i/tpf_banner.png" width="468" height="60" /></a>
        </div> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description"></div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">

                            
                            <h1 id="page-title" class="archive-title">Recently in <em>Debugging</em> Category</h1>






                            
                            <div id="entry-690" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2006/04/debugger.html" rel="bookmark">Unraveling Code with the Debugger</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Daniel Allen</span> on <abbr class="published" title="2006-04-06T00:00:00-08:00">April  6, 2006 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>Many people who work with Perl code never touch the debugger. My goal in this article is to provide reasoned argument for adding the Perl debugger to your set of tools, as well as pointers on how to do so. Many people are most comfortable with adding debugging variables and print statements to their code. These are fine techniques; I use them too, when they are appropriate. At other times, the debugger has saved me from tearing my hair out.</p>

<p>To mangle an old saying, with apologies to Sartre, "Hell is other people's code." Other people think differently than I do; they use weird idioms, and sometimes their comments are incomprehensible. Invoking the debugger on someone's code is like having a conversation with the author. It opens the code to the questions I want answered, in real time--and there's another party in the conversation, the Perl interpreter. The debugger makes it easy to try things out, even quicker than writing a one-liner, because the environment's already set up for the running program.</p>

<p>This article is a case example of using the Perl debugger in a production environment. In this situation, we had problems with CGI scripts on a machine I don't maintain. I wanted to go in, solve the problem, and get out quickly, without unnecessarily changing anybody's code.</p>

<p>I've written the article so that you can follow along yourself, if you wish. To do so, you need a Linux/Unix system with Perl 5.8, Apache (any version), and a basic <a href="http://www.twiki.org/">TWiki</a> installation. (I'm using version 20040902-3.) TWiki is quite easy to install from packages; it took me 3 minutes under Ubuntu, including answering a few installation questions. If you're installing for this walk-through, enable the sample data set, which installs into the default TWiki directories (<em>/var/lib/twiki/data</em> and <em>/var/www/twiki/pub</em> on Debian and Ubuntu).</p>

<p>Additionally, for any use of the debugger, you should install the Perl modules <a href="http://search.cpan.org/perldoc?Term::ReadLine">Term::ReadLine</a> and <a href="http://search.cpan.org/perldoc?Term::ReadKey">Term::ReadKey</a> from <a href="http://www.cpan.org/">CPAN</a>. These will give you bash/csh-like cursor control, history browsing with up and down arrows, and tab completion on variables and functions.</p>

<h3>Statement of the Problem</h3>

<p>Our production installation of TWiki had a problem with a hidden web: a section that users could reach only by using its URL, rather than through the usual list of public webs (on the left side of each page). The problem appeared when we tried to make the hidden web public; it remained hidden. We lived with this for a few weeks, convinced that TWiki had a sticky setting somewhere that we didn't know about, or perhaps TWiki had a bug. The documentation, while excellent, didn't seem to address our problem. A number of people looked at the configuration files without seeing the solution.</p>

<p>Above all, it was important to fix this quickly, because we couldn't spend much effort on this relatively minor annoyance. We were almost at the point of asking for help within the TWiki community, but as we didn't find evidence anybody else was having this problem, it likely wouldn't be a quick fix. (As you're reading, you may see the answer, but please keep reading; the utility of the debugger extends far beyond such an easy problem.)</p>

<h3>Initial Look</h3>

<p>To create a hidden web within TWiki, set <code>NOSEARCHALL = yes</code> in the web's <code>WebPreferences</code> page. Setting <code>NOSEARCHALL = no</code> still left the web hidden.</p>

<p>The documentation suggested that the only configuration variable involved was <code>NOSEARCHALL</code>. My next step was grepping the data directory, and then the TWiki source code--which turned up the likely code responsible, a certain function <code>TWiki::getPublicWebList</code>. Looking at that code didn't make the answer clear. (If you're following along, go ahead and run <code>perldoc -m TWiki</code> to see if you can spot the problem by inspection.)</p>

<p>Back in the web browser, I noted that the URL for normal TWiki page viewing was <code>http://hostname/cgi-bin/twiki/view/Main/WebHome</code>.</p>

<p>From my initial look at the code, I knew the CGI that produced this was in <em>/usr/lib/cgi-bin/twiki/view</em>. Could I run it from the command line? Changing to that directory, I ran <code>./view</code> and saw the expected HTML for the front page.</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/970" template="b/article_sidebar2.view">
<!-- sidebar ends -->













<h3>Debugger</h3>

<p>Next, I fired up the debugger on the file: <code>perl -d view</code></p>

<p>... which didn't work, because the program uses taint mode. (If you try, you'll see the warning, <em>"-T" is on the #! line, it must also be used on the command line at view line 1.</em>) That was easy to fix by running <code>perl -dT view</code>.</p>

<p>If you try that, you'll see the debugger interface:</p>

<pre><code>Loading DB routines from perl5db.pl version 1.28
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

main::(view:38):        my $query = new CGI;
  DB&lt;1&gt;</code></pre>

<p>The major elements here are: an introductory message; the package, filename, and line number; the command the debugger is about to run; and a prompt showing your command-history number.</p>

<p>Press <code>c</code> (for continue) and Enter. The program will run through to completion, finishing with:</p>

<pre><code>Debugged program terminated.  Use q to quit or R to restart,
  use O inhibit_exit to avoid stopping after program termination,
  h q, h R or h O to get additional info.
  DB&lt;1&gt;</code></pre>

<p>Press <code>R</code> to restart the program ... which normally would work, but you can't restart programs with taint mode enabled. No matter. Restart the debugger with <code>perl -dT view</code> again.</p>

<p>Next, press <code>l</code> for a code listing with line numbers. The default is ten lines of code. You'll notice an arrow by the line prepared to execute next. Some lines have a trailing colon (<code>:</code>), which means that you can interrupt execution at that line. Pressing <code>l</code> again will show the next ten lines, and so on. <code>l</code> can also handle listing a range (such as <code>l 1-40</code>) or a function (such as <code>l TWiki::initialize</code>). You can move the current display back to the execution point with a period (<code>.</code>) or back ten lines with minus (<code>-</code>).</p>

<p>Start running the program, slowly. Press <code>n</code>, for next, and the display will change to show the subsequent line:</p>

<pre><code>  DB&lt;8&gt; n
main::(view:40):        my $thePathInfo = $query-&gt;path_info();
  DB&lt;8&gt;</code></pre>

<p><code>n</code> will always bring you to the next executable line. This command is used frequently enough that you can press Enter to repeat it. If you try this, on the fifth execution you'll see that multiline commands break up nicely on the screen:</p>

<pre><code>  DB&lt;1&gt;
main::(view:45):       my( $topic, $webName, $scriptUrlPath, $userName ) =
main::(view:46):          TWiki::initialize( $thePathInfo, $theRemoteUser,
main::(view:47):                             $theTopic, $theUrl, $query );
  DB&lt;1&gt;</code></pre>

<p>Only the first of those lines is breakable, however. Another <code>n</code> would skip ahead to line 49; but don't do that yet.</p>

<p>The next feature is code evaluation. At the debugger prompt, you may enter any Perl code to execute in the current context. This can include modifying the running program, such as defining functions or variables.</p>

<p>You can also run functions or examine data using normal Perl syntax. There is a special command to evaluate and dump expressions in a list context, <code>x</code>. Try it:</p>

<pre><code>  DB&lt;1&gt; x $query-&gt;url;
0  'http://localhost/view'
  DB&lt;2&gt;</code></pre>

<p>Notice that the command history number increments from 1 to 2, because this is the first nontrivial command you've executed. Reexecute any prior command with the shortcut <code>!number</code>.</p>

<p>The <code>0</code> signifies the array index of each element, which is useful with lists. <code>x</code> will also do the right thing for data structures. Try viewing your CGI object:</p>

<pre><code>  DB&lt;2&gt; x $query
0  CGI=HASH(0x8aef668)
   '.charset' =&gt; 'ISO-8859-1'
   '.fieldnames' =&gt; HASH(0x8a83034)
        empty hash
   '.parameters' =&gt; ARRAY(0x8b32aa4)
        empty array
   '.path_info' =&gt; ''
   'escape' =&gt; 1</code></pre>

<p>For deep data, you might prefer restricting the depth walking to two levels: <code>x 2 $query</code> .</p>













<p>The next feature, which goes along with <code>n</code>, is <code>s</code>, for single-stepping <em>into</em> a function. <code>s</code> will replace the current running context with that context of the subroutine. After one <code>s</code>, you're within <code>TWiki::initialize</code>:</p>

<pre><code>  DB&lt;4&gt; s
TWiki::initialize(/usr/share/perl5/TWiki.pm:333):
333:        my ( $thePathInfo, $theRemoteUser, $theTopic, 
                               $theUrl, $theQuery ) = @_;</code></pre>

<p>The description line has changed, showing that you're in a new package, function, and file. Press Enter; note that <code>s</code> also repeats with Enter. Three more repeats will get you two levels deeper:</p>

<pre><code>  DB&lt;4&gt;
TWiki::initialize(/usr/share/perl5/TWiki.pm:336):
336:            basicInitialize();
  DB&lt;4&gt;
TWiki::basicInitialize(/usr/share/perl5/TWiki.pm:490):
490:        setupLocale();
  DB&lt;4&gt;
TWiki::setupLocale(/usr/share/perl5/TWiki.pm:515):
515:        $siteCharset = 'ISO-8859-1';        
               # Default values if locale mis-configured
  DB&lt;4&gt;</code></pre>

<p>Now you are deep inside the TWiki module. Imagine tracking this program execution by hand; it would be considerably more tedious. Instead, you have the sometimes challenging task of figuring out where the program has taken you. Fortunately, the debugger has tools for making this easier. Note that the indenting isn't any judge of the execution depth; to find that, use <code>T</code> for trace:</p>

<pre><code>  DB&lt;1&gt; T
. = TWiki::setupLocale() called from file 
    `/usr/share/perl5/TWiki.pm' line 490
. = TWiki::basicInitialize() called from file 
    `/usr/share/perl5/TWiki.pm' line 336
@ = TWiki::initialize('', undef, undef, 'http://localhost/view', 
    ref(CGI)) called from file `view' line 45</code></pre>

<p>The backtrace has the following format: the first character is the calling context; <code>.</code>, <code>$</code>, and <code>@</code> signify void, scalar, and list contexts respectively. Next is function name, including the arguments passed, if any. Finally comes the calling filename and line number. These lines go from deepest to shallowest execution depth.</p>

<p>Perhaps you went too deep. Use <code>r</code> to return from a function.</p>

<pre><code>  DB&lt;8&gt; r
void context return from TWiki::setupLocale
TWiki::basicInitialize(/usr/share/perl5/TWiki.pm:491):
491:        setupRegexes();</code></pre>

<p>Here you can see that <code>r</code> shows the return value and its context. This can be quite useful, as the calling context can occasionally surprise even experienced programmers. With inspection, you can verify that this output makes sense compared to the trace above, because it's one line beyond the caller from the first line of that trace.</p>

<p>Use <code>r</code> again twice, to get back to the top. Now it's clear that <code>initialize()</code> returns a list to the caller:</p>

<pre><code>  DB&lt;1&gt; r
list context return from TWiki::initialize:
0  'WebHome'
1  'Main'
2  '/cgi-bin/twiki'
3  'guest'
4  '/var/lib/twiki/data'
main::(view:49):        TWiki::UI::View::view( $webName, 
                            $topic, $userName, $query );</code></pre>

<p>If you were tracking the initialization routine, you might remind yourself what the caller was doing with the command <code>-</code> to show the calling line again; but that's not necessary now, so continue!</p>

<p>Take a step back. You know you're looking for the function <code>TWiki::getPublicWebList</code>. You can take a shortcut to get there. The debugger command <code>c</code> can take arguments, either line numbers or subroutine names.</p>

<pre><code>  DB&lt;5&gt; c TWiki::getPublicWebList
TWiki::getPublicWebList(/usr/share/perl5/TWiki.pm:2559):
2559:       if( ! @publicWebList ) {
  DB&lt;6&gt;</code></pre>

<p>As you can see, you've switched modules again, into <em>TWiki.pm</em>. Take a look around:</p>

<pre><code>  DB&lt;3&gt; l
2559==&gt;     if( ! @publicWebList ) {
2560            # build public web list, e.g. exclude hidden 
                # webs, but include current web
2561:           my @list = &amp;TWiki::Store::getAllWebs( "" );
2562:           my $item = "";
2563:           my $hidden = "";
2564:           foreach $item ( @list ) {
2565:               $hidden = 
  &amp;TWiki::Prefs::getPreferencesValue( "NOSEARCHALL", $item );
2566                # exclude topics that are hidden or start 
                    # with . or _ unless current web
2567:               if( ( $item eq $TWiki::webName  ) || 
                        ( ( ! $hidden ) &amp;&amp; ( $item =~ 
                                      /^[^\.\_]/ ) ) ) {
2568:                   push( @publicWebList, $item );</code></pre>

<p>This looks promising. <code>c 2562</code> and then <code>x @list</code> to see that there are five list items.</p>

<pre><code>  DB&lt;15&gt; c 2562
TWiki::getPublicWebList(/usr/share/perl5/TWiki.pm:2562):
2562:           my $item = "";
  DB&lt;16&gt; x @list
0  'Main'
1  'Sandbox'
2  'TWiki'
3  'Trash'
4  '_default'
  DB&lt;17&gt; n</code></pre>

<p>As you can see, the <code>foreach()</code> in line 2,564 will identify which of these are public. Getting warmer! You can <code>n</code> several times to see the program flow. (Remember, after the first, you can press Enter.) If you run other commands, Enter still keeps its shortcut of <code>n</code> or <code>s</code>. If you <code>x $hidden</code> after you've passed line 2,565 in each loop, you will see that they contain the empty string because <code>NOSEARCHALL</code> is unset.</p>

<p>The expression in the following line tests the truth of <code>$hidden</code> as per the comment.</p>

<p>Here is the solution. In my team's original problem, we changed <code>NOSEARCHALL</code> from <code>Yes</code> to <code>No</code>. The string <code>No</code> certainly is still true. It took me a few runs through the code, testing values each time, to find it.</p>

<p>When I changed <code>NOSEARCHALL</code> to <code>""</code> from <code>Yes</code> in the config file, the hidden web immediately became unhidden. Problem solved. The entire process took no more than 45 minutes. Considering the number of lines of code in TWiki and its relative complexity, that isn't bad.</p>

<h3>Results</h3>

<p>Yes, the problem was that we overlooked something "obvious." True, I didn't actually debug the code; I debugged my configuration. No matter. This is the way of a lot of debugging; the problem isn't where you expect, and it's obvious in retrospect. I hope with this simple example, I've shown how the debugger can tell you things you may not notice by code inspection or reading documentation.</p>

<p>This article has barely scratched the surface of the debugger's capabilities; it can also do such things as automatically insert code that runs whenever you step forward, or automatically stop execution when an expression becomes true. You can insert lines of code into the program that exist only in the debugging instance. You can record your actions and play them back in other debugging sessions; or customize the debugger with your own preferences and aliases. There are also methods to run a debugger GUI on a remote server, and modules to harness debugging mod_perl and other programs that don't run on the command line. Please see the references for more information about these features.</p>

<h3>References: Introductory Debugger Information Online</h3>

<p><a href="http://www.linuxjournal.com/article/7581/">The Perl Debugger. Linux Journal. March 2005, 73-76</a></p>

<p><a href="http://search.cpan.org/dist/perl/pod/perldebtut.pod">perldoc perldebtut</a></p>

<p><a href="http://search.cpan.org/dist/perl/pod/perldebug.pod">perldoc perldebug</a></p>

<p><a href="/pub/a/2004/11/24/debugger_ref.html">Perl Debugger Quick Reference</a></p>










        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-742" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/lightning2.html" rel="bookmark">More Lightning Articles</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">chromatic</span> on <abbr class="published" title="2005-03-31T00:00:00-08:00">March 31, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<h3><a name="emacsperl">Customizing Emacs with Perl</a></h3>

<p>by Bob DuCharme</p>

<p>Over time, I've accumulated a list of Emacs customizations I wanted to
implement when I got the chance. For example, I'd like macros to perform
certain global replaces just within a marked block, and I'd like a macro to
reformat an Outlook formatted date to an ISO 8609 formatted date. I'm not
overly intimidated by the elisp language used to customize Emacs behavior; I've
copied elisp code and modified it to make some tweaks before, I had a healthy
dose of Scheme and LISP programming in school, and I've done extensive work
with XSLT, a descendant of these grand old languages. Still, as with a lot of
postponed editor customization work, I knew I'd have to use these macros many,
many times before they earned back the time invested in creating them, because
I wasn't that familiar with string manipulation and other basic operations in a
LISP-based language. I kept thinking to myself, "This would be so easy if I
could just do the string manipulation in Perl!"</p>

<p>Then, I figured out how I could write Emacs functions that called Perl to
operate on a marked block (or, in Emacs parlance, a "region"). Many Emacs users
are familiar with the <code>Escape+|</code> keystroke, which invokes the
<code>shell-command-on-region</code> function. It brings up a prompt in the
minibuffer where you enter the command to run on the marked region, and after
you press the Enter key Emacs puts the command's output in the minibuffer if it
will fit, or into a new "*Shell Command Output*" buffer if not. For example,
after you mark part of an HTML file you're editing as the region, pressing
<code>Escape+|</code> and entering <code>wc</code> (for "word count") at the
minibuffer's "Shell command on region:" prompt will feed the text to this
command line utility if you have it in your path, and then display the number of
lines, words, and characters in the region at the minibuffer. If you enter
<code>sort</code> at the same prompt, Emacs will run that command instead of
<code>wc</code> and display the result in a buffer.</p>

<p>Entering <code>perl /some/path/foo.pl</code> at the same prompt will run the
named Perl script on the marked region and display the output appropriately.
This may seem like a lot of keystrokes if you just want to do a global replace
in a few paragraphs, but remember: <code>Ctrl+|</code> calls Emacs's built-in
<code>shell-command-on-region</code> function, and you can call this same
function from a new function that you define yourself. My recent great
discovery was that along with parameters identifying the region boundaries and
the command to run on the region, <code>shell-command-on-region</code> takes an
optional parameter that lets you tell it to replace the input region with the
output region. When you're editing a document with Emacs, this allows you to
pass a marked region outside of Emacs to a Perl script, let the Perl script do
whatever you like to the text, and then Emacs will replace the original text
with the processed version. (If your Perl script mangled the text, Emacs'
excellent <code>undo</code> command can come to the rescue.)</p>

<p>Consider an example. When I take notes about a project at work, I might
write that Joe R. sent an e-mail telling me that a certain system won't need any
revisions to handle the new data. I want to make a note of when he told me
this, so I copy and paste the date from the e-mail he sent. We use Microsoft
Outlook at work, and the dates have a format following the model "Tue 2/22/2005
6:05 PM". I already have an Emacs macro bound to <code>alt+d</code> to insert
the current date and time (also handy when taking notes) and I wanted the date
format that refers to e-mails to be the same format as the ones inserted with
my <code>alt+d</code> macro: an ISO 8609 format of the form
"2005-02-22T18:05".</p>

<p>The <em>.emacs</em> startup file holds customized functions that you want
available during your Emacs session. The following shows a bit of code that I
put in mine so that I could convert these dates:</p>

<pre><code>(defun OLDate2ISO ()
  (interactive)
  (shell-command-on-region (point)
         (mark) "perl c:/util/OLDate2ISO.pl" nil t))</code></pre>

<p>The <code>(interactive)</code> declaration tells Emacs that the function
being defined can be invoked interactively as a command. For example, I can
enter "OLDate2ISO" at the Emacs minibuffer command prompt, or I can press a
keystroke or select a menu choice bound to this function. The
<code>point</code> and <code>mark</code> functions are built into Emacs to
identify the boundaries of the currently marked region, so they're handy for
the first and second arguments to <code>shell-command-on-region</code>, which
tell it which text is the region to act on. The third argument is the actual
command to execute on the region; enter any command available on your operating
system that can accept standard input. To define your own Emacs functions that
call Perl functions, just change the script name in this argument from
<code>OLDate2ISO</code> to anything you like and then change this third
argument to <code>shell-command-on-region</code> to call your own Perl
script.</p>

<p>Leave the last two arguments as <code>nil</code> and <code>t</code>.  Don't
worry about the fourth parameter, which controls the buffer where the shell
output appears. (Setting it to <code>nil</code> means "don't bother.") The
fifth parameter is the key to the whole trick: when non-nil, it tells Emacs to
replace the marked text in the editing buffer with the output of the command
described in the third argument instead of sending the output to a buffer.</p>

<p>If you're familiar with Perl, there's nothing particularly interesting about
the <em>OLDate2ISO.pl</em> script. It does some regular expression matching to
split up the string, converts the time to a 24 hour clock, and rearranges the
pieces:</p>

<pre><code># Convert Outlook format date to ISO 8309 date 
#(e.g. Wed 2/16/2005 5:27 PM to 2005-02-16T17:27)
while (&lt;&gt;) {
  if (/\w+ (\d+)\/(\d+)\/(\d{4}) (\d+):(\d+) ([AP])M/) {
     $AorP = $6;
     $minutes = $5;
     $hour = $4;
     $year = $3;
     $month = $1;
     $day = $2;
     $day = '0' . $day if ($day &lt; 10);
     $month = '0' . $month if ($month &lt; 10);
     $hour = $hour + 12 if ($6 eq 'P');
     $hour = '0' . $hour if ($hour &lt; 10);
     $_ = "$year-$month-$day" . "T$hour:$minutes";
  }
  print;
}</code></pre>

<p>When you start up Emacs with a function definition like the <code>defun
OLDate2ISO</code> one shown above in your <em>.emacs</em> file, the function is
available to you like any other in Emacs. Press <code>Escape+x</code> to bring
up the Emacs minibuffer command line and enter "OLDate2ISO" there to execute it
on the currently marked buffer. Like any other interactive command, you can
also assign it to a keystroke or a menu choice.</p>

<p>There might be a more efficient way to do the Perl coding shown above, but I
didn't spend too much time on it. That's the beauty of it: with five minutes of
Perl coding and one minute of elisp coding, I had a new menu choice to quickly
do the transformation I had always wished for.</p>

<p>Another example of something I always wanted is the following
<em>txt2htmlp.pl</em> script, which is useful after plugging a few paragraphs
of plain text into an HTML document:</p>

<pre><code># Turn lines of plain text into HTML p elements.
while (&lt;&gt;) {
  chop($_);
  # Turn ampersands and &lt; into entity references.
  s/\&amp;/\&amp;amp\;/g;
  s/&lt;/\&amp;lt\;/g;
  # Wrap each non-blank line in a "p" element.
  print "&lt;p&gt;$_&lt;/p&gt;\n\n" if (!(/^\s*$/));
}</code></pre>

<p>Again, it's not a particularly innovative Perl script, but with the
following bit of elisp in my <em>.emacs</em> file, I have something that
greatly speeds up the addition of hastily written notes into a web page,
especially when I create an Emacs menu choice to call this function:</p>

<pre><code>(defun txt2htmlp ()
  (interactive)
  (shell-command-on-region (point) 
         (mark) "perl c:/util/txt2htmlp.pl" nil t))</code></pre>

<p>Sometimes when I hear about hot new editors, I wonder whether they'll ever
take the place of Emacs in my daily routine. Now that I can so easily add the
power of Perl to my use of Emacs, it's going to be a lot more difficult for any
other editor to compete with Emacs on my computer.</p>













<h3><a name="linetrace">Debug Your Programs with Devel::LineTrace</a></h3>

<p>by Shlomi Fish</p>

<p>Often, programmers find a need to use print statements to output information
to the screen, in order to help them analyze what went wrong in running the
script. However, including these statements verbatim in the script is not such
a good idea. If not promptly removed, these statements can have all kinds of
side-effects: slowing down the script, destroying the correct format of its
output (possibly ruining test-cases), littering the code, and confusing the
user. It would be a better idea not to place them within the code in the first
place. How, though, can you debug without debugging?</p>

<p>Enter <a
href="http://search.cpan.org/dist/Devel-LineTrace/">Devel::LineTrace</a>, a
Perl module that can assign portions of code to execute at arbitrary lines
within the code. That way, the programmer can add print statements in relevant
places in the code without harming the program's integrity.</p>

<h4>Verifying That <code>use lib</code> Has Taken Effect</h4>

<p>One example I recently encountered was that I wanted to use a module I wrote
from the specialized directory where I placed it, while it was already installed
in the Perl's global include path. I used a <code>use lib "./MyPath"</code>
directive to make sure this was the case, but now had a problem.  What if there
was a typo in the path of the <code>use lib</code> directive, and as a result,
Perl loaded the module from the global path instead? I needed a way to verify
it.</p>

<p>To demonstrate how <code>Devel::LineTrace</code> can do just that, consider
a similar script that tries to use a module named <code>CGI</code> from the
path <em>./MyModules</em> instead of the global Perl path. (It is a bad idea to
name your modules after names of modules from CPAN or from the Perl
distribution, but this is just for the sake of the demonstration.)</p>

<pre><code>#!/usr/bin/perl -w

use strict;
use lib "./MyModules";

use CGI;

my $q = CGI-&gt;new();

print $q-&gt;header();</code></pre>

<p>Name this script <em>good.pl</em>. To test that Perl loaded the <code>CGI</code> module
from the <em>./MyModules</em> directory, direct <code>Devel::LineTrace</code> to print the
relevant entry from the <code>%INC</code> internal variable, at the first line
after the <code>use CGI</code> one.</p>

<p>To do so, prepare this file and call it <em>test-good.txt</em>:</p>

<pre><code>good.pl:8
    print STDERR "\$INC{CGI.pm} == ", $INC{"CGI.pm"}, "\n";</code></pre>

<p>Place the file and the line number at which the trace should be inserted on the first line.
Then comes the code to evaluate, indented from the start of the line. After the
first trace, you can put other traces, by starting the line with the filename
and line number, and putting the code in the following (indented) lines.  This
example is simple enough not to need that though.</p>

<p>After you have prepared <em>test-good.txt</em>, run the script
through <code>Devel::LineTrace</code> by executing the following command:</p>

<pre><code>$ PERL5DB_LT="test-good.txt" perl -d:LineTrace good.pl</code></pre>

<p>(This assumes a Bourne-shell derivative.). The <code>PERL5DB_LT</code>
environment variable contains the path of the file to use for debugging, and
the <code>-d:LineTrace</code> directive to Perl instructs it to debug the
script through the <code>Devel::LineTrace</code> package.</p>

<p>As a result, you should see either the following output to standard
error:</p>

<pre><code>$INC{CGI.pm} == MyModules/CGI.pm</code></pre>

<p>meaning that Perl indeed loaded the module from the <em>MyModules</em>
sub-directory of the current directory. Otherwise, you'll see something
like:</p>

<pre><code>$INC{CGI.pm} == /usr/lib/perl5/vendor_perl/5.8.4/CGI.pm</code></pre>

<p>...which means that it came from the global path and something went wrong.</p>

<h4>Limitations of <code>Devel::LineTrace</code></h4>

<p><code>Devel::LineTrace</code> has two limitations:</p>

<ol>

<li>Because it uses the Perl debugger interface and stops at every line (to
check whether it contains a trace), program execution is considerably slower
when the program is being run under it.</li>

<li>It assigns traces to line numbers, and therefore you must update it if the
line numbering of the file changes.</li>

</ol>

<p>Nevertheless, it is a good solution for keeping those pesky
<code>print</code> statements out of your programs. Happy LineTracing!</p>

<h3><a name="mockdbi">Using Test::MockDBI</a></h3>

<p>by Mark Leighton Fisher</p>

<p>What if you could test your program's use of the DBI just by creating a set
of rules to guide the DBI's behavior&#8212;without touching a database (unless you
want to)?  That is the promise of <a
href="http://search.cpan.org/perldoc?Test::MockDBI">Test::MockDBI</a>, which by
mocking-up the entire DBI API gives you unprecedented control over every aspect
of the DBI's interface with your program.</p>

<p><code>Test::MockDBI</code> uses <a
href="http://search.cpan.org/perldoc?Test::MockObject::Extends">Test::MockObject::Extends</a>
to mock all of the DBI transparently.  The rest of the program knows nothing
about using <code>Test::MockDBI</code>, making <code>Test::MockDBI</code> ideal for testing programs that
you are taking over, because you only need to add the <code>Test::MockDBI</code> invocation code&#8212;
you do not have to modify any of the other program code.  (I have found this
very handy as a consultant, as I often work on other people's code.)</p>

<p>Rules are invoked when the current SQL matches the rule's SQL pattern.  For
finer control, there is an optional numeric DBI testing type for each rule, so
that a rule only fires when the SQL matches <em>and</em> the current DBI
testing type is the specified DBI testing type.  You can specify this numeric
DBI testing type (a simple integer matching <code>/^\d+$/</code>) from the
command line or through <code>Test::MockDBI::set_dbi_test_type()</code>.  You
can also set up rules to fail a transaction if a specific
<code>DBI::bind_param()</code> parameter is a specific value.  This means there
are three types of conditions for <code>Test::MockDBI</code> rules:</p>

<ul>

<li>The current SQL</li>
<li>The current DBI testing type</li>
<li>The current <code>bind_param()</code> parameter values</li>

</ul>

<p>Under <code>Test::MockDBI</code>, <code>fetch*()</code> and <code>select*()</code>
methods default to returning nothing (the empty array, the empty hash, or undef
for scalars).  <code>Test::MockDBIM</code> lets you take control of their returned data with
the methods <code>set_retval_scalar()</code> and
<code>set_retval_array()</code>.  You can specify the returned data directly in
the <code>set_retval_*()</code> call, or pass a CODEREF that generates a return
value to use for each call to the matching <code>fetch*()</code> or
<code>select*()</code> method.  CODEREFs let you both simulate DBI's
interaction with the database more accurately (as you can return a few rows,
then stop), and add in any kind of state machine or other processing
needed to precisely test your code.</p>

<p>When you need to test that your code handles database or DBI failures,
<code>bad_method()</code> is your friend.  It can fail any DBI method, with the
failures dependent on the current SQL and (optionally) the current DBI testing
type.  This capability is necessary to test code that handles bad database
<code>UPDATE</code>s, <code>INSERT</code>s, or <code>DELETE</code>s, along with
being handy for testing failing <code>SELECT</code>s.</p>

<p><code>Test::MockDBI</code> extends your testing capabilities to testing code that is
difficult or impossible to test on a live, working database.  <code>Test::MockDBI's</code>
mock-up of the entire DBI API lets you add <code>Test::MockDBI</code> to your programs
without having to modify their current DBI code.  Although it is not finished
(not all of the DBI is mocked-up yet), <code>Test::MockDBI</code> is already a powerful tool
for testing DBI programs.</p>













<h3><a href="#unbuffering">Unnecessary Unbuffering</a></h3>

<p>by chromatic</p>

<p>A great joy in a programmer's life is removing useless code, especially
when its absence improves the program. Often this happens in old codebases
or codebases thrown together hastily. Sometimes it happens in code written
by novice programmers who try several different ideas all together and fail
to undo their changes.</p>

<p>One such persistent idiom is wholesale, program-wide unbuffering, which
can take the form of any of:</p>

<pre><code>local $| = 1;
$|++;
$| = 1;</code></pre>

<p>Sometimes this is valuable. Sometimes it's vital. It's not the default
for very good reason, though, and at best, including one of these lines in
your program is useless code.</p>

<h4>What's Unbuffering?</h4>

<p>By default, modern operating systems don't send information to output
devices directly, one byte at a time, nor do they read information from
input devices directly, one byte at a time. IO is so slow, especially for
networks, compared to processors and memory that adding buffers and trying
to fill them before sending and receiving information can improve
performance.</p>

<p>Think of trying to fill a bathtub from a hand pump. You <em>could</em>
pump a little water into a bucket and walk back and forth to the bathtub,
or you could fill a trough at the pump and fill the bucket from the trough.
If the trough is empty, pumping a little bit of water into the bucket will
give you a faster start, but it'll take longer in between bucket loads than
if you filled the trough at the start and carried water back and forth
between the trough and the bathtub.</p>

<p>Information isn't exactly like water, though. Sometimes it's more
important to deliver a message immediately even if it doesn't fill up a
bucket. "Help, fire!" is a very short message, but waiting to send it when
you have a full load of messages might be the wrong thing.</p>

<p>That's why modern operating systems also let you unbuffer specific
filehandles. When you print to an unbuffered filehandle, the operating
system will handle the message immediately. That doesn't guarantee that
whoever's on the other side of the handle will respond immediately; there
might be a pump and a trough there.</p>

<h4>What's the Damage?</h4>

<p>According to Mark-Jason Dominus' <a
href="http://perl.plover.com/FAQs/Buffering.html">Suffering from
Buffering?</a>, one sample showed that buffered reading was 40% faster than
unbuffered reading, and buffered writing was 60% faster. The latter number may
only improve when considering network communications, where the overhead of
sending and receiving a single packet of information can overwhelm short
messages.</p>

<p>In simple interactive applications though, there may be no benefit. When
attached to a terminal, such as a command line, Perl operates in
line-buffered mode. Run the following program and watch the output
carefully:</p>

<pre><code>#!/usr/bin/perl

use strict;
use warnings;

# buffer flushed at newline
loop_print( 5, "Line-buffered\n" );

# buffer not flushed until newline
loop_print( 5, "Buffered  " );
print "\n";

# buffer flushed with every print
{
    local $| = 1;
    loop_print( 5, "Unbuffered  " );
}

sub loop_print
{
    my ($times, $message) = @_;

    for (1 .. $times)
    {
        print $message;
        sleep 1;
    }
}</code></pre>

<p>The first five greetings appear individually and immediately.  Perl flushes
the buffer for STDOUT when it sees the newlines.  The second set appears after
five seconds, all at once, when it sees the newline after the loop. The third
set appears individually and immediately because Perl flushes the buffer after
every <code>print</code> statement.</p>

<p>Terminals are different from everything else, though. Consider the case of
writing to a file. In one terminal window, create a file named
<em>buffer.log</em> and run <code>tail -f buffer.log</code> or its equivalent
to watch the growth of the file in real time. Then add the following lines to
the previous program and run it again:</p>

<pre><code>open( my $output, '&gt;', 'buffer.log' ) or die "Can't open buffer.log: $!";
select( $output );
loop_print( 5, "Buffered\n" );
{
      local $| = 1;
      loop_print( 5, "Unbuffered\n" );
}</code></pre>

<p>The first five messages appear in the log in a batch, all at once, even
though they all have newlines.  Five messages aren't enough to fill the buffer.
Perl only flushes it when it unbuffers the filehandle on assignment to
<code>$|</code>.  The second set of messages appear individually, one second
after another.</p>

<p>Finally, the STDERR filehandle is hot by default. Add the following lines to
the previous program and run it yet again:</p>

<pre><code>select( STDERR );
loop_print( 5, "Unbuffered STDERR " );</code></pre>

<p>Though no code disables the buffer on STDERR, the five messages should print
immediately, just as in the other unbuffered cases. (If they don't, your OS is
weird.)</p>

<h4>What's the Solution?</h4>

<p>Buffering exists for a reason; it's almost always the right thing to do.
When it's the wrong thing to do, you can disable it. Here are some rules of
thumb:</p>

<ul>

<li>Never disable buffering by default.</li>

<li>Disable buffering when and while you have multiple sources writing to
the same output and their order matters.</li>

<li>Never disable buffering for network outputs by default.</li>

<li>Disable buffering for network outputs only when the expected time
between full buffers exceeds the expected client timeout length.</li>

<li>Don't disable buffering on terminal outputs. For STDERR, it's useless,
dead code. For STDOUT, you probably don't need it.</li>

<li>Disable buffering if it's more important to print messages regularly
than efficiently.</li>

<li>Don't disable buffering until you know that the buffer is a
problem.</li>

<li>Disable buffering in the smallest scope possible.</li>

</ul>
<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1518" template="b/article_sidebar2.view">
<!-- sidebar ends -->



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-714" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/01/quality-assurance.html" rel="bookmark">An Introduction to Quality Assurance</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Tom McTighe</span> on <abbr class="published" title="2005-01-13T00:00:00-08:00">January 13, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<h3>On Being Wrong</h3>

<p>When I decided to study computer science, I installed Linux on my computer
and bought a copy of "The C Programming Language" by Kernighan and Ritchie.  I
have been trying to solve software problems ever since. After much heartache, I
decided that if I was to continue programming I would have to come to terms
with being wrong, because I quickly discovered that being wrong is a big part
of the development cycle: you code, compile, view the errors, and then code
some more. I found it helpful to actually say "I am wrong" when the compiler
complained, to remind myself where the fault lay. It made finding problems a
lot easier when I accepted responsibility for the errors.</p>

<h3>Enjoy the Ride</h3>

<p>To deal with the frustration of constantly being wrong, I began to view
programming more as a game that I enjoyed than as an epic battle, and I started
looking at things from the compiler's perspective. This view has improved my
overall approach to software immensely. I was also fortunate to discover <em><a
href="http://www.perldebugged.com/">Perl Debugged</a></em> by Peter Scott and
Ed Wright. The authors provide a wealth of information about debugging and
testing Perl scripts, but they also emphasize that the right mental attitude is
often the key to a programmer's success. Basically, they say that you should
enjoy what you do.</p>

<p>Bugs come in many flavors, from syntax errors to errors of logic. Perl's
interpreter will catch most typos, especially if you <code>use warnings</code>,
but some can be tricky--and errors of logic are often even harder to tease
out.</p>

<p>Here is a common syntax error:</p>

<pre><code>if ($two_plus_two = 5) {
   print "two plus two is five"; 
} else {
   # I never seem to get here...
}</code></pre>

<p>Here is common logical error:</p>

<ol type="a">

<li>I know of software companies that let their customers find their bugs for
them.</li>

<li>These companies are worth millions of dollars.</li>

<li>If I let my customers find my bugs for me, I will be worth millions of
dollars.</li>

</ol>

<p>This particular error can lead to embarrassing code such as the
following:</p>

<pre><code>sub handle_error() {

print &lt;&lt;END;

   Dear Friend,
      We realize this may be a difficult time 
      for you, but there has been an SQL error. 
      Please email us for further assistance, 
      or try entering your obituary again. 
      Thank you. 

END
}</code></pre>
<csperl file="grab" domain="on" record="b/970" template="b/article_sidebar.view">
<p>Now, anyone who wants to sleep easy at night will want to avoid shameful
code like this, because slowly but surely, users are becoming less tolerant of
buggy code. If you haven't done so already, you will want to read through
Michael G. Schwern's <a
href="http://search.cpan.org/perldoc?Test::Tutorial">Test::Tutorial</a> and get
started. Test-based development, combined with quality assurance, can enable a
company to offer its customers a rare and valuable commodity: reliable
software. In the future, the world of software may very well be divided between
the companies that incorporate testing into their development cycle and those
that used to be in business.</p>

<h3>Parts of a Test</h3>

<p>When the compiler stops complaining, many developers are happy to declare
victory and move on to the next project, but for the tester (often just the
developer with his hat on backwards), things are just becoming interesting.
Testers begin by breaking the program into sections, as Lydia Ash does in
<em><a
href="http://www.wiley.com/WileyCDA/WileyTitle/productCd-0471430218.html">The
Web Testing Companion</a></em>. She notes the following five basic software
functions:</p>

<ol>

<li>Accepting input</li>
<li>Giving output</li>
<li>Saving data</li>
<li>Manipulating data</li>
<li>Removing data</li>

</ol>

<p>To begin testing, start at the top of the list and work down, one section at
a time. At this point in the process, you really understand why everyone always
tells you to write modular code. It is much easier to work through the list if
you've broken your program into the functions <code>get_input()</code>,
<code>display_members()</code>, <code>add_member()</code>,
<code>update_info()</code>, and <code>delete_member()</code>.</p>

<h3>Where to Look</h3>

<p>When asked where to look for bugs, software testers sometimes speak of the
"joints" between program components, "equivalence classes," and "edge values."
These are the primary points of weakness in an application.</p>

<p>An example of a joint is the place where your software interacts with a
third-party module. It's important to make sure that all of the components send
and receive what you think they should.</p>

<p>An equivalence class is a class of data that follows the same data path
through the program. Consider a program that divides the number 50 by whatever
number the user enters and either returns a positive integer or tells them why
the answer is not a positive integer. You might have the following classes:
negative numbers; the number zero; the numbers 1, 2, 5, 10, 25, and 50; numbers
greater than 50; and non-numbers.  Consider the following incomplete but
well-intentioned code:</p>

<pre><code>sub factor_of_50 {
    my $divisor = shift;
    my $result  = 50 / $divisor;

    return $result if $result == int( $result );
    return "$divisor is negative" if $result &lt; 0;
    return "$result is not an integer";
}</code></pre>

<p>In this case, good tests should start with -1, 0, 1, 49, and 51, the edge
values for this program, to test the different paths through the code. Edge
values define the limits of the program, values near and past the stated
minimum and maximum that the program should handle. In the example above, you'd
also want to enter a string of letters and punctuation to see how the program
handles it. Then, compare the test results to the program's specification, which
tells you which inputs should work and what outputs the users should see.</p>

<h3>Specifications</h3>

<p>Any non-trivial program needs to have a specified list of what it should do.
This list of requirements lays a foundation on which to build the software and
against which testers can test.  There must be a specification of quality from
the beginning, or else there is no way to tell if the program has passed or
failed a given test. Functional specifications tell you about the program's
logic, while non-functional specifications include things like the speed of the
application, usability issues for a user interface, and security.</p>

<h3>Writing Tests</h3>

<p>Once you have a specification, you can make a test inventory--a list of all
the tests you need to write in order to prove that the software meets the
specifications. Of course, you need to eliminate all the bugs that crash the
program and as many more as you can find, but when do you say enough is
enough?</p>

<p>In <em><a
href="http://he-cda.wiley.com/WileyCDA/HigherEdTitle/productCd-047143020X,courseCd-CX4700.html">Software
Testing Fundamentals</a></em>, Marnie Hutcheson describes her Most Important
Tests method. This process tries to determine which tests will be most valuable
to run. Essentially, it is a way to present management with the opportunity to
weigh the tradeoffs between further testing and pushing the product to market
sooner.</p>

<h3>Reporting</h3>

<p>Reporting is, of course, crucial to testing. You test, trying to get the
software to fail, so that you can report the bugs you find back to the
development team, so they can fix things before the software's release. A
clear, informative bug report is the only one worth writing. Here is a template
for a web application's bug report from <em>The Web Testing Companion</em>.</p>

<p>SERVER CONFIG<br />
Operating System: &lt;Operating system and hardware, if applicable.&gt;<br />
Software Build: &lt;Build-number of your software.&gt;<br />
Topology: &lt;If you have multiple topologies where you test your
server in-house.&gt;</p>

<p>CLIENT<br />
OS: &lt;Operating system, service packs, and other dependent DLL versions, if applicable&gt;<br />
Browser: &lt;Browser and version&gt;</p>

<p>DESCRIPTION<br />
&lt;Brief description of the problem&gt;</p>

<p>Repro (short for reproduction)</p>

<ol>

<li>&lt;Very descriptive steps showing how to recreate the problem&gt;</li>
<li>&nbsp;</li>
<li>&nbsp;</li>

</ol>

<p>Result:<br />
&lt;Description of exactly what happens after the last repro step&gt;</p>

<p>Expected Results:<br />
&lt;Description of what should have happened after the last repro step&gt;</p>

<p>Notes:<br />
&lt;Add any information about when this was last verified or what
this might be related to here&gt;</p>

<h3>Final Thoughts</h3>

<p>When all the tests have finshed, the tester turns the repro reports in to
the development team and starts looking forward to the next project. If there
are any bugs found, the developer is back to square one: debugging. The process
has come full circle.  Hopefully, after a few more iterations, everyone can go
out and have a paintball war.</p>

<p>Software development and software testing require two different mindsets.
Sometimes it is hard for one person to switch back and forth between them, but
testing is essential to the success of any non-trivial software project in the
same way that editing is essential for any non-trivial writing project. Without
it, progress is ponderous, at best.</p>

<p>In conclusion, I'd like to list the nine debugging rules from David J.
Agans' excellent book, <em><a
href="http://www.debuggingrules.com/Debugging_CH1.PDF">Debugging</a></em>.  His
book clarifies these essential debugging concepts and is mandatory reading for
anyone who fixes things:</p>

<ol>

<li>Understand the system</li>
<li>Make it fail</li>
<li>Quit thinking and look</li>
<li>Divide and conquer</li>
<li>Change one thing at a time</li>
<li>Keep an audit trail</li>
<li>Check the plug</li>
<li>Get a fresh view</li>
<li>If you didn't fix it, it isn't fixed</li>

</ol>

<h3>Bibliography</h3>

<p>Agans, David J. <em>Debugging</em>, American Management Association, 2002</p>

<p>Ash, Lydia. <em>The Web Testing Companion</em>, Wiley, 2003</p>

<p>Hutcheson, Marnie L. <em>Software Testing Fundamentals</em>, Wiley, 2003</p>

<p>Scott, Peter J.; Wright, Ed. <em>Perl Debugged</em>, Addison-Wesley Pub Co,
2001</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/databases/">&laquo; Databases</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/dynamic-content/">Dynamic Content &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.02" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
