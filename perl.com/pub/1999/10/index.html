<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: October 1999 Archives</title>


    <link rel="prev" href="/pub/1999/09/" title="September 1999" />
    <link rel="next" href="/pub/1999/11/" title="November 1999" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">October 1999 Archives</h1>





                            
                            <div id="entry-1822" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/1999/10/DBI.html" rel="bookmark">A Short Guide to DBI</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="1999-10-22T00:00:00-08:00">October 22, 1999 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h2>Short guide to DBI (The Perl Database Interface Module)
</h2>


<br />
<p>  <h3><a name="About_Relational_Databases_Gener">General information about relational databases</a></h3></p> <p> Relational databases started to get to be a big deal in the 1970's, andthey're still a big deal today, which is a little peculiar, because they're
a 1960's technology.</p>  <p> A relational database is a bunch of rectangular tables. Each row of a table
is a record about one person or thing; the record contains several pieces
of information called <em>fields</em>. Here is an example table:

<p> <pre> LASTNAME   FIRSTNAME   ID   POSTAL_CODE   AGE  SEX
        Gauss      Karl        119  19107         30   M
        Smith      Mark        3    T2V 3V4       53   M
        Noether    Emmy        118  19107         31   F
        Smith      Jeff        28   K2G 5J9       19   M
        Hamilton   William     247  10139         2    M
</pre> <p> The names of the fields are <code>LASTNAME</code>, <code>FIRSTNAME</code>, <code>ID</code>,
<code>POSTAL_CODE</code>, <code>AGE</code>, and <code>SEX</code>. Each line in the table is a
<em>record</em>, or sometimes a <em>row</em> or <em>tuple</em>. For example, the first row of the table represents a 30-year-old male
whose name is Karl Gauss, who lives at postal code 19107, and whose ID
number is 119.</p>  <p> Sometimes this is a very silly way to store information. When the
information naturally has a tabular structure it's fine. When it doesn't,
you have to squeeze it into a table, and some of the techniques for doing
that are more successful than others. Nevertheless, tables are simple and
are easy to understand, and most of the high-performance database systems
you can buy today operate under this 1960's model.</p>  <p>  <h3><a name="About_SQL">About SQL</a></h3></p> <p> SQL stands for <em>Structured Query Language</em>. It was invented at
IBM in the 1970's. It's a language for describing searches and
modifications to a relational database.</p>  <p> SQL was a huge success, probably because it's incredibly simple and anyone
can pick it up in ten minutes. As a result, all the important database
systems support it in some fashion or another. This includes the big
players, like Oracle and Sybase, high-quality free or inexpensive database
systems like MySQL, and funny hacks like Perl's
<code>DBD::CSV</code> module, which we'll see later.</p>  <p> There are four important things one can do with a table:</p> <p> <dl> <dt><strong><a name="item_SELECT">SELECT</a></strong><dd>  Find all the records that have a certain property</p> <p> <dt><strong><a name="item_INSERT">INSERT</a></strong><dd>  Add new records</p> <p> <dt><strong><a name="item_DELETE">DELETE</a></strong><dd>  Remove old records</p> <p> <dt><strong><a name="item_UPDATE">UPDATE</a></strong><dd>  Modify records that are already there
</p> </dl> <p> Those are the four most important SQL commands, also called
<em>queries</em>. Suppose that the example table above is named <code>people</code>. Here are examples of each of the four important kinds of queries:

<p> <pre> SELECT firstname FROM people WHERE lastname = 'Smith'
</pre> <p> (Locate the first names of all the Smiths.)

<p> <pre> DELETE FROM people WHERE id = 3
</pre> <p> (Delete Mark Smith from the table)

<p> <pre> UPDATE people SET age = age+1 WHERE id = 247
</pre> <p> (William Hamilton just had a birthday.)

<p> <pre> INSERT INTO people VALUES ('Euler', 'Leonhard', 248, NULL, 58, 'M')
</pre> <p> (Add Leonhard Euler to the table.)

<p> There are a bunch of other SQL commands for creating and discarding tables,
for granting and revoking access permissions, for committing and abandoning
transactions, and so forth. But these four are the important ones.
Congratulations; you are now a SQL programmer. For the details, go to any
reasonable bookstore and pick up a SQL quick reference.</p>   <!-- <a name="About_Databases">About Databases</a> --> <p> Every database system is a little different. You talk to some databases over
the network and make requests of the database engine; other databases you
talk to through files or something else.</p> <p> Typically when you buy a commercial database, you get a <em>library</em> with it. The vendor has written some functions for talking to the database
in some language like C, compiled the functions, and the compiled code is
the library. You can write a C program that calls the functions in the
library when it wants to talk to the database.</p> <p> Every vendor's library is different. The names of the functions vary, and
the order in which you call them varies, and the details of passing queries
to the functions and getting the data back out will vary. Some libraries,
like Oracle's, are very thin&#151they just send the query over to the network
to the real database and let the giant expensive real database engine deal
with it directly. Other libraries will do more predigestion of the query,
and more work afterwards to turn the data into a data structure. Some
databases will want you to spin around three times and bark like a chicken;
others want you to stand on your head and drink out of your sneaker.</p>  <p>  <h3><a name="What_C_DBI_is_For">What DBI is For</a></h3> <p> There's a saying that any software problem can be solved by adding a layer
of indirection. That's what Perl's <code>DBI</code> (`Database Interface') module is all about. It was written by Tim Bunce.</p>  <p> <code>DBI</code> is designed to protect you from the details of the vendor libraries. It has
a very simple interface for saying what SQL queries you want to make, and
for getting the results back.  <code>DBI</code> doesn't know how to talk to any particular database, but it does know how
to locate and load in <code>DBD</code> (`Database Driver') modules. The <code>DBD</code> modules have the vendor libraries in them and know how to talk to the real
databases; there is one <code>DBD</code> module for every different database.</p>  <p> When you ask <code>DBI</code> to make a query for you, it sends the query to the appropriate <code>DBD</code> module, which spins around three times or drinks out of its sneaker or
whatever is necessary to communicate with the real database. When it gets the
results back, it passes them to <code>DBI</code>. Then <code>DBI</code> gives you the results. Since your program only has to deal with <code>DBI</code>, and not with the real database, you don't have to worry about barking
like a chicken.</p>  <p align=center><img src="/pub/1999/10/dbi.gif"></p>  <p> Here's your program talking to the <code>DBI</code> library. You are using two databases at once. One is an Oracle database
server on some other machine, and another is a <code>DBD::CSV</code> database that stores the data in a bunch of plain text files on the local
disk.</p>  <p> Your program sends a query to <code>DBI</code>, which forwards it to the appropriate <code>DBD</code> module; let's say it's <code>DBD::Oracle</code>.  <code>DBD::Oracle</code> knows how to translate what it gets from <code>DBI</code> into the format demanded by the Oracle library, which is built into it. The
library forwards the request across the network, gets the results back, and
returns them to
<code>DBD::Oracle</code>.  <code>DBD::Oracle</code> returns the results to <code>DBI</code> as a Perl data structure. Finally, your program can get the results from
<code>DBI</code>.</p>  <p> On the other hand, suppose that your program was querying the text files.
It would prepare the same sort of query in exactly the same way, and send
it to <code>DBI</code> in exactly the same way.  <code>DBI</code> would see that you were trying to talk to the <code>DBD::CSV</code> database and forward the request to the <code>DBD::CSV</code> module. The <code>DBD::CSV</code> module has Perl functions in it that tell it how to parse SQL and how to
hunt around in the text files to find the information you asked for. It
then returns the results to <code>DBI</code> as a Perl data structure. Finally, your program gets the results from <code>DBI</code> in exactly the same way that it would have if you were talking to Oracle
instead.</p>  <p> There are two big wins that result from this organization. First, you don't
have to worry about the details of hunting around in text files or talking
on the network to the Oracle server or dealing with Oracle's library. You
just have to know how to talk to <code>DBI</code>.</p>  <p> Second, if you build your program to use Oracle, and then the following
week upper management signs a new Strategic Partnership with Sybase, it's
easy to convert your code to use Sybase instead of Oracle. You change
exactly one line in your program, the line that tells <code>DBI</code> to talk to <code>DBD::Oracle</code>, and have it use <code>DBD::Sybase</code> instead. Or you might build your program to talk to a cheap, crappy
database like MS Access, and then next year when the application is doing
well and getting more use than you expected, you can upgrade to a better
database next year without changing any of your code.</p>  <p> There are <code>DBD</code> modules for talking to every important kind of SQL database.  <code>DBD::Oracle</code> will talk to Oracle, and <code>DBD::Sybase</code> will talk to Sybase.  <code>DBD::ODBC</code> will talk to any ODBC database including Microsoft Acesss. (ODBC is a
Microsoft invention that is analogous to
<code>DBI</code> itself. There is no <code>DBD</code> module for talking to Access directly.)  <code>DBD::CSV</code> allows SQL queries on plain text files.
<code>DBD::mysql</code> talks to the excellent MySQL database from TCX DataKonsultAB in Sweden.
(MySQL is a tremendous bargain: It's <code>$200</code> for commercial use,
and free for noncommerical use.)</p>   <h3><a name="How_to_Use_C_DBI_">Example of How to Use <code>DBI</code></a></h3> <p> Here's a typical program. When you run it, it waits for you to type a last
name. Then it searches the database for people with that last name and
prints out the full name and ID number for each person it finds. For
example:

<p> <pre> Enter name&gt; Noether
                118: Emmy Noether

        Enter name&gt; Smith
                3: Mark Smith
                28: Jeff Smith

        Enter name&gt; Snonkopus
                No names matched `Snonkopus'.
        
        Enter name&gt; ^D
</pre> <p> Here is the code:

<p> <pre> use DBI;

        my $dbh = DBI-&gt;connect('DBI:Oracle:payroll')
                or die &quot;Couldn't connect to database: &quot; . DBI-&gt;errstr;
        my $sth = $dbh-&gt;prepare('SELECT * FROM people WHERE lastname = ?')
                or die &quot;Couldn't prepare statement: &quot; . $dbh-&gt;errstr;

        print &quot;Enter name&gt; &quot;;
        while ($lastname = &lt;&gt;) {               # Read input from the user
          my @data;
          chomp $lastname;
          $sth-&gt;execute($lastname)             # Execute the query
            or die &quot;Couldn't execute statement: &quot; . $sth-&gt;errstr;

          # Read the matching records and print them out          
          while (@data = $sth-&gt;fetchrow_array()) {
            my $firstname = $data[1];
            my $id = $data[2];
            print &quot;\t$id: $firstname $lastname\n&quot;;
          }

          if ($sth-&gt;rows == 0) {
            print &quot;No names matched `$lastname'.\n\n&quot;;
          }

          $sth-&gt;finish;
          print &quot;\n&quot;;
          print &quot;Enter name&gt; &quot;;
        }
          
        $dbh-&gt;disconnect;
</pre> <p>  <!-- <a name="Explanation_of_the_Example">Explanation of the Example</a> --> <p> <pre> use DBI;
</pre> <p> This loads in the <code>DBI</code> module. Notice that we don't have to load in any <code>DBD</code> module.  <code>DBI</code> will do that for us when it needs to.</p>  <p> <pre> my $dbh = DBI-&gt;connect('DBI:Oracle:payroll');
                or die &quot;Couldn't connect to database: &quot; . DBI-&gt;errstr;
</pre> <p> The <code>connect</code> call tries to connect to a database. The first argument, <code>DBI:Oracle:payroll</code>, tells <code>DBI</code> what kind of database it is connecting to. The <code>Oracle</code> part tells it to load <code>DBD::Oracle</code> and to use that to communicate with the database. If we had to switch to
Sybase next week, this is the one line of the program that we would change.
We would have to change <code>Oracle</code> to <code>Sybase</code>.</p>  <p> <code>payroll</code> is the name of the database we will be searching. If we were going to
supply a username and password to the database, we would do it in the <code>connect</code> call:
</p> <p> <pre> my $dbh = DBI-&gt;connect('DBI:Oracle:payroll', 'username', 'password')
                or die &quot;Couldn't connect to database: &quot; . DBI-&gt;errstr;
</pre> <p> If <code>DBI</code> connects to the database, it returns a <em>database handle</em> object, which we store into <code>$dbh</code>. This object represents the database connection. We can be connected to
many databases at once and have many such database connection objects.</p>  <p> If <code>DBI</code> can't connect, it returns an undefined value. In this case, we use <code>die</code> to abort the program with an error message.
<code>DBI-&gt;errstr</code> returns the reason why we couldn't connect&#151``Bad password'' for example.
</p> <p> <pre> my $sth = $dbh-&gt;prepare('SELECT * FROM people WHERE lastname = ?')
                or die &quot;Couldn't prepare statement: &quot; . $dbh-&gt;errstr;
</pre> <p> The <code>prepare</code> call prepares a query to be executed by the database. The argument is any
SQL at all. On high-end databases, <code>prepare</code> will send the SQL to the database server, which will compile it. If
<code>prepare</code> is successful, it returns a <em>statement handle</em> object which represents the statement; otherwise it returns an undefined
value and we abort the program.  <code>$dbh-&gt;errstr</code> will return the reason for failure, which might be ``Syntax error in SQL''.
It gets this reason from the actual database, if possible.</p>  <p> The <code>?</code> in the SQL will be filled in later. Most databases can handle this. For
some databases that don't understand the <code>?</code>, the DBD module will emulate it for you and will pretend that the database
understands how to fill values in later, even though it doesn't.</p>  <p> <pre> print &quot;Enter name&gt; &quot;;
</pre> <p> Here we just print a prompt for the user.

<p> <pre> while ($lastname = &lt;&gt;) {               # Read input from the user
          ...
        }
</pre> <p> This loop will repeat over and over again as long as the user enters a last
name. If they type a blank line, it will exit. The Perl
<code>&lt;&gt;</code> symbol means to read from the terminal or from files named on the command
line if there were any.</p>  <p> <pre> my @data;
</pre> <p> This declares a variable to hold the data that we will get back from the
database.</p>  <p> <pre> chomp $lastname;
</pre> <p> This trims the newline character off the end of the user's input.</p>  <p> <pre> $sth-&gt;execute($lastname)             # Execute the query
            or die &quot;Couldn't execute statement: &quot; . $sth-&gt;errstr;
</pre> <p> <code>execute</code> executes the statement that we prepared before. The argument <code>$lastname</code> is substituted into the SQL in place of the
<code>?</code> that we saw earlier. <code>execute</code> returns a true value if it succeeds and a false value otherwise, so we
abort if for some reason the execution fails.</p>  <p> <pre> while (@data = $sth-&gt;fetchrow_array()) {
            ...
           }
</pre> <p> <code>fetchrow_array</code> returns one of the selected rows from the database. You get back an array
whose elements contain the data from the selected row. In this case, the
array you get back has six elements. The first element is the person's
last name; the second element is the first name; the third element is the
ID, and then the other elements are the postal code, age, and sex.</p>  <p> Each time we call <code>fetchrow_array</code>, we get back a different record from the database. When there are no more
matching records,
<code>fetchrow_array</code> returns the empty list and the <code>while</code> loop exits.

<p> <pre> my $firstname = $data[1];
             my $id = $data[2];
</pre> <p> These lines extract the first name and the ID number from the record data.

<p> <pre> print &quot;\t$id: $firstname $lastname\n&quot;;
</pre> <p> This prints out the result.

<pre> if ($sth-&gt;rows == 0) {
            print &quot;No names matched `$lastname'.\n\n&quot;;
          }
</pre> <p> The <code>rows</code> method returns the number of rows of the
database that were selected. If no rows were selected, then there is
nobody in the database with the last name that the user is looking
for. In that case, we print out a message.  We have to do this
<em>after</em> the <code>while</code> loop that fetches whatever rows
were available, because with some databases you don't know how many
rows there were until after you've gotten them all.
</p>  <p> <pre> $sth-&gt;finish;
          print &quot;\n&quot;;
          print &quot;Enter name&gt; &quot;;
</pre> <p> Once we're done reporting about the result of the query, we print another
prompt so that the user can enter another name.
<code>finish</code> tells the database that we have finished retrieving all the data for this query and allows it to reinitialize the handle so that we can execute it again for the next query.

<p> <pre> $dbh-&gt;disconnect;
</pre> <p> When the user has finished querying the database, they type a blank line
and the main <code>while</code> loop exits.  <code>disconnect</code> closes the connection to the database.
</p>   <h3><a name="Cached_Queries">Cached Queries</a></h3> <p> Here's a function which looks up someone in the example table, given their
ID number, and returns their age:</p>  <p> <pre> sub age_by_id {
          # Arguments: database handle, person ID number
          my ($dbh, $id) = @_;
          my $sth = $dbh-&gt;prepare('SELECT age FROM people WHERE id = ?')
            or die &quot;Couldn't prepare statement: &quot; . $dbh-&gt;errstr;
</pre> <p> <pre> $sth-&gt;execute($id) 
            or die &quot;Couldn't execute statement: &quot; . $sth-&gt;errstr;
</pre> <p> <pre> my ($age) = $sth-&gt;fetchrow_array();
          return $age;
        }
</pre> <p> It prepares the query, executes it, and retrieves the result.

<p> There's a problem here though. Even though the function works correctly,
it's inefficient. Every time it's called, it prepares a new query.
Typically, preparing a query is a relatively expensive operation. For
example, the database engine may parse and understand the SQL and translate
it into an internal format. Since the query is the same every time, it's
wasteful to throw away this work when the function returns.</p> <p> Here's one solution:

<p> <pre> { my $sth;
          sub age_by_id {
            # Arguments: database handle, person ID number
            my ($dbh, $id) = @_;
</pre> <p> <pre> if (! defined $sth) {
              $sth = $dbh-&gt;prepare('SELECT age FROM people WHERE id = ?')
                or die &quot;Couldn't prepare statement: &quot; . $dbh-&gt;errstr;
            }
</pre> <p> <pre> $sth-&gt;execute($id) 
              or die &quot;Couldn't execute statement: &quot; . $sth-&gt;errstr;
</pre> <p> <pre> my ($age) = $sth-&gt;fetchrow_array();
            return $age;
          }
        }
</pre> <p> There are two big changes to this function from the previous version.
First, the <code>$sth</code> variable has moved outside of the function; this tells Perl that its value
should persist even after the function returns. Next time the function is
called, <code>$sth</code> will have the same value as before.</p>  <p> Second, the <code>prepare</code> code is in a conditional block. It's only executed if <code>$sth</code> does not yet have a value. The first time the function is called, the <code>prepare</code> code is executed and the statement handle is stored into <code>$sth</code>. This value persists after the function returns, and the next time the
function is called, <code>$sth</code> still contains the statement handle and the <code>prepare</code> code is skipped.</p>  <p> Here's another solution:

<p> <pre> sub age_by_id {
          # Arguments: database handle, person ID number
          my ($dbh, $id) = @_;
          my $sth = $dbh-&gt;prepare_cached('SELECT age FROM people WHERE id = ?')
            or die &quot;Couldn't prepare statement: &quot; . $dbh-&gt;errstr;
</pre> <p> <pre> $sth-&gt;execute($id) 
            or die &quot;Couldn't execute statement: &quot; . $sth-&gt;errstr;
</pre> <p> <pre> my ($age) = $sth-&gt;fetchrow_array();
          return $age;
        }
</pre> <p> Here the only change to to replace <code>prepare</code> with <code>prepare_cached</code>. The <code>prepare_cached</code> call is just like <code>prepare</code>, except that it looks to see if the query is the same as last time. If so,
it gives you the statement handle that it gave you before.</p>    <h3><a name="Transactions">Transactions</a></h3> <p> Many databases support <em>transactions</em>. This means that you can make a whole bunch of queries which would modify
the databases, but none of the changes are actually made. Then at the end
you issue the special SQL query <code>COMMIT</code>, and all the changes are made simultaneously. Alternatively, you can issue
the query <code>ROLLBACK</code>, in which case all the queries are thrown away.</p>  <p> As an example of this, consider a function to add a new employee to a
database. The database has a table called <code>employees</code> that looks like this:

<p> <pre> FIRSTNAME  LASTNAME   DEPARTMENT_ID
        Gauss      Karl       17
        Smith      Mark       19
        Noether    Emmy       17
        Smith      Jeff       666
        Hamilton   William    17
</pre> <p> and a table called <code>departments</code> that looks like this:

<p> <pre> ID   NAME               NUM_MEMBERS
        17   Mathematics        3
        666  Legal              1
        19   Grounds Crew       1
</pre> <p> The mathematics department is department #17 and has three members: Karl
Gauss, Emmy Noether, and William Hamilton.</p>  <p> Here's our first cut at a function to insert a new employee. It will return
true or false depending on whether or not it was successful:

<p> <pre> sub new_employee {
          # Arguments: database handle; first and last names of new employee;
          # department ID number for new employee's work assignment
          my ($dbh, $first, $last, $department) = @_;
          my ($insert_handle, $update_handle);
</pre> <p> <pre> my $insert_handle = 
            $dbh-&gt;prepare_cached('INSERT INTO employees VALUES (?,?,?)'); 
          my $update_handle = 
            $dbh-&gt;prepare_cached('UPDATE departments 
                                     SET num_members = num_members + 1
                                   WHERE id = ?');
</pre> <p> <pre> die &quot;Couldn't prepare queries; aborting&quot;
            unless defined $insert_handle &amp;&amp; defined $update_handle;
</pre> <p> <pre> $insert_handle-&gt;execute($first, $last, $department) or return 0;
          $update_handle-&gt;execute($department) or return 0;
          return 1;   # Success
        }
</pre> <p> We create two handles, one for an <code>insert</code> query that will insert the new employee's name and department number into
the <code>employees</code> table, and an <code>update</code> query that will increment the number of members in the new employee's
department in the <code>department</code> table. Then we execute the two queries with the appropriate arguments.
</p> <p> There's a big problem here: Suppose, for some reason, the second query
fails. Our function returns a failure code, but it's too late, it has
already added the employee to the <code>employees</code> table, and that means that the count in the <code>departments</code> table is wrong. The database now has corrupted data in it.
</p> <p> The solution is to make both updates part of the same transaction. Most
databases will do this automatically, but without an explicit instruction
about whether or not to commit the changes, some databases will commit the
changes when we disconnect from the database, and others will roll them
back. We should specify the behavior explicitly.</p>  <p> Typically, no changes will actually be made to the database until we issue
a <code>commit</code>. The version of our program with <code>commit</code> looks like this:

<p> <pre> sub new_employee {
          # Arguments: database handle; first and last names of new employee;
          # department ID number for new employee's work assignment
          my ($dbh, $first, $last, $department) = @_;
          my ($insert_handle, $update_handle);
</pre> <p> <pre> my $insert_handle = 
            $dbh-&gt;prepare_cached('INSERT INTO employees VALUES (?,?,?)'); 
          my $update_handle = 
            $dbh-&gt;prepare_cached('UPDATE departments 
                                     SET num_members = num_members + 1
                                   WHERE id = ?');
</pre> <p> <pre> die &quot;Couldn't prepare queries; aborting&quot;
            unless defined $insert_handle &amp;&amp; defined $update_handle;
</pre> <p> <pre> my $success = 1;
          $success &amp;&amp;= $insert_handle-&gt;execute($first, $last, $department);
          $success &amp;&amp;= $update_handle-&gt;execute($department);
</pre> <p> <pre> my $result = ($success ? $dbh-&gt;commit : $dbh-&gt;rollback);
          unless ($result) { 
            die &quot;Couldn't finish transaction: &quot; . $dbh-&gt;errstr 
          }
          return $success;
        }
</pre> <p> We perform both queries, and record in <code>$success</code> whether they both succeeded.  <code>$success</code> will be true if both queries succeeded, false otherwise. If the queries
succeded, we commit the transaction; otherwise, we roll it back, cancelling
all our changes.</p>  <p> The problem of concurrent
database access is also solved by transactions. Suppose that queries were executed immediately, and that
some other program came along and examined the database after our insert
but before our update. It would see inconsistent data in the database, even
if our update would eventually have succeeded. But with transactions, all
the changes happen simultaneously when we do the <code>commit</code>, and the changes are committed automatically, which means that any other
program looking at the database either sees all of them or none.</p>  <p>  <!-- <a name="Miscellaneous">Miscellaneous</a> --> <p>  <h3><a name="C_do_"><code>do</code></a></h3> <p> If you're doing an <code>UPDATE</code>, <code>INSERT</code>, or <code>DELETE</code> there is no data that comes back from the database, so there is a short
cut. You can say

<p> <pre> $dbh-&gt;do('DELETE FROM people WHERE age &gt; 65');
</pre> <p> for example, and <code>DBI</code> will prepare the statement, execute it, and finish it.  <code>do</code> returns a true value if it succeeded, and a false value if it failed.
Actually, if it succeeds it returns the number of affected rows. In the
example it would return the number of rows that were actually deleted. (<code>DBI</code> plays a magic trick so that the value it turns is true even when it is 0.
This is bizarre, because 0 is usually false in Perl. But it's convenient
because you can use it either as a number or as a true-or-false success
code, and it works both ways.)</p>  <p>  <h3><a name="AutoCommit">AutoCommit</a></h3> <p> If your transactions are simple, you can save yourself the trouble of
having to issue a lot of <code>commit</code>s. When you make the <code>connect</code> call, you can specify an <code>AutoCommit</code> option which will perform an automatic <code>commit</code> operation after every successful query. Here's what it looks like:
</p> <p> <pre> my $dbh = DBI-&gt;connect('DBI:Oracle:payroll', 
                               {AutoCommit =&gt; 1},
                              )
                or die &quot;Couldn't connect to database: &quot; . DBI-&gt;errstr;
</pre> <p>  <h3><a name="Automatic_Error_Handling">Automatic Error Handling</a></h3> <p> When you make the <code>connect</code> call, you can specify a <code>RaiseErrors</code> option that handles errors for you automatically. When an error occurs, <code>DBI</code> will abort your program instead of returning a failure code. If all you
want is to abort the program on an error, this can be convenient:</p>  <p> <pre> my $dbh = DBI-&gt;connect('DBI:Oracle:payroll', 
                               {RaiseError =&gt; 1},
                              )
                or die &quot;Couldn't connect to database: &quot; . DBI-&gt;errstr;
</pre> <p>  <h3><a name="Don_t_do_This">Don't do This</a></h3> <p> People are always writing code like this:

<p> <pre> while ($lastname = &lt;&gt;) {
          my $sth = $dbh-&gt;prepare(&quot;SELECT * FROM people 
                                   WHERE lastname = '$lastname'&quot;);
          $sth-&gt;execute();
          # and so on ...
        }
</pre> <p> Here we interpolated the value of <code>$lastname</code> directly into the SQL in the <code>prepare</code> call.
</p> <p> This is a bad thing to do for three reasons.
</p> <p> First, <code>prepare</code> calls can take a long time. The database server has to compile the SQL and
figure out how it is going to run the query. If you have many similar
queries, that is a waste of time.</p>  <p> Second, it will not work if <code>$lastname</code> contains a name like O'Malley or D'Amico or some other name with an <code>'</code>. The <code>'</code> has a special meaning in SQL, and the database will not understand when you
ask it to prepare a statement that looks like

<p> <pre> SELECT * FROM people WHERE lastname = 'O'Malley'
</pre> <p> It will see that you have three <code>'</code>s and complain that you
don't have a fourth matching <code>'</code> somewhere else.</p>  <p> Finally, if you're going to be constructing your query based on a user
input, as we did in the example program, it's unsafe to simply
interpolate the input directly into the query, because the user can
construct a strange input in an attempt to trick your program into
doing something it didn't expect.  For example, suppose the user
enters the following bizarre value for <code>$input</code>:</p>  <pre> x' or lastname = lastname or lastname = 'y
</pre>  <p>Now our query has become something very surprising:</p>  <pre> SELECT * FROM people WHERE lastname = 'x' 
         or lastname = lastname or lastname = 'y'
</pre>  <p>The part of this query that our sneaky user is interested in is the
second <code>or</code> clause.  This clause selects all the records
for which <code>lastname</code> is equal to <code>lastname</code>;
that is, all of them.  We thought that the user was only going to be
able to see a few records at a time, and now they've found a way to
get them all at once.  This probably wasn't what we wanted.</p>  <table width="220" cellspacing="0" cellpadding="4" align="right" border="1"> <tr> <td bgcolor="#0033cc" valign="top" align="center"> <font color="#ffffff">References</td> <tr> <td valign="top"> <p class="fine">  &#149; A complete list of DBD modules are available <a href="http://www.cpan.org/modules/00modlist.long.html#7)DatabaseInterfac">here</a><br /> &#149; You can download these modules <a href="http://www.cpan.org/modules/by-module/DBD/">here</a><br /> &#149; <code>DBI</code> modules are available <a href="http://www.cpan.org/modules/by-module/DBI/">here</a><br /> &#149; You can get MySQL from <a href="http://www.tcx.se/">www.tcx.se</a><br /> </td> </tr> </table> <p> People go to all sorts of trouble to get around these problems with
interpolation. They write a function that puts the last name in quotes
and then backslashes any apostrophes that appear in it. Then it breaks
because they forgot to backslash backslashes. Then they make their
escape function better. Then their code is a big message because they
are calling the backslashing function every other line. They put a lot
of work into it the backslashing function, and it was all for nothing,
because the whole problem is solved by just putting a <code>?</code> into the query, like this

<p> <pre> SELECT * FROM people WHERE lastname = ?
</pre> <p> All my examples look like this. It is safer and more convenient <em>and</em> more efficient to do it this way.</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1824" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/1999/10/happybday.html" rel="bookmark">Happy Birthday Perl 5!</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="1999-10-18T00:00:00-08:00">October 18, 1999 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h1>Happy Birthday Perl 5</h1>

<p>The first full release of Perl 5 was exactly five years ago, on 17
October, 1994.  (Not 18 October as <tt>perlhist</tt> says.)  Happy
birthday, Perl, and congratulations to Larry and the cast of
thousands!</p>

<p>Oh, and if you're still running Perl 4, this might be a good time
to consider upgrading.</p>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1828" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/1999/10/p5pdigest/THISWEEK-19991024.html" rel="bookmark">This Week on p5p 1999/10/24</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="1999-10-17T00:00:00-08:00">October 17, 1999 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- This Week on perl5-porters<br>(18-24 October 1999) -->

<br />
<br />
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#C_O_"><CODE>$^O</CODE></A>
	<LI><A HREF="#C_STOP_blocks_and_the_broken_co"><CODE>STOP</CODE> blocks and the broken compiler</A>
	<LI><A HREF="#Blank_lines_in_POD">Blank lines in POD</A>
	<LI><A HREF="#C_PERL_HEADER_environment_varia"><CODE>PERL_HEADER</CODE> environment variable</A>
	<LI><A HREF="#Out_of_date_modules_in_Perl_dist">Out of date modules in Perl distribution</A>
	<LI><A HREF="#Enhanced_C_UNIVERSAL_isa_">Enhanced <CODE>UNIVERSAL::isa</CODE></A>
	<LI><A HREF="#C_sort_improvements"><CODE>sort</CODE> improvements</A>
	<LI><A HREF="#C_glob_case_sensitivity"><CODE>glob</CODE> case-sensitivity</A>
	<LI><A HREF="#C_reftype_function"><CODE>reftype</CODE> function</A>
	<LI><A HREF="#New_C_perlthread_man_page">New <CODE>perlthread</CODE> man page</A>
	<LI><A HREF="#Win32_and_C_fork_">Win32 and <CODE>fork()</CODE></A>
	<LI><A HREF="#Module_Bundling_and_the_proposed">Module Bundling and the proposed <CODE>import</CODE> pragma</A>
	<LI><A HREF="#C_cron_daemon_runs_processes_wi"><CODE>cron</CODE> daemon runs processes with <CODE>$SIG{CHLD}</CODE> set to <CODE>IGNORE</CODE></A>
	<LI><A HREF="#Day_range_checking_in_C_Time_Lo">Day range checking in <CODE>Time::Local::timelocal</CODE></A>
	<LI><A HREF="#New_quotation_characters">New quotation characters</A>
	<LI><A HREF="#Lexical_or_dynamic_scope_for_C_u">Lexical or dynamic scope for <CODE>use utf8</CODE>?</A>
	<LI><A HREF="#Full_path_of_cwd_in_C_INC_">Full path of cwd in <CODE>@INC</CODE></A>
	<LI><A HREF="#A_Strategic_Decision_to_use_the_">A Strategic Decision to use the Perl Compiler</A>
	<LI><A HREF="#Happy_Birthday_Perl_5">Happy Birthday Perl 5</A>
	<LI><A HREF="#Unicode_Character_Classes_Revisi">Unicode Character Classes Revisited</A>
	<LI><A HREF="#Sarathy_says_Yikes_again">Sarathy says `Yikes' again</A>
	<LI><A HREF="#Various">Various</A>
</UL>
<!-- INDEX END -->

<H3>Notes</H3>

<p>It is hard to keep track of everything that happens.  As before,
please let me know if you have any corrections or additions.  Send
them to <tt>mjd-perl-thisweek-YYYYMM@plover.com</tt> where
<tt>YYYYMM</tt> is the current year and month.</p>

<p>You can subscribe to an email version of this summary by sending an
empty message to <a
href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt></a>.</p>

<P>
<H3><A NAME="C_O_"><CODE>$^O</CODE></A></H3>
<P>
There was a gigantic discussion of <CODE>$^O</CODE> and related
matters. This was brought on by Tom, who wants to write a program that
cross-checks the <CODE>SEE ALSO</CODE> sections of the man pages. The
problem: Every version of Linux has a <CODE>man</CODE> command that is
slightly incompatible with every other. In particular, each system has
a different idea of where the pages are and how they are organized.
Tom wants his program to find out what sort of Linux it is on, `Red
Hat' or `Debian' or whatever, but <CODE>$^O</CODE> (and also the
<CODE>uname</CODE> command) only says <CODE>linux</CODE>, which is not
enough.

<P>
Various discussion ensued. Suggestion 1: Make <CODE>$^O</CODE> look like
<CODE>linux-redhat</CODE> or something. Objections: Changing <CODE>$^O</CODE> will break stupid programs that have <CODE>$^O eq 'linux'</CODE> instead of <CODE>$^O =~
/linux/</CODE>. Putting <CODE>redhat</CODE> into <CODE>$^O</CODE> will not actually solve Tom's problem, at least not in general, since the
semantics of <CODE>redhat</CODE>
changes from release to release.

<P>
Suggestion 2: Add a <CODE>Config.pm</CODE> field for the distribution vendor. Objections: <CODE>Config.pm</CODE> only reflects the state of the system at the time Perl was built, not at
the time your program runs. Possible solution to this: Have <CODE>Config</CODE> determine the OS at run time at the moment the information is requested.
Second objection: If <CODE>Config</CODE>
can do this, why can't Tom's program do it the same way, but without
<CODE>Config</CODE>? Well, OK, the nastiness could be encapsulated in a module. But Sarathy
didn't like the idea of putting this dynamic information into <CODE>Config</CODE>. He suggested:

<P>
Suggestion 3: A new module, <CODE>OS</CODE>, to provide functions for
looking up this sort of thing dynamically. There were other similar
suggestions. Dan Sugalski suggested adding a new magical
<CODE>%^O</CODE> variable that would behave similarly. Nick
Ing-Simmons suggested an <CODE>OS_Info</CODE> module. This
multiplicity suggests that I was the only one following the whole
tedious discussion. (And, if so, that everyone else had good sense.)

<P>
Gosh. When I took this job, I knew there would be occasional weeks where
there was some gigantic but trivial discussion. But I wasn't expecting one
so soon.  

<P>
If there was a conclusion to this discussion, I was not able to find
it.  Maybe there will be an update next week, or maybe everyone will
just get tired of the whole thing and forget about it.  Tom eventually
punted on the problem, and his program now assumes that it is running
under Red Hat.

<P>
In this midst of this, there were some sidetracks I found interesting.
There was discussion of Sarathy's hack to create <CODE>fork()</CODE>
on forkless Microsoft OSes (more about this below.) Tom Horsley had <A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00902.html">a
really delightful rant about <code>Configure</code></A>, which unfortunately is too long to
reproduce here:

<P>
<blockquote>
[<CODE>Configure</CODE>] acts, in fact, as though it were a compressed archive chock full of
config.h files for all kinds of different systems, and pressing the button
merely unpacks one of the files.

<P>
The problem comes when you attempt to extract a file that was never put
into the archive in the first place. ...
</blockquote>


<P>
The replies to this are worth reading too. 

<P>

<H3><A NAME="C_STOP_blocks_and_the_broken_co"><CODE>STOP</CODE> blocks and the broken compiler</A></H3>
<P>
One of the changes in perl 5.005_62 was that <CODE>END</CODE> blocks would no longer be run under <CODE>-c</CODE> mode. Nick Ing-Simmons wanted to know how the compiler would work; it had
formerly worked by enabling <CODE>-c</CODE>
mode, and walking the op tree and dumping out the compiled code in an
<CODE>END</CODE> block, which was executed after the program file was parsed and compiled.
(This may be an incorrect description; I would be grateful for corrections
here.) Disabling <CODE>END</CODE> blocks under <CODE>-c</CODE> mode, while correct, would break the compiler.

<P>
When he made the change, Sarathy planned a workaround, which you can
find in <CODE>perldelta</CODE> if you are interested. But the
workaround is annoying for the compiler, and Sarathy suggested that
the best solution would be <CODE>STOP</CODE> blocks. These would be
run after the compilation phase, but before the run phase; they are in
contrast to <CODE>INIT</CODE> blocks, which are run at the start of
the run phase. Normally, these two things happen at almost the same
time, with <CODE>STOP</CODE> blocks immediately before
<CODE>INIT</CODE> blocks. But if you  think of a compiler
module, which pauses after the compilation phase, writes out the
compiled code and exits, the usefulness of <CODE>STOP</CODE> becomes clear.

<P>
Vishal Bhatia pointed out that this would solve an existing  compiler bug:
<CODE>END</CODE> blocks are presently not executed at all by compiled scripts. If the <CODE>B::</CODE> modules did their work in <CODE>STOP</CODE> blocks instead of
<CODE>END</CODE> blocks, they would not have to usurp the <CODE>END</CODE> blocks.

<P>

<H3><A NAME="Blank_lines_in_POD">Blank lines in POD</A></H3>
<P>
Larry Virden submitted a minor doc patch: There was a line which looked
empty, but which contained white space. This prevented the POD parser from
recognizing a <CODE>=head</CODE> directive on the following line, because directives are only recognized
when they begin `paragraphs', and a line is not deemed to end a paragraph
unless it is entirely empty.  

<P>
It appears that this annoying behavior is finally going to be fixed. I
am delighted, because <a
href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/9512/msg01372.html">I
had complained about this back in 1995</a>.

<P>

<H3><A NAME="C_PERL_HEADER_environment_varia"><CODE>PERL_HEADER</CODE> environment variable</A></H3>
<P>
Ed Peschko wanted a new <CODE>PERL_HEADER</CODE> environment variable, somewhat analogous to <CODE>PERLLIB</CODE> or <CODE>PERL5OPT</CODE>, which would contain code that would be prepended to the source file
before it was executed. He wanted this so that he could make an environment
setting to tell Perl to always load up some standard, locally defined
modules before compiling the rest of any program.

<P>
Many people found persuasive reasons why this would be a bad thing to do,
and many other people suggested ways that it could be accomplished. For
example, you could set <CODE>PERL5OPT</CODE> to 
<CODE>-MFoo -MBar</CODE>.

<P>

<H3><A NAME="Out_of_date_modules_in_Perl_dist">Out of date modules in Perl distribution</A></H3>
<P>
Michael Schwern pointed out that there are several modules being
distributed with Perl for which more recent versions exist on CPAN.

<P>
It turns out that many of these cases are for good reasons. For example,
Ilya keeps the version number of the Devel::Peek on CPAN higher than the
version in Perl so that if you ask <CODE>CPAN.pm</CODE> to
<CODE>install Devel::Peek</CODE>, it does not go and try to install the latest version of Perl for you.
(Why does it do that, anyway?)

<P>
However, some modules really are out of date in the distribution. Sarathy
asked that authors of modules in the Perl distribution send him a note when
they update their modules. 

<P>

<H3><A NAME="Enhanced_C_UNIVERSAL_isa_">Enhanced <CODE>UNIVERSAL::isa</CODE></A></H3>
<P>
Mark Mielke suggested enhancing <CODE>isa</CODE> so that you could
give it and object and several class names and it would return true if
the object belonged to any of the classes. At present, only one class
is allowed.  No conclusion was reached. My guess is that this is not
going in because it is easy to write such a function if you want it.

<P>

<H3><A NAME="C_sort_improvements"><CODE>sort</CODE> improvements</A></H3>
<P>
I don't fully understand this yet, but it looks interesting. It
appears that Peter Haworth wants to have Perl notice when a sort
comparator function is prototyped with <CODE>($$)</CODE>, and to
optimize the argument passing to such a function to get the speed of
the <CODE>$a</CODE>-<CODE>$b</CODE> hack, but without actually using
<CODE>$a</CODE> and <CODE>$b</CODE>. Then you could use any
two-argument function as a sort comparator but it would be as fast as
if it were using the special <CODE>$a</CODE>-<CODE>$b</CODE> method. I
have asked Peter to confirm this, and I will report back next week.</p>

<p>Note added 26 October:  Peter cofirms that I have it mostly right, but adds:</p>

<blockquote><p>
The gains aren't so much for
performance, as getting rid of package annoyances. If I manage to get this
patch working properly, you can use a comparator function from a different
package, and it can just get its arguments from <CODE>@_</CODE>, rather than
<CODE>${caller.'::a'}</CODE> and <CODE>${caller.'::b'}</CODE>. Also, Ilya says this will allow XSUBs to
be used as comparators, but I don't know the history of this well enough to
know why they can't be used now.
</p></blockquote>

<P>

<H3><A NAME="C_glob_case_sensitivity"><CODE>glob</CODE> case-sensitivity</A></H3>
<P>
Perl 5.005_62 optionally has a new built-in implementation of the <CODE>glob</CODE> function; it does not need to call the shell to do a glob. Paul Moore
pointed out that the new internal globber is case-sensitive, even on his
Win32 system with the case-insensitive filesystem; formerly, <CODE>glob</CODE> had been case-insensitive.

<P>
Some discussion ensued about what to do. Sarathy seemed inclined to let the
new globber continue to be insensitive on case-insensitive filesystems, and
vice versa; on Windows systems there is an API for finding this out. He
asked Paul for a patch for this. He said that people could use the <CODE>File::Glob</CODE> or <CODE>File::DosGlob</CODE> modules if they needed a specific semantics.

<P>
Incidentally, <A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg01183.html">Larry
suggested that the new <CODE>glob</CODE> be made the default for the
beta test versions of Perl</A>, so that it would be tested adequately.

<P>



<P>

<H3><A NAME="C_reftype_function"><CODE>reftype</CODE> function</A></H3>
<P>
Jeff Pinyan posted a complaint about the behavior of a function prototyped
with <CODE>(;$)</CODE>.  He wants <CODE>print f arg1,
arg2</CODE> to be parsed as if he had written
<CODE>print f(arg1),
arg2</CODE>.  At present, Perl aborts, complaining that <CODE>f</CODE>
got two arguments and expected at most one.  Jeff encountered this
behavior while he was writing a function to determine what kind
of reference (array, hash, whatever) its argument is. 
</P>

<P>
(This is more difficult than it seems. You cannot use only <CODE>ref</CODE>, because if you have an object blessed into a class named
<CODE>ARRAY</CODE>, <CODE>ref</CODE> will return <CODE>ARRAY</CODE> even if the object is a hash, and you run into similar problems with
classes named <CODE>0</CODE> and so forth.)  

<P>
Nobody addressed the <CODE>(;$)</CODE> issue, but there was discussion of how to
build such a function. Spider Boardman revealed that he had such a function
named <CODE>attributes::reftype</CODE> already in the standard Perl
distribution.  It is written in C as an XS, which is clearly the Right Way to Do It. Sarathy
said he thought that <CODE>attribute.pm</CODE> was a good place for
the function to be.</P>

<P>

<H3><A NAME="New_C_perlthread_man_page">New <CODE>perlthread</CODE> man page</A></H3>
<P>
Dan Sugalski presented for comments <A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg01081.html">a
draft of a <CODE>perlthread</CODE> man page</A>, discussing Perl's
thread interface and thread semantics. </P>


<P>



<P>

<H3><A NAME="Win32_and_C_fork_">Win32 and <CODE>fork()</CODE></A></H3>
<P>
Sarathy has been working for some time on making <CODE>fork</CODE> work on forkless Win32 systems. The idea: <CODE>fork</CODE> will create a new thread, running a separate copy of the Perl interpreter,
which will run the fictional child process. The child process will somehow
have its own current working directory, environment, open file table,
and so forth.  <CODE>exec</CODE> in the `child' thread will terminate the thread and its associated
interpreter, rather than the entire process.

<P>
<blockquote> <p><b>Dan Sugalski:</b> I see there's
going to be something interesting to implement for VMS before 5.6 gets
released. Cool. :) </blockquote>

<P>

<H3><A NAME="Module_Bundling_and_the_proposed">Module Bundling and the proposed <CODE>import</CODE> pragma</A></H3>
<P>
This continued from last week. Michael King split up his module
functionality into <CODE>Import::ShortName</CODE> for module aliasing, and
<CODE>Import::JavaPkg</CODE>, to load a whole bunch of modules in a single namespace all at once, with
aliasing.

<P>
At the tail end of this discussion, several people complained that although
they thought that they'd followed the documented procedure for reserving
namespaces in the CPAN module list, nothing ever seemed to come of it, and
their names never appeared in the list. Andreas K&ouml;nig took
responsibility for this problem. He is rewriting the PAUSE software to
handle the bookkeeping, because the module list owners are too overworked
to do it all manually.

<P>
<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00903.html">Andreas asked people whose requests had been forgotten to send a reminder
to the module list</a> by the end of October, and promised to get these
requests listed within 24 hours.

<P>



<P>

<H3><A NAME="C_cron_daemon_runs_processes_wi"><CODE>cron</CODE> daemon runs processes with <CODE>$SIG{CHLD}</CODE> set to <CODE>IGNORE</CODE></A></H3>
<P>
On some systems, the <CODE>cron</CODE> daemon has this bug. (It is a bug in <CODE>cron</CODE>, because <CODE>cron</CODE> should know to restore the signal handling to the default case when running
a job; otherwise the job will inherit this unusual signal environment and
might get unexpected results.)

<P>
Tom Phoenix added a patch to the linux hints file to try to detect this,
and print out a warning at Perl build time if so. Sarathy said it was bad
to put this in the hints, because it does not actually
<EM>affect</EM> the build process, and that it should be documented more prominently.  

<P>
Mike Guy asked: ``Wouldn't it be better for Perl just to set
<CODE>$SIG{CHLD} = 'DEFAULT'</CODE> automatically at startup in this case? Would it do any harm to do it in <EM>all</EM> cases?'' <A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg01201.html">Sarathy agreed</A>, and put in a patch to do that, and also to issue a
warning if so.

<P>



<P>

<H3><A NAME="Day_range_checking_in_C_Time_Lo">Day range checking in <CODE>Time::Local::timelocal</CODE></A></H3>
<P>
If you ask <CODE>timelocal</CODE> to convert a date where the day of the month is larger than 31, it aborts
with a warning like

<P>
<PRE>        Day '32' out of range 1..31
</PRE>
<P>
John L. Allen complained that this was stupid for two reasons: First, it
doesn't abort when you ask for February 30, and second, it prevents you
from asking for January 280 to find out the date of the 280th day of the
year. He submitted a patch that eliminated the check.

<P>
A patch like that had been in before, but Sarathy took it out because it
caused a test failure in <CODE>libwww</CODE>; Sarathy wants it to be
conditionalized on a <CODE>nocroak</CODE> variable or something, for
backward compatibility. In the ensuing discussion, Jonathan Scott Duff made
a list of new features he'd like to see in <CODE>Time::Local</CODE>---features like `fast' and `correct'.  

<P>
<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg01181.html">Mike Guy said that he had worked on such a thing</A>, but run into some
annoying backward compatibility issues. For example, the current
<CODE>timelocal</CODE> returns -1 on an error. But because -1 also
indicates
a valid time before 1970, <CODE>timelocal</CODE>
cannot work for dates before 1970 and be
backward-compatible with the current version at the same time. Also, the
existing <CODE>timelocal</CODE> has a very nasty interpretation of the
year: <CODE>2070</CODE>, <CODE>170</CODE>, and <CODE>70</CODE> all
mean the year 2070, contrary to good sense and the documentation.

<P>



<P>
Sarathy said he would accept the <CODE>timelocal</CODE> replacement if there were a command to enable the improved behaviors that
were not backward compatible with the old behavior.

<P>

<H3><A NAME="New_quotation_characters">New quotation characters</A></H3>
<P>
Kragen Sitaker asked, on <CODE>comp.lang.perl.misc</CODE>, whether it wouldn't be nice for Perl to recognize additional kinds of
parentheses once Unicode support is really in. For example, U+3010 

<IMG SRC="http://charts.unicode.org/Unicode.charts/Small.Glyphs/30/U3010.gif">
 and U+3011 <IMG SRC="http://charts.unicode.org/Unicode.charts/Small.Glyphs/30/U3011.gif">
are left and right `black lenticular brackets'. The <CODE>q</CODE> operator understands <CODE>q{...}</CODE> and <CODE>q(....)</CODE>  <CODE>q[...]</CODE> and the like; why not the black lenticular brackets also?

<P>
Kragen also suggested that, the Japanese `corner quote' characters U+300C <IMG SRC="http://charts.unicode.org/Unicode.charts/Small.Glyphs/30/U300C.gif">
and U+300D <IMG SRC="http://charts.unicode.org/Unicode.charts/Small.Glyphs/30/U300D.gif">
(for example) could be used to imply the <CODE>qr</CODE> operator, in the same way that ordinary double quotes presently imply the <CODE>qq</CODE> operator and ordinary backquotes imply the <CODE>qx</CODE> operator.

<P>
Ilya thought it was worth forwarding to <CODE>p5p</CODE>: <A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00623.html">``Once Unicode goes in, one would not be able to change matching rules.
So it should be at least <em>discussed</em> early.''</A> But nobody had anything to
say about it.

<P>



<P>

<H3><A NAME="Lexical_or_dynamic_scope_for_C_u">Lexical or dynamic scope for <CODE>use utf8</CODE>?</A></H3>
<P>
It is presently lexically scoped. There was discussion some weeks ago about
whether to make it dynamically scoped; then the caller of a function could
set the <CODE>utf8</CODE> behavior of the library functions it called. I did not
understand the issues at the time, so I cannot rehash them here.  

<P>
<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00739.html">Sarathy asked for informed persons to contribute their thoughts</a>, but there
were none. 

<P>



<P>

<H3><A NAME="Full_path_of_cwd_in_C_INC_">Full path of cwd in <CODE>@INC</CODE></A></H3>
<P>
Ed Peschko asked if it would be possible to include the full path of the
current directory in <CODE>@INC</CODE>, rather than just a dot. The usual objections: 1. There is already an easy
way to put the full path in, if that is what you want:  you use
the <CODE>FindBin</CODE> module. 2. It would be expensive for the large population that did not need
it.

<P>

<H3><A NAME="A_Strategic_Decision_to_use_the_">A Strategic Decision to use the Perl Compiler</A></H3>
<P>
Sounds like a bad move to me, but David Falk had this to say for himself:

<P>
<blockquote><A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg01158.html"> I am CEO of Dionaea Corporation, a software company that
designs performance monitoring tools for UNIX, and we have made the
strategic decision to use the <CODE>perlcc</CODE> compiler as the hub
of our code 
development. Overall this has been a good decision for us, but we have run
into several snags with the compiler.</A></blockquote>

<P>
He then reported the bugs.  They looked pretty simple, but nobody replied.
Scary to think that someone's family might starve in the streets because of
problems in the Perl compiler.

<P>


<P>

<H3><A NAME="Happy_Birthday_Perl_5">Happy Birthday Perl 5</A></H3>
<P>
Actually the real birthday was on 17 October, 1994, but there is an error
in <CODE>perlhist</CODE> so the birthday wishes arrived on the 18th.
(Nobody has supplied a patch yet.)

<P>
<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00726.html">Chris Nandor submitted a birthday patch.</A>

<P>



<P>

<H3><A NAME="Unicode_Character_Classes_Revisi">Unicode Character Classes Revisited</A></H3>
<P>
<a href="./THISWEEK-19991017.html#charclasses">Last week there was discussion
of use of Unicode properties to define regex character classes</a>.
People interested should also consider reading the <a
href="http://www.unicode.org/unicode/reports/tr18/">Unicode Regular
Expression Guidelines</a>.

<P>

<H3><A NAME="Sarathy_says_Yikes_again">Sarathy says `Yikes' again</A></H3>
<P>
<BLOCKQUOTE>

<A
HREF="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/1999-10/msg00598.html">``Yikes, this is one is the size of China.''</A>

</BLOCKQUOTE>

<P>


<P>

<H3><A NAME="Various">Various</A></H3>
<P>
A large collection of bug reports, bug fixes, non-bug reports, questions,
answers, and a small amount of flamage and spam.

<P>
Also, Tuomas Lukka continues to send email with an incorrect
<CODE>Date:</CODE> header.

<P>
Until next week I remain, your humble and obedient servant,

<hr>

<a href="mailto:mjd-perl-thisweek-199910+@plover.com">Mark-Jason Dominus</a>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1826" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/1999/10/p5pdigest/THISWEEK-19991017.html" rel="bookmark">This Week on p5p 1999/10/17</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="1999-10-17T00:00:00-08:00">October 17, 1999 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- This Week on perl5-porters<br>(11-17 October 1999) -->

<br />
<br /><ul>
<li><a href="#introduction">Introduction</a>
<li><a href="#devel500506">New Development Release 5.005_62</a>
<li><a href="#charclasses">Unicode Character Classes</a>
<li><a href="#bundling">Module Bundling and the proposed <tt>import</tt> pragma</a>
<li><a href="#fields"><tt>use fields</tt> allows overlapping member names</a>
<li><a href="#prepare"><tt>PREPARE</tt> functions and <tt>my Class $foo</tt> declarations</a>
<li><a href="#goto"><tt>goto</tt> Out of Conditional Bug</a>
<li><a href="#range">Regex Range Bug</a>
<li><a href="#lib"><tt>use lib</tt> change</a>
<li><a href="#pack">More discussion about documentation for <code>pack</code></a>
<li><a href="#microperl">MicroPerl</a>
<li><a href="#various">Various</a>
</ul>

<hr>

<h3><a name="introduction">Introduction</a></h3>

<p>This is intended to be a short summary of the major and important
threads of discussion on the perl5-porters mailing list this week.</p>


<p>I am trying to add value to the summary by omitting threads that I
perceive as uninteresting.  For example, you often see threads of this
type:</p>

<dl>
  <dt><b>Person A</b><dd>Here is a problem with Perl when you try to do X. I propose solution S.
  <dt><b>Person B</b><dd>Solution S is unnecessary because you can do Y instead.
  <dt><b>Person A</b><dd>No, that does not work, because of Z.
  <dt><b>Person B</b><dd>Oh, I totally misunderstood what you were doing.
  <dt><b>Person C</b><dd>But solution S will break existing code.
  <dt><b>Person A</b><dd>No, it won't.
  <dt><b>Person C</b><dd>Oh, you're right.  I thought you meant something else.
  <dt><b>Person A</b><dd>Here is a patch to implement solution S.
</dl>

<p>I am going to try to omit these blind alleys. I will also try to
omit some other types of messages:</p>

<dl>
  <dt><b>Person D</b><dd>Why are submitting a patch for S when we know it
  will break old code and anyway you could be doing Y instead?
  <dt><b>Person E</b><dd>Fortran has adopted solution S.  Perl is not
  Fortran; therefore solution S is no good.  If you want Fortran, you
  know where to find it.
  <dt><b>Person F</b><dd>You shut up.
  <dt><b>Person G</b><dd>No, you shut up.
  <dt><b>Person H</b><dd>Your formatting style offends me profoundly.
  Can't you get a real mailer?
  <dt><b>Person I</b><dd>How can I develop CGI scripts offline on my
  W98 machine?
  <dt><b>Person J</b><dd>P5P is not a help desk.
  <dt><b>Person K</b><dd>I am writing to report a bug in the <tt>localtime</tt> function.  It returns the wrong month.
  <dt><b>Person L</b><dd>WORK FROM HOME!!!!
</dl>  

<p>A lot of the stuff I omitted is on topic and has real value, but
isn't particularly interesting.  For example I have omitted a bunch of
cases where someone submitted a minor patch that was accepted with no
discsusion.  I omitted some discussions that did not seem to be of
general interest.  For example, this week, Brad Appleton and Ilya
Zakharevich had an exchange about the pod-formatting features of
cperl-mode.</p>

<p>It is hard to keep track of everything, and I may occasionally omit
  something you think is important, or I might misunderstand some
  important issue.  Your additions and emendations are welcome.
  Please send any corrections, suggestions, additions, or
  embellishments to <tt>mjd-perl-thisweek-YYYYMM@plover.com</tt> where <tt>YYYYMM</tt>
  is the current year and month.  For a more complete view of
  perl5-porters, either subscribe to the mailing list or <a
  href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/">check
  the archive</a>.</p>

<p>I wanted to include hot links to the relevant messages in the
archive,  but the archive was down and I could not get the URLs.
This will be corrected in a future issue, even if we have to start our
own archive.</p>


<h3><a name="devel500506">New Development Release 5.005_62</a></h3>

<p>Sarathy announced the release of development version 5.005_62.  It
is available from <a
href="/CPAN/src/perl5.005_62.tar.gz">CPAN</a>.</p>

<p>Changes since 5.005_61 include:</p>

<ul>
<li> more 64-bit enhancements: 64-bit <tt>vec()</tt>, lfs fixes (Jarkko Hietaniemi)
<li> <tt>our</tt> declarations (Larry Wall)
<li> <tt>sub foo : attrs</tt>, <tt>use attrs</tt> deprecated (Spider Boardman)
<li> Configure: new flag <tt>-Accflags=stuff</tt> (Jarkko Hietaniemi)
<li> lvalue subroutines <font color="red">breaks <tt>\(Foo->bar())</tt></font> (Ilya Zakharevich and Tuomas Lukka)
<li> added <tt>File::Glob</tt> (was <tt>File::BSDGlob</tt> from Greg Bacon)
<li> building perl with <tt>-DPERL_INTERNAL_GLOB</tt> will do implicit
    <tt>use File::Glob 'globally'</tt>
<li> <tt>use strict</tt> generates true errors, not fatal warnings
<li> new <tt>-DPERL_Y2KWARN</tt> option for <tt>"19$yr"</tt> and <tt>sprintf "19%d", $yr</tt>
    (Ulrich Pfeifer)
<li> <tt>exists()</tt> works better on pseudo-hashes (Michael Schwern)
<li> warnings on invalid escapes in char ranges (Jarkko Hietaniemi)
<li> comments in <tt>pack</tt> templates allowed (Ilya Zakharevich)
<li> subroutine context could be popped too soon, leading to Tk
    coredumps (Russel O'Connor)
<li> 64bit-safe macros for <tt>int->ptr</tt> and <tt>ptr->int</tt> typecasts (Robin Barker)
<li> fix for <tt>POPSTACK</tt> panics
<li> fixes for memory leaks when is <tt>@_</tt> modified
<li> <tt>%@</tt> "leaks", gone
<li> <tt>END</tt> blocks not run under <tt>-c</tt> switch
<li> <tt>die</tt>/<tt>warn</tt> go to <tt>STDERR</tt>, not <tt>PerlIO_stderr()</tt>
<li> <tt>\C{foo}</tt> has been renamed to <tt>\N{foo}</tt>
<li> <tt>pack</tt> template <tt>Z</tt> always packs a null byte
<li> <tt>POSIX::strftime()</tt> bugs (Spider Boardman and Jan Dubois)
<li> <tt>xsubpp</tt> understands function pointers, undocumented (Ilya Zakharevich)
<li> <tt>h2xs</tt> more selective, and works with opaque types (Ilya Zakharevich)
<li> <tt>use lib</tt> doesn't keep dups
<li> <tt>MakeMaker</tt> support for uninstalled perl, undocumented (Ilya Zakharevich)
<li> <tt>Benchmark</tt> enhancements (Barrie Slaymaker)
<li> warning on <tt>join(/foo/,...)</tt> (Mark-Jason Dominus)
<li> <tt>perlcc</tt> supports other backends (Tom Hughes)
<li> more descriptive diagnostics about opcodes (Michael Schwern)
<li> Unicode database updated to 3.0-ish (unicode.org)
<li> EPOC updates (Olaf Flebbe)
<li> DOS updates (Laszlo Molnar)
<li> VMS updates (Charles Bailey and others)
<li> Win32 updates: Windows 95 support, faster <tt>opendir()</tt>, <tt>use Shell</tt>    support (Benjamin Stuhl, Jochen Wiedmann, Jenda Krynicky and others)
<li> cygwin updates (Eric Fifer and others)
<li> JPL updates (Brian Jepson)
<li> Compiler updates (Vishal Bhatia)
<li> <tt>DB_File</tt> update to 1.71 (Paul Marquess)
<li> <tt>PodParser</tt> update to 1.085 (Brad Appleton)
<li> <tt>pod2text</tt>, <tt>pod2man</tt> replaced by <tt>podlators-0.08</tt> (Russ Allbery)
<li> <tt>Getopt::Long</tt> 2.20 (Johan Vromans)
<li> <tt>perlcompile.pod</tt>, <tt>perlhack.pod</tt> (Nathan Torkington)
<li> lots of pod adjustments
<li> lots of other bug fixes
</ul>

<p>Sarathy also said that he was moving into beta mode for the
upcoming version 5.6.</p>

<h3><a name="charclasses">Unicode Character Classes</a></h3>

<p>Jarkko realized that since Perl was moving into beta mode for 5.6,
this was his last chance to propose a new feature.  He wants Perl
regexes to support the `equivalence class' feature of POSIX 1003.2.
What this means is that certain characters in the character set may be
deemed `equivalent', and the notation <tt>[=<var>c</var>=]</tt>
denotes a character class containing all the characters equivalent to
<tt><var>c</var></tt>.</p>

<p>How do you decide which characters are considered `equivalent'?
Unicode provides a definition that allows you to understand a
character like <tt>&eacute</tt>; as an <tt>e</tt> with an acute
accent; we could have Perl understand this to be equivalent to a plain
<tt>e</tt>.  Then the notation <tt>[=e=]</tt> would match any of
<tt>e</tt>, <tt>&eacute;</tt>, <tt>&egrave;</tt>, <tt>&euml;</tt>, or
<tt>&ecirc;</tt>.  This might be useful.<p>

<p> Jarkko also wants people to be able to define their own
equivalence relations, and he wants the <tt>m//</tt> and <tt>s///</tt>
operators to support a new option, analogous<!-- thanks, Jon --> to
<tt>/i</tt>, which would say to ignore all diacritical marks, again
using the Unicode tables to decide what a diacritical mark is.</p>

<p>People brought up a number of potential problems; for example, in
Danish, the character <tt>&aring;</tt> (U00E5) is considered to be an
entirely different letter from <tt>a</tt> and not equivalent to it at
all.  But according to Unicode, <tt>&aring;</tt> is indeed an
<tt>a</tt> with a diacritical mark.  (Jarkko: ``Ha!  I am just expecting some Danes . . .  to jump up
here and wave frantically their hands. . . '' )
</p>

<p>Discussion continues; I will deliver an update next week if there
is anything to report.  By the way, the <a
href="http://charts.unicode.org/">Unicode code charts</a> are great
browsing.  <a href="ftp://ftp.unicode.org/Public/UNIDATA/">The
databases that say which characters are composed from which others</a>
are interesting too.</p>

<h3><a name="bundling">Module Bundling and the proposed <font face="courier">import</font> pragma</a></h3>

<p>Tim Bunce forwarded a message that Michael King had sent to the
<tt>modules@perl.com</tt> mailing list.  Michael had written a new
module, which he named <tt>import</tt>.  The idea of <tt>import</tt> is
this: Suppose you have a bunch of modules that are for internal use at
your company only.  You are worried about namespace collisions with
CPAN modules.  You can name your internal-use modules with names that
all begin with <tt>com::yourcompany</tt> and then use</p>

<pre>
 use import 'com::yourcompany';
</pre>

<p>This does two things.  First, it locates <em>all</em> modules in
the <tt>com::yourcompany</tt> space on the local machine and imports
them all.  But second, it imports each <tt>com::yourcompany::Foo</tt>
module with the <tt>com::yourcompany</tt> part stripped off.  This
means that if, for example, you have a
<tt>com::yourcompany::Template</tt> module, you can now call
<tt>Template->new()</tt> instead of
<tt>com::yourcompany::Template->new()</tt>.   

<p>Michael says that this is like the <tt>import</tt> keyword in
Java.</p>

<p>This touched off a number of interesting discussions:</p>

<ol>
  <li><p>Andreas K&ouml;nig suggested that Perl should support a 
<pre>
 package "www.foo.org";
</pre>

      directive which would be equivalent to <tt>package
      org::foo::www;</tt>.  But Chip Salzenberg said that this was
      usually understood to have been a bad idea, because
      organizations often change URLs for various reasons.  For
      example, <tt>foo.com</tt> and <tt>bar.com</tt> might merge to
      become <tt>foobar.com</tt>.  Says Chip:  <em>One of the best
      things about CPAN is that it is the de facto root namespace for
      all shared Perl modules.  Let's not throw that 
      away!</em> </p>

  <li><p>This led to a general discussion about how entire module
      namespaces might be reserved.</p>

      <p>Damian Conway pointed out that we could
      simply establish the convention that if you have a PAUSE id,
      that module space is reserved for you.  For example, Damian's
      PAUSE id is DCONWAY; under this convention, all modules
      beginning with <tt>DCONWAY::*</tt> would belong to him.</p>

      <p>Problems with this scheme: Uri Guttman would now own the
      <tt>URI::*</tt> space, including the <tt>URI::URL</tt> module.
      Nick Ing-Simmons's PAUSE id is <tt>NI-S</tt>, which is not a
      valid package identifier. </p>

  <li><p>John Redford suggested a module that lets you
      bundle many modules into one.  He says:

<blockquote>Then you could
write a bundling module, like this:

<pre>
                package MyCompany::CGIBundle;
                use MyCompany::CGI::BobsCode::Foo;
                use MyCompany::CGI::Test::Bar;
                use MyCompany::CGI::BobsBetterCode::Foo2;
                ....
                use NameSpace::Transitive;
</pre>

And then people could just write:

<pre>
                use MyCompany::CGIBundle;
</pre>

to get all the symbols that were exported into
<tt>MyCompany::CGIBundle</tt> re-exported into their own namespace.


</blockquote></p>

      <p>I had written a module something like this back in
      February, so I decided that put it on CPAN.  It is now available at <a
      href="/CPAN/authors/id/MJD/ModuleBundle-0.01.tar.gz">ModuleBundle-0.01d</a>.
      Nick Ing-Simmons also pointed out that his <tt>Tk::widgets</tt>
      module does something similar:  <tt>use TK::widgets qw(Text
      Entry Canvas)</tt> is equivalent to:</p>

<pre>
 use Tk::Text ();
 use Tk::Entry ();
 use Tk::Canvas();
</pre>

<!--     <p>Nick's message: &amp;amp;amp;amp;amp;lt;199910160922.KAA15935@bactrian.ni-s.u-net.com&amp;amp;amp;amp;amp;gt;</p>-->

  <li><p>A couple of people wanted the two functions of this module to
  be separated. They liked the idea of being able to alias namespaces,
  so that the objects in <tt>com::yourcompany::Template</tt> could be
  referred to as if they were in <tt>Template</tt>, but they were
  worried about the other function, which is to locate and import a
  whole lot of stuff indiscriminately.  There was some discussion of a
  namespace aliasing pragma, or of adding this functionality to the
  existing <tt>Alias</tt> module.</p>

</ol>

<p>There were also a number of uninteresting discussions: Someone
wanted to know what would happen if you said <tt>use import
'CGI'</tt>.  Michael's answer to that was that that was not what
<tt>import</tt> was for and that whoever did that would get the
bizarre behavior that they deserved.  That did not stop a lot of
people from making a big fuss about it, however.  One person even said
``If you want that functionality, why don't you write a module to do
that?'' apparently having forgotten that the way the discussion
started was that Michael had written a module to do that, notified the
modules list, and then Tim Bunce forwarded his note to P5P.</p>

<p>It appears that Michael is now pursuing a name in the
<tt>Import</tt> namespace, and may make some changes to the module's
calling interface to better seprate the two functions of his
module.</p>

<h3><a name="fields"><font face="courier">use fields</font> allows overlapping member names</a></h3>

<p>Tuomas Lukka discovered a gotcha in <tt>field.pm</tt>.  The gotcha
is this: Suppose you have a base and a derived class, and both contain
a field with the same name, say <tt>f</tt>.  Suppose the method
<tt>m</tt> is defined in the base class and inherited by the derived
class. Now create an object of the derived class, and call <tt>m</tt>
on the object.  Suppose <tt>m</tt> contains code to modify field
<tt>f</tt>.  There are two fields named <tt>f</tt>.  Which one will be
modified?  </p>

<p>You would expect that, because <tt>m</tt> is defined in the base
class, it should modify the base class's <tt>f</tt>.  And so it does,
if <tt>m</tt> is written correctly:</p>

<pre>
 package Base;

 sub m {
   my Base $self = shift;
   $self->{f} = 'newvalue';   # Modifies base class field f
 }
</pre> 

<p>But if you accidentally write <tt>my $self</tt> instead of <tt>my
Base $self</tt>, it modifies the wrong member:</p>

<pre>
 package Base;

 sub m {
   my $self = shift;
   $self->{f} = 'newvalue';   # Modifies DERIVED class field f
 }
</pre> 

<p>Tuomas points out that the declaration and use of <tt>$self</tt>
might be very far apart, and that a mistake in a far-away declaration
could introduce a bug in the program that was difficult to find.
Worse, suppose the object was stored inside some other object, so that
instead of <tt>$self->{f}</tt> you had
<tt>$object->{subobject}->{f}</tt>; in this case no declaration at all
applies and you get the same problem.</p>

<p>Tuomas' solution is to simply forbid conflicting field names.  
<tt>fields.pm</tt> and <tt>base.pm</tt> will detect this and throw a
fatal exception if they detect that a derived class is using a member
with the same name as one of its parent classes.</p>

<p>Tuomas's rationale: It is very dangerous at present, and is `action
at a distance', which means that two apparently unrelated declarations
far away, even in entirely different files, might drastially alter the
behavior of a subroutine in a third location.  The prohibition can be
lifted later if a way is found to make it safer, and nobody appears to
be using it now.  (Someone thought they were, but realized they were
mistaken.)</p>

<p>Sarathy appeared to be persuaded that the situation required at
least a warning.  Tuomas is pushing for a fatal compile-time error.</p>

<h3><a name="prepare"><font face="courier">PREPARE</font> functions and <font face="courier">my Class $foo</a></font>
declarations</h3>

<p>Ilya had submitted a patch which would have made <tt>my Class
$foo;</tt> behave as if you had also written
<tt>Class-&gt;PREPARE($foo)</tt>, if there was such a method.  If you
had <tt>my Class $foo = 'bar'</tt> instead, the assignment would occur
after the <tt>PREPARE</tt> call.
</p>

<p>Sarathy did not like the implementation, for reasons I did not
completely understand.  Sarathy did not like that an <tt>AUTOLOAD</tt>
call would be made at compile time if <tt>PREPARE</tt> was not found
where it was supposed to be.  Ilya did this by analogy with
<tt>DESTROY</tt>, but the compile-time call to <tt>AUTOLOAD</tt> is
peculiar.  (Sarathy: ``Yikes!'')  Sarathy also objected to the way
that the check for <tt>PREPARE</tt> was done at compile time, rather
than at run time; Ilya said he did it that way for efficiency so that
the check would not have to be done every time the declaration was
executed.</p>

<p>Sarathy also complained that even though most uses of <tt>my Class
$foo</tt> would not involve <tt>PREPARE</tt>, the compiler would have
to make an <tt>AUTOLOAD</tt> call for each one of them.  Ilya appeared
to agree that this was a problem.  Sarathy suggested a pragma that
declares the <tt>PREPARE</tt> method for a class.  Ilya pointed out
that if the autloading part was removed from his patch, then the
definition of the <tt>PREPARE</tt> subroutine itself would serve as
exactly such a pragma.</p>


<p>An interesting sidetrack developed: Chip said it would be simpler
in Topaz if the argument to <tt>PREPARE</tt> were <tt>\$foo</tt> rather
than just <tt>$foo</tt>.  Ilya said he did not want to do that because
constructing a reference costs as much as 21 `simple' operations.
What this means is: Perl takes a certain amount of time to dispatch
each operation.  For some `simple' operations, such as performing a
scalar assignment, the time to actually perform the operation is
dominated by the opcode dispatch time, so they all take about the same
amount of time.  Constructing a scalar reference, according to Ilya,
takes 21 times as long as one of these `simple' operations, and
constructing an array reference takes 50 times as long.  Chip was
surprised, and so am I.</p>

<h3><a name="goto"><font face="courier">goto</font> Out of Conditional Bug</a></h3>

<p>Damien Neil reported a bug in 5.005_03 that is triggered when you
use <tt>goto</tt> out of a conditional block.  He also supplied a
patch.  Watch out for Damien&#151newcomers who provide core patches are
people to pay attention to.</p>

<p> Sarathy said that this was already fixed in the development
version.  His solution is a little different.  Damien's patch wraps up
each branch of the <tt>if</tt> as a separate block; Sarathy's wraps up
the entire <tt>if</tt> as one block.  Sarathy wants to keep his patch
because it makes the op tree smaller and so the code is faster at run
time.  But he notes that Damien's approach might be better if the
peephole optimizer could be instructed to remove the extra
instructions for blocks that do not contain <tt>goto</tt>.  </p>

<h3><a name="range">Regex Range Bug</a></h3>

<p>Faisal Nasim had trouble with a regex that included <tt>[\w-]</tt>
and <tt>[\w-.]</tt>.  Different versions of Perl behaved differently
for this, depending on whether the <tt>-</tt> was seen as indicating a
range or not.  5.005_03 interpreted it as if you had written
<tt>[\w\-.]</tt>; 5.005_62 generated a syntax error.  (``Invalid
range''.)  This was Jarkko's doing.  Opinions varied about what
behavior was best, especially since the documentation seemed to
support the latter view&#151but the changed behavior broke old code, as
Faisal pointed out.</p>

<p>Larry suggested making it a warning.  Jarkko thought this was
peachy and put in the patch.  While on the subject, he put in a
warning for use of <tt>\A</tt> etc. in character classes.</p>

<h3><a name="lib"><font face="courier">use lib</font> change</a></h3>

<p>Tod Irwin wants <tt>use lib 'foo'</tt> to append <tt>foo</tt> to
the front of <tt>@INC</tt> (which it does already) and to also remove
any <em>other</em> appearances of <tt>foo</tt> that happen to be in
<tt>@INC</tt> already.  His motivation:  <tt>mod_perl</tt> scripts
that have <tt>use lib</tt> have <tt>@INC</tt> lists that get longer
and longer and longer.</p>

<p>There were some objections, but the change is in.</p>

<blockquote>
<p><b>Nick Ing-Simmons:</b> Modules which inject things into <tt>@INC</tt> are highly suspect
beasts - its like lacing the fruit juice with vodka.  
</blockquote>

<h3><a name="pack">More discussion about documentation for <font face="courier">pack</font></a></h3>

<p>A discussion about the documentation for <tt>pack</tt> finished
up.  I wouldn't have mentioned this, except:</p>

<blockquote>
<p><b>Sarathy:</b> What would you suggest [the format specifier] <tt>@*</tt> should mean?</p>

<p><b>Ilya:</b> Call the cops.</p>
</blockquote>

<h3><a name="microperl">MicroPerl</a></h3>

<p>This almost slipped by me, but I wrote to ask Ilya what it was
about.  Here's what he said:</p>

<blockquote>
<p>Build Perl without Configure support.  First you build a
bastardized version (nanoperl), use it to build a correctly working
version with some functionality missing (microperl), then use this to
run <tt>Configure.PL</tt> which will make an analogue of
<tt>config.sh</tt>, then you continue with miniperl and perl as
before.</p>

<p>The supplied target crazyperl is <em>very</em> close to become nanoperl of
the above classification.  Minor changes to supplied <tt>micro0/config.sh</tt>
should (when bugs are ironed out) produce a microperl.</p>

<p>Currently crazyperl passes a lot of tests.  This should be improved
yet more (apparently the code <em>is</em> there to support the situation when
no non-portable services are found, but it has some bugs).</p>
</blockquote>

<p>Aren't you glad I asked? I sure am.</p>

<h3><a name="various">Various</a></h3>

<p>Also a large collection of bug reports, bug fixes, questions,
answers, and a small amount of flamage and spam.</p>




<p>Until next week I remain, your humble and obedient servant,<br>

<hr>

<a href="mailto:mjd-perl-thisweek-199910+@plover.com">Mark-Jason Dominus</a>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1836" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/1999/10/perltk/" rel="bookmark">Perl/Tk Tutorial</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Brett Berry</span> on <abbr class="published" title="1999-10-15T00:00:00-08:00">October 15, 1999 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>
<table width="280" cellspacing="0" cellpadding="4" align="right" border="1">
<tr>
<td bgcolor="#0033cc" valign="top" align="center">
<font color="#ffffff">Table of Contents</td>
<tr>
<td width="280" valign="top">
<p class="fine"><font size="1">
&#149; <a href="/1999/10/perltk/sld001.htm">Essential Perl/Tk Programming</a><br />
&#149; <a href="/1999/10/perltk/sld002.htm">A Graphic Authorizing Example</a><br />
&#149; <a href="/pub/1999/10/perltk/sld003.htm">TK Overview</a><br />
&#149; <a href="/pub/1999/10/perltk/sld004.htm">A Pay Calculator Example</a><br />
&#149; <a href="/pub/1999/10/perltk/sld005.htm">Creating A Window</a><br />
&#149; <a href="/pub/1999/10/perltk/sld006.htm">Adding A Menubar</a><br />
&#149; <a href="/pub/1999/10/perltk/sld007.htm">Adding Choices To A Menubar</a><br />
&#149; <a href="/pub/1999/10/perltk/sld008.htm">More Menubar Choices</a><br />
&#149; <a href="/pub/1999/10/perltk/sld009.htm">Adding Frames To A Window</a><br />
&#149; <a href="/pub/1999/10/perltk/sld010.htm">Adding Labels To A Frame</a><br />
&#149; <a href="/pub/1999/10/perltk/sld011.htm">Labels For Display Purposes</a><br />
&#149; <a href="/pub/1999/10/perltk/sld012.htm">More Display Labels</a><br />
&#149; <a href="/pub/1999/10/perltk/sld013.htm">One More Set</a><br />
&#149; <a href="/pub/1999/10/perltk/sld014.htm">Adding A Widget Separator</a><br />
&#149; <a href="/pub/1999/10/perltk/sld015.htm">Add Descriptive Labels</a><br />
&#149; <a href="/pub/1999/10/perltk/sld016.htm">Adding Text Entry Boxes</a><br />
&#149; <a href="/pub/1999/10/perltk/sld017.htm">Adding Functional Buttons</a><br />
&#149; <a href="/pub/1999/10/perltk/sld018.htm">Adding A Checkbox</a><br />
&#149; <a href="/pub/1999/10/perltk/sld019.htm">Initial Window Placement</a><br />
&#149; <a href="/pub/1999/10/perltk/sld020.htm">Radiobutton Example</a><br />
&#149; <a href="/pub/1999/10/perltk/sld021.htm">Creating A Window</a><br />
&#149; <a href="/pub/1999/10/perltk/sld022.htm">Adding Frames To A Window</a><br />
&#149; <a href="/pub/1999/10/perltk/sld023.htm">Adding A Status Display Area</a><br />
&#149; <a href="/pub/1999/10/perltk/sld024.htm">Adding Radiobuttons</a><br />
&#149; <a href="/pub/1999/10/perltk/sld025.htm">Adding An EXIT Button</a><br />
&#149; <a href="/pub/1999/10/perltk/sld026.htm">Radiobutton Graphic Examples</a><br />
&#149; <a href="/pub/1999/10/perltk/sld027.htm">Increment & Decrement: A Date Example</a><br />
&#149; <a href="/pub/1999/10/perltk/sld028.htm">Adding A Window And Frame</a><br />
&#149; <a href="/pub/1999/10/perltk/sld029.htm">Adding Buttons And Text Label</a><br />
&#149; <a href="/pub/1999/10/perltk/sld030.htm">Displaying Current Date</a><br />
&#149; <a href="/pub/1999/10/perltk/sld031.htm">Date Changing Graphic Examples</a><br />
</font>
</p>
</td>
</tr>
</table>
<!-- Perl/Tk Tutorial -->

<br />
<br />

<p>This presentation was created for a meeting of AZSage (see <a href="http://www.azsage.org">http://www.azsage.org</a>).  "I had been attending monthly
AZSage meetings for over a year," said Brett Berry, "and finally I had something worth
presenting.  The presentation was aimed at the Perl/Tk novice, and there
was a whole lot of ad-lib comedy to keep the mood light, and the people
awake!"</p> 
<p>
On Perl.com, we are presenting this as part of what we hope will be an ongoing series of articles, titled
"Source Illustrated."   The presentation by Lee and Brett is a wonderfully concise example of showing 
annotated code and its result.  There's no running narrative; just a code-walkthrough that is a very 
interesting way to learn how these examples work.</p>  

<p><a href="/pub/1999/10/perltk/sld001.htm" target="illustration" onClick="openWin('/pub/1999/10/perltk/sld001.htm','640','640');return false;"><img src="/pub/1999/10/perltk/illustration.gif" border=0 width=100 height=50 alt="click to load illustration"></a> 

<script language="JavaScript">
<!--

browser = (((navigator.appName == "Microsoft Internet Explorer") && (parseInt(navigator.appVersion) <= 3 )))

function openWin(url,Wwidth,Wheight){
  if (!(Wwidth)) {
    Wwidth = '600';
  }
  if (!(Wheight)) {
    Wheight = '600';
  }

  if (!(browser)) { 
    var W = window.open(url,"illustration","toolbar=no,width=" + Wwidth + ",height=" + Wheight + ",directories=no,status=no,resizable=yes,menubar=no,location=no,copyhistory=no,scrollbars=yes")    
    if (W == null) {
      W = window.open(url,"illustration","toolbar=no,width=" + Wwidth + ",height=" + Wheight + ",directories=no,status=no,resizable=yes,menubar=no,location=no,copyhistory=no,scollbars=yes")
    }
  } else {
    window.location = "url";
  }
} 

// -->

</script>

<br />
<br />
<p>
<i>Lee Minniear and Brett Berry are in business together, offering the world Business
Card CDs and such.  Visit them at 
<A href="http://www.SculptedCD.com">SculptedCD.com</A></i>
</p>
<br />
<br />
<br />
        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/1999/09/">&laquo; September 1999</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/1999/11/">November 1999 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
