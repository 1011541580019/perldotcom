<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.02" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
    
    <link rel="prev bookmark" href="/pub/2001/06/20010625.html" title="This Week on p5p 2001/06/25" />
    <link rel="next bookmark" href="/pub/2001/06/ctoperl.html" title="Why Not Translate Perl to C?" />
    
    
    <title>CGI Scripting - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <div id="top_advert"> 
<!-- Put any landscape advert in here -->
<a href="http://www.perlfoundation.org/" target="_new">
<img src="/i/tpf_banner.png" width="468" height="60" /></a>
        </div> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description"></div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1530" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">CGI Scripting</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">perl.com</span> on <abbr class="published" title="2001-06-26T00:00:00-08:00">June 26, 2001 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        <p>This article is about scripting in Perl. Of course, scripting can take place anywhere, not just in the context of the Web. I will concentrate on CGI scripts written in Perl. In fact, virtually any language could be used to write CGI scripts.</p>
<p>Perl has been ported to about 70 operating systems. The most recent (February 2001) is Windows CE. In this article I will make a lot of simplifications and generalizations. Here's the first ...</p>
<p>There are two types of CGI scripts:
<ul>
<li>
Those that output HTML pages</li>

<li>Those that process the input from CGI forms</li>
</ul>

<p>Invariably, the second type -- having processed the data -- will output an HTML page or form
to allow the user to continue, or at least know what happened, or they will do a CGI redirect to
another script that outputs something.

<p>I am splitting scripts in to two type to emphasize that there are differences between
processing forms and processing in the absence of forms.

<h3>Terminology</h3>
<p>
There are Web Servers and Web Clients. Some Web clients are browsers.

<p>There are programs and scripts. Once upon a time, programs were compiled and scripts were
interpreted. Hence the two names. But today, this is ``a distinction without a difference.'' My attitude is that the two words,
program and script, are interchangable.

<p>Program and process, however, are different.
Program means a program on disk.

Process means a program that has been loaded by the operating system into memory and
it being executed. This means a single program on disk can be loaded and run several
times simultaneously, in which case it is one program and several processes.</p>

<p>Web servers have names such as Apache, Zeus, MS IIS and TinyHTTPd. Apache and TinyHTTPd (Tiny
HyperText Transfer Protocol Daemon) are open source. Zeus and MS IIS (Internet Information
Server) are commercial products.
The feeble security of IIS makes it unusable in a commercial environment.

<p>My examples will use Apache as the Web server.
Web clients that are browsers have names such as Opera, Netscape and Explorer.

Of course, you can roll your own non-browser Web client. We'll do this below.</p>

<h3>URI = URL + URN</h3>
<p>
You'll notice the three letters I, L and N are in alphabetical order. That's the way to
remember this formula.
<pre>
U => Uniform
R => Resource
I => Indicator
L => Location
N => Name
</pre>

<h3>Web Server Start Up</h3>

<p>When a Web server starts running, these are the basic steps taken:
<ul>
<li>Read configuration file. With Apache, you can use Perl to analyze certains parts of the config file. With Apache, you can even use Perl inside the config file</li>

<li>Start subprocesses (depending on platform)</li>

<li>Become quiescent, i.e. wait for requests from Web clients</li>
</ul>
<p>It doesn't matter which Web server you are using, and it doesn't matter if the Web
server is running under Unix or Windows or any other OS. These principles will apply.

<h3>Web Server Request Loop
</h3>
<p>The Web server request loop, simplified (as always), has several steps:
<ul>
<li>Accept request from Web client</li>

<li>Process request. This means one of the following:
 <ul>
 <li>Read a disk file containing an HTML page (the file = the page = the response)</li>
 <li>Run a script (its ouput = the response)</li>
 <li>Service the request using code within the Web server. If you submit this to Apache, http://127.0.0.1/server-info, Apache fabricates the response</li>
</ul>
</li>
<li>The script fabricates an HTML page and writes it to STDOUT. The Web server captures
STDOUT. This output is the body of the response. The script exits</li>

<li>Send response body, wrapped in the appropriate headers, to the Web client</li>
</ul>
<p>
Pictorially, we have an infinity symbol, i.e. a figure eight on its side:

<pre>
+------+  1 -Request--->  +------+  2 -Action-->  +------+
| Web  |  (URI or Submit) | Web  |  (script.pl)   | Perl |
|Client|                  |Server|                |Script|
+------+  &lt;--Response- 4  +------+  &lt;---HTML-- 3  +------+
         (Header and HTML)    (Plain page or CGI form)
</pre>
<p>Things to note:

<ol>
<li>The interaction starts from the Web client</li>

<li>The interaction is a round trip</li>

<li>The Web client uses the HyperText Transfer Protocol to format Request 1:
 <ul><li>The URI will be sent as text in the message
 </li>
 <li>The data from a submitted form will be sent using the CGI protocol</li>
 <li>In both cases, the HTTP will be used to generate an envelope wrapped around the message content
</li></ul>
 In reality, of course, messages 1 and 4 will be wrapped in TCP/IP envelopes, and
 meesages 2 and 3 will be mediated (handled) by the OS.</li>

<li>Action 2 is a request from the Web server to the operating system to load and
run a script. Many issued arise here. A brief summary:
 <ul>
 <li>Does the Web server have permission to run this script? After all, the Web server is a program, so it means it was loaded and run by some user, often
  a special user called ``nobody.'' So does this ``nobody'' have permission to run script.pl?</li>
<li>Does this particular Web client have permission? The Web server will check
directory-access permissions and may have to ask the Web client for a username
  and a password before proceeding</li>
<li>Does the script have permission to read/write whatever directories it needs to
  to do its work? For instance, to put a Web front-end on CVS requires that
  ``nobody'' have read access to the source code repository, or that the script
  opens a socket to another script that can access the repository
</li></ul>
<li>Action 3 is a stream of HTML output by the script and is captured by the Web server.</li>

<li>Response 4 is the output from the script wrapped in an envelope of headers according
 to the HTTP.</li>

<li>The Web client cannot see the source code of the script, only the output of the
script. If the Web client, e.g. a browser, offers to download the script and pops up
a dialog box asking for the name of a file to save the script in, then the
Web server clearly did not execute the script. This means the Web server is misconfigured.</li>

<li>If the first execute of the script outputs a CGI form, then when the Web client
submits that form, the script is rerun to process the form's data. That's right, the
script would normally be run twice. In other words, the first time the script runs it
sees it has no input data, so it outputs an empty form. The second time it runs it sees
it has input data, so it reads and processes that data. Yes, they could be two separate
scripts. When the form is output, the ``action'' clause specifies the name of the script
that the Web server will run to process the form's data.</li></ol>

<h3>Web Server Directory Structure
</h3>

<p>But how does the Web server know which page to return or which script to run? To answer
this we next look at the directory structure on the Web server's machine.</p>

<p>Below, Monash and Rusden are the names of university campuses.</p>

<p>monash.edu and rusden.edu will be listed under the ``Virtual Hosts'' part of httpd.conf,
or, if you are running MS Windows NT/2k, they can be named in the file
C:\WinNT\System32\Drivers\Etc\Hosts. Under other versions of Windows, the hosts file
will be C:\Windows\Hosts.</p>

<p>And a warning about the NT version of this file: Windows Explorer will lie to you about
the attributes of this file. You will have to log off as any user and log on as the
administrator to be able to save edits into this file.</p>

<p>See <a href="http://savage.net.au/Perl/Html/configure-apache.html">http://savage.net.au/Perl/Html/configure-apache.html</a> for details.

<p>Assume this directory structure:
<pre>
        - D:\
        -    www\
        -        cgi-bin\
        -            x.pl
        -        conf\
        -            httpd.conf
        -        public\
        -            index.html
        -            monash\
        -                index.html
        -            monash\staff
        -                mug-shots.html
        -            rusden\
        -                index.html
        -            rusden\staff
        -                courses.html
</pre>
<p>Note:<br />
&#149; D:\www\cgi-bin&nbsp;&nbsp;&nbsp;Contents can be executed by the Web server but not viewed by Web clients</p>

<p>&#149; D:\www\conf&nbsp;&nbsp;&nbsp;Contents invisible to Web clients</p>

<p>&#149; D:\www\public&nbsp;&nbsp;&nbsp;Contents can be viewed by Web clients</p>

<h3>Web Server Configuration</h3>

<p>Now, the Web server can be told, via its configuration file httpd.conf, that:

<ul>
<li>Web client requests using http://monash.edu/ are directed to D:\www\public\monash\.<br />
Hence, a request for http://monash.edu/staff/mug-shots.html returns the disk file
D:\www\public\monash\staff\mug-shots.html
</li>
<li>Web client requests using http://rusden.edu/ are directed to D:\www\public\rusden\.<br />
Hence a request for http://rusden.edu/staff/courses.html returns the disk file
D:\www\public\rusden\staff\courses.html
</li>
<li>Web client requests using http://monash.edu/cgi-bin/ are directed to D:\www\cgi-bin</li>

<li>Web client requests using http://rusden.edu/cgi-bin/ are directed to D:\www\cgi-bin</li>
</ul>
<p>Did you notice that both virtual hosts use D:\www\cgi-bin?
<pre>
 ================================================================
 These two hosts have their own document trees, but share scripts
 ================================================================
</pre>
<p>We can service any number of virtual hosts with only one copy of each script. This is a huge maintenance savings.</p>

<p>This is the information available to the Web server when a request comes in from a Web client. So, now let's look at the client side of things.</p>

<h3>A Perl Web Client</h3>

<p>
Here is a real, live, complete, Perl Web Client that is obviously not a browser:
<pre>
#!/usr/bin/perl
use LWP::Simple;
print get('http://savage.net.au/index.html');
</pre>

<p>Yes, folks, that's it. The work is managed by the Perl module ``LWP::Simple,'' and is
available thru the command ``get,'' which that module exports, i.e. makes public so it can
be used in scripts like this one. LWP stands for Library for Web programming in Perl.

<p>This code runs identically, from the command line, under Windows and Linux.

The output is ``print''ed to the screen, but not formatted according to the HTML.
</p>
<p>It's now time to step thru the Web server-Web client interaction.</p>

<h3>Web Client Requests</h3>

<p>When you type something such as ``rusden.edu'' into the browser's address field, or pass that
string to a Web client, and hit Go, here's an example of what could happen:</p>

<ul>
<li>The Web client says ``You're lazy,'' and prepends the default protocol to the string,
resulting in ``http://rusden.edu''
</li>
<li>The Web client says ``You're lazy,'' and appends the default directory to the string,
resulting in ``http://rusden.edu/''
</li>
<li>The Web client sends this to the Web server with some headers. This is the
all-important ``Request'' (see Web Server Request Loop)
</li>
<li>The Web server parses it and, using its configuration data, determines which disk
directory, if any, this maps to. I say ``if any'' because it may refer to a virtual, or non-existant, directory
</li>
<li>If the client asks for a directory, this would normally be converted (by the Web server)
into a request for a directory listing, or a default file, such as /index.html
</li>
<li>If the client asks for a script to be run, the request is processed as described above.
Of course, the client may not even know that a script is being run to service the request
</li>
<li>The Web server determines whether you have enough permission to access files in
this directory
</li>
<li>If so, the Web server reads this disk file into memory or runs the script, and sends
the result to the Web client with the appropriate headers.
This is the all-important ``Response''</li>
</ul>

<p>In reality, processing the request and manufacturing the response can be complex
procedures.
</p>

<h3>Web Pages</h3>

<p>There are two types of Web pages sent to Web clients:</p>

<ul>
<li>Those that contain passive text, which the Web client (or human operating a browser)
can do no more than look at
</li>
<li>Those that contain active text, i.e. CGI forms, in that the Web client (or human) can
fill in data entry fields and then submit the form's data back to the Web server for
processing by a script. In such cases, the form must contain a submit button of some
type. You can use a clickable image as a submit button, or you may use a standard submit
button, whose appearance has perhaps been transformed by a cascading style sheet, as
the thing to click.</li>
</ul>

<h3>Action = Script
</h3>
<p>If you view the source of such a form, you will always find text like: 
<pre>
&lt;form method='POST' action='./script.pl'
 enctype='application/x-www-form-urlencoded'></pre>

<p>The ``action'' part tells the Web server when the form is submitted and which script to run
to process the form's data.</p>

<p>The Web server asks the operating system to load and run the script, and then it (the
Web server) passes the data (from the form) to the script. The script process the data
and outputs a response (which would normally be another form).

<h4>Warning</h4>

<p>I've used './script.pl' to indicate the script is in the ``current'' directory, but be
warned, the CGI protocol does not specify what the current directory is at any time.</p>

<p>In fact, it does not even specify that any current directory exists. Your scripts must,
at all times, know exactly where they are and what they are doing.</p>

<p>Remember, this ``action'' is taking place inside (i.e. from the point of view of) the Web
server.</p>

<h3>Web Page Content
</h3>

<p>Web pages usually contain data in a combination of languages:

<ul><li>
Text: Display this text
</li>
<li>Image references: Display this image
</li>
<li>HTML: Format the text and images. HTML is a ``rendering'' language
</li>
<li>XML: Echo and describe the text, e.g. to ``data mining'' page crawlers
</li>
<li>JavaScript, for these reasons:
 <ul><li>Create special effects (trivial)</li>
 <li>Validate form input (important)</li></ul></li></ul>

<p>Yes, scripts can output scripts! Specifically, scripts can output Web pages containing
JavaScript, etc. There's even a Perl interface to Macromedia's Flash. Where I work, some
salesmen are obsessed with Flash, because it's all they understand of the software we
write :-(. In Flash's defense, you'd have to say it's too trivial to have pretensions.</p>

<h3>JavaScript</h3>

<p>As a Perl aficionado, you may be tempted to look down on JavaScript, but you shouldn't.
It really does have its uses.

<p>When a page contains JavaScript to validate form input, this means quite a savings
for the Web client.

<p>Without the JavaScript here's what would happen (call this ``overhead''):
<ul><li>The form's data would have to be sent to the Web server. This means one trip across
 the Internet</li>
<li>The Web server would have to run the script that will validate the data
</li>
<li>The Web server would have to pass the data to the script
</li>
<li>The script would have to read and parse the data
</li>
<li>The script would have to validate the data
</li>
<li>The script would have to send a response to the Web server
</li>
<li>The Web server would have to send a response to the Web client. This means a second
 trip across the Internet
</li></ul>

<p>All of this takes time. When the JavaScript runs, it runs inside the Web client, e.g.
browser, so the Web client receives a response much faster.
</p><p>
Of course, complex validation often requires access to databases and so on, so sometimes
there is no escape from ``overhead.''
</p><p>
For example, where I work we noticed some pages were appearing quite slowly, and I tracked
it down to 3.6Mb (yes!!!) of JavaScript in some pages that was being used to stop
inputting of duplicate data. Naturally, this JavaScript was being created by a Perl
program :-).

<h3>Digression: HTML 'v' XML
</h3>
<p>As an aside, here's how HTML compares to XML.

HTML is a rendering language. It indicates how the data is to be displayed.

XML is a meta-language. It indicates the meaning of the data.
</p>

<p><b>Examples</b>:</p>

<p><b>HTML</b>: <code>'&lt;h1>25&lt;/h1>'</code> tells you how 25 should look, but not what it is. In other words,
 <code>'&lt;h1>'</code> is a command, telling a Web client how to display what follows.
</p>

<p><b>HTML</b>: <code>'&lt;th>Temperature&lt;/th>&lt;td>25&lt;/td>'</code> tells you how to align the 25, but not what it is.</p>

<p><b>XML</b>: '<code>&lt;temperature>25&lt;/temperature></code>' tells you what 25 is. '&lt;temperature>' is not a command.

<p><b>XML</b>: '<code>&lt;street number>25&lt;/street number></code>' tells you what 25 is.

</p>
<p>Hmmm. This would make a marvellous exam question.

<h3>Reaction: A Tale of 2 Scripts
</h3>

<p>So, what happens when a Web client requests that a Web server run a script?

<p>To answer this, let's look at a Web client request for a script-generated form, and how
that request is processed.

<p>In fact, the Web client is saying to the Web server: ''Pretty please, run _your_ script
on _my_ data.''

Let's go through the procedure:</p>

<ul>
<li>The Web client sends the URI 'http://rusden.edu/cgi-bin/enrol.pl.' This is script # 1
</li>
<li>The Web server executes the script (# 1), captures its output and sends the output --
the form -- back to the Web client. Script # 1 knows what to output, because it sees that
it has no input data from a CGI form
</li>
<li>The script (# 1) terminates. It is finished, completed, done, gone forever. Trust me:
I'm a programmer ...
</li>
<li>The Web client renders the Web page
</li>
<li>The web client fills in the form and submits it. Being a form, it must contain an
``action'' clause naming a script (# 2). Perhaps script # 1 is the same as script # 2
</li>
<li>The Web server executes the script (# 2), which processes the data. This invocation of
script # 2 is independent of the prior invocation of script # 1, even if they are the same script. The Web server executes two separate processes, scripts # 1 and # 2.
Script # 2 knows what to do because it sees that it has input data from a CGI form
</li>
<li>And so on ... Script # 2 may issue another form, in order to continue the interaction</li></ul>

<p>You can see the problem. How does script # 2 know what ``state'' script # 1 got up to?</p>

<h3>Maintaining State</h3>

<p>
The problem of maintaining state is a big problem.

Chapter 5 in ``Writing Apache Modules in Perl and C'' is called ``Maintaining State,'' and
is dedicated to this problem. See ``Resources,'' below.
</p><p>
A few alternatives, and a simple discussion of possible drawbacks:</p>

<ul>
<li>Send data to the Web client as ``hidden fields'' to be returned with the form data
<br />

Drawback: A person can simply use the browser's ``View Source'' command to see the values.
Hidden simply means that these fields are not rendered on the screen. There is absolutely
no security in hidden fields.</li>

<li>Save state in cookies
</p>
<p>
Drawback: The Web client may have disabled cookies. Some banks do this under the false
assumption that cookies can contain viruses.
</p>
<p>
Drawback: If the cookie is written to disk by the Web client, the text in the cookie
must be encrypted if you want to stop people looking at it or changing it.
</li>

<li><p>Save state in Web server memory
</p>
<p>
Drawback: The data is in the memory of one process, and when the Web client logs back in
(i.e. submits the form data) it may be connected to a different process, i.e. a copy of the
process that send the first response, and this copy will not have access to the memory
of the first process.
</li>

<li>Save state in the URI itself, e.g. as a session ID

Here's how: Generate a random number. Write the data into a database using the random
number as the key. Send the random number to the Web client to be returned with the form
data.</p>
<p>
Drawback: You can't just use the operating system's random-number generator, since anyone
with the same OS and compiler could predict the numbers, since they aren't truely random.</p>
<p>
Drawback: Relative URIs no longer work correctly. However, help is at hand with Perl module
Apache::StripSession.</p>
<p>
Drawback: Under some circumstances it is possible for the session ID to ``leak'' to other
sites.
</p>
</li>
<li>Write the data to a temporary file

<p>
Drawback: How does script # 2 know the name of this file created by script # 1?
It's simple if they are the same script, but they don't have to be.
</p>
<p>
Drawback: What happens if two copies of script # 1 run at the same time?
</p>
</li></ul>
<p>
In each case, you either abandon that alternative or add complexity to overcome the
drawbacks.
</p>
<p>There is no perfect solution that satisfies all cases. You must study the alternatives,
study your situation and choose a course of action.

<h3>Combining Perl and HTML
</h3>

<p>There are three basic ways to do this:

<ol>
<li>Put the code inside the HTML. Many Perl packages take this approach. E.G: Apache::ASP,
Apache::EmbPerl (EmbeddedPerl), Apache::EP (another embedded Perl), Apache::ePerl
(yet another embedded Perl), Template::Toolkit (embed a mini non-Perl language in the HTML).

<p>In each case, you need an interpreter to read the combined HTML/Perl/Other and to output
pure HTML. In such cases, the interpreter will act as a filter.
</p></li>

<li>Put the HTML inside the code. This is just the reverse of (1). Thus (tested code):
<pre>
#!/usr/bin/perl
use integer;
use strict;
use warnings;
use CGI;
my($q) = CGI -> new();
print   $q -> header,
  $q -> start_html(),
  'Weather Report',
  $q -> br(),
  $q -> table
  (
   $q -> Tr
   ([
    $q -> th('Temperature') . $q -> td(25)
   ])
  ),
  $q -> end_html();
</pre></li>

<li>Put the HTML, or XML, or whatever, in a file external to the script. In this case
your script will act as a filter. Your script reads this file and looks for special
strings in the file that it replaces with HTML generated by, say, reading a database
and formatting the output. In other words, the external file contains a combination of:
<ul><li>HTML, which your script simply copies to its output stream</li>
<li>HTML comments, like <code>&lt;!-- Some command --></code>, which your script cuts out and replaces with
 the results of processing that command</li>
 </ul></li></ol>

<h3>
A Detour - SDF
</h3>
<p>
If you head over to <a href="http://www.mincom.com/mtr/sdf/">SDF</a> - Simple Document Format, 
you'll see an example of the third way. SDF is, of course, a Perl-based open-source answer
to PDF.</p>

<p>SDF is also available from CPAN: <a href="http://theoryx5.uwinnipeg.ca/CPAN/cpan-search.html">http://theoryx5.uwinnipeg.ca/CPAN/cpan-search.html</a>.</p>

<p>SDF converts text files into various specific formats. SDF can output, directly or
via other software, into these formats: HTML, PostScript, PDF, man pages, POD, LaTeX,
SGML, MIMS HTX and F6 help, MIF, RTF, Windows help and plain text.
</p>

<h3>Inside a Script: Who's Calling?
</h3>

<p>A script can ask the Web server the URI used to fire off the script.</p>

<p>The Web server puts this information into the environment of the script under the
name HTTP_REFERER (yes, misspelling included for free).</p>

<p>So, as a script, I can say I was called by one of:
<ul><li>http://monash.edu/cgi-bin/enrol.pl</li>
<li>http://rusden.edu/cgi-bin/enrol.pl</li>
</ul>
<p>
Now, either ``monash.edu'' or ``rusden.edu'' is just the value of a string in the script,
and so the script can use this string as a key into a database.

In fact, this part of the URI is also in the environment, separately, under the name
HTTP_HOST.</p>

<p>From a database table, or any number of tables, the script can retrieve data specific
to the host.

This, in turn, means the script can change its behavior depending on the URI used to
run it.</p>

<h3>Data Per URI - Page Design
</h3>

<p>The open-source database MySQL has a reserved table called ``hosts,'' so I'll start
using the word ``domain.''

Given a domain, I can turn that into a number that can be used as an index into a
database table.

<p>Here is a sample ``domain'' table:
<pre>
 +=============+=======+
 |             |  URI  |
 | domain_name | index |
 +=============+=======+
 | monash.edu  |   4   |
 +=============+=======+
 | rusden.edu  |   6   |
 +=============+=======+
</pre>

<p>And here is a sample Web page ``design'' table:
<pre>
 +=======+
 +  URI  +===============+===========+===================+
 | index | template_name | bkg_color | location_of_links |...
 +=======+===============+===========+===================+
 |   4   |   dark blue   |   cream   |   down the left   |...
 +=======+===============+===========+===================+
 |   6   |   pale green  |  an image | across the bottom |...
 +=======+===============+===========+===================+
</pre>

<h4>Data per URI - Page Content</h4>


<p>Here is a sample Web page ``content'' table:</p>
<pre>
 +=======+
 +  URI  +================+================+
 | index | News headlines |    Weather     |...
 +=======+================+================+
 |   4   |        -       | www.bom.gov.au |...
 +=======+================+================+
 |   6   | www.f2.com.au  | www.bom.gov.au |...
 +=======+================+================+

f2 => Fairfax, the publisher of ``The Age'' newspaper.

bom => Bureau of Meteorology.
</pre>

<h4>Data Per URI - Page Content Revisited
</h4>
<p>Let me give a more commercial example. Here we chain tables:
<pre>
 ProductMap table:
 +=======+
 +  URI  +==============+============+
 | index |   Products   | product_id |
 +=======+==============+============+
 |   4   | Motherboards |     1      |
 +=======+==============+============+
 |   4   | Printers     |     2      |
 +=======+==============+============+
 |   4   | CD Writers   |     3      |
 +=======+==============+============+
 |   6   | CD Writers   |     4      |
 +=======+==============+============+
 |   6   | Zip Drives   |     5      |
 +=======+==============+============+

 Product table:
 +============+=============+
 | product_id |    Brands   |
 +============+=============+
 |     1      | Gigabyte X1 |
 +============+=============+
 |     1      | Gigabyte X2 |
 +============+=============+
 |     1      |   Intel A   |
 +============+=============+
 |     1      |   Intel B   |
 +============+=============+
 |     :      |      :      |
 +============+=============+
 |     5      |    Sony     |
 +============+=============+
</pre>
<p>
Hence a list of products for a given URI, i.e. a given shop, can be turned into an
HTML table and inserted into the outgoing Web page.</p>

<h4>Resources
</h4>
<ul>
<li><a href="http://savage.net.au/Ron/Scripting/cgi-scripting.txt">http://savage.net.au/Ron/Scripting/cgi-scripting.txt</a> (this article)
</li><li><a href="http://savage.net.au/Ron/Scripting/cgi-scripting.ppt">http://savage.net.au/Ron/Scripting/cgi-scripting.ppt</a> (an older version, in PowerPoint format)
</li><li><a href="http://savage.net.au/Ron/Scripting/resources.html">http://savage.net.au/Ron/Scripting/resources.html</a>
</li><li>
<a href="http://savage.net.au/Ron/Scripting/resources.txt">http://savage.net.au/Ron/Scripting/resources.txt</a> (the above, as text)

                                    </div>


                                </div>
                                <div class="asset-footer">

    
                                    <div class="entry-categories">
                                        <h4>Categories<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="/pub/cgi/" rel="tag">CGI</a></li>
                                        </ul>
                                    </div>
    


                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2010/07/">July 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.02" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
