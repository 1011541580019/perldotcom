<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: June 2001 Archives</title>


    <link rel="prev" href="/pub/2001/05/" title="May 2001" />
    <link rel="next" href="/pub/2001/07/" title="July 2001" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">June 2001 Archives</h1>





                            
                            <div id="entry-1532" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/27/ctoperl.html" rel="bookmark">Why Not Translate Perl to C?</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2001-06-27T00:00:00-08:00">June 27, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>People often have the idea that automatically translating Perl to C
and then compiling the C will make their Perl programs run faster,
because "C is much faster than Perl."  This article explains why this
strategy is unlikely to work.</p>

<h3>Short Summary</h3>

<p>Your Perl program is being run by the Perl interpreter.  You want a C
program that does the same thing that your Perl program does.  A C
program to do what your Perl program does would have to do most of the
same things that the Perl interpreter does when it runs your Perl
program.  There is no reason to think that the C program could do
those things faster than the Perl interpreter does them, because the
Perl interpreter itself is written in very fast C.</p>

<p>Some detailed case studies follow.</p>

<h3>Built-In Functions</h3>

<p>Suppose your program needs to split a line into fields, and uses the
Perl <code>split</code> function to do so.  You want to compile this to C so it will be
faster.</p>

<p>This is obviously not going to work, because the <code>split</code>
function is already implemented in C.  If you have the Perl source
code, you can see the implementation of <code>split</code> in the file
<code>pp.c</code>; it is in the function named <code>pp_split</code>.  When
your Perl program uses <code>split</code>, Perl calls this
<code>pp_split</code> function to do the splitting.  <code>pp_split</code> is
written in C, and it has already been compiled to native machine
code.</p>

<p>Now, suppose you want to translate your Perl program to C.  How
will you translate your <code>split</code> call?  The only thing you can
do is translate it to a call to the C <code>pp_split</code> function, or
some other equivalent function that splits.  There is no reason to
believe that any C implementation of <code>split</code> will be faster
than the <code>pp_split</code> that Perl already has.  Years of work have
gone into making <code>pp_split</code> as fast as possible.</p>

<p>You can make the same argument for all of Perl's other built-in
functions, such as <code>join</code>, <code>printf</code>, <code>rand</code> and <code>readdir</code>.</p>

<p>So much for built-in functions.</p>

<h3>Data Structures</h3>

<p>Why is Perl slow to begin with?  One major reason is that its data
structures are extremely flexible, and this flexibility imposes a
speed penalty.</p>

<p>Let's look in detail at an important example:  strings.  Consider
this Perl code:</p>

<pre>
        $x = 'foo';     
        $y = 'bar';
        $x .= $y;
</pre>

<p>That is, we want to append <code>$y</code> to the end of <code>$x</code>.
In C, this is extremely tricky.  In C, you would start by doing
something like this:</p>

<pre>
        char *x = "foo";
        char *y = "bar";
</pre>
        
<p>Now you have a problem.  You would like to insert <code>bar</code> at
the end of the buffer pointed to by <code>x</code>.  But you can't,
because there is not enough room; <code>x</code> only points to enough
space for four characters, and you need space for seven.  (C strings
always have an extra <code>nul</code> character on the end.)  To append
<code>y</code> to <code>x</code>, you must allocate a new buffer, and then
arrange for <code>x</code> to point to the new buffer:</p>

<pre>
        char *tmp = malloc(strlen(x) + strlen(y) + 1);
        strcpy(tmp, x);
        strcat(tmp, y);
        x = tmp;
</pre>

<p>This works fine if <code>x</code> is the only pointer to that particular buffer.
But if some other part of the program also had a pointer to the
buffer, this code does not work.  Why not?  Here's the picture of what
we did:</p>

<p><b>BEFORE:</b></p>


<p align=center><img src="/pub/2001/06/27/graphics/cbef.gif"></p>

<p>Here <code>x</code> and <code>z</code> are two variables that both contain pointers to the same
buffer.  We want to append <code>bar</code> to the end of the string.  But the C
code we used above doesn't quite work, because we allocated a new
region of memory to hold the result, and then pointed <code>x</code> to it:</p>

<p><b>AFTER <code>x = tmp</code>:</b></p>

<p align=center><img src="/pub/2001/06/27/graphics/caft.gif"></p>

<p>It's tempting to think that we should just point <code>z</code> to the
new buffer also, but in practice this is impossible.  The function
that is doing the appending cannot know whether there is such a
<code>z</code>, or where it may be.  There might be 100 variables
like <code>z</code> all pointing to the old buffer, and there is no good
way to keep track of them so that they can all be changed when the
array moves.</p>

<p>Perl does support a transparent string append operation.  Let's see
how this works.  In Perl, a variable like <code>$x</code> does not point directly
at the buffer.  Instead, it points at a structure called an SV.
('Scalar Value') The SV has the pointer to the buffer, and also some
other things that I do not show:</p>

<b>BEFORE <code>$x .= $y</code></b>

<p align=center><img src="/pub/2001/06/27/graphics/pbef.gif"></p>

<p>When you ask Perl to append <code>bar</code> to <code>$x</code>, it follows
the pointers and finds that there is not enough space in the buffer.
So, just as in C, it allocates a new buffer and stores the result in
the new buffer.  Then it fixes the pointer in the SV to point to the
new buffer, and it throws away the old buffer:</p>


<p align=center><img src="/pub/2001/06/27/graphics/paft.gif"></p>

<p>Now <code>$x</code> and <code>$z</code> have both changed.  If there were
any other variables sharing the SV, their values would have changed
also.  This technique is called "double indirection,'" and it is how
Perl can support operations like <code>.=</code>.  A similar principle
applies for arrays; this is how Perl can support the <code>push</code>
function.</p>

<p>The flexibility comes at a price: Whenever you want to use the
value of <code>$x</code>, Perl must follow two pointers to get the value:
The first to find the SV structure, and the second to get to the
buffer with the character data.  This means that using a string in
Perl takes at least twice as long as in C.  In C, you follow just one
pointer.</p>

<p>If you want to compile Perl to C, you have a big problem.  You
would like to support operations like <code>.=</code> and <code>push</code>, but C does not support these very well.  There are only three
solutions:</p>

<ol>
        <li> Don't support <code>.=</code>

<p> This is a bad solution, because after you disallow all the Perl
        operations like <code>.=</code> and <code>push</code> what you have
        left is not very much like Perl; it is much more like C, and
        then you might as well just write the program in C in the
        first place.</p>

        <li> Do something extremely clever

        <p>Cleverness is in short supply this month.  <code>:)</code></p>

        <li> Use a double-indirection technique in the compiled C code

<p>        This works, but the resulting C code will be slow, because you
        will have to traverse twice as many pointers each time you
        want to look up the value of a variable.  But that is why
        Perl is slow!  Perl is already doing the
        double-indirection lookup in C, and the code to do this has
        already been compiled to native machine code.</p>
</ol>

<p>So again, it's not clear that you are going to get any benefit from
translating Perl to C.  The slowness of Perl comes from the
flexibility of the data structures.  The code to manipulate these
structures is already written in C.  If you translate a Perl program
to C, you have the choice of throwing away the flexibility of the data
structure, in which case you are now writing C programs with C
structures, or keeping the flexibility with the same speed
penalty.  You probably cannot speed up the data structures, because if
anyone knew how to make the structures faster and still keep them
flexible, they would already have made those changes in the C code for
Perl itself.</p>

<h3>Possible Future Work</h3>

<table width="190" border="0" cellspacing="0" cellpadding="4" align="right">
<tr> 
<td width="190" valign="top" height="4" bgcolor="#6699cc"></td></tr> 
<tr>
<td bgcolor="#efefef">
<p class="headline">Related Articles</p>
<p class="secondary"><a href="/pub/2001/05/03/wall.html">Larry Wall
Apocalypse 2</a></p>


<p class="secondary"><a href="/pub/2001/05/08/exegesis2.html">Damian Conway Exegesis 2</a></p>


<p class="secondary"><a
href="http://archive.develooper.com/perl6-internals@perl.org/"><code>perl6-internals</code>
mailing list archive</a></p>
</td></tr> <tr><td width="190" valign="top" height="4" bgcolor="#6699cc"> </td></tr></table>



<p>It should now be clear that although it might not be hard to translate
Perl to C, programs probably will not be faster as a result.</p>

<p>However, it's possible that a sufficiently clever person could make
a Perl-to-C translator that produced faster C code.  The programmer
would need to give hints to the translator to say how the variables
were being used.  For example, suppose you have an array <code>@a</code>.
With such an array, Perl is ready for anything.  You might do
<code>$a[1000000] = 'hello';</code> or <code>$a[500] .=
'foo';</code> or <code>$a[500] /= 17;</code>. This flexibility is expensive.
But suppose you know that this array will only hold integers and there
will never be more than 1,000 integers.  You might tell the translator
that, and then instead of producing C code to manage a slow Perl
array, the translator can produce</p>

<pre>
        int a[1000];
</pre>

<p>and use a fast C array of machine integers.</p>

<p>To do this, you have to be very clever and you have to think of a
way of explaining to the translator that <code>@a</code> will never be
bigger than 1,000 elements and will only contain integers, or a way for
the translator to guess that just from looking at the Perl
program.</p>

<p>People are planning these features for Perl 6 right now.  For
example, Larry Wall, the author of Perl, plans that you will be able
to declare a Perl array as</p>

<pre>
        my int @a is dim(1000);
</pre>

<p>Then a Perl-to-C translator (or Perl itself) might be able to use
a fast C array of machine integers rather than a slow Perl array of
SVs.  If you are interested, you may want to join the perl6-internals
mailing list.</p>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1530" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/26/cgi_scripting.html" rel="bookmark">CGI Scripting</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">perl.com</span> on <abbr class="published" title="2001-06-26T00:00:00-08:00">June 26, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>This article is about scripting in Perl. Of course, scripting can take place anywhere, not just in the context of the Web. I will concentrate on CGI scripts written in Perl. In fact, virtually any language could be used to write CGI scripts.</p>
<p>Perl has been ported to about 70 operating systems. The most recent (February 2001) is Windows CE. In this article I will make a lot of simplifications and generalizations. Here's the first ...</p>
<p>There are two types of CGI scripts:
<ul>
<li>
Those that output HTML pages</li>

<li>Those that process the input from CGI forms</li>
</ul>

<p>Invariably, the second type -- having processed the data -- will output an HTML page or form
to allow the user to continue, or at least know what happened, or they will do a CGI redirect to
another script that outputs something.

<p>I am splitting scripts in to two type to emphasize that there are differences between
processing forms and processing in the absence of forms.

<h3>Terminology</h3>
<p>
There are Web Servers and Web Clients. Some Web clients are browsers.

<p>There are programs and scripts. Once upon a time, programs were compiled and scripts were
interpreted. Hence the two names. But today, this is ``a distinction without a difference.'' My attitude is that the two words,
program and script, are interchangable.

<p>Program and process, however, are different.
Program means a program on disk.

Process means a program that has been loaded by the operating system into memory and
it being executed. This means a single program on disk can be loaded and run several
times simultaneously, in which case it is one program and several processes.</p>

<p>Web servers have names such as Apache, Zeus, MS IIS and TinyHTTPd. Apache and TinyHTTPd (Tiny
HyperText Transfer Protocol Daemon) are open source. Zeus and MS IIS (Internet Information
Server) are commercial products.
The feeble security of IIS makes it unusable in a commercial environment.

<p>My examples will use Apache as the Web server.
Web clients that are browsers have names such as Opera, Netscape and Explorer.

Of course, you can roll your own non-browser Web client. We'll do this below.</p>

<h3>URI = URL + URN</h3>
<p>
You'll notice the three letters I, L and N are in alphabetical order. That's the way to
remember this formula.
<pre>
U => Uniform
R => Resource
I => Indicator
L => Location
N => Name
</pre>

<h3>Web Server Start Up</h3>

<p>When a Web server starts running, these are the basic steps taken:
<ul>
<li>Read configuration file. With Apache, you can use Perl to analyze certains parts of the config file. With Apache, you can even use Perl inside the config file</li>

<li>Start subprocesses (depending on platform)</li>

<li>Become quiescent, i.e. wait for requests from Web clients</li>
</ul>
<p>It doesn't matter which Web server you are using, and it doesn't matter if the Web
server is running under Unix or Windows or any other OS. These principles will apply.

<h3>Web Server Request Loop
</h3>
<p>The Web server request loop, simplified (as always), has several steps:
<ul>
<li>Accept request from Web client</li>

<li>Process request. This means one of the following:
 <ul>
 <li>Read a disk file containing an HTML page (the file = the page = the response)</li>
 <li>Run a script (its ouput = the response)</li>
 <li>Service the request using code within the Web server. If you submit this to Apache, http://127.0.0.1/server-info, Apache fabricates the response</li>
</ul>
</li>
<li>The script fabricates an HTML page and writes it to STDOUT. The Web server captures
STDOUT. This output is the body of the response. The script exits</li>

<li>Send response body, wrapped in the appropriate headers, to the Web client</li>
</ul>
<p>
Pictorially, we have an infinity symbol, i.e. a figure eight on its side:

<pre>
+------+  1 -Request--->  +------+  2 -Action-->  +------+
| Web  |  (URI or Submit) | Web  |  (script.pl)   | Perl |
|Client|                  |Server|                |Script|
+------+  &lt;--Response- 4  +------+  &lt;---HTML-- 3  +------+
         (Header and HTML)    (Plain page or CGI form)
</pre>
<p>Things to note:

<ol>
<li>The interaction starts from the Web client</li>

<li>The interaction is a round trip</li>

<li>The Web client uses the HyperText Transfer Protocol to format Request 1:
 <ul><li>The URI will be sent as text in the message
 </li>
 <li>The data from a submitted form will be sent using the CGI protocol</li>
 <li>In both cases, the HTTP will be used to generate an envelope wrapped around the message content
</li></ul>
 In reality, of course, messages 1 and 4 will be wrapped in TCP/IP envelopes, and
 meesages 2 and 3 will be mediated (handled) by the OS.</li>

<li>Action 2 is a request from the Web server to the operating system to load and
run a script. Many issued arise here. A brief summary:
 <ul>
 <li>Does the Web server have permission to run this script? After all, the Web server is a program, so it means it was loaded and run by some user, often
  a special user called ``nobody.'' So does this ``nobody'' have permission to run script.pl?</li>
<li>Does this particular Web client have permission? The Web server will check
directory-access permissions and may have to ask the Web client for a username
  and a password before proceeding</li>
<li>Does the script have permission to read/write whatever directories it needs to
  to do its work? For instance, to put a Web front-end on CVS requires that
  ``nobody'' have read access to the source code repository, or that the script
  opens a socket to another script that can access the repository
</li></ul>
<li>Action 3 is a stream of HTML output by the script and is captured by the Web server.</li>

<li>Response 4 is the output from the script wrapped in an envelope of headers according
 to the HTTP.</li>

<li>The Web client cannot see the source code of the script, only the output of the
script. If the Web client, e.g. a browser, offers to download the script and pops up
a dialog box asking for the name of a file to save the script in, then the
Web server clearly did not execute the script. This means the Web server is misconfigured.</li>

<li>If the first execute of the script outputs a CGI form, then when the Web client
submits that form, the script is rerun to process the form's data. That's right, the
script would normally be run twice. In other words, the first time the script runs it
sees it has no input data, so it outputs an empty form. The second time it runs it sees
it has input data, so it reads and processes that data. Yes, they could be two separate
scripts. When the form is output, the ``action'' clause specifies the name of the script
that the Web server will run to process the form's data.</li></ol>

<h3>Web Server Directory Structure
</h3>

<p>But how does the Web server know which page to return or which script to run? To answer
this we next look at the directory structure on the Web server's machine.</p>

<p>Below, Monash and Rusden are the names of university campuses.</p>

<p>monash.edu and rusden.edu will be listed under the ``Virtual Hosts'' part of httpd.conf,
or, if you are running MS Windows NT/2k, they can be named in the file
C:\WinNT\System32\Drivers\Etc\Hosts. Under other versions of Windows, the hosts file
will be C:\Windows\Hosts.</p>

<p>And a warning about the NT version of this file: Windows Explorer will lie to you about
the attributes of this file. You will have to log off as any user and log on as the
administrator to be able to save edits into this file.</p>

<p>See <a href="http://savage.net.au/Perl/Html/configure-apache.html">http://savage.net.au/Perl/Html/configure-apache.html</a> for details.

<p>Assume this directory structure:
<pre>
        - D:\
        -    www\
        -        cgi-bin\
        -            x.pl
        -        conf\
        -            httpd.conf
        -        public\
        -            index.html
        -            monash\
        -                index.html
        -            monash\staff
        -                mug-shots.html
        -            rusden\
        -                index.html
        -            rusden\staff
        -                courses.html
</pre>
<p>Note:<br />
&#149; D:\www\cgi-bin&nbsp;&nbsp;&nbsp;Contents can be executed by the Web server but not viewed by Web clients</p>

<p>&#149; D:\www\conf&nbsp;&nbsp;&nbsp;Contents invisible to Web clients</p>

<p>&#149; D:\www\public&nbsp;&nbsp;&nbsp;Contents can be viewed by Web clients</p>

<h3>Web Server Configuration</h3>

<p>Now, the Web server can be told, via its configuration file httpd.conf, that:

<ul>
<li>Web client requests using http://monash.edu/ are directed to D:\www\public\monash\.<br />
Hence, a request for http://monash.edu/staff/mug-shots.html returns the disk file
D:\www\public\monash\staff\mug-shots.html
</li>
<li>Web client requests using http://rusden.edu/ are directed to D:\www\public\rusden\.<br />
Hence a request for http://rusden.edu/staff/courses.html returns the disk file
D:\www\public\rusden\staff\courses.html
</li>
<li>Web client requests using http://monash.edu/cgi-bin/ are directed to D:\www\cgi-bin</li>

<li>Web client requests using http://rusden.edu/cgi-bin/ are directed to D:\www\cgi-bin</li>
</ul>
<p>Did you notice that both virtual hosts use D:\www\cgi-bin?
<pre>
 ================================================================
 These two hosts have their own document trees, but share scripts
 ================================================================
</pre>
<p>We can service any number of virtual hosts with only one copy of each script. This is a huge maintenance savings.</p>

<p>This is the information available to the Web server when a request comes in from a Web client. So, now let's look at the client side of things.</p>

<h3>A Perl Web Client</h3>

<p>
Here is a real, live, complete, Perl Web Client that is obviously not a browser:
<pre>
#!/usr/bin/perl
use LWP::Simple;
print get('http://savage.net.au/index.html');
</pre>

<p>Yes, folks, that's it. The work is managed by the Perl module ``LWP::Simple,'' and is
available thru the command ``get,'' which that module exports, i.e. makes public so it can
be used in scripts like this one. LWP stands for Library for Web programming in Perl.

<p>This code runs identically, from the command line, under Windows and Linux.

The output is ``print''ed to the screen, but not formatted according to the HTML.
</p>
<p>It's now time to step thru the Web server-Web client interaction.</p>

<h3>Web Client Requests</h3>

<p>When you type something such as ``rusden.edu'' into the browser's address field, or pass that
string to a Web client, and hit Go, here's an example of what could happen:</p>

<ul>
<li>The Web client says ``You're lazy,'' and prepends the default protocol to the string,
resulting in ``http://rusden.edu''
</li>
<li>The Web client says ``You're lazy,'' and appends the default directory to the string,
resulting in ``http://rusden.edu/''
</li>
<li>The Web client sends this to the Web server with some headers. This is the
all-important ``Request'' (see Web Server Request Loop)
</li>
<li>The Web server parses it and, using its configuration data, determines which disk
directory, if any, this maps to. I say ``if any'' because it may refer to a virtual, or non-existant, directory
</li>
<li>If the client asks for a directory, this would normally be converted (by the Web server)
into a request for a directory listing, or a default file, such as /index.html
</li>
<li>If the client asks for a script to be run, the request is processed as described above.
Of course, the client may not even know that a script is being run to service the request
</li>
<li>The Web server determines whether you have enough permission to access files in
this directory
</li>
<li>If so, the Web server reads this disk file into memory or runs the script, and sends
the result to the Web client with the appropriate headers.
This is the all-important ``Response''</li>
</ul>

<p>In reality, processing the request and manufacturing the response can be complex
procedures.
</p>

<h3>Web Pages</h3>

<p>There are two types of Web pages sent to Web clients:</p>

<ul>
<li>Those that contain passive text, which the Web client (or human operating a browser)
can do no more than look at
</li>
<li>Those that contain active text, i.e. CGI forms, in that the Web client (or human) can
fill in data entry fields and then submit the form's data back to the Web server for
processing by a script. In such cases, the form must contain a submit button of some
type. You can use a clickable image as a submit button, or you may use a standard submit
button, whose appearance has perhaps been transformed by a cascading style sheet, as
the thing to click.</li>
</ul>

<h3>Action = Script
</h3>
<p>If you view the source of such a form, you will always find text like: 
<pre>
&lt;form method='POST' action='./script.pl'
 enctype='application/x-www-form-urlencoded'></pre>

<p>The ``action'' part tells the Web server when the form is submitted and which script to run
to process the form's data.</p>

<p>The Web server asks the operating system to load and run the script, and then it (the
Web server) passes the data (from the form) to the script. The script process the data
and outputs a response (which would normally be another form).

<h4>Warning</h4>

<p>I've used './script.pl' to indicate the script is in the ``current'' directory, but be
warned, the CGI protocol does not specify what the current directory is at any time.</p>

<p>In fact, it does not even specify that any current directory exists. Your scripts must,
at all times, know exactly where they are and what they are doing.</p>

<p>Remember, this ``action'' is taking place inside (i.e. from the point of view of) the Web
server.</p>

<h3>Web Page Content
</h3>

<p>Web pages usually contain data in a combination of languages:

<ul><li>
Text: Display this text
</li>
<li>Image references: Display this image
</li>
<li>HTML: Format the text and images. HTML is a ``rendering'' language
</li>
<li>XML: Echo and describe the text, e.g. to ``data mining'' page crawlers
</li>
<li>JavaScript, for these reasons:
 <ul><li>Create special effects (trivial)</li>
 <li>Validate form input (important)</li></ul></li></ul>

<p>Yes, scripts can output scripts! Specifically, scripts can output Web pages containing
JavaScript, etc. There's even a Perl interface to Macromedia's Flash. Where I work, some
salesmen are obsessed with Flash, because it's all they understand of the software we
write :-(. In Flash's defense, you'd have to say it's too trivial to have pretensions.</p>

<h3>JavaScript</h3>

<p>As a Perl aficionado, you may be tempted to look down on JavaScript, but you shouldn't.
It really does have its uses.

<p>When a page contains JavaScript to validate form input, this means quite a savings
for the Web client.

<p>Without the JavaScript here's what would happen (call this ``overhead''):
<ul><li>The form's data would have to be sent to the Web server. This means one trip across
 the Internet</li>
<li>The Web server would have to run the script that will validate the data
</li>
<li>The Web server would have to pass the data to the script
</li>
<li>The script would have to read and parse the data
</li>
<li>The script would have to validate the data
</li>
<li>The script would have to send a response to the Web server
</li>
<li>The Web server would have to send a response to the Web client. This means a second
 trip across the Internet
</li></ul>

<p>All of this takes time. When the JavaScript runs, it runs inside the Web client, e.g.
browser, so the Web client receives a response much faster.
</p><p>
Of course, complex validation often requires access to databases and so on, so sometimes
there is no escape from ``overhead.''
</p><p>
For example, where I work we noticed some pages were appearing quite slowly, and I tracked
it down to 3.6Mb (yes!!!) of JavaScript in some pages that was being used to stop
inputting of duplicate data. Naturally, this JavaScript was being created by a Perl
program :-).

<h3>Digression: HTML 'v' XML
</h3>
<p>As an aside, here's how HTML compares to XML.

HTML is a rendering language. It indicates how the data is to be displayed.

XML is a meta-language. It indicates the meaning of the data.
</p>

<p><b>Examples</b>:</p>

<p><b>HTML</b>: <code>'&lt;h1>25&lt;/h1>'</code> tells you how 25 should look, but not what it is. In other words,
 <code>'&lt;h1>'</code> is a command, telling a Web client how to display what follows.
</p>

<p><b>HTML</b>: <code>'&lt;th>Temperature&lt;/th>&lt;td>25&lt;/td>'</code> tells you how to align the 25, but not what it is.</p>

<p><b>XML</b>: '<code>&lt;temperature>25&lt;/temperature></code>' tells you what 25 is. '&lt;temperature>' is not a command.

<p><b>XML</b>: '<code>&lt;street number>25&lt;/street number></code>' tells you what 25 is.

</p>
<p>Hmmm. This would make a marvellous exam question.

<h3>Reaction: A Tale of 2 Scripts
</h3>

<p>So, what happens when a Web client requests that a Web server run a script?

<p>To answer this, let's look at a Web client request for a script-generated form, and how
that request is processed.

<p>In fact, the Web client is saying to the Web server: ''Pretty please, run _your_ script
on _my_ data.''

Let's go through the procedure:</p>

<ul>
<li>The Web client sends the URI 'http://rusden.edu/cgi-bin/enrol.pl.' This is script # 1
</li>
<li>The Web server executes the script (# 1), captures its output and sends the output --
the form -- back to the Web client. Script # 1 knows what to output, because it sees that
it has no input data from a CGI form
</li>
<li>The script (# 1) terminates. It is finished, completed, done, gone forever. Trust me:
I'm a programmer ...
</li>
<li>The Web client renders the Web page
</li>
<li>The web client fills in the form and submits it. Being a form, it must contain an
``action'' clause naming a script (# 2). Perhaps script # 1 is the same as script # 2
</li>
<li>The Web server executes the script (# 2), which processes the data. This invocation of
script # 2 is independent of the prior invocation of script # 1, even if they are the same script. The Web server executes two separate processes, scripts # 1 and # 2.
Script # 2 knows what to do because it sees that it has input data from a CGI form
</li>
<li>And so on ... Script # 2 may issue another form, in order to continue the interaction</li></ul>

<p>You can see the problem. How does script # 2 know what ``state'' script # 1 got up to?</p>

<h3>Maintaining State</h3>

<p>
The problem of maintaining state is a big problem.

Chapter 5 in ``Writing Apache Modules in Perl and C'' is called ``Maintaining State,'' and
is dedicated to this problem. See ``Resources,'' below.
</p><p>
A few alternatives, and a simple discussion of possible drawbacks:</p>

<ul>
<li>Send data to the Web client as ``hidden fields'' to be returned with the form data
<br />

Drawback: A person can simply use the browser's ``View Source'' command to see the values.
Hidden simply means that these fields are not rendered on the screen. There is absolutely
no security in hidden fields.</li>

<li>Save state in cookies
</p>
<p>
Drawback: The Web client may have disabled cookies. Some banks do this under the false
assumption that cookies can contain viruses.
</p>
<p>
Drawback: If the cookie is written to disk by the Web client, the text in the cookie
must be encrypted if you want to stop people looking at it or changing it.
</li>

<li><p>Save state in Web server memory
</p>
<p>
Drawback: The data is in the memory of one process, and when the Web client logs back in
(i.e. submits the form data) it may be connected to a different process, i.e. a copy of the
process that send the first response, and this copy will not have access to the memory
of the first process.
</li>

<li>Save state in the URI itself, e.g. as a session ID

Here's how: Generate a random number. Write the data into a database using the random
number as the key. Send the random number to the Web client to be returned with the form
data.</p>
<p>
Drawback: You can't just use the operating system's random-number generator, since anyone
with the same OS and compiler could predict the numbers, since they aren't truely random.</p>
<p>
Drawback: Relative URIs no longer work correctly. However, help is at hand with Perl module
Apache::StripSession.</p>
<p>
Drawback: Under some circumstances it is possible for the session ID to ``leak'' to other
sites.
</p>
</li>
<li>Write the data to a temporary file

<p>
Drawback: How does script # 2 know the name of this file created by script # 1?
It's simple if they are the same script, but they don't have to be.
</p>
<p>
Drawback: What happens if two copies of script # 1 run at the same time?
</p>
</li></ul>
<p>
In each case, you either abandon that alternative or add complexity to overcome the
drawbacks.
</p>
<p>There is no perfect solution that satisfies all cases. You must study the alternatives,
study your situation and choose a course of action.

<h3>Combining Perl and HTML
</h3>

<p>There are three basic ways to do this:

<ol>
<li>Put the code inside the HTML. Many Perl packages take this approach. E.G: Apache::ASP,
Apache::EmbPerl (EmbeddedPerl), Apache::EP (another embedded Perl), Apache::ePerl
(yet another embedded Perl), Template::Toolkit (embed a mini non-Perl language in the HTML).

<p>In each case, you need an interpreter to read the combined HTML/Perl/Other and to output
pure HTML. In such cases, the interpreter will act as a filter.
</p></li>

<li>Put the HTML inside the code. This is just the reverse of (1). Thus (tested code):
<pre>
#!/usr/bin/perl
use integer;
use strict;
use warnings;
use CGI;
my($q) = CGI -> new();
print   $q -> header,
  $q -> start_html(),
  'Weather Report',
  $q -> br(),
  $q -> table
  (
   $q -> Tr
   ([
    $q -> th('Temperature') . $q -> td(25)
   ])
  ),
  $q -> end_html();
</pre></li>

<li>Put the HTML, or XML, or whatever, in a file external to the script. In this case
your script will act as a filter. Your script reads this file and looks for special
strings in the file that it replaces with HTML generated by, say, reading a database
and formatting the output. In other words, the external file contains a combination of:
<ul><li>HTML, which your script simply copies to its output stream</li>
<li>HTML comments, like <code>&lt;!-- Some command --></code>, which your script cuts out and replaces with
 the results of processing that command</li>
 </ul></li></ol>

<h3>
A Detour - SDF
</h3>
<p>
If you head over to <a href="http://www.mincom.com/mtr/sdf/">SDF</a> - Simple Document Format, 
you'll see an example of the third way. SDF is, of course, a Perl-based open-source answer
to PDF.</p>

<p>SDF is also available from CPAN: <a href="http://theoryx5.uwinnipeg.ca/CPAN/cpan-search.html">http://theoryx5.uwinnipeg.ca/CPAN/cpan-search.html</a>.</p>

<p>SDF converts text files into various specific formats. SDF can output, directly or
via other software, into these formats: HTML, PostScript, PDF, man pages, POD, LaTeX,
SGML, MIMS HTX and F6 help, MIF, RTF, Windows help and plain text.
</p>

<h3>Inside a Script: Who's Calling?
</h3>

<p>A script can ask the Web server the URI used to fire off the script.</p>

<p>The Web server puts this information into the environment of the script under the
name HTTP_REFERER (yes, misspelling included for free).</p>

<p>So, as a script, I can say I was called by one of:
<ul><li>http://monash.edu/cgi-bin/enrol.pl</li>
<li>http://rusden.edu/cgi-bin/enrol.pl</li>
</ul>
<p>
Now, either ``monash.edu'' or ``rusden.edu'' is just the value of a string in the script,
and so the script can use this string as a key into a database.

In fact, this part of the URI is also in the environment, separately, under the name
HTTP_HOST.</p>

<p>From a database table, or any number of tables, the script can retrieve data specific
to the host.

This, in turn, means the script can change its behavior depending on the URI used to
run it.</p>

<h3>Data Per URI - Page Design
</h3>

<p>The open-source database MySQL has a reserved table called ``hosts,'' so I'll start
using the word ``domain.''

Given a domain, I can turn that into a number that can be used as an index into a
database table.

<p>Here is a sample ``domain'' table:
<pre>
 +=============+=======+
 |             |  URI  |
 | domain_name | index |
 +=============+=======+
 | monash.edu  |   4   |
 +=============+=======+
 | rusden.edu  |   6   |
 +=============+=======+
</pre>

<p>And here is a sample Web page ``design'' table:
<pre>
 +=======+
 +  URI  +===============+===========+===================+
 | index | template_name | bkg_color | location_of_links |...
 +=======+===============+===========+===================+
 |   4   |   dark blue   |   cream   |   down the left   |...
 +=======+===============+===========+===================+
 |   6   |   pale green  |  an image | across the bottom |...
 +=======+===============+===========+===================+
</pre>

<h4>Data per URI - Page Content</h4>


<p>Here is a sample Web page ``content'' table:</p>
<pre>
 +=======+
 +  URI  +================+================+
 | index | News headlines |    Weather     |...
 +=======+================+================+
 |   4   |        -       | www.bom.gov.au |...
 +=======+================+================+
 |   6   | www.f2.com.au  | www.bom.gov.au |...
 +=======+================+================+

f2 => Fairfax, the publisher of ``The Age'' newspaper.

bom => Bureau of Meteorology.
</pre>

<h4>Data Per URI - Page Content Revisited
</h4>
<p>Let me give a more commercial example. Here we chain tables:
<pre>
 ProductMap table:
 +=======+
 +  URI  +==============+============+
 | index |   Products   | product_id |
 +=======+==============+============+
 |   4   | Motherboards |     1      |
 +=======+==============+============+
 |   4   | Printers     |     2      |
 +=======+==============+============+
 |   4   | CD Writers   |     3      |
 +=======+==============+============+
 |   6   | CD Writers   |     4      |
 +=======+==============+============+
 |   6   | Zip Drives   |     5      |
 +=======+==============+============+

 Product table:
 +============+=============+
 | product_id |    Brands   |
 +============+=============+
 |     1      | Gigabyte X1 |
 +============+=============+
 |     1      | Gigabyte X2 |
 +============+=============+
 |     1      |   Intel A   |
 +============+=============+
 |     1      |   Intel B   |
 +============+=============+
 |     :      |      :      |
 +============+=============+
 |     5      |    Sony     |
 +============+=============+
</pre>
<p>
Hence a list of products for a given URI, i.e. a given shop, can be turned into an
HTML table and inserted into the outgoing Web page.</p>

<h4>Resources
</h4>
<ul>
<li><a href="http://savage.net.au/Ron/Scripting/cgi-scripting.txt">http://savage.net.au/Ron/Scripting/cgi-scripting.txt</a> (this article)
</li><li><a href="http://savage.net.au/Ron/Scripting/cgi-scripting.ppt">http://savage.net.au/Ron/Scripting/cgi-scripting.ppt</a> (an older version, in PowerPoint format)
</li><li><a href="http://savage.net.au/Ron/Scripting/resources.html">http://savage.net.au/Ron/Scripting/resources.html</a>
</li><li>
<a href="http://savage.net.au/Ron/Scripting/resources.txt">http://savage.net.au/Ron/Scripting/resources.txt</a> (the above, as text)

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1536" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p5pdigest/20010625.html" rel="bookmark">This Week on p5p 2001/06/25</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Leon Brocard</span> on <abbr class="published" title="2001-06-25T00:00:00-08:00">June 25, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h2>This week on perl5-porters (18 June--25 June 2001)
</h2>

<h3>Notes
</h3>

<p>You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><tt>perl5-porters-digest-subscribe@netthink.co.uk</tt></a>.

<p>Please send corrections and additions to 
<code>perl-thisweek-YYYYMM@simon-cozens.org</code>
 where 
<code>YYYYMM</code>
 is the current year and month.  Changes and additions to the 
<a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters
 biographies</a> are particularly welcome.</p>



<p>This was a fairly busy week, seeing just under 500 messages.</p>

<h3>Regular expressions</h3>

<p>There were a couple of regular expression threads this week.

</p><p>Heikki Lehvaslaiho found a bug with some end-anchored regular
expressions when using 
<code>study</code>, which involved the regular rexpression
engine looping. The problem was quickly found and patched by Hugo.

</p><p>Jeff Pinyan almost presented a patch for regex negation, before being
kindly asked not to forget Unicode.

</p><p>Artur Bergman and Richard Soderberg started to move regular
expressions from the optree to the pad so that they can be redefined
under 
<code>USEITHREADS</code>. They also patched perl to allow <code>/o</code>
 to work under ithreads.

</p><p>Jeffrey Friedl asked about applying regular expressions backwards
(from right to left):
<pre>
	$text =~ s/^\s+//;  # strip leading whitespace
	$text =~ s/^\s+//r; # strip trailing whitespace
</pre>
... and Jeff Pinyan plugged his 
<a href="/pub/2001/05/01/expressions.html">sexeger research</a>.
</p>

<h3>5.7.2 in sight</h3>

<p>Jarkko informed us that the latest snapshot, perl@10825, would be the
last snapshot before the next Perl development release of
5.7.2. Snapshots after that would be release candidates, leading on to
the next Perl stable release of 5.8.0:
</p>
<blockquote>
So now it's definitely time to remind me of any patches that I might
have missed.  If you have a bug fixing going on please inform your
loved ones that you'll camp at the office / by the computer for coming
few weeks.
</blockquote>

<h3>rsync-able snapshots</h3>

<p>Jarkko also announced availability of a way to rsync his development
snapshots, staying away from the bleading-edge part of bleadperl, so
that you don't report a bug which is in the midst of getting patched
(or created), available via:
<pre>
	mkdir -p perl;cd perl && rsync -av ftp.funet.fi::perlsnap .
</pre>
</p>

<h3>overloading s?printf</h3>
<p>
Jarkko Hietaniemi asked for opinions on a way to use formatted
printing for objects.
</p>
<blockquote>
For example, it would be nice to able to use, say, %Z, to format both
the real and imaginary part of Math::Complex objects at the same time,
say %7.3Z --or even tamper with %f %g %e so that they would recognize
their arguments being Math::Complexes.
</blockquote>
<p>
Some options are: using overload to pass formats via coderefs, or
inventing a whole new mini language.
</p>
<h3>Various</h3>

<p>Nicholas Clark reported a problem with 64 bit int support under x86
FreeBSD and with gcc's optimiser enabled. This was tracked down to a
patch (10417), but no solution was offered other than patch retraction.
</p>
<p>Mike Guy commented that 
<code>not_a_number</code>
 in 
<code>sv.c</code>
 didn't grok UTF8. This
got added to the UTF8 TODO list, as a request for a function 
<code>sv_printify</code>
 for displaying PVs with control characters, embedded nulls, and Unicode.
</p>
<p>
Spider Boardman was awarded the nightship of the Wielder of the Holy
Cast, for fixing casting warnings under HP-UX cc.
</p>
<p>
There was some talk about compiling Perl with the new, pickier 
<code>-Wall</code>
 that comes with the new gcc 3.0.
</p>
<p>
Artur Bergman asked an interesting problem about what to do with the
seed for rand when threads are involved. Do we want 
<code>srand()</code>
 and 
<code>rand()</code>
to be performed on a single global seen variable or a "per-thread"
seed variable? Jarkko suggested that maybe it wouldn't be such
a bad idea to have our own PRNG implementation.
</p>
<p>
Nikola Knezevic asked about 
<code>configure.com</code>
 not working under DOS, which
is in fact the configure script for VMS. It now sports a comment
reflecting this.
</p>
<p>
Abhijit Menon-Sen's macro cleanups last week were backed out for
performance reasons, but with the macros left in as comments to aid
grepping.
</p>
<p>
Doug MacEachern, amongst other sterling patches, offered a patch to make 
<code>make Foo.s</code>
 add -S to cc flags, which outputs the assembly code to 
<code>Foo.s</code>.
</p>
<p>
Laszlo Molnar provided some patched to get bleadperl working under
djgpp.
</p>
<p>
Abhijit Menon-Sen patch a problem spoted by Harmon S. Nine about 
<code>=></code>
 turning ANY bareword before it into a quoted string. The documentation
is somewhat vague about what exactly is quoted by 
<code>=></code>
 but this is a change in behaviour since 5.6.0. The patch reverted
the behaviour so that function calls that are used as hash
key-values in the construction of a hash are still called.
</p>
<p>
Spider Boardman reported that 
<code>PERLIO=unix</code>
 broke many tests and offered
some patches. Nick Ing-Simmons countered that it always has, as it
makes the "stream" completely unbuffered and that isn't really very
perlish. However, he fixed a reported bug in 
<code>PerlIOBase_unread</code>, which
was messing with 
<code>b->posn</code>
 after the 
<code>unread()</code>, rather than setting it
before the unread.
</p>
<p>
Peter Prymmer worried about floating point representations of numbers
under OS/390 with exponents over +63.
</p>
<p>
Marcel Grunauer produced some patches for Darwin.
</p>
<p>
Ilya Zakharevich provided a slew of OS/2 patches.
</p>
<p>
There were also some minor documentation patches (some very pedantic).
</p>
<p>
Oh, and Jarkko had an off-by-one error.
</p>
<p>
Until next week I remain, your temporarily-replacing humble and
obedient servant,
</p>
<p>
Leon Brocard, <a href="mailto:leon@iterative-software.com">leon@iterative-software.com</a>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1528" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/21/yapcreport.html" rel="bookmark">Yet Another YAPC Report: Montreal</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Schuyler Erle</span> on <abbr class="published" title="2001-06-21T00:00:00-08:00">June 21, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>A year ago, at Yet Another Perl Conference North America 19100, both Perl-the-language and Perl-the-community seemed to be headed for trouble. Longtime Perl hackers spoke openly with concern at the apparent stagnation of Perl 5 development, and how the community seemed to be increasingly bogged down by acrimony and bickering. Now, a year later, the tide has already turned and the evidence is nowhere more apparent than at this year's YAPC::NA in Montreal.</p>

<p>The conference, produced by Yet Another Society, was a smashing success. More than 350 Perl Mongers converged from all across North America and Europe on McGill University for the three-day event. Rich Lafferty and Luc St. Louis, key organizers from the Montreal.pm group, did a brilliant job of lining everything up; and Kevin Lenzo, YAS president, once again did the crucial fund raising and promotional work to make the conference a reality.</p>

<p>Certain familiar faces were missing from this year's conference, including Larry himself, who was scheduled to deliver the keynote but was absent due to illness. (Get well soon, Larry!) The unenviable task of filling Larry Wall's shoes for the highly anticipated opening talk fell to the infamous Dr. Damian Conway, indentured servant to the Perl community and lecturer extraordinaire. Those of you who have seen Damian in action will have probably guessed that his presentation did not disappoint. The topic was, of course, a tour of the past and future of the Perl language -- where we have come (a long way from Perl 1 in 1987) and where are going (a long way yet to Perl 6).</p> 

<p>To hear Damian tell it, Perl 6 looks like it's going to be awesome. While many details are still sketchy, the intention from all quarters is to preserve all the things we like about Perl today, especially its tendency to be eclectic in its incorporation of ideas and features from other languages. Larry, Damian and others have carefully studied the lessons of such languages as Java, Python, Ruby, and even the infant C#, in the hopes of applying those lessons to Perl 6.</p>

<p>Damian's keynote also focused on how Perl 6 will attempt to correct some of the flaws and deficiencies of Perl 5, the details of which can be found elsewhere, so I won't reiterate them here. Additionally, he emphasized that, due to the unexpected quantity and scope of the Perl 6 RFCs, the final language design will take Larry far longer than anyone originally imagined. Damian went on to predict a usable alpha version of Perl 6 being ready by May 2002, with a full release perhaps available by October 2002. However, as pieces of the Perl 6 design stabilize, Damian and others (including our own Simon Cozens) will be implementing them in Perl 5, so that we can start playing with Perl 6 today, rather than next year.</p>

<p>Meanwhile, the continued enthusiasm and energy being devoted to Perl 6 has had a profound impact on the community at large that is hard to overstate. YAPC::NA 2001 was marked not merely by much discussion and speculation on Perl 6, but also by fascinating new developments in Perl. One of the downright niftiest of these new directions is Brian Ingerson's Inline.pm, which he presented in a 90-minute talk Wednesday. Inline.pm uses a form of plug-in architecture to allow seamless embedding of other languages like C, C++, Java, and, yes, Python, right into ordinary Perl scripts. Brian, who works at ActiveState, has already written a <a href="/pub/2001/02/inline.html">www.perl.com feature on Inline.pm</a>, so I'll merely mention here that the module hides away the frighteningly ugly details of gluing disparate languages together, in the most intuitive way possible. This kind of development is really exciting for the ways in which it opens new doors and breeds new ideas on the many, many different kinds of intriguing things that can still be done with Perl 5. Incidentally, Brian's midlecture sing-a-longs about Perl internals and so forth were also quite well regarded.</p>

<p>The hubbub around Inline.pm was just one thread in the theme of "Perl as glue language for the 21st Century," a theme visited and revisited at many times and places throughout the conference. The notion was raised again by Perl 6 project manager Nathan Torkington in his presentation at Adam "Ziggy" Turoff's Perl Apprenticeship Workshop on Wednesday. Amidst the announcement of many interesting and valuable projects in need of Perl hackers, Gnat issued a call to "make a Python friend" and collaborate with them on a development project. "Show them we're not *all* evil!" he insisted, in marked contrast to his howlingly funny diatribe on Python at the previous year's Lightning Talks.</p>

<p>"I was surprised that Gnat took that approach, because I thought I would be left this year to argue the other side," ActiveState's Neil Kandalgaonkar observed, after giving his Friday morning talk on "Programming Parrot," so named for its case study in getting Perl and Python applications to work in concert. Part of Neil's tale of success lay in using Web services to get different processes running in different languages on different machines to exchange data reliably. "All it took was an extra four lines of scripting in each language, and I was done," he noted, driving home the importance of using and extending Perl's ability to talk to other languages and applications.</p>

<p>Meanwhile, YAPC North America 2001 also showed growth in the depth and scope of the conference's offerings. In contrast to previous years, where talks were largely aimed at beginner and intermediate Perl hackers, this year's presentations covered some more advanced topics, such as Nat Torkington's three-hour lesson on the Perl internals that he delivered to a packed house Thursday. Originally written by Simon Cozens (who was unable to attend), the Perl internals class presented a concise introduction to some of Perl's inner workings, furthering the Perl community's expressed goal of lowering the barrier of entry to internals hacking and encouraging wider participation in Perl core development. Later in the day, Michael Schwern addressed the ever-present tendency of Perl hackers to rely on Perl's forgiving nature in his rather well-attended talk on "Disciplined Programming, or, How to Be Lazy without Trying." "Always code Perl as if you were writing for CPAN," Schwern urged his audience. "Document and test as you go, and release working versions often."</p>

<p>Speaking of which, the Comprehensive Perl Archive Network was also a major topic of discussion at YAPC. "The CPAN is Perl's killer app," Gnat said at one point. "No other language has anything like it." Neil and Brian gave a short presentation on their experiences building and maintaining ActiveState's PPM repository, a collection of binary distributions of CPAN modules. The dynamic duo from Vancouver yielded some of their time to Schwern to allow him to discuss his proposed CPANTS project, intended to automate testing and quality verification of modules in the repository. Metadata, rating systems, trust metrics and peer-to-peer distribution models were all touched on. Based on the buzz this year, it seems reasonable to predict that many new and exciting things are likely to grow up around the CPAN, and around the possibilities inherent in the distribution of Perl modules, in the not-too-distant future.</p>

<p>The final talk Thursday was once more delivered by Damian Conway, and curiosity had spread far and wide on how he might top last year's now-legendary presentation on Quantum::Superpositions. This year's Thursday afternoon plenary lecture was merely titled, "Life, the Universe, and Everything," in homage to the late Mr. Adams; and, true to his word, Damian delivered just that. Swooping from Conway's Game of Life (no relation), to a source filter for programming Perl in Klingon (a la Perligata), to the paradox of Maxwell's Demon (conveniently dispelled with a little help from Quantum::Superpositions), Damian's talk was a masterful reflection of all the things we love about Perl: It was clever, complex, elegant, and, most of all, it was fun.</p>

<p>(Parenthetically, among the modules that Damian introduced at this talk was a little number called Sub::Junctive. As a linguist, I must confess it scares the living heck outta me. Look for it on the CPAN.)</p>

<p>Friday featured more of this year's theme of Perl as glue-language-for-the-21st-Century in two talks on Web services by Adam "Ziggy" Turoff and Nat Torkington, in which Nat issued an impassioned plea for a Perl implementation of Freenet. However, the morning's highlight was without a doubt the much-anticipated Lightning Talks. Hosted once again by the irrepressible Mark-Jason Dominus, the 90-minute series of five-minute short talks went over quite well, featuring topics ranging from how hacking Perl is like Japanese food and the graphing of IRC conversations to a call for more political action from within hackerdom and an overview of the Everything Engine. The showstopper, however, was once again Damian, who is generally reputed to be unable to hold forth on any topic for anything *less* than an hour and a half. To everyone's surprise, the Lightning Talk consisted of a hilarious argument in the grand Shakespearean style between Damian and Brian Ingerson, over the disputed authorship of Inline::Files, a nifty new module for extending the capabilities of the old DATA filehandle. Their invective-laden dialogue was the most brilliantly humorous five minutes of the entire conference, and, yes, Damian even managed to finished on time. :) If you had the misfortune not to be present, you might be lucky enough to see them have at each other again at <a href="http://conferences.oreilly.com/perl/">this year's Perl Conference 5 in San Diego.</a></p>

<p>Later in the day, Nat and Damian chaired a Perl 6 status meeting, reviewing the major events in Perl 6 starting with the announcement at TPC4, and working forward to the present language design phase. "This is a fresh rebirth for Perl AND for the community," Gnat said at one point. "Everything changes." The sometimes fractious attitudes encountered on the various Perl mailing lists were discussed. "In some ways this is a meritocracy," Gnat confessed. "Write good patches and we will love you." Kirrily "Skud" Robert then spoke at length on the future of the core Perl modules, and on the need to develop guidelines to direct the process of porting them to Perl 6.</p>

<p>Finally, the plenary session Friday afternoon closed the conference with another presentation from, you guessed it, Damian Conway. Our Mr. Conway took the opportunity to thank Yet Another Society and its sponsors for all of the contributions that permitted him to take a year off from academia to work exclusively on Perl. He then reviewed some of the fruits of that labor to date, including NEXT.pm, Inline::Files and the brilliant Filter::Simple, all of which, it should be pointed out, are now freely available to the community.</p>

<p>It has been nearly a year since Jon Orwant's now-legendary coffee-mug-tossing tantrum at TPC4 touched off the decision to begin work on Perl 6. After the grueling RFC process, the endless mailing list discussions and the breathless wait to see what Larry would come through with, Perl 6 the language and Perl 6 the community finally appear to be taking shape right before our eyes. New innovations are coming along more and more often, including <a href="/pub/2001/05/03/wall.html">Larry's Apocalypses</a>, <a href="/pub/2001/02/inline.html">Brian's Inline modules</a>, all of the potential emerging from the Web services meme, the future of the CPAN, new projects like Reefknot -- including continuing projects such as POE and Mason -- and, last but not least, whatever the heck it is that Damian is working on this week.</p>

<p>The Yet Another Perl Conferences are evolving, as well. Although neither Larry nor Randal nor Orwant could make it this year, the turnout was nevertheless such that, no matter where you looked at the conference, there you might find someone you knew from IRC, from the mailing lists, from previous conferences or for the great work that person had done for Perl. Although I've only touched on some highlights, there were dozens of presenters at this year's conference, practically all of them had something fascinating to say, and I really wish I had more time and space to cover them all.</p>

<p>Finally, it's safe to say that YAPC::NA clearly defined its own existence as a growing concern of the community this year, having at last separated from its birthplace at Carnegie Mellon in Pittsburgh. Montreal, as it turns out, is a fantastic, vibrant place to hold a summer conference, with countless magnificent restaurants and bars suitable for hosting the heady after-hours carousings of the Perl community. From every report, a good time was had by nearly all, and I think we all eagerly await the next YAPC::America::North, wherever it may be held.</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1542" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p6pdigest/20010616.html" rel="bookmark">This Week in Perl 6 (10 - 16 June 2001)</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bryan Warnock</span> on <abbr class="published" title="2001-06-19T00:00:00-08:00">June 19, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
      <h3><a name="Notes">Notes</a></h3>

</p>

<p>

You can subscribe to an email version of this summary by sending an empty
message to 
<a href="mailto:perl6-digest-subscribe@netthink.co.uk">perl6-digest-subscribe@netthink.co.uk</a>.
</p>

<p>
Please send corrections and additions to 
<a href="mailto:bwarnock@capita.com">bwarnock@capita.com</a>.
</p>

<p>
The Perl 6 mailing lists saw 165 messages across 20 threads, with 31
authors contributing.  Two threads (and two authors) dominated the lists
this week.  Other than that, traffic was noticeably lighter with YAPC 
going on.
<h3><a name="Even_More_on_Unicode_and_Regexes">Even More on Unicode and Regexes</a></h3>

</p>

<p>

It seems that both general relativity/quantum mechanics and linguistics/text 
processing are hoping superstrings can solve their respective 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03157.html">enigmas</a>:
<blockquote>We probably also ought to answer the question &quot;How accommodating to 
non-latin writing systems are we going to be?&quot; It's an uncomfortable 
question, but one that needs asking. Answering by Larry, probably, but 
definitely asking. Perl's not really language-neutral now (If you think so, 
go wave locales at Jarkko and see what happens... :) but all our biases are 
sort of implicit and un (or under) stated. I'd rather they be explicit, 
though I know that's got problems in and of itself.
</p>

</p><pre>
                                        Dan
</blockquote></pre>

<p>
This was followed by a lengthy discussion on different languages, although Perl 
wasn't really one of them.  It was the general conclusion that Perl needn't try
to support the world's languages, but should at least leave sufficient hooks
for others to do so.  More will surely follow.
<h3><a name="Multi_Dimensional_Arrays_and_Relational_Databases">Multi-Dimensional Arrays and Relational Databases</a></h3>

</p>

<p>

Me 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07519.html">started</a> the other lengthy thread for this week, in a call for a multi-dimensional
array syntax that would allow easy modeling of a relational database.  Several 
folks pointed out that
<ol><li>Me could always use Perl 6's planned replaceable syntax to define such
capabilities.
</li><li>If Perl 5 arrays (even with only a pseudo-multi-dimensional nature to them)
aren't fundamentally in sync with database access, then to make them so would
require rendering them out sync with everything else they've been used for.
</li><li>Array slicing, even with tying and overloading, isn't nearly as good as
working with SQL (as through DBI) for this type of data manipulation.
</li></ol></p>

<p>
David L. Nicol did provide 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07592.html">an interesting digression</a> on &quot;tasty&quot; variables, which are, more or less, the ultimate in lazy
evaluation.  Mostly, though, the discussion went completely sideways.
</p>

<p>

<h3><a name="Core_Architecture">Core Architecture</a></h3>

</p>

<p>
Dan Sugalski 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03199.html">provided a glossy</a> on what the guts of the new interpreter will look like.  
<h3><a name="Perl_6_Emulator">Perl 6 Emulator</a></h3>

</p>

<p>

Simon Cozens
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03218.html">released</a> a rough Perl 6 emulator.
<h3><a name="Handler_Function_or_VTable">Handler Function or VTable?</a></h3>

</p>

<p>

Dave Mitchell 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03179.html">asked</a> if a single handler function would be better than the vtable scheme
currently planned.  (&quot;
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03189.html">No</a>,&quot; says Dan.)
<h3><a name="Argument_Decoding">Argument Decoding</a></h3>

</p>

<p>

Dan also
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03154.html">asked</a> for opnions on who should decode opcode function arguments - the functions
or the dispatch loop?  (Argument decoding, in this case, is the translation 
from a virtual register number to its memory address.)  A number of trade-offs
were discussed, with function decoding having a slight edge.  That, in turn.
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03155.html">led</a> to a brief discussion on shadow functions - C functions that mirror Perl
functions - and how useful they are or aren't.
<h3><a name="Polymorphic_Builtins">Polymorphic Builtins</a></h3>

</p>

<p>

David Nicol
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07570.html">lamented</a> about not having multiple dispatch based on signatures. 
<h3><a name="YAPC">YAPC</a></h3>

</p>

<p>

Although he didn't mention it on the mailing lists, Nathan Torkington 
did tell
<a href="http://use.perl.org/comments.pl?sid=01/06/13/1426233&cid=1">use.perl.org</a> where to find an MP3 of Damian Conway's opening spiel on Perl 6.  (Damian was
speaking in place of an ill Larry Wall.)
For the less imaginative, the slides can be found
<a href="http://www.yetanother.org/damian/Perl6/YAPC_talk.pdf">here</a> in PDF format.
</p>

<hr>

<a href="mailto:bwarnock@capita.com">Bryan C. Warnock</a>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Even_More_on_Unicode_and_Regexes">Even More on Unicode and Regexes</a>
  <li><a href="#Multi_Dimensional_Arrays_and_Relational_Databases">Multi-Dimensional Arrays and Relational Databases</a>
  <li><a href="#Core_Architecture">Core Architecture</a>
  <li><a href="#Perl_6_Emulator">Perl 6 Emulator</a>
  <li><a href="#Handler_Function_or_VTable">Handler Function or VTable?</a>
  <li><a href="#Argument_Decoding">Argument Decoding</a>
  <li><a href="#Polymorphic_Builtins">Polymorphic Builtins</a>
  <li><a href="#YAPC">YAPC</a>
</ul>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1534" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p5pdigest/20010617.html" rel="bookmark">This Week on p5p 2001/06/17</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2001-06-19T00:00:00-08:00">June 19, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            

<h3><a name="Notes">Notes</a></h3>

</p>

<p>
  
Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org 
where YYYYMM is the current year and month. Changes and additions to the 
perl5-porters biographies are particularly welcome.
</p>

<p>
This was a reasonably busy week, seeing just over 400 messages.
</p>

<p>
Many thanks to Leon for taking over these summaries in my absence.
<h3><a name="More__Wall_fixes">More -Wall fixes</a></h3>

</p>

<p>

Doug MacEachern has been furiously fixing up compiler warnings this
week, tidying up 
<code>ext/</code> so that it is less noisy under 
<code>-Wall</code>. 
</p>

<p>
One major problem was that if an XSUB has no arguments and all the work
is done in PP code, the helper variable 
<code>ax</code> is likely to be unused; Doug added a macro, 
<code>PERL_UNUSED_VAR</code>, to wrap around 
<code>ax</code> in such cases to prevent 
<code>xsubpp</code> creating code that produced warnings.
</p>

<p>
Nick Clark also produced a mega (141K) warning-satisfying patch.
</p>

<p>
Dough also fixed up some missing 
<code>dTHX</code>es in some of the extensions. This led to an associated change in 
<code>ExtUtil/Constant.pm</code>, Nick Clark's helper module for creating the 
<code>constant</code> subroutine in XS modules. It took a while for people to get their heads
around the idea that this was a Perl module that spat out XS code -
unfortunately, MakeMaker doesn't like the idea of having two 
<code>.xs</code> files in a module, so you can't have a separate file for constants;
hence, you have to do evil things like modifying the XS code produced
by 
<code>h2xs</code> in place. Urgh.
<h3><a name="Miscellaneous_Darwin_Updates">Miscellaneous Darwin Updates</a></h3>

</p>

<p>

Wilfredo Sanchez and Larry Schatzer have been our Mac OS X heroes this
week. They uncovered a bunch of problems, some of which have even been
fixed. Firstly, PerlIO was intercepting a warning from the locale system
before it had been properly initialized, and was causing segfaults.
There were also some numeric problems with 
<code>INT32_MIN</code> - Apple's 
<code>stdin.h</code> defines it as being -2147483648 instead of the more gcc-friendly
-2147483647-1.  As Jarkko said, the real long-term fix would be to
fix Apple's header files; unfortunately, we can't do that very easily,
so we have to work around to redefining 
<code>INT32_MIN</code> on Darwin ourselves. 
<h3><a name="Hash_accessor_macros">Hash accessor macros</a></h3>

</p>

<p>

Abhijit Menon-Sen asked why 
<code>hv.c</code> does things like
</p>

</p><pre>
    register XPVHV* xhv;
    ...
    xhv = (XPVHV*)SvANY(hv);
</pre>

</p><pre>
    ... use of xhv->xhv_* ...
</pre>

<p>
instead of simply
</p>

</p><pre>
    SvFOO(hv);
</pre>

<p>
which is considerably easier to grep for. He then sent seven large patches
which revert to the macro behaviour. Jarkko applied the patches, but then
found that this generated a bunch of new warnings, and some nasty errors on
HPUX.
</p>

<p>
Doug MacEachern piped up, saying that the original code was there for
reasons of performance; direct access saves a couple of indirections every
time one of the 
<code>xhv_</code> fields is accessed. He also said that the first 
</p>

</p><pre>
    xhv = (XPVHV*)SvANY(hv);
</pre>

<p>
might be stored in a register, optimising further accesses. Both Mike Guy
and Ilmari Karonen suggested reverting to the previous optimised format,
but putting in the macro version as comments so that they can be grepped
for. Spider was called in to fix up the HPUX indigestion.
</p>

<p>
Abhijit also threw in some updates to 
<code>dump.c</code>, and removed the tests in the core for &quot;anonymous stashes&quot; - a concept
which didn't even appear to exist...
<h3><a name="iThreads_development">iThreads development</a></h3>

</p>

<p>

Artur's been busy this week with iThreads support; he's working on a
number of different areas. Firstly, the continuing conversion of the
<code>Threads.pm</code> module for iThreads. His new module will be called 
<code>threads.pm</code> and will soon appear on CPAN once he's finished writing test cases.
Another tack was to make regular expressions safe in threaded
environments, but that seems to have temporarily ground to a halt.
</p>

<p>
His big achievement this week was the implementation and documenting
of the 
<code>CLONE</code> method, a callback like 
<code>DESTROY</code> called on all objects when a thread is cloned. This caused some brief
problems on Win32 because of the way it was detecting stashes. Stashes
are, of course, normal hashes, so you have to be careful to call the
<code>CLONE</code> method from a stash, rather than do something horrible like attempt
to call the 
<code>CLONE</code> entry from a hash. Nick added
</p>

</p><pre>
     if (gv_stashpv(HvNAME(hv),0)
</pre>

<p>
as a guard, and it all worked again.
<h3><a name="Cross_compilation">Cross-compilation</a></h3>

</p>

<p>

Jarkko has reported that the basics of cross-compilation support are
working; he built miniperl for iPAQ by constructing an SSH tunnel, sending
the binaries produced by Configure across and reading back the results.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-06/msg00737.html">Read about it.</a></p>

<p>

<h3><a name="SV_Documentation">SV Documentation</a></h3>

</p>

<p>
God of the week award goes to Dave Mitchell. Over on the Perl 6 lists,
I'd asked for people to look through the Perl 5 sources and see what
sort of things happen to SVs, so that I could see what needed to happen
for Perl 6. In doing so, he produced 800 lines of documentation and
comments for 
<code>sv.c</code>. Wow.
</p>

<p>
On his travels, he asked some questions about SV macros; the answers may
be interesting.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-06/msg00586.html">Read about it.</a><h3><a name="Various">Various</a></h3>

</p>

<p>

Ilya put in a couple of scary patches for OS/2, including one which made
Configure self-modifying. This was considered to be a Bad Thing.
</p>

<p>
Jarkko integrated the NetWare modifications to Perl, and the 
<code>Memoize</code> module. 
</p>

<p>
Sean Teague announced that the 
<a href="http://language.perl.com/ppt/">Perl Power Tools</a> can be downloaded from CPAN as 
<code>Bundle::PPT</code>.
</p>

<p>
Chris Nandor updated 
<code>File::Find</code> and its tests to cope with MacOS; however, this consisted mainly of 
several iterations of
</p>

</p><pre>
    if (macos) {
        A
    } else {
        B
    }
</pre>

<p>
which Jarkko balked at. Thomas Wegner rewrote the test suite to be
much more maintainable.
</p>

<p>
Mike Guy noticed that many of the internal functions don't support
UTF8 strings properly; an important culprit is 
<code>Perl_warner</code>, which means every warning or error message containing UTF8 data
gets mangled. He wants something which sanitizes a string for display.
Any takers?
</p>

<p>
Peter Prymmer hacked 
<code>h2ph</code> to deal with C trigraphs - you remember them, the evil convention of
using, say, &quot;??=&quot; instead of &quot;#&quot;. Urgh. He also fixed up some of the
extensions to build more happily under VMS. Craig Berry also chipped in
some extension patches for VMS.
</p>

<p>
Until next week I remain, your humble and obedient servant,
</p>

<hr>

<a href="mailto:mjd-perl-thisweek-200106+@plover.com">Mark-Jason Dominus</a>


<ul>
  <li><a href="#This_week_on_perl5_porters_10_June__17_June_2001">This week on perl5-porters (10 June--17 June 2001)</a>
  <li><a href="#Notes">Notes</a>
  <li><a href="#More__Wall_fixes">More -Wall fixes</a>
  <li><a href="#Miscellaneous_Darwin_Updates">Miscellaneous Darwin Updates</a>
  <li><a href="#Hash_accessor_macros">Hash accessor macros</a>
  <li><a href="#iThreads_development">iThreads development</a>
  <li><a href="#Cross_compilation">Cross-compilation</a>
  <li><a href="#SV_Documentation">SV Documentation</a>
  <li><a href="#Various">Various</a>
</ul>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1526" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/13/recdecent.html" rel="bookmark">Parse::RecDescent Tutorial</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Jeffrey Goff</span> on <abbr class="published" title="2001-06-13T00:00:00-08:00">June 13, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- Parse::RecDescent Tutorial -->

<h3>The Basics</h3>
<p>Parse::RecDescent is a combination compiler and interpreter. The
language it uses can be thought of roughly as a macro language like
CPP's, but the macros take no parameters. This may seem limiting, but
the technique is very powerful nonetheless. Our macro language looks
like this:</p>
<pre>
  macro_name : macro_body</pre>
<p>A colon separates the macro's name and body, and the body can have any
combination of explicit strings ("string, with optional spaces"), a
regular expression (<code>/typical (?=perl) expression/</code>), or another
macro that's defined somewhere in the source file. It can also have
alternations. So, a sample source file could look like:</p>
<pre>
  startrule : day  month /\d+/ # Match strings of the form &quot;Sat Jun 15&quot;
</pre>
<pre>

  day : &quot;Sat&quot; | &quot;Sun&quot; | &quot;Mon&quot; | &quot;Tue&quot; | &quot;Wed&quot; | &quot;Thu&quot; | &quot;Fri&quot;</pre>
<pre>

  month : &quot;Jan&quot; | &quot;Feb&quot; | &quot;Mar&quot; | &quot;Apr&quot; | &quot;May&quot; | &quot;Jun&quot; |
          &quot;Jul&quot; | &quot;Aug&quot; | &quot;Sep&quot; | &quot;Oct&quot; | &quot;Nov&quot; | &quot;Dec&quot;</pre>
<p>Three macros make up this source file: <code>startrule</code>, <code>dayrule</code>
and <code>monthrule</code>. The compiler will turn these rules into its
internal representation and pass it along to the interpreter. The
interpreter then takes a data file and attempts to expand the macros in
<code>startrule</code> to match the contents of the data file.</p>
<p>The interpreter takes a string like "Sat Jun 15" and attempts to expand
the <code>startrule</code> macro to match it. If it matches, the interpreter
returns a true value. Otherwise, it returns <code>undef</code>;. Some sample
source may be welcome at this point:</p>
<pre>
  #!/usr/bin/perl
</pre>
<pre>

  use Parse::RecDescent;</pre>
<pre>

  # Create and compile the source file
  $parser = Parse::RecDescent-&gt;new(q(
    startrule : day  month /\d+/</pre>
<pre>

    day : &quot;Sat&quot; | &quot;Sun&quot; | &quot;Mon&quot; | &quot;Tue&quot; | &quot;Wed&quot; | &quot;Thu&quot; | &quot;Fri&quot;</pre>
<pre>

    month : &quot;Jan&quot; | &quot;Feb&quot; | &quot;Mar&quot; | &quot;Apr&quot; | &quot;May&quot; | &quot;Jun&quot; |
            &quot;Jul&quot; | &quot;Aug&quot; | &quot;Sep&quot; | &quot;Oct&quot; | &quot;Nov&quot; | &quot;Dec&quot;
  ));</pre>
<pre>

  # Test it on sample data
  print &quot;Valid date\n&quot; if $parser-&gt;startrule(&quot;Thu Mar 31&quot;);
  print &quot;Invalid date\n&quot; unless $parser-&gt;startrule(&quot;Jun 31 2000&quot;);</pre>
<p>Creating a new Parse::RecDescent instance is done just like any other
OO module. The only parameter is a string containing the source file,
or <em>grammar</em>. Once the compiler has done its work, the interpreter can
run as many times as necessary. The sample source tests the interpreter
on valid and invalid data.</p>
<p>By the way, just because the parser knows that the string "Sat Jun 15"
is valid, it has no way of knowing if the 15th of June was indeed a
Saturday. In fact, the sample grammar would also match "Sat Feb 135".
The grammar describes form, not content.</p>

<h3><a name="getting data">Getting Data</a></h3>
<p>Now, this is quite a bit of work to go to simply to match a string.
However, much, much more can be done. One element missing from this
picture is capturing data. So far the sample grammar can tell if a
string matches a regular expression, but it can't tell us what the data
it's parsed is. Well, these macros can be told to run perl code when
encountered.</p>

<p>Perl code goes after the end of a rule, enclosed in braces. When the
interpreter recognizes a macro such as <code>startrule</code>, the text
matched is saved and passed to the perl code embedded in the grammar.</p>
<p>Each word or <em>term</em> of the macro ('day', 'month'...) is saved by the
interpreter. <code>dayrule</code> gets saved into the <code>$item{day}</code> hash
entry, as does <code>monthrule</code>. The <code>/\d+/</code> term doesn't have a
corresponding name, so its data comes from the <code>@item</code> array.
<code>$item[0]</code> is always the rule name, so <code>/\d+/</code> gets saved into
<code>$item[3]</code>. So, code to print the parsed output from our sample
<code>startrule</code> rule looks like this:</p>
<pre>
  startrule : day month /\d+/
            { print &quot;Day: $item{day} Month: $item{month} Date: $item[3]\n&quot;; }</pre>
<p>Everything in the parser is run as if it was in the Parse::RecDescent
package, so when calling subroutines outside Parse::RecDescent, either
qualify them as <code>Package::Name-&gt;my_sub()</code> or subclass
Parse::RecDescent.</p>


<h3><a name="a minilanguage">A Mini-Language</a></h3>
<p>All of the pieces are now in place to create a miniature language,
compile, and run code in it. To make matters simple, the language will
only have two types of instruction: Assign and Print. A sample 'Assign'
instruction could look like <code>foo = 3 + a</code>. The 'Print' statement
will look like <code>print foo / 2</code>. Add the fact that <code>3 + a</code> can
be arbitrarily long (<code>temp = 3+a/2*4</code>), and now you've got a
non-trivial parsing problem.</p>
<p>The easiest instruction to implement is the 'Print' instruction.
Assuming for the moment that the right-hand side of the statement (the
<code>foo / 2</code> part of <code>print foo / 2</code>) already has a rule
associated with it (called 'expression'), the 'Print' instruction is
very simple:</p>
<pre>
  print_instruction : /print/i expression
                    { print $item{expression}.&quot;\n&quot; }</pre>
<p>The 'Assign' instruction is a little harder to do, because we need to
implement variables. We'll do this in a straightforward fashion,
storing variable names in a hash. This will live in the main package,
and for the sake of exposition we'll call it <code>%VARIABLE</code>. One
caveat to remember is that the perl code runs inside the
Parse::RecDescent package, so we'll explicitly specify the <code>main</code>
package when writing the code.</p>
<p>More complex than the 'Print' instruction, the 'Assign' instruction has
three parts: the variable to assign to, an "=" sign, and the expression
that gets assigned to the variable. So, the instruction looks roughly
like this:</p>
<pre>
  assign_instruction : VARIABLE &quot;=&quot; expression
                     { $main::VARIABLE{$item{VARIABLE}} = $item{expression} }</pre>
<p>Much like we did with the <code>dayrule</code> rule in the last section, we'll
combine the <code>print_instruction</code> and <code>assign_instruction</code> into
one <code>instruction</code> rule. The syntax for this should be fairly simple
to remember, as it's the same as a Perl regular expression.</p>
<pre>
  instruction : print_instruction
              | assign_instruction</pre>
<p>In order to make the <code>startrule</code> expand to the <code>instruction</code>
rule, we'd ordinarily use a rule like <code>startrule : instruction</code>.
However, most languages let you enter more than one instruction in a
source file. One way to do this would be to create a recursive rule
that would look like this:</p>
<pre>
  instructions : instruction &quot;;&quot; instructions
               | instruction
  startrule : instructions</pre>
<p>[[JMG: I'm sorely tempted to rewrite this chunk, if only 'cause there's
a lot of info here in just one paragraph]]</p>
<p>Input text like "print 32" expands as follows: <code>startrule</code> expands
to <code>instructions</code>. <code>instructions</code> expands to <code>instruction</code>,
which expands to <code>print_instruction</code>. Longer input text like "a =
5; b = a + 5; print a" expands like so: <code>startrule</code> expands to
<code>instructions</code>. The interpreter looks ahead and chooses the
alternative with the semicolon, and parses "a = 5" into its first
instruction. "b = a + 5; print a" is left in <code>instructions</code>. This
process gets repeated twice until each bit has been parsed into a
separate <code>instruction</code>.</p>
<p>If the above seemed complex, Parse::RecDescent has a shortcut
available. The above <code>instructions</code> rule can be collapsed into
<code>startrule : instruction(s)</code>. The <code>(s)</code> part can simply be
interpreted as "One or more <code>instruction</code>s". By itself this assumes
only whitespace exists between the different instructionrule;s, but
here again, Parse::RecDescent comes to the rescue, by allowing the user
to specify a separator regular expression, like <code>(s /;/)</code>. So, the
<code>startrule</code> actually will use the <code>(s /;/)</code> syntax.</p>
<pre>
  startrule : instruction(s /;/)</pre>
<p>
<h3><a name="the expression rule">The Expression Rule</a></h3>
<p>Expressions can be anything from '0' all the way through
'a+bar*foo/300-75'. Ths range may seem intimidating, but we'll try to
break it down into easy-to-digest pieces. Starting simply, an
expression can be as simple as a single variable or integer. This would
look like:</p>
<pre>
  expression : INTEGER
             | VARIABLE
             { return $main::VARIABLE{$item{VARIABLE}} }</pre>
<p>The <code>VARIABLE</code> rule has one minor quirk. In order to compute the
value of the expression, variables have to be given a value. In order
to modify the text parsed, simply have the code return the modified
text. In this case, the perl code looks up the variable in
<code>%main::VARIABLE</code> and returns the value of the variable rather than
the text.</p>
<p>Those two lines take care of the case of an expression with a single
term. Multiple-term expressions (such as <code>7+5</code> and <code>foo+bar/2</code>)
are a little harder to deal with. The rules for a single expression
like <code>a+7</code> would look roughly like:</p>
<pre>
  expression : INTEGER OP INTEGER
             | VARIABLE OP INTEGER
             | INTEGER OP VARIABLE
             | VARIABLE OP VARIABLE
  OP : /[-+*/%]/</pre>
<p>This introduces one new term, <code>OP</code>. This rule simply contains the
binary operators <code>/[-+*/%]/</code>. The above approach works for two
terms, and can be extended to three terms or more, but is terribly
unwieldy. If you'll remember, the <code>expression</code> rule already is
defined as <code>INTEGER | VARIABLE</code>, so we can replace the right-hand
term with <code>expression</code>. Replacing the right-hand term with
<code>expression</code> and getting rid of redundant lines results in this:</p>
<pre>
  expression : INTEGER OP expression
             | VARIABLE OP expression</pre>
<p>We'll hand off the final evaluation to a function outside the
Parse::RecDescent package. This function will simply take the
<code>@item</code> list from the interpreter and evaluate the expression.
Since the array will look like <code>(3,'+',5)</code>. we can't simply say
<code>$item[1] $item[2] $item[3]</code>, since <code>$item[2]</code> is a scalar
variable, not an operator. Instead we'll take the string <code>&quot;$item[1] $item[2] $item[3]&quot;</code> and evaluate that. This will evaluate the string
and return the result. This then gets passed back, and becomes the
value of the <code>expression</code>.</p>
<pre>
  expression : INTEGER OP expression
             { return main::expression(@item) }
             | VARIABLE OP expression
             { return main::expression(@item) }
</pre>
<pre>

  sub expression {
    shift;
    my ($lhs,$op,$rhs) = @_;
    return eval &quot;$lhs $op $rhs&quot;;
  }</pre>
<p>That completes our grammar. Testing is fairly simple. Write some code
in the new language, like "a = 3 + 5; b = a + 2; print a; print b", and
pass it to the <code>$parser-&gt;startrule()</code> method to interpret the
string.</p>
<p>The file included with this article comes with several test samples.
The grammar in the tutorial is very simple, so plenty of room to
experiment remains. One simple modification is to change the
<code>INTEGER</code> rule to account for floating point numbers. Unary
operators (single-term such as <code>sin()</code>) can be added to the
<code>expression</code> rule, and statements other than 'print' and 'assign'
can be added easily.</p>
<p>Other modifications might include adding strings (some experimental
extensions such as '&lt;perl_quotelike&gt;' may help). Changing the
grammar to include parentheses and proper precedence are other possible
projects.</p>

<h3><a name="closing">Closing</a></h3>
<p>Parse::RecDescent is a powerful but difficult-to-undertstand module.
Most of this is because parsing a language can be difficult to
understand. However, as long as the language has a fairly consistent
grammar (or one can be written), it's generally possible to translate
it into a grammar that Parse::RecDescent can handle.</p>
<p>Many languages have their grammars available on the Internet. Grammars
can usually be found in search engines under the keyword 'BNF',
standing for 'Backus-Naur Form'. These grammars aren't quite in the
form Parse::RecDescent prefers, but can usually be modified to suit.</p>
<p>When writing your own grammars for Parse::RecDescent, one important
rule to keep in mind is that a rule can never have itself as the first
term. This makes rules such as <code>statement : statement &quot;;&quot; statements</code> 
illegal. This sort of grammar is called "left-recursive"
because a rule in the grammar expands to its left side.</p>
<p>Left-recursive grammars can usually be rewritten to right-recursive,
which will parse cleanly under Parse::RecDescent, but there are classes
of grammars thatcant be rewritten to be right-recursive. If a grammar
can't be done in Parse::RecDescent, then something like
<code>Parse::Yapp</code> may be more appropriate. It's also possible to coerce
<code>yacc</code> into generating a perl skeleton, supposedly.</p>
<p>Hopefully some of the shroud of mystery over Parse::RecDescent has been
lifted, and more people will use this incredibly powerful module.</p>
<pre>
 #!/usr/bin/perl -w
</pre>
<pre>

 use strict;
 use Parse::RecDescent;
 use Data::Dumper;</pre>
<pre>

 use vars qw(%VARIABLE);</pre>
<pre>

 # Enable warnings within the Parse::RecDescent module.</pre>
<pre>

 $::RD_ERRORS = 1; # Make sure the parser dies when it encounters an error
 $::RD_WARN   = 1; # Enable warnings. This will warn on unused rules &amp;c.
 $::RD_HINT   = 1; # Give out hints to help fix problems.</pre>
<pre>

 my $grammar = &lt;&lt;'_EOGRAMMAR_';</pre>
<pre>

   # Terminals (macros that can't expand further)
   #</pre>
<pre>

   OP       : m([-+*/%])      # Mathematical operators
   INTEGER  : /[-+]?\d+/      # Signed integers
   VARIABLE : /\w[a-z0-9_]*/i # Variable</pre>
<pre>

   expression : INTEGER OP expression
              { return main::expression(@item) }
              | VARIABLE OP expression
              { return main::expression(@item) }
              | INTEGER
              | VARIABLE
              { return $main::VARIABLE{$item{VARIABLE}} }</pre>
<pre>

   print_instruction  : /print/i expression
                      { print $item{expression}.&quot;\n&quot; }
   assign_instruction : VARIABLE &quot;=&quot; expression
                      { $main::VARIABLE{$item{VARIABLE}} = $item{expression} }</pre>
<pre>

   instruction : print_instruction
               | assign_instruction</pre>
<pre>

   startrule: instruction(s /;/)</pre>
<pre>

 _EOGRAMMAR_</pre>
<pre>

 sub expression {
   shift;
   my ($lhs,$op,$rhs) = @_;
   $lhs = $VARIABLE{$lhs} if $lhs=~/[^-+0-9]/;
   return eval &quot;$lhs $op $rhs&quot;;
 }</pre>
<pre>

 my $parser = Parse::RecDescent-&gt;new($grammar);</pre>
<pre>

 print &quot;a=2\n&quot;;             $parser-&gt;startrule(&quot;a=2&quot;);
 print &quot;a=1+3\n&quot;;           $parser-&gt;startrule(&quot;a=1+3&quot;);
 print &quot;print 5*7\n&quot;;       $parser-&gt;startrule(&quot;print 5*7&quot;);
 print &quot;print 2/4\n&quot;;       $parser-&gt;startrule(&quot;print 2/4&quot;);
 print &quot;print 2+2/4\n&quot;;     $parser-&gt;startrule(&quot;print 2+2/4&quot;);
 print &quot;print 2+-2/4\n&quot;;    $parser-&gt;startrule(&quot;print 2+-2/4&quot;);
 print &quot;a = 5 ; print a\n&quot;; $parser-&gt;startrule(&quot;a = 5 ; print a&quot;);</pre>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1546" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p6pdigest/THISWEEK-20010612.html" rel="bookmark">This Week in Perl 6 (3 - 9 June 2001)</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bryan Warnock</span> on <abbr class="published" title="2001-06-12T00:00:00-08:00">June 12, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
                  <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an empty
message to 
<a href="mailto:perl6-digest-subscribe@netthink.co.uk">perl6-digest-subscribe@netthink.co.uk</a>.
</P>

<P>
Please send corrections and additions to 
<a href="mailto:bwarnock@capita.com">bwarnock@capita.com</a>.
</P>

<P>
The Perl 6 mailing lists saw 226 messages across 19 threads, with 40
authors contributing.  Although the traffic was moderate, and very little
heat was generated, most of the light was of the mysterious,
all-encompassing kind.
<H3><a name="Unicode">Unicode</a></H3>

</P>

<P>

Dan Sugalski 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03062.html">dropped a link </a> provided by
<a href="http://slashdot.org/">Slashdot</a>'s recent article on 
<a href="http://www.hastingsresearch.com/net/04-unicode-limitations.shtml">why Unicode won't work</a>.  Russ Allbery and Simon Cozens both started with
an anti-FUD discussion, pointing out some of the questionable veracity
and the datedness of the paper's conclusions, and providing basic Unicode 
information.
</P>

<P>
There was a brief discussion
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03114.html">starting here</a> on the lossiness of Unicode, and whether the tables were going to be
embedded/included in Perl 6. (Dan's plan is to build external libraries 
(for the latter) so that improved or alternate encoding sets can be replaced 
independently (to handle the former).)
</P>

<P>
Hong Zhang then
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03072.html">kicked off a thread</a> that brought locales into the discussion, particularly with case 
determination and sorting.
</P>

<P>
The discussions were mostly academic - not much was actually decided on.
Larry did drop a couple hints as to 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03098.html">how much</a> (or 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03109.html">how little </a>) Perl 6 may differ from Perl 5.6 with Unicode handling.
<H3><a name="A_Strict_View_Of_Properties">A Strict View Of Properties</a></H3>

</P>

<P>

A lengthy discussion on the interaction of properties with 
<CODE>use strict</CODE> was
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07412.html">started</a> by Me.  (In truth, the actual discussion
on properties and stricture was very short - because properties can be both
static variable properties or dynamic value properties, Perl 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07457.html">can't determine</a> at compile-time whether a property being accessed actually exists. 
</P>

<P>
A parallel discussion involving a
'super-strict' mode to, in essence, allow programmers to completely turn off
any runtime constructs and beef up compile-time checking devolved into a
Perl-Java debate.  Albeit more civilized than usual.)  
<H3><a name="Regular_Expressions">Regular Expressions</a></H3>

</P>

<P>

In a continuation of last week's
<a href="/pub/2001/06/p6pdigest/THISWEEK-20010601.html#Perl_Virtual_Registers_continued">discussion </a> on registers and opcodes, Larry 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03034.html">listed</a> his reasons for wanting the regex engine 
integrated into the regular opcode space:
<BLOCKQUOTE></P>

<P>
But there is precedent for turning second-class code into first-class
code.  After all, that's just what we did for ordinary quotes in the
transition from Perl 4 to Perl 5.  Perl 4 had a string interpolation
engine, and it was a royal pain to deal with.
</P>

<P>
The fact that Perl 5's regex engine is a royal pain to deal with should
be a warning to us.
</P>

<P>
Much of the pain of dealing with the regex engine in Perl 5 has to do
with allocation of opcodes and temporary values in a non-standard
fashion, and dealing with the resultant non-reentrancy on an ad hoc
basis.  We've already tried that experiment, and it sucks.  I don't
want to see the regex engine get swept back under the complexity carpet
for Perl 6.  It will come back to haunt us if we do:
</BLOCKQUOTE></P>

<P>
Although everyone was in agreement that halfway was, on a scale from Good to
Bad, Bad, there was some dissention on whether integration or separation was
needed to solve the maintenance issues.
<H3><a name="Lists_References_and_Interpolation">Lists, References, and Interpolation</a></H3>

</P>

<P>

Simon Cozens 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07464.html">asked</a> a couple of questions about the new syntax:
<BLOCKQUOTE></P>

<P>
Should properties interpolate in regular expressions? (and/or strings) I
don't suppose they should, because we don't expect subroutines to. 
(if $foo =~ /bar($baz,$quux)/;? Urgh, maybe we need m//e)
</P>

<P>
What should $foo = (1,2,3) do now? Should it be the same as what 
$foo = [1,2,3]; did in Perl 6? (This is assuming that $foo=@INC does what
$foo = \@INC; does now.) Putting it another way: does a list in scalar
context turn into a reference, or is it just arrays that do that? If
so, how can we disambiguate hashes from lists?
</BLOCKQUOTE></P>

<P>
(The provided answers were &quot;
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07469.html">yes</a>&quot; (Damian Conway) and &quot;
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07479.html">undecided</a>&quot; (Larry Wall), respectively.
<H3><a name="Miscellany">Miscellany</a></H3>

<UL><LI></P>

<P>
Jarkko Hietaniemi
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg03117.html">pointed</a> everyone to 
<a href="http://db.uwaterloo.ca/~eddemain/papers/WADS99a/">Erik Demaine's paper</a> on fast, resizable arrays.
</LI><LI>Simon Cozens has dropped several hints about having 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07401.html">Ruby spit out Perl bytecode</a>.  At least 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07405.html">mostly</a>. No official announcement yet, though.
</LI><LI>Adam Turoff 
<a href="http://archive.develooper.com/perl6-meta@perl.org/msg00936.html">announced </a> a &quot;Perl Apprenticeship Hour&quot; for
<a href="http://www.yetanother.org/index.cgi?page=news#yapcnasched">YAPC</a>.
</LI></UL><H3><a name="Follow_Ups">Follow-Ups</a></H3>

<H4><a name="Its_Alive">It's Alive</a></H4>

</P>

<P>

Because of (or to spite) last week's 
<a href="/pub/2001/06/p6pdigest/THISWEEK-20010601.html#It_Is_Another_Language_Feature_It_Is_Or_Is_It">coverage</a> of 
<CODE>it</CODE>, David Nicol 
<a href="http://archive.develooper.com/perl5-porters@perl.org/msg58600.html">produced a patch</a> for 5.7.1 that does such a thing.  
<H4><a name="Perl_Assembly_Language_Clarification">Perl Assembly Language: Clarification</a></H4>

</P>

<P>

Two weeks ago, when discussing A.C. Yardley's
<a href="/pub/2001/05/p6pdigest/THISWEEK-20010526.html#Perl_Assembly_Standard">Assembly Language proposal</a>, I mentioned the &quot;very-low-level operations&quot; of
the Perl Virtual Machine itself.  
</P>

<P>
The Perl Virtual Machine is, of course, far removed from any layers
that are normally considered to be &quot;very-low-level,&quot; and the Virtual Machine
opcodes tend to be somewhat complex in what and how much they accomplish.
&quot;Very-low-level&quot; wasn't intended as a description of the complexity on an
absolute scale, but as a description of the atomicy of operations relative
to the Virtual Machine itself.  (Thanks go to John Porter for bringing it to
my attention.)
</P>

<hr>

<a href="mailto:bwarnock@capita.com">Bryan C. Warnock</a>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Unicode">Unicode</a>
  <li><a href="#A_Strict_View_Of_Properties">A Strict View Of Properties</a>
  <li><a href="#Regular_Expressions">Regular Expressions</a>
  <li><a href="#Lists_References_and_Interpolation">Lists, References, and Interpolation</a>
  <li><a href="#Miscellany">Miscellany</a>
  <li><a href="#Follow_Ups">Follow-Ups</a>
  <li><a href="#Its_Alive">It's Alive</a>
  <li><a href="#Perl_Assembly_Language_Clarification">Perl Assembly Language: Clarification</a>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1540" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p5pdigest/THISWEEK-20010612.html" rel="bookmark">This Week on p5p 2001/06/09</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Leon Brocard</span> on <abbr class="published" title="2001-06-12T00:00:00-08:00">June 12, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
                  <H3><a name="Notes">Notes</a></H3>


<P>
You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><tt>perl5-porters-digest-subscribe@netthink.co.uk</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>perl-thisweek-YYYYMM@simon-cozens.org</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.  Changes and additions to the 
<a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters</a> biographies are particularly welcome.
</P>

<P>

</P>

<P>
This was a fairly quiet week with 240 messages.
<H3><a name="Removing_dependence_on_strtol">Removing dependence on strtol</a></H3>

</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#CLARK">Nicholas Clark</a> provided a patch to replace a call to 
<CODE>strtol</CODE>, a C library function convert a string to a long integer which (as
luck would have it, turns out to have bugs in certain
implementations). As Nicholas puts it: &quot;No falling over because of
other people's libraries' bugs&quot;.
</P>

<P>
This has cropped up again recently, so it's worth explaining. Perl is
a very portable language: it is expected to compile under many
different operating systems and under even more
libraries. Occasionally some of these platforms have buggy
implementations of functions: it is often easier to re-implement the
buggy function inside Perl (correctly, using Perl internals and
optimisations) than to code around that particular bug.
</P>

<P>
In this case, the problem was with UTS Amdahl's 
<CODE>strtol</CODE> not always
setting 
<CODE>errno</CODE> when appropriate in certain &quot;out of bounds&quot; cases.
<H3><a name="More_committers">More committers</a></H3>

</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#HIETANIEMI">Jarkko Hietaniemi</a> proposed that there be more Perl committers (people able to add
patches directly to the main Perl repository, which is held
under Perforce):
<blockquote>I think it's time we nudge the development model of Perl to be a bit
more open by extending the group of people having commit rights to the
Perl repository.
</P>

<P>
There are many active perl5-porters that submit a lot of patches, both
code (both C and Perl) and documentation patches, and I feel somewhat
silly being a bottleneck.  Some people (including me) could argue that
having a single point of quality control is a good thing, but I think
opening up access to the code would outweigh the potential downsides.
</blockquote></P>

<P>
The rest of the 
<a href="http://archive.develooper.com/perl5-porters@perl.org/msg58581.html">proposal</a> is worth reading, as it nicely sums up the situation. While it is good
to have one central master control point for quality control,
hopefully this change will free Jarkko up and increase the speed of
development on Perl.
</P>

<P>
So far Jarkko has taken the Configure subpumpkin, and Simon Cozens is
the Unicode subpumpkin. In addition, a changes mailing list will be
set up so that interested parties can read the patches without any
discussions.
</P>

<P>
Note that at the moment a few people already have Perforce access,
such as Gurusamy Sarathy (5.6.x pumpkin), Nick-Ing Simmons (Perl IO
pumpkin), and Charles Bailey (VMS pumpkin).
<H3><a name="Regex_Negation">Regex Negation</a></H3>

</P>

<P>

Jeff Pinyan noted that a new Java regex package contained support for
the following regular expression negation:
<CODE>[\w'\-[^\d]]</CODE>, which matches any word character, apostrophe, or hyphen, EXCEPT digits, 
and asked whether support was planned for Perl. He was pointed to the 
<a href="http://www.unicode.org/unicode/reports/tr18/">Unicode Regular Expression Guidelines</a>, which proposed a syntax:
<CODE>[AEIOU[^A]]</CODE>, but was rather unclear on many points. The backwards compatibility police
made an appearance, but otherwise nothing was resolved.
<H3><a name="Various">Various</a></H3>

</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#GURUSAMY">Gurusamy Sarathy</a> fixed an as-old-as-the-hills bug to do with lexical
lookups within eval EXPR.
</P>

<P>
Some minor documentation patches.
</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#COZENS">Simon Cozens</a> re-announced the 
<a href="http://public.activestate.com/cgi-bin/perlbrowse">Perl Repository Browser</a>. He also reworked and added many comments to 
<CODE>perly.y</CODE> (the Perl parser, which is now much easier to understand), and posted a 
<a href="http://simon-cozens.org/hacks/grammar.pdf">hypertext representation</a> of the Perl grammar.
</P>

<P>
David Nicol proposed a (broken, buggy, overworked) patch to Perl containing an new operator
<CODE>it</CODE>, which would allow the following code to print &quot;5&quot;:
<CODE>$a{foo} = 5; defined $a{foo}; print it</CODE>. It was not liked by the backwards compatibility police.
</P>

<P>
There was some IThreads discussion on the naming of modules, from
<CODE>IThreads</CODE> to 
<CODE>Thread</CODE> and 
<CODE>threads</CODE>.
</P>

<P>
Chris Nandor submitted some Mac OS compatibility patches.
</P>

<P>
Until next week I remain, your temporarily-replacing humble and
obedient servant,
</P>

<P><a href="mailto:leon@iterative-software.com">
Leon Brocard</a>
</P>

<hr>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Removing_dependence_on_strtol">Removing dependence on strtol</a>
  <li><a href="#More_committers">More committers</a>
  <li><a href="#Regex_Negation">Regex Negation</a>
  <li><a href="#Various">Various</a>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1522" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/12/anti_begin.html" rel="bookmark">The Beginner's Attitude of Perl: What Attitude?</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Robert Kiesling</span> on <abbr class="published" title="2001-06-12T00:00:00-08:00">June 12, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>A recent article here, <a href="/pub/a/2001/05/29/tides.html">Turning the Tides of Perl's Attitude Toward
Beginners</a>," described places on the Internet where beginners could get
help without fear of being flamed mercilessly by insensitive, elitist
Perl experts.  Experienced programmers, in short, must be more patient
with newbies.</p><p>

The article's undertone seemed to scold programmers for not being good
role models for the young, not having their photographs on Corn Flakes
boxes and not helping build strong bodies 12 different ways.</p><p>

I think that Perl is a great programming language and that everybody should
learn it.  But I don't agree that experienced Perl programmers have to
feel guilty about being more creative and efficient than other
programmers and submit to sensitivity training.</p><p>

Being critical toward beginners is part of the Internet culture.
It's not Perl's fault.  Try reading a Newsgroup for the X Window
System, for example.  Perl Newsgroups are positively civil, in
comparison.</p><p>

If Perl has an image problem, it's probably due to nature of the
language. Its label as a "scripting" language gives the impression
that Perl is best suited for writing shell scripts and batch files,
and that it's about as complicated as LOGO.</p><p>

Perl is anything but a simple language.  For example, here are two
(completely fictitious) statements, approximately similar in function,
the first in C, the second in Perl, which return a dynamic function
call:
<pre>
func *p = *functable[i * (sizeof func *)];

$func = ${*{"$pkg"}}{"$key"};
</pre>

<p>Perl's use of data references is at least as sophisticated as
so-called system languages - the difference being that languages
such as C allow Type-T programmers to fragment memory at will,
while Perl interprets code in its own memory space that makes it
safer for use in networked environments.</p><p>

But complex data references can cause side-effects, which can cause 
programming gaffes in Perl at least as quickly
as in C, Perl being an "interpreted language" and all.</p><p>

In addition, Perl is famous - or infamous - for its flexibility.  So
there are a half-dozen ways to do any one task, and that sort of
freedom can be confusing to beginners, if not downright frightening.
A Perl is a Perl is a Perl ....</p><p>

Right.  Anyway, with the advent of dynamic module loading in Perl,
just about anyone can write a library module to perform his or her
task in his or her own manner.  That kind of freedom can be very
liberating and empowering, but it can also lead to confusion and
panic.  Perl development efforts often have the character of
shirts-and-skins basketball games rather than a cloistered garden
of object orientedness.</p><p>

You can use objects in Perl, but they're really just references to
things called associative arrays, or hashes, which are composed of
sets of other things.</p><p>

All of these objects belong to a class hierarchy.  Even if the
programmer doesn't care, they still belong to a class in Perl, because
the considerate language designers worked in a generic, syntactically
consistent UNIVERSAL class for any piece of data that doesn't wear its
heart on its sleeve.</p><p>

I think E.E. Cummings might have done well as a Perl programmer.</p><p>

But back to object orientedness - instead of using objects, you can
just tell the Perl interpreter what module some piece of data is being
loaded from.  You don't have to cope with high-sounding and bothersome
object oriented terminology if you don't want to.</p><p>

However, to say that Perl has polymorphism - the ability of data to
assume different characteristics depending on its context - is like
saying that getting hit by a Greyhound bus might be hazardous to your
health.  </p><p>

Not that I've experienced that personally.  In this instance, I'll
take somebody else's word for it.</p><p>

With all of Perl's flexibility, sophistication and hordes of
contributed library modules, it's easy to understand how a beginner
might feel lost, frustrated and downright intimidated by the volume
of material that's available online.  If it weren't for a handful of
dedicated CPAN archivists, the entire body of the community's library
source code would have succumbed to anti-matter and chaos long ago.</p><p>

I'm not certain how a contribution of mine might work in the context
of my Web site, which is mainly about Linux, except that knowing how
to use Perl is an essential system administration skill, and
contributes mightily to the understanding of other system
administration topics.</p><p>

If a beginning system administrator learns how to use Perl, then he or
she will have a better understanding of how the operating system works
and will be less likely to pull some bonehead newbie trick like, say,
setting the umask to 0.</p><p>

So the purpose of this proposal is to argue that any effort to provide
beginners with answers to their Perl questions must have equal
prominence as the efforts of fully fledged programmers.  A mailing
list reference ought to appear prominently on Web pages, right up
there with module listings and search engine forms, where beginners
can find it right away.</p><p>

Besides, you wouldn't want to feel superior to them.</p><p>

If you have any suggestions as to how best to help beginners learn
Perl, visit <a href="http://www.mainmatter.com/">http://www.mainmatter.com/</a>, and if the idea still sounds
good, then email me, at <a href="mailto:rkiesling@mainmatter.com">rkiesling@mainmatter.com/</a>.


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1520" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/05/cgi.html" rel="bookmark">Using CGI::Application</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Jesse Erlbaum</span> on <abbr class="published" title="2001-06-05T00:00:00-08:00">June  5, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- <a name="Using_CGI_Applicatio">Using CGI::Application</a> -->

<br />




<h3><a name="Why_CGI_Application_">Why CGI::Application?</a></h3>

<p><table width="180" cellspacing="0" cellpadding="4" align="right" border="1">
<tr>
<td align="center" valign="top" bgcolor="#6699cc">
<font color="#ffffff">Table of Contents</td>
</tr>

<tr>
<td>
<p class="fine">
&#149;<a href="#Why_CGI_Application_">Why CGI::Application?</a><br /><br />
&#149;<a href="#Understanding_CGI_Ap">Understanding <code>CGI::Application</code></a><br /><br />
&#149;<a href="#Putting_it_all_Toget">Putting It All Together</a><br /><br />
&#149;<a href="#Conclusions_Advanced">Conclusions & Advanced Concepts: Where to Go From Here</a><br /><br />
&#149;<a href="#Resources">Resources</a><br />

</td>
</tr>
</p>
</table>
<p>
The Common Gateway Interface (CGI) may be viewed by some as "less than
glamorous", but it is the workhorse of Web-based application
development. For what CGI lacks in buzzword compliance, it more than
makes up for in reliability, flexibility, portability, and
(perhaps most important of all) familiarity!
</p>
<p>
<code>CGI::Application</code> builds upon the bedrock of CGI, adding a structure for
writing truly reusable Web-applications. <code>CGI::Application</code> takes what
works about CGI and simply provides a structure to negate some of the
more onerous programming techniques that have cast an unfavorable
light upon it.
</p>
<p>
<code>CGI::Application</code> code is so universal and non-proprietary that it works
exceedingly well on any operating system and Web server that supports
Perl and CGI. As you shall see, the <code>CGI::Application</code> structure even
makes it possible for authors to distribute, for the first time, fully
functional and sophisticated Web-applications via CPAN.
</p>
<h3><a name="Understanding_CGI_Ap">Understanding <code>CGI::Application</code></a></h3>
<h4><a name="Run_Modes">Run-Modes</a></h4>
<p>
The most significant contribution of <code>CGI::Application</code> is the formal
structure of "run-modes." A run-mode generally refers to a single
screen of an application. All sophisticated Web applications feature
multiple screens (or "pages"). For instance, an application to search
through a database might feature a search form, a list of results and a
detail of a single record. Each one of these three screens is part of a
whole application.
</p>
<p>Different programmers have devised different systems for managing these
run-modes. Too many Web applications still look like huge IF-THEN-ELSE
blocks, containing each run-mode in the enclosure of one conditional
state. Often, these conditionals try to divide the application state by
looking for the presence of various form variables. For instance, if a
search field is present, show the list of results - otherwise, show the
search form:

<pre>
     my $query = CGI-&gt;new();
     print $query-&gt;header();
     if (my $search_term = $query-&gt;param("search_term")) {
          # ...30 lines of code to run a search
          # and print the results as HTML
     } else {
          # ...15 lines of code to display
          # the search form
     }
</pre>
<p>
It is code such as this that has given CGI a bad name! It is barely
structured and easily broken by even small changes in functionality.
</p>
<p>
The most savvy programmers quickly realized that run-modes are a
specific thing that must be directly managed, and the most succinct
way to determine the run-mode is to explicitly set it. Some systems,
such as ASP, <code>HTML::Mason</code>, Cold Fusion and JSP attempt to manage these
run-modes by having one physical document for each run-mode. This has
the effect of spreading the code for a single application over at least
as many files as there are run-modes! Taking the run-modes out of
context by breaking them into separate files solves the state
management problem at the cost of creating all sorts of new problems,
not the least of which is the management of code assets. These
run-modes are, after all, all part of the same application.
</p>
<h4><a name="Application_Modules">Application Modules</a></h4>
<p>
<code>CGI::Application</code> provides another solution to the run-mode management
problem by providing two core facilities. First, <code>CGI::Application</code>
designates a single specific HTML form input as a "Mode Parameter".
This Mode Parameter is used to store (and retrieve) the current
run-mode of your application. The value of a run-mode is a simple text
scalar. <code>CGI::Application</code> reads the value of this Mode Parameter and
acts as a traffic cop, directing the application operation accordingly.
</p>
<p>
Second, <code>CGI::Application</code> maps each run-mode to a specific Perl
subroutine. Each subroutine, referred to as a "Run-Mode Method",
implements the behavior of a single run-mode. All of your code,
including all your run-mode methods and the mapping table between
run-modes and subroutines, is stored in a single file. This file is a
Perl module, referred to as your "Application Module".
</p>
<p>Your Application Module is a sub-class of <code>CGI::Application</code>. In fact,
<code>CGI::Application</code> is never intended to be used directly.
<code>CGI::Application</code> is referred to by object-oriented enthusiasts as an
"abstract class", and is only used via inheritance. To implement
inheritance from <code>CGI::Application</code>, put the following code at the top of
your Application Module:

<pre>
     package Your::Web::Application;
     use base 'CGI::Application';
</pre>
<p>
This code gives a name to your application (in this case,
"<code>Your::Web::Application</code>"), and causes <code>CGI::Application</code> to be
designated as the parent class. This parent class implements a number of
methods that will provide the necessary infrastructure for your
application. Some of the methods are expected to be called by your code
to perform functions or set properties. Other inherited methods are
expected to be implemented in your code, to provide the functionality
specific to your application.
</p>
<h3><a name="Defining_Your_Run_Mo">Defining Your Run-Mode Map</a></h3>
<p>
The map between run-modes and run-mode methods is defined in the
setup() method. The setup() method is a method that you are expected
to override in your Application Module by implementing a setup()
subroutine. It is in your setup() subroutine that you define the map
between run-modes and run-mode methods. Think of this map as the
definitive list of things your application can do. If you ever add a
function to your Web application, then you will amend this map to include
your new run mode.
</p><p>
This run mode map is defined in your setup() method by using the
run_modes() method provided by <code>CGI::Application</code>. The run_modes() method
is an instance method that takes, as arguments, an associative array
of run-modes as keys and run-mode method names as values (Note:
<code>CGI::Application</code> version 1.3 is used in all our examples). To set up
our prototypical database search application with three run-modes, this
is how our code might look:
<pre>
     package WidgetView;
     use base 'CGI::Application';
     sub setup {
          my $self = shift;
          $self-&gt;run_modes(
               'mode_1' =&gt; 'show_search_form',
               'mode_2' =&gt; 'show_results_list',
               'mode_3' =&gt; 'show_widget_detail'
           );
           $self-&gt;start_mode('mode_1');
           $self-&gt;mode_param('rm');
     }
</pre>
<p>
That's it! The setup method receives an instance of your application
class ($self) as an argument. When you call run_modes() you are setting
the run-modes for this instance, so you use the object-oriented
indirect ("<code>-&gt;</code>") operator. The inherited start_mode() method tells
<code>CGI::Application</code> which mode to default to, if no mode is specified (as
is the case when the application is first called). The inherited
mode_param() method specifies the name of the HTML form parameter that
will hold the run-mode state of the application from request to
request.
</p>
<p>
What we have done here is set up an application called "WidgetView"
with three run-modes, creatively named "mode_1", "mode_2" and "mode_3".
These run-modes map to three as-yet-unwritten subroutines, respectively
show_search_form(), show_results_list() and show_widget_detail(). The
mode parameter is set to "rm" (the default), and the first mode of
operation will be "mode_1".
</p>
<h3><a name="Creating_Run_Mode_Me">Creating Run-Mode Methods</a></h3>
<p>
The run-mode method subroutines will contain the bulk of your code.
These run-mode methods each implement the functionality for a
particular run-mode. As we mentioned earlier, run-modes loosely
translate into screens. As such, your run-mode methods will be
responsible for setting up the HTTP and HTML output to be sent back to
the requesting Web browser.
</p>
<p>
The most critical thing to remember about run-mode methods is that they
should never print() anything to STDOUT. The inherited <code>CGI::Application</code>
run() method is singularly responsible for actually sending all HTTP
headers and HTML content to the Web browser. Your run-mode method is
called by the run() method, and your code is expected to return a
scalar containing all your HTML content. If you send anything to
STDOUT, it will cause your application to malfunction. Symptoms of this
type of mistake are typically content preceding HTTP headers, or HTTP
headers appearing more than once in the output. If you see this, then you
have probably tried sending output to STDOUT.
</p>
<p>
Your run-mode method will invariably need to interact with the CGI
query to retrieve (and set) form parameters. <code>CGI::Application</code> does not
attempt to provide this basic functionality. Instead, <code>CGI::Application</code>
utilizes Lincoln D. Stein's superb <code>CGI.pm</code> module for all interactions
with the CGI query. Becoming expert in <code>CGI.pm</code> will greatly enhance your
mastery of <code>CGI::Application</code>. <code>CGI::Application</code> gives you access to the
<code>CGI.pm</code> query object by way of the inherited query() method. Once you
retrieve the <code>CGI.pm</code> query object via the query() method, you may
interact with it as required.
</p>
<p>
For our first run-mode ("mode_1") we have specified what the run-mode
method show_search_form() should be called. The purpose of this
run-mode is to display the search form when the user first enters the
application. Our run-mode method might look something like this:
</p>
<pre>
     sub show_search_form {
          my $self = shift;
          # Get the CGI.pm query object
          my $q = $self-&gt;query();
          my $output = "";
          $output .= $q-&gt;start_html(-title =&gt; "Search Form");
          $output .= $q-&gt;start_form();

          # Build up our HTML form
          $output .= "Search for Widgets: ";
          $output .= $q-&gt;textfield(-name =&gt; 'search_term');
          $output .= $q-&gt;submit();

          # Set the new run-mode, when the user hits "submit"
          $output .= $q-&gt;hidden(-name =&gt; 'rm', -value =&gt; 'mode_2');
          $output .= $q-&gt;end_form();
          $output .= $q-&gt;end_html();

          return $output;
       }
</pre>
<p>
As you can see, this subroutine is straight-forward. The specified
run-mode method is called in an object-oriented context ($self). We
retrieve the <code>CGI.pm</code> query object via our Application Module's query()
method (inherited from <code>CGI::Application</code>). The HTML form we create
should be familiar to anybody who has used <code>CGI.pm</code>. When we
have completely built up our $output, we return it (as opposed to
printing it to STDOUT).
</p>
<p>
There is only one bit of "magic" going on here, and that is our hidden
form variable "rm". This is the method by which a <code>CGI::Application</code> gets
from one run-mode to another. In the case of this run-mode (based on
the desired functionality of our application), there is only one place
we can go, and that is to "mode_2" - the list of matching results. If
the "mode_1" run-mode allowed us to do more than one thing (for
instance, to add a new Widget), then we would have to have two buttons on
this screen with each set having a different value for the form variable,
"rm".
</p>
<p>
How you go about setting that variable is up to you. For
instance, you could have multiple HTML forms, or you could use
JavaScript. <code>CGI::Application</code> imposes no restrictions on how the
run-mode parameter gets set. It only cares that it is set, and leaves
the logistics up to the application developer. Once the run-mode
parameter is set, <code>CGI::Application</code> provides all the run-mode state
management necessary to direct your application to the proper
subroutine.
</p>
<h3><a name="HTTP_Headers">HTTP Headers</a></h3>
<p>
<code>CGI::Application</code>, by default, will return all content as MIME type
"text/html". This is set by the HTTP headers. If you wish to set a
different MIME type, manipulate a cookie or perform a HTTP redirect,
then you will need to change the default HTTP headers. This is done by using
two inherited <code>CGI::Application</code> methods: header_type() and
header_props(). Refer to <code>CGI::Application</code>'s perldoc for details on
their usage.
</p>
<h3><a name="Instance_Scripts">Instance Scripts</a></h3>
<p>
There is one final piece in the <code>CGI::Application</code> architecture, and that
is the "Instance Script". So far, we have talked extensively about the
Application Module, but we have not yet explained exactly how the
Application Module gets used! This is where the Instance Script comes
in.
</p>
<p>
In traditional CGI programming, we might have a file, <code>myapp.cgi</code>,
which is requested by a Web browser. The Web server (based on its
configuration) will treat this file as a program, and return the output
of its execution (as opposed to its content). In traditional CGI, this
file would contain all your application code, and it would be quite
lengthy. Using <code>CGI::Application</code>, we have put all our code in our
Application Module, instead. This means that the actual file executed
by the Web server can be completely empty of application-specific code!
As a matter of fact, for our prototypical "WidgetView" application,
what follows is the entirety of <code>widgetview.cgi</code>:
</p>
<pre>
     #!/usr/bin/perl -w
     use WidgetView;
     my $app = WidgetView-&gt;new();
     $app-&gt;run();
</pre>
<p>
It is that simple! The file, <code>widgetview.cgi</code>, is referred to as an
"Instance Script" because it manages a single "instance" of your
Application Module. As long as <code>WidgetView.pm</code> is in Perl's search path
(@INC), this Instance Script will run your entire Web application.
</p>
<h3><a name="Putting_it_all_Toget">Putting It All Together</a></h3>
<p>
In our prototypical WidgetView application, we have all the essential
components of a complete <code>CGI::Application</code>.
</p>
<p>
Our Application Module, <code>WidgetView.pm</code>, may reside anywhere in the
server's file system, provided it is within Perl's search path. It is
recommended that your Application Module be placed outside the Web
server's public document space, so that its contents are not accessible
directly via the Web server.
</p>
<p>
The Application Module in our example contains four subroutines:
</p>
<dl>
<dt><a name="setup_"><code>setup()</code></a>
<dd>
Configures our run-mode map, and other application settings.
<dt><a name="show_search_form_"><code>show_search_form()</code></a>
<dd>
Run-mode "mode_1". Returns the HTML search form.
<dt><a name="show_results_list_"><code>show_results_list()</code></a>
<dd>
Run-mode "mode_2". Based on the contents of the search form, it finds
matching items in the database. The results are formatted in HTML and
returned. A button is provided for each matching item, allowing the Web
user to select one item by clicking on it. Clicking on an item sets the
value of form parameter "rm" to "mode_3" and sets the value of another
form parameter (e.g.: "item_id") to the unique identifier for the
selected item.
<dt><a name="show_widget_detail_"><code>show_widget_detail()</code></a>
<dd>
Run-mode "mode_3". Based on the value of the form parameter "item_id",
this method retrieves all the details about the specified item from the
database. These details are formatted as HTML and returned by this
run-mode method.
</dl>
<p>
A more complete source listing of the WidgetView application can be
found <A HREF="/2001/06/05/examples/Application.pm">here</A>.
</p>
<p>
Our Instance Script, <code>widgetview.cgi</code>, resides within the Web server's
public document space. It is configured to be treated as a CGI
application. As long as your Web server supports CGI and Perl, your Web
application based on <code>CGI::Application</code> will operate as you expect.
<code>WidgetView.pm</code> does not require an Apache Web server - in fact, it will
run equally well on any CGI-compatible server, including Microsoft's
"IIS" or Netscape's "iPlanet" server, regardless of operating system.
</p>
<p>
Naturally, WidgetView will run exceedingly well on Apache/<code>mod_perl</code>
servers, as <code>CGI::Application</code> adheres to very clean Perl programming
standards. <code>CGI::Application</code> was designed, from the ground up, to run in
full strict mode without throwing any warnings.
</p>
<h3><a name="Conclusions_Advanced"><b>Conclusions &amp; Advanced Concepts: Where to Go From Here</b></a></h3>
<p>
The concepts presented in this article should provide you with a
starting point for using <code>CGI::Application</code> as the foundation of your Web
application development. There are many advanced concepts that
complete the <code>CGI::Application</code> picture, a few of which I will endeavor
to summarize here.
</p>
<h3><a name="Code_Reuse"><b>Code Reuse</b></a></h3>
<p>
A tremendous potential for reusability is created through the structure
of Instance Scripts. A single Application Module can be used by
multiple Instance Scripts. Consider the potential for writing a Perl
module and using it multiple times within a single project, across
projects or even across organizations! For the first time, high-level
functionality for the Web can be encapsulated in a single Perl module
and distributed. If you are a CPAN author (or interested in becoming
one), you could create a Web application and distribute it via CPAN in the same way <code>CGI::Application</code>, itself, is distributed!
</p>
<p>
Instance Scripts also have the capability to set instance-specific
properties. As a result, the Instance Script becomes a sort of
"configuration file" for your Application Module. The new() method
(inherited from <code>CGI::Application</code>) has the capability to allow you to
set variables that you may utilize in your Application Modules, via
the inherited param() method. As a simple example, you could write a
mail-form application that takes instance parameters such as the
address to which the form contents should be e-mailed. Multiple Instance
Scripts, all referring to the same Application Module, could each
specify a different e-mail recipient or a different form. Refer to the
<code>CGI::Application</code> perldoc for the usage details on the new() and param()
methods.
</p>
<p>
<code>CGI::Application</code> is designed to support code reuse via inheritance.
Application Modules could be devised to provide project-wide
functionality. Specific applications could then inherit from your
custom parent class instead of directly from <code>CGI::Application</code>. For example, consider
the possibility of having each of your applications load
configuration data from a database, or set specific run-time
properties. Your parent class Application Module might implement a
cgiapp_init() method, which would allow for these types of inherited
behaviors. Refer to <code>CGI::Application</code>'s perldoc for specific usage of
the cgiapp_init() method.
</p>
<h3><a name="Separating_the_HTML_">Separating the HTML GUI From Application Code Using <code>HTML::Template</code></a></h3>
<p>
At my company, Vanguard Media, <code>CGI::Application</code> is one part of a larger
development strategy. One of the principle guiding forces of our
application strategy is the maximum separation of the HTML GUI (Graphic
User Interface) from the underlying application code. We have found
that the best Perl programmers are rarely the best HTML designers, and
the best HTML designers are rarely the best Perl programmers. It is for
this reason that the separation of these two elements is arguably the
most beneficial design decision you can make when devising an
application architecture.
</p>
<p>
To this end, Sam Tregar's excellent <code>HTML::Template</code> module is utilized.
<code>HTML::Template</code> allows external "template files" to be created for each
screen in our applications. These template files contain 99 percent pure HTML,
with a very small additional syntax for including scalar variables,
loops and conditional blocks of data, set by the calling Run-Mode
Method.
</p>
<p>
<code>HTML::Template</code> is so fundamental to our development strategy that
special hooks have been built into <code>CGI::Application</code> to support its use!
Refer to the <code>CGI::Application</code> perldoc for usage details of the
inherited tmpl_path() and load_tmpl() methods.
</p>
<h3><a name="Thoughts_on_Sessions">Thoughts on Sessions and Security</a></h3>
<p>
A question that frequently comes up on the <code>CGI::Application</code> mailing
list is how best to implement login security and session management.
Experience has taught me that these are elements that are best
excluded from your application code, and pushed into a lower layer of
your Web server.
</p>
<p>
If you are using the Apache Web server, and are interested in
implementing login security and session management, I encourage you to
check out the various <code>Apache::Auth*</code> modules on CPAN. These modules tie
into the "Authentication" and "Authorization" phases of the request.
This code runs long before your CGI applications are called.
</p>
<p>
There are two primary advantages in placing your sessions and security
code in this layer. First, your security will work for all documents,
not just Perl applications. Even static HTML documents will be
protected by this system. Second, putting sessions and security in this
layer will avoid an architecture where programmers have to include
special code at the start of their applications to participate in the
sessions and security system.
</p>
<h3><a name="Resources">Resources</a></h3>
<p>
I hope you enjoyed reading this article. The following references
should help you further explore the use of <code>CGI::Application</code>:
</p>
<dl>
<dt><a name="Download_CGI_Applica">Download <code>CGI::Application</code></a>
<dd>
<A HREF="http://www.cpan.org/authors/id/J/JE/JERLBAUM/">
http://www.cpan.org/authors/id/J/JE/JERLBAUM/</A>
<dt><a name="CGI_Application_Mail">CGI Application Mailing List</a>
<dd>
Send email to: <code>cgiapp-subscribe@lists.vm.com</code>
<dt><a name="CGI_pm"><code>CGI.pm</code></a>
<dd>
<A HREF="http://stein.cshl.org/WWW/software/CGI/cgi_docs.html">
http://stein.cshl.org/WWW/software/CGI/cgi_docs.html</A>
<dt><a name="HTML_Template"><code>HTML::Template</code></a>
<dd>
<A HREF="http://html-template.sourceforge.net/">
http://html-template.sourceforge.net/</A>
<dt><a name="Apache_mod_perl">Apache/<code>mod_perl</code></a>
<dd>
<A HREF="http://perl.apache.org/">
http://perl.apache.org/</A>
</dl>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1544" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p6pdigest/THISWEEK-20010601.html" rel="bookmark">This Week in Perl 6 (27 May - 2 June 2001)</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bryan Warnock</span> on <abbr class="published" title="2001-06-04T00:00:00-08:00">June  4, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- This Week in Perl 6 (27 May - 2 June 2001) -->

      3 June 2001
<H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an empty 
message to
<a href="mailto:perl6-digest-subscribe@netthink.co.uk">perl6-digest-subscribe@netthink.co.uk</a>.
</P>

<P>
Please send corrections and additions to 
<CODE>perl6-thisweek-YYYYMM@simon-cozens.org</CODE>, where 
<CODE>YYYYMM</CODE> is the current year and month.
</P>

<P>
It was a quiet week, with a mere 92 messages across 3 of the mailing lists.
There were 9 threads, with 27 authors contributing.  3 threads generated 
71 of the messages.  
<H3><a name="Perl_Virtual_Registers_continued">Perl Virtual Registers (continued)</a></H3>

</P>

<P>

Dan Suglaski
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg02983.html">summed up</a> his thoughts on the previous week's register discussion.
<blockquote></P>

<P>
1) The paired register thing's silly. Forget I mentioned it.
</P>

<P>
2) The interpreter will have some int, float, and string registers. Some 
stuff will be faster because of it, and it'll make the generated TIL or C 
code (when we do a TILperl or perl2c version) faster since we won't need to 
call opcode functions to add 3 and 4 together...
</P>

<P>
3) Whether the registers are really stack-based or not's an implementation 
detail. They'll be based off of some per-interpreter thing, of course, 
so'll be thread-local
</P>

<P>
4) We will have some sort of register push/pop system independent of the 
register implementation. (Probably, like the 68K family, with the ability 
to move multiple registers in one go)
</P>

<P>
5) The bytecode should be really, really close to the final executable 
form. I'd really like to be able to read in the bytecode in one big chunk 
and start executing it without change. (We'll end up with some sections 
that'll need to be changed--that's inevitable. If we can mmap in the 
non-fixup section pieces, though, that'd be great)
</P>

<P>
6) We may formally split the registers used to pass parameters from the 
working registers. I'm not sure if that'll ultimately be a win or not. (I 
can forsee lots of pointless register-&gt;register moving, and I'm not keen on 
pointless anything)
</blockquote></P>

<P>
This spawned various discussions on several issues:
<ul><li>8-bit versus 16-bit opcodes, with 8-bit opcodes having an escape opcode to
access extended opcode features.  The 8-bit with escapes scheme
appears to be the winner.
</li><li>CISC-style (high-level) versus RISC-style (low-level) opcodes.  
Various tradeoffs were discussed, including byte-bloat, processing speed,
and ease of translation to other backends.  No consensus has been reached yet.
</li><li>Pure register versus register/stack hybrid.  (In reality, even the pure
register scheme is a register/stack hybrid - the question is how much
stack play should be involved.)  No real consensus on this one, either.
</li><li>Variable argument opcodes and how to handle them.  It wasn't expected that
any opcodes should not know how many args it was getting passed, but if the
situation ever arose, Dan suggested the varargness be buried a layer deeper,
and the opcode itself can simply take a single argument - that of the 
register containing a list of arguments.
</li></ul><H3><a name="Coding_Conventions_Revisited">Coding Conventions Revisited</a></H3>

</P>

<P>

Dave Mitchell 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg02982.html">posted</a> his revised draft of the &quot;Conventions and Guidelines for Perl Source 
Code&quot; PDD.  The revision was generally accepted (save a brief foray into 
some standard (but relatively tame) tabs and spaces and brace alignment
discussions), and the official PDD Proposal should be forthcoming shortly.
<H3><a name="NET">.NET</a></H3>

</P>

<P>

A.C. Yardley 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg02978.html">pointed</a> out some technical documents on .NET as an FYI.  (The links were to
<a href="http://citeseer.nj.nec.com/gordon00typing.html">here</a> and
<a href="http://msdn.microsoft.com/net/ecma/">here</a>.)
<H3><a name="It_Is_Another_Language_Feature_It_Is_Or_Is_It">It Is Another Language Feature, It Is, Or Is It?</a></H3>

</P>

<P>

David L. Nicol 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg07376.html">mused</a> about a new magical variable 
<CODE>it</CODE> that automatically refers to the last lexically used variable (or perhaps 
the last variable used as the target of 
<CODE>defined</CODE> or
<CODE>exists</CODE>).  Most folks found it (in both senses of the word) too troublesome and 
ambiguous.
<H3><a name="Status_of_the_Perl_6_Mailing_Lists">Status of the Perl 6 Mailing Lists</a></H3>

</P>

<P>

There have been, to date, 28 different mailing lists associated with the 
Perl 6 development effort - a list that seems most daunting at first.  
That list has now been reduced to eight &quot;open&quot; lists that are currently in
use.  (The previous lists may be reopened at a later date, and new ones may
be created.  Annoucements will be made in the usual fashion on
<CODE>perl6-announce</CODE>.)  Subscription instructions and links to the archives can be found
<a href="http://dev.perl.org/lists">here</a>.
</P>

<P>
The currently active lists dedicated to Perl 6 are 
<CODE>-all</CODE>, 
<CODE>-announce</CODE>, 
<CODE>-build</CODE>, 
<CODE>-internals</CODE>, 
<CODE>-language</CODE>, 
<CODE>-meta</CODE>, and
<CODE>-stdlib</CODE>.
</P>

<P>
The last list,
<CODE>perl-qa</CODE>, is involved in quality assurance for Perl in general, so it is also 
included as a Perl 6 development list.
</P>

<hr>

<a href="mailto:bwarnock@capita.com">Bryan C. Warnock</a>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Perl_Virtual_Registers_continued">Perl Virtual Registers (continued)</a>
  <li><a href="#Coding_Conventions_Revisited">Coding Conventions Revisited</a>
  <li><a href="#NET">.NET</a>
  <li><a href="#It_Is_Another_Language_Feature_It_Is_Or_Is_It">It Is Another Language Feature, It Is, Or Is It?</a>
  <li><a href="#Status_of_the_Perl_6_Mailing_Lists">Status of the Perl 6 Mailing Lists</a>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1538" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2001/06/p5pdigest/THISWEEK-20010604.html" rel="bookmark">This Week on p5p 2001/06/03</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Leon Brocard</span> on <abbr class="published" title="2001-06-04T00:00:00-08:00">June  4, 2001 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- This week on perl5-porters (28 May-3 June 2001) -->

<br />
<br />
      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><tt>perl5-porters-digest-subscribe@netthink.co.uk</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>perl-thisweek-YYYYMM@simon-cozens.org</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.  Changes and additions to the 
<a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters</a> biographies are particularly welcome.
</P>

<P>

</P>

<P>
This was a faily active week with 700 messages.
<H3><a name="Testing_testing">Testing, testing</a></H3>

</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#SCHWERN">Michael Schwern</a> was on a rampage this week attempting to improve the
Perl test suite. The current test suite is quite extensive, but
maintenance (or even finding which test failed) is currently tricky
due to them being numbered.
<a href="http://simon-cozens.org/writings/whos-who.html#SANDEN">Hugo</a> sums it up very nicely:
<blockquote>As someone who regularly tries to put in the effort to add test cases,
I find there is little difference in the effort involved in adding a
test case whether or not I have to encode the test number in the test
case.
</P>

<P>
As someone who regularly tries to investigate test failures, the lack
of test numbers makes life _much_ more difficult. It isn't just the
time it takes to discover which test failed, but also the fact that
it diverts my concentration from the code I want to be thinking about,
so that the debugging process becomes that much more difficult.
</blockquote></P>

<P>
The rest of his 
<a href="http://archive.develooper.com/perl5-porters@perl.org/msg58351.html">post</a> is also interesting.
</P>

<P>
Schwern (in his role as Perl Quality Assurance pumpkin) has been slowly improving the available testing tools, such as the 
<CODE>Test::Simple</CODE> module on CPAN, &quot;an extremely simple, extremely basic module for
writing tests suitable for CPAN modules and other pursuits&quot;. Instead
of simply numbering the tests, it allows tests to be named. From its
documentation:
</P>

</P><PRE>
 # This produces "ok 1 - Hell not yet frozen over" (or not ok)
 ok( get_temperature($hell) > 0, 'Hell not yet frozen over' );
</PRE>

<P>
Schwern is currently holding off integrating the module into the core until he gets
the interface just right. Tony Bowden 
<a href="http://archive.develooper.com/perl5-porters@perl.org/msg58427.html">dreamt</a> about a world of testing and psychology, 
with convincing arguments about the module.
</P>

<P>
Schwern also submitted quite a few patches to the test suite to sync the
latest version of the
<CODE>Test</CODE> and 
<CODE>Test::Harness</CODE> modules from CPAN into the core and to improve the test suite.
<H3><a name="libnet_in_the_core">libnet in the core</a></H3>

</P>

<P>

<a href="http://simon-cozens.org/writings/whos-who.html#HIETANIEMI">Jarkko</a> introduced us to his evil plan to integrate all of CPAN into
the Perl core, assimilating libnet this week. libnet contains various
client side networking modules, such as Net::FTP, Net::NNTP, Net::POP3,
Net::Time and Net::SMTP, but unfortunately requires some initial
configuration. The idea was that libnet could be told only once which
POP3 server to use, which it would then use by default in future.
</P>

<P>
Jarkko asked whether configuration could be delayed. There followed
some discussion about providing a seperate configuration utility which
could be run after configuration-time, some talk (and flames) about a
<CODE>.perlrc</CODE> per-user configuration file, and testing the modules by shipping
small fake servers. No concensus was reached.
<H3><a name="Warnings_crusade">Warnings crusade</a></H3>

</P>

<P>

It was very much a week of patches from Schwern, who continued on his
crusade to make Perl compile cleanly under 
<CODE>-Wall</CODE>, jumping over hoops
sometimes to get rid of warnings.
</P>

<P>
After a slew of patches, Schwern suggested making 
<CODE>-Wall</CODE> the default
to stop new patches containing warnings. Jarkko made it so, with the
slightly suprising problem that Perl no longer compiled on Solaris
with gcc. The culprit turned out to be 
<CODE>-ansi</CODE>, which has been temporarily removed.
<H3><a name="Various">Various</a></H3>

</P>

<P>

Hugo posted a 
<a href="http://archive.develooper.com/perl5-porters@perl.org/msg57821.html">wonderful comparison</a> of various benchmarks containing the experimental 
<CODE>?></CODE> regular expression feature, along with a small discussion of the
 regular expression optimiser. 
</P>

<P>
Tye McQueen posted a small patch attempting to make pathological hash
keys much more unlikely.
</P>

<P>
H.Merijn Brand posted some patches to get Perl running on AIX and gcc.
</P>

<P>
There was some more talk on documenting 
<CODE>sort</CODE> as stable, with perhaps having a pragma such as
<CODE>use sort qw( stable unique );</CODE>.
</P>

<P>
Jarkko submitted some UTF bug reports and proceeded to fix some.
</P>

<P>
Ilya provided some more OS/2 patches.
</P>

<P>
Ilmari Karonen provided an interesting bug report which was produced by
his Markov chain random input tester.
</P>

<P>
Hugo provided a patch to stop 
<CODE>Atof</CODE> numifying &quot;0xa&quot; to 10. At the moment Perl was relying on the
system's  
<CODE>atof</CODE> which turns out to be different on different platforms, so we now 
 have an implementation in Perl. 
</P>

<P>
Jarkko attempted to make 
<CODE>use utf8</CODE> the default, allowing us to write our scripts in UTF-8. It was shot down
very rapidly by the backwards-compatibility police due to no longer allowing
naked bytes with the eight bit, such as the pound character.
</P>

<P>
Doug MacEachern posted some patches to clean up and optimise 
<CODE>Cwd.pm</CODE>.
</P>

<P>
Until next week I remain, your temporarily-replaced humble and
obedient servant,
</P>

<P>
Leon Brocard, <a href="mailto:leon@iterative-software.com
">leon@iterative-software.com</a>
</P>

<hr>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Testing_testing">Testing, testing</a>
  <li><a href="#libnet_in_the_core">libnet in the core</a>
  <li><a href="#Warnings_crusade">Warnings crusade</a>
  <li><a href="#Various">Various</a>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2001/05/">&laquo; May 2001</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2001/07/">July 2001 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
