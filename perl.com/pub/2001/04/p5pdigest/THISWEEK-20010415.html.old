</P>

<P>


<!-- This week on perl5-porters (09--15 Apr 2001) -->

<br />
<!::field::date::><br />
      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><tt>perl5-porters-digest-subscribe@netthink.co.uk</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>perl-thisweek-YYYYMM@simon-cozens.org</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.  Changes and additions to the 
<a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters</a> biographies are particularly welcome.
</P>

<P>
There were just under 300 messages this week.
<H3><a name="perl_beginners_list">perl-beginners list</a></H3>

</P>

<P>

Casey West came up with the great idea of having a mailing list for Perl
beginners. It's worth quoting extensively from his post:
<blockquote>I have been throwing around the idea of a central place where Perl
newcomers can come and ask FAQ questions and the like.  My dream is to
funnel all the RTFM  traffic from p5p, c.l.p.* and other such places.  I
would like to see a place where the newbies are accepted as people who
just don't know yet.
...
</P>

<P>
There are a few crucial things that must take place in order to make this list
as effective as possible:
</P>

<P>
* Moderation.  Flames must be removed at all times.  It should be easy to be
the newbie.
</P>

<P>
* Direction.   Archives are a valuable resource.  We don't do homework.
</P>

<P>
* Publicity.   List and News Group FAQ's can and should list perl-newbies as
the primary source for simple, 'new commer' questions.  Questions of this
nature should be immediatly redirected to perl-newbies.
</P>

<P>
* Teachers.    They can and will ask, we must answer.
</P>

<P>
At first I thought PerlMonks was this thing, however, PerlMonks is not
an environment where newbies are alowed to ask simple questions
answered in the documentation.
</blockquote></P>

<P>
Abigail suggested that &quot;learning how to uses available documentation
isn't something unique for Perl - it should be standard practise for
anyone out of primary school&quot;. While I personally agree with that, I
think there's definitely a need for hand-holding as well, and I take my
hat off to Casey for having done something about it.
</P>

<P>
Accordingly, the mailing list - called &quot;beginners&quot; to avoid people
feeling demeaned by the &quot;newbie&quot; tag - has been set up. Mail 
<CODE>beginners-subscribe@perl.org</CODE> to get involved, whether you want to ask questions or to answer them.
</P>

<P>
Kevin Lenzo noted that he's set up a help IRC channel with Casey's goals
in mind at 
<CODE>#perl-help</CODE> on 
<CODE>irc.rhizomatic.net</CODE>. Feel free to join in, but remember - no flames, no RTFMs, be nice.
<H3><a name="Dynamically_scoped_last">Dynamically scoped last()</a></H3>

</P>

<P>

There was a very long and very pointless thread which started when
Michael Schwern found the following bit of functionality:
</P>

</P><PRE>
	$ perl -wle 'sub foo { last; } while(1) { foo() }  print "Bar"'
	Exiting subroutine via last at -e line 1.
	Bar
</PRE>

<P>
He expected that to be an infinite loop, but the 
<CODE>last</CODE> actually ended the nearest loop, which is the 
<CODE>while</CODE> loop - 
<CODE>sub</CODE> isn't a loop, which is why you're not supposed to exit one with
<CODE>last</CODE>. A million and one people pointed out that this was documented in 
<CODE>perlsyn</CODE>, but it seemed to be documented very confusingly.
</P>

<P>
But what about bare blocks, he cried? Well, they're actually loops,
they're just loops that are executed once, replied Abigail, Dan and Graham in
chorus. Schwern asked why Perl behaved like this; Dan answered:
<blockquote>I think it makes the parser a bit simpler, because otherwise it would
need
to track loop starts and subroutine declarations and such to match up
loops
with lasts/redos/nexts. Plus you'd still need to walk the call stack
with
string evals, which'd be a bit of a mess.
</P>

<P>
I can't really see any reason that last, redo, or next should propagate
outside a subroutine, but it's probably a bit late to change this in
perl 5
</blockquote></P>

<P>
Abigail patched the documentation to make it explicit what's going on,
and after a few iterations, came up with a patch that everyone broadly
agreed on. After this brief burst of productivity, the discussion then
got silly, and the referees started blowing whistles and giving free
kicks.
</P>

<P>
In the end, Michael Schwern came up with some tests for the existing
behaviour, plus some patches to rewrite the warnings to call the
behaviour &quot;deprecated&quot;. 
</P>

<P>
Schwern also added tests for Exporter, which amazingly didn't have
any to date - they even found a bug in 
<CODE>require_version</CODE>. He tried to open the 
<CODE>B::walkoptree_slow</CODE> container of annelids again, but Jarkko didn't take the bait.
<H3><a name="perlbug_Administration">perlbug Administration</a></H3>

</P>

<P>

Jarkko reminded the world that there are - or at least, were - 1777 open 
bug ids, and suggested that the bug administrators get 5.6.1 installed
and attack the bug database with all their might. Merijn found that all
the HP/UX bugs were his smoke reports - how convenient! Ask suggested
that Chris Nandor advertise for bug administrators on 
<a href="http://use.perl.org/">Use Perl</a>, and I shall do it here as well:
</P>

<P>
If you want to help out squashing Perl bugs, please get in touch with
<a href="mailto:perlbug@rfi.net">Richard Foley</a> who will tell you how to get involved. You don't need to be able to
fix the bugs, although if you can, it obviously helps - we just need
people to be able to run through the database and say &quot;This is still a
problem as of 5.6.1&quot; or &quot;I don't see this in 5.6.1 any more&quot;, and report
back to us at P5P. A knowledge of the way P5P and bug squashing works -
which you can get through the
<a href="http://simon-cozens.org/writings/p5p-faq">P5P FAQ</a> will be useful, although Richard will tell you all you need to know
 about the actual 
<a href="http://bugs.perl.org/perlbug.cgi?req=webhelp">bug database</a> side of things. You can also subscribe to the 
<a href="mailto:bugmongers@perl.org">Bug Mongers mailing list</a>, but I have a feeling you're better off talking to Richard first.
</P>

<P>

<H3><a name="Problems_with_tar">Problems with tar</a></H3>

</P>

<P>
Mike Guy found that he was unable to untar Perl 5.6.1 on Solaris and
SunOS - Sarathy explained that the Solaris tar is broken for archives
which contain long path names, so he used GNU tar instead. Robert Spier
documented this fact in the README for CPAN.
</P>

<P>
Calle Dybedahl explained that it was the usual case of GNU versus the
world:
<blockquote>For paths longer than 100 characters, there are two incompatible
standards for tar archives: GNU tar and the rest of the world. If you
have such paths and built the archive with GNU tar, you must have GNU
tar to unpack it.
</blockquote></P>

<P>
Great, thought Sarathy - but we don't use any paths over 100 characters.
It turned out that there were at least three different problems
intersecting here: firstly, Mike's download was busted. Second, Solaris'
tar is busted, but a patch has been issued, and thirdly, there are two
different standards for tars - 
<a href="http://simon-cozens.org/writings/whos-who.html#BURLISON">Alan</a> explained it 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-04/msg00527.html">beautifully</a>.
<H3><a name="NetPing_and_the_stream_protocol">Net::Ping and the "stream" protocol</a></H3>

</P>

<P>

Scott Bronson came up with an interesting idea for 
<CODE>Net::Ping</CODE>: because dynamic IPs exist, he needed to be able to both ping a host
and ensure it was the same host he's pung in the past. So, he added
a protocol to 
<CODE>Net::Ping</CODE> which keeps the connection alive between pings, and duly submitted the
patch to P5P. 
<!-- Good grief, an idea *and* a working implementation. Whatever next? --></P>

<P>
Colin McMillen, the maintainer of 
<CODE>Net::Ping</CODE>, recommended it for inclusion into bleadperl, and came up
with some changes of his own, particularly to replace the 
<CODE>alarm</CODE> timeout with non-blocking IO using 
<CODE>select</CODE>. This made Scott unhappy:
<blockquote>First of all, tcp ping is broken.  Select won't return if you haven't
written any data to be echoed.  If you were to write data, however,
that would disagree with the documentation: &quot;No data bytes are actually
sent since the successful establishment of a connection is proof enough
of the reachability of the remote host.&quot;  Which is it to be?  And,
how about warning me that it doesn't work before I start trying to
figure out what I broke?
</P>

<P>
I fixed this in the patch by writing some bytes to be echoed and
reading them back.  But I think this is a very bad idea.  Also from
the docs, &quot;tcp is expensive and doesn't need our help to add to the  
overhead.&quot;  You're changing Net::Ping's personality.
</blockquote></P>

<P>
Colin defended his changes, saying that the current behaviour is
horribly broken anyway, as has been discussed several times in the past.
He also defended forking a new process for ping on Win32, since
expensive Win32 functionality is better than none. Graham Barr also
chimed in, demonstrating how to do a non-blocking connect and select
with timeout, and noting that 
<CODE>alarm</CODE> is best avoided.
<H3><a name="Various">Various</a></H3>

</P>

<P>

Rich Williams found a little bug with the regular expression optimizer
in Perl 5.6.1 - apparently it only strikes when using 
<CODE>.*</CODE> together with
<CODE>/sg</CODE>. However, he put in the time and the detective work to isolate it to
a couple of patches, from which Sarathy and Hugo managed to squash the
bug;
<a href="http://simon-cozens.org/writings/whos-who.html#AAS">Gisle</a> fixed 
<CODE>Digest::MD5</CODE> for UTF8 strings.
</P>

<P>
Peter Prymmer updated the 
<CODE>perlebcdic</CODE> documentation to document Nick Ing-Simmon's heroic UTF-EBCDIC effort.
Tom Horsley complained about 
<CODE>perlbug</CODE> occasionally putting
<CODE>~s ...the subject</CODE> and
<CODE>~c ...the sender's email address</CODE> in the body of the mail instead of actually writing the headers
 properly - Kurt Starsinic explained that it was actually a bug in 
<CODE>Mail::Mailer</CODE> and a workaround is to set 
<CODE>PERL_MAILERS=mail:/no/such/thing</CODE></P>

<P>

Jonathan Stowe found some horrible bugs in SCO's 
<CODE>NaN</CODE> handling - 
<CODE>NaN</CODE> compares equal to 1.0 and less than 1.0. Urgh. Andy Dougherty suggested
that we whip up a C program which tests for platforms with broken 
<CODE>NaN</CODE> and papers over the cracks in the test suite; Jarkko, on the other
 hand, was more sanguine as suggested that 5.7.2 will have to bite the
<CODE>NaN</CODE> and 
<CODE>inf</CODE> bullets. Nick Clark pointed out that 
<CODE>$_ & ~0</CODE> will do weird things for many values of
<CODE>$_</CODE>.
</P>

<P>
Vadim Konovalov found a problem with the 
<CODE>-f</CODE> operator in Cygwin - it interprets 
<CODE>-f "foo"</CODE> as 
<CODE>-f "foo" || -f "foo.exe"</CODE>. Urgh. Mike Giroux explained that it made some sense - programs on
Windows want to execute 
<CODE>foo.exe</CODE> by saying just 
<CODE>foo</CODE>. Fair enough, but Vadim pointed out that there's code in 
<CODE>win32/win32.c</CODE> to work around this for Borland's C compiler, so this could be extended
to Cygwin. 
</P>

<P>
Robin Houston continued his conquest of 
<CODE>B::*</CODE>. His changes were
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-04/msg00641.html">numerous</a>.
</P>

<P>
Jarkko has suggested that he wants to integrate 
<CODE>Time::HiRes</CODE> into 5.7.2 - after some time, the maintainer of the module was tracked
down and subdued. There'll be a lot more about new module integration
next week.
</P>

<P>
Aaron Mackey reported that building Perl on Mac OS X doesn't work
properly because of problems with case-folding in the file system - if
you're finding this, try adding 
<CODE>-Dmakefile=GNUmakefile</CODE> to the Configure command, and/or set the environment variable 
<CODE>LC_ALL=C</CODE>. 
</P>

<P>
The 
<CODE>FETCHSLICE</CODE>/
<CODE>STORESLICE</CODE> idea reared its ugly head again, with Rick Delaney implementing a 
<CODE>FETCHSIZE</CODE> method. While it's certainly a good idea, Dave Mitchell pointed out it
may well have the same problems as 
<CODE>*SLICE</CODE> when it comes to unscrupulously inheriting modules.
</P>

<P>
Eric Kolve noted that Perl does 
<a href="http://bugs.perl.org/perlbug.cgi?req=bug_id&bug_id=20010411.004&format=H&trim=25&range=1277&target=perbug">Weird Things </a> if you try doing a 
<CODE>tie</CODE> inside of a 
<CODE>FETCH</CODE> from a tied variable - this isn't surprising, but it would be a good
 thing for someone with a bit of spare time to look into.
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:simon@brecon.co.uk">Simon Cozens</a>


<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#perl_beginners_list">perl-beginners list</a>
  <li><a href="#Dynamically_scoped_last">Dynamically scoped last()</a>
  <li><a href="#perlbug_Administration">perlbug Administration</a>
  <li><a href="#Problems_with_tar">Problems with tar</a>
  <li><a href="#NetPing_and_the_stream_protocol">Net::Ping and the "stream" protocol</a>
  <li><a href="#Various">Various</a>
</ul>
