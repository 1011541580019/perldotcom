<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: September 2004 Archives</title>


    <link rel="prev" href="/pub/2004/08/" title="August 2004" />
    <link rel="next" href="/pub/2004/10/" title="October 2004" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">September 2004 Archives</h1>





                            
                            <div id="entry-992" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/30/drop_the_soap.html" rel="bookmark">Don't Be Afraid to Drop the SOAP</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Sam Tregar</span> on <abbr class="published" title="2004-09-30T00:00:00-08:00">September 30, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>SOAP has great hype; portable, simple, efficient, flexible, and open, SOAP
has it all. According to many intelligent people, writing a web service with
SOAP should be a snap, and the results will speak for themselves. So they do,
although what they have to say isn't pretty.</p>

<p>Two years ago I added a SOAP interface to the <a href="http://bricolage.cc/">Bricolage</a> open source content management
system.  I had high expectations. SOAP would give me a flexible and efficient
control system, one that would be easy to develop and simple to debug.  What's
more, I'd be out on the leading edge of cool XML tech.</p>

<p>Unfortunately the results haven't lived up to my hopes. The end result is
fragile and a real resource hog. In this article I'll explore what went wrong
and why.</p>

<p>Last year, I led the development of a new content-management system called
<a href="http://krang.sf.net/">Krang</a>, and I cut SOAP out of the mix.
Instead, I created a custom XML file-format based on TAR. Performance is up,
development costs are down, and debugging is a breeze. I'll describe this
system in detail at the end of the article.</p>

<table width="220" border="0" cellspacing="8" cellpadding="4" align="right">
<tr>
<td width="220" valign="top" bgcolor="#efefef">
<div class="secondary"><h3>What is SOAP?</h3>

<p>In case you've been out to lunch, SOAP (Simple Object Access Protocol) is a
relatively new RPC (Remote Procedure Call) system that works by exchanging XML
messages over a network connection, usually over HTTP. In an RPC system, a
server offers routines (procedures) that clients may call over a network
connection. SOAP surpasses its direct predecessor, XML-RPC, with an enhanced type system and an improved error-handling system.  Despite the name, SOAP is
neither particularly simple nor object-oriented.</p></div>
</td></tr></table>

<h3>Bricolage Gets SOAP</h3>

<p>When I joined the Bricolage project, it lacked a good way to control the
application aside from the browser-based GUI. In particular, we needed a way to
import data and trigger publish runs. Bricolage is a network application, and
some useful tasks require interaction with multiple Bricolage servers. SOAP
seemed like an obvious choice. I read "Programming Web Services with Perl" and
I was ready to go.</p>

<p>I implemented the Bricolage SOAP interface as a set of classes that map
SOAP requests to method calls on the underlying objects, with some glue code to
handle XML serialization and deserialization. I used XML Schema to describe an
XML vocabulary for each object type, which we used to validate input and output
for the SOAP methods during testing.</p>

<p>By far the most important use-case for this new system was data import. Many
of our customers were already using content management systems (CMSs) and we needed to
move their data into Bricolage. A typical migration involved processing a
database dump from the client's old system and producing XML files to load in
Bricolage via SOAP requests.</p>

<p>The SOAP interface could also move content from one system to another, most
commonly when moving completed template changes into production. Finally, SOAP
helped to automate publish runs and other system maintenance tasks.</p>

<p>To provide a user interface to the SOAP system, I wrote a command-line
client called <code>bric_soap</code>. The <code>bric_soap</code> script is a
sort of Swiss Army knife for the Bricolage SOAP interface; it can call any
available method and pipe the results from command to command. For example, to
find and export all the story objects with the word <code>foo</code> in their
title:</p>

<pre><code>$ <strong>bric_soap story list_ids --search "title=%foo%" |
	bric_soap story export - &gt; stories.xml</strong></code></pre>

<p>Later we wrote several single-purpose SOAP clients, including
<code>bric_republish</code> for republishing stories and
<code>bric_dev_sync</code> for moving templates and elements between
systems.</p>

<h4>What Went Right</h4>

<csperl file="grab" domain="on" record="b/708" template="b/article_sidebar.view">

<ul>

<li>The well-documented XML format for Bricolage objects made developing data import systems straightforward. Compared to previous projects that attempted
direct-to-SQL imports, the added layer of abstraction and validation was an
advantage.</li>

<li>The interface offered by the Bricolage SOAP classes is simpler and more
regular than the underlying Bricolage object APIs. This, coupled with the
versatile <code>bric_soap</code> client, allowed developers to easily script
complex automations.</li>

</ul>

<h4>What Went Wrong</h4>

<ul>

<li>SOAP is difficult to debug. The SOAP message format is verbose even by XML
standards, and decoding it by hand is a great way to waste an afternoon. As a
result, development took almost twice as long as anticipated.</li>

<li>The fact that all requests happened live over the network further hampered
debugging. Unless the user was careful to log debugging output to a file it was
difficult to determine what went wrong.</li>

<li>SOAP doesn't handle large amounts of data well. This became immediately
apparent as we tried to load a large data import in a single request.
Since SOAP requires the entire request to travel in one XML document, SOAP
implementations usually load the entire request into memory.  This required us
to split large jobs into multiple requests, reducing performance and making it
impossible to run a complete import inside a transaction.</li>

<li>SOAP, like all network services, requires authentication to be safe against
remote attack. This means that each call to <code>bric_soap</code> required at
least two SOAP requests &mdash; one to login and receive a cookie and the
second to call the requested method.  Since the overhead of a SOAP request is
sizable, this further slowed things down. Later we added a way to save the
cookie between requests, which helped considerably.</li>

<li>Network problems affected operations that needed to access multiple
machines, such as the program responsible for moving templates and elements
&mdash; <code>bric_dev_sync</code>. Requests would frequently timeout in the
middle, sometimes leaving the target system in an inconsistent state.</li>

<li>At the time, there was no good Perl solution for validating object XML
against an XML Schema at runtime. For testing purposes I hacked together a way
to use a command-line verifier using Xerces/C++. Although not a deficiency in
SOAP itself, not doing runtime validation led to bad data passing through the
SOAP interface and ending up in the database where we often had to perform
manual cleanup.</li>

</ul>

<h3>Round Two: Krang</h3>

<p>When I started development on Krang, our new content management system, I
wanted to find a better way to meet our data import and automation needs. After
searching in vain for better SOAP techniques, I realized that the problems were
largely inherent in SOAP itself. SOAP is a network system, tuned for small
messages and it carries with it complexity that resists easy debugging.</p>

<p>On the other hand, when I considered the XML aspects of the Bricolage
system, I found little to dislike. XML is easy to understand and is sufficiently
flexible to represent all the data handled by the system. In particular, I
wanted to reuse my hard-won XML Schema writing skills, although I knew that I'd
need runtime validation.</p>

<p>In designing the new system I took a big step back from the leading edge. I
based the new system on the TAR archive file format, which dates back to the
mid-70s!</p>

<p><img src="/pub/2004/09/30/graphics/KDS.jpg" width="206" height="294" alt="" /><br /><em>Figure 1. </em></p>

<p>I named the file format "Krang Data Set" (KDS). A KDS file is a TAR archive
containing a set of XML files. A special file, <em>index.xml</em>, contains
data about all the files contained in the KDS file, providing class names and
IDs. To reduce their size, it's possible to compress KDS files using
<code>gzip</code>.</p>

<p>I wrote two scripts, <code>krang_import</code> and
<code>krang_export</code>, to read and write KDS files. Each object type has
its own XML Schema document describing its structure. Krang classes implement
their own <code>deserialize_xml()</code> and <code>serialize_xml()</code>
methods. For example, to export all templates into a file called
<em>templates.kds</em>:</p>

<pre><code>$ <strong>krang_export --templates --output templates.kds</strong></code></pre>

<p>To import those templates, possibly on a different machine:</p>

<pre><code>$ <strong>krang_import templates.kds</strong></code></pre>

<p>If the object being exported has any dependencies, the KDS file will include
them.  In this way a KDS file generated by <code>krang_export</code> is
guaranteed to import successfully.</p>

<p>By using a disk-based system for importing and exporting data I cut the
network completely out of the picture. This alone accomplishes a major
reduction in complexity and a sizable performance increase. Recently we
completed a very large import into Krang comprising 12,000 stories and 160,000
images. This took around 4 hours to complete, which may seem like a long time
but it's a big improvement over the 28 hours the same import required using
SOAP and Bricolage!</p>

<p>For system automation such as running publish jobs from <code>cron</code>, I
decided to code utilities directly to Krang's Perl API. This means these tools
must run on the target machine, but in practice this is usually how people used
the Bricolage tools. When an operation must run across multiple machines,
perhaps when moving templates from beta to production, the administrator simply
uses <code>scp</code> to transfer the KDS files.</p>

<p>I also took the opportunity to write XML::Validator::Schema, a pure-Perl XML
Schema validator. It's far from complete, but it supports all the schema
constructs I needed for Krang. This allows Krang to perform runtime schema
validation on KDS files.</p>

<h4>What Went Right</h4>

<ul>

<li>The new system is fast. Operating on KDS files on disk is many times faster
than SOAP network transfers.</li>

<li>Capacity is practically unlimited. Since KDS files separate objects into
individual XML files, Krang never has to load them all into memory at once.
This means that a KDS file containing 10,000 objects is just as easy to process
as one containing 10.</li>

<li>Debugging is much easier. When an import fails the user simply sends me the
KDS file and I can easily examine the XML files or attempt an import on my own
system. I don't have to wade through SOAP XML noise or try to replicate network
operations to reproduce a bug. Separating each object into a single XML file
made working on the data much easier because each file is small enough to load
into Emacs.</li>

<li>Runtime schema validation helps find bugs faster and prevents bad data
from ending up in the database.</li>

<li>Because Krang's design accounted for the XML system from the start it has a
much closer integration with the overall system. This gives it greater coverage
and stability.</li>

</ul>

<h4>What Went Wrong</h4>

<ul>

<li>Operations across multiple machines require the user to manually transfer
KDS files across the network.</li>

<li>Users who have developed expertise in using the Bricolage SOAP clients must
learn a new technology.</li>

</ul>

<h3>Conclusion</h3>

<p>SOAP isn't a bad technology, but it does have limits. My experience
developing a SOAP interface for Bricolage taught me some important lessons that
I've tried to apply to Krang. So far the experiment is a success, but Krang is
young and problems may take time to appear.</p>

<p>Does this mean you shouldn't use SOAP for your next project? Not
necessarily. It does mean that you should take a close look at your
requirements and consider whether an alternative implementation would help you
avoid some of the pitfalls I've described.</p>

<p>The best candidates for SOAP applications are lightweight network
applications without significant performance requirements.  If your application
doesn't absolutely require network interaction, or if it will deal with large
amounts of data then you should avoid SOAP. Maybe you can use TAR instead!</p>

<h3>Resources</h3>

<ul>

<li><a href="http://krang.sf.net/">Krang</a></li>

<li><a href="http://bricolage.cc/">Bricolage</a></li>

<li><a href="http://bricolage.cc/docs/current/api/Bric/SOAP.html">Bricolage
SOAP documentation</a></li>

<li><a href="http://www.w3.org/TR/SOAP/">SOAP</a></li>

<li><a href="http://www.soaplite.com/">SOAP::Lite</a></li>

<li><a href="http://xml.apache.org/xerces-c/">Xerces/C++</a></li>

<li><a href="http://www.w3.org/XML/Schema">XML Schema</a></li>

<li><a href="http://search.cpan.org/~samtregar/XML-Validator-Schema/">XML::Validator::Schema</a></li>

<li><a href="http://www.oreilly.com/catalog/pwebserperl/">Programming Web
Services with Perl</a> by Randy J. Ray and Pavel Kulchenko</li>

</ul>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1000" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/p6pdigest/20040926.html" rel="bookmark">This Week on Perl 6, Week Ending 2004-09-24</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2004-09-28T00:00:00-08:00">September 28, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h2>The Perl 6 Summary for the week ending 2004-09-24</h2>

<p>This is my last summary before I start my teaching practice.  Hopefully I've
things set up so writing the summary isn't going to interfere with that, and
vice versa.</p>

<h2>This week in perl6-compiler</h2>

<h3>State of Rules</h3>

<p>Discussion of the state of the Perl 6 compiler (with particular reference to
the rules engine) continued. People wanted to make sure that the rules engine
that Luke and Patrick are working on would be flexible enough to cope with
different languages in closures.</p>

<h3><a
href="http://groups.google.com/groups?threadm=20040920215812.GA9454@mdssdev05">Synopsis
5 updated</a></h3>

<p>Ed Peschko asked that there be some way of "turning the rules engine inside
out" to make something which, given a rule, would generate strings that could
match against it. Actually, this is the second time Ed asked for this, as Luke
reminded him. Luke went on to implement a generator in hypothetical perl 6,
which seemed to please everyone but Ed.</p>

<p>Rod Adams wins the "making the summarizer smile wryly" occasional prize.</p>

<h2>Meanwhile, in perl6-internals</h2>

<h3><a
href="http://groups.google.com/groups?threadm=198c873804091714515c11197d@mail.gmail.com">Problems
Reimplementing Parrot Forth</a></h3>

<p>Matt Diephouse fell afoul of problems with the <code>compile</code> and
<code>compreg</code> opcodes in his efforts to reimplement Parrot Forth in PIR.
Steve Fink made some suggestions for workarounds based on his work on writing a
regular expression compiler.</p>

<p>From further discussion, it seems that, if you're implementing a stack based
language, you'd do well to manage the language's stack yourself rather than
using Parrot's User stack which is interestingly scoped.</p>

<h3><a
href="http://groups.google.com/groups?threadm=414D3726.1070103@coleda.com"><code>__init</code>
not being magically called</a></h3>

<p>Will Coleda had some problems with a class's <code>__init</code> function
not being called magically. Nobody else could reproduce the problem. After a
certain amount of confusion, Will did <code>make realclean; perl Configure.pl;
make; make test</code> and all was well again.</p>

<p>If you're experiencing a weird problem, it's probably best to do the rebuild
before posting to the list. Or you could fix the build system to have more
accurate dependencies...</p>

<h3><a
href="http://groups.google.com/groups?threadm=002F1A0F-0AC3-11D9-8600-000393A6B9DA@mac.com">Incremental
collector and finalization</a></h3>

<p>Jeff Clites had some questions about how finalizers interact with the work
that Leo's done while implementing an incremental garbage collector for Parrot.
Leo had some thoughts, but noted that there's still a problem with ordered
finalization and destruction.</p>

<p>[Your summarizer is really starting to understand why old school GC types
really don't like finalizers...]</p>

<h3><a
href="http://groups.google.com/groups?threadm=a06110401bd74d011bd71@[10.0.1.5]">Python
bytecode volunteers</a></h3>

<p>Dan asked for volunteers to finish the task of getting Python bytecode
working on Parrot; he reckoned that the work was mostly done, but that neither
he nor Leo have the time to go the last couple of yards.</p>

<p>Come on people, this would definitely be a cool thing to have.</p>

<h3><a
href="http://groups.google.com/groups?threadm=Pine.LNX.4.44.0409201512210.7974-100000@booger.sixgeeks.org">mod_parrot
0.0</a></h3>

<p>Jeff Horwitz announced the release of version 0.0 of his mod_parrot Apache
module. It's remarkably powerful for version 0.0.</p>

<h3><a
href="http://groups.google.com/groups?threadm=a06110405bd750b80ab4a@[10.0.1.5]">The
<code>compile</code> op and building compilers</a></h3>

<p>Dan had some thoughts on tidying up the spec for the <code>compreg</code>
and <code>compile</code> operators and asked for comments before he nailed the
spec down. Steve Fink and Leo had comments.</p>

<h3><a
href="http://groups.google.com/groups?threadm=4150301E.7050409@toetsch.at">Misc.
remarks about YAPC::EU</a></h3>

<p>Leo popped up to thank everyone who'd donated to The Perl Foundation and
thus supported the purchase of shiny new Apple Powerbook G4 that he'd used to
run his presentation at YAPC Europe in Belfast.</p>

<p>He went on to outline some of the things he'd done and heard in Belfast,
including the fact that one French teacher is using Parrot for teaching
assembly language.</p>

<h3><a
href="http://groups.google.com/groups?threadm=rt-3.0.11-31659-96593.15.6775143505678@perl.org">Parrot
m4 0.0.8</a></h3>

<p>Bernhard Schmalhofer announced version 0.0.8 of Parrot m4. There's no new
functionality, "just" some structural improvement and tidying.</p>

<h3><a
href="http://groups.google.com/groups?threadm=41517393.30204@coleda.com">Parrot
TCL</a></h3>

<p>Will Coleda posted a progress report on his Parrot TCL implementation which
is progressing gradually towards being a full blown TCL implementation; he's
working towards using special Tcl* PMCs with real TCL semantics instead of the
current scheme which uses Perl PMCs.</p>

<h3>Namespaces, Part 1</h3>

<p>Dan posted the first part of his Namespaces spec. There was, of course, much
discussion. Inevitably, there was another revision, and further discussion.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110415bd77687142d1@[10.0.1.5]">Dan's initial post</p>

<p><a
href="http://groups.google.com/groups?threadm=a0611040fbd7a051cf273@[172.24.18
.155]">The revised version</a></p>

<h3><a
href="http://groups.google.com/groups?threadm=4152DA7E.1050603@toetsch.at">Towards
a new call scheme</a></h3>

<p>Leo posted an overview of the work he was doing on Parrot's internals to put
a faster calling scheme in place (as discussed endlessly). The usual
perl6-internals discussion and revision process swung into action.</p>

<h3><a
href="http://groups.google.com/groups?threadm=25961BC4-0DF4-11D9-BEF3-000393BBDA08@dil.univ-mrs.fr">Hello
everybody</a></h3>

<p>Remember the French teacher that Leo mentioned? Well, the man himself,
Christian Aperghis-Tramoni, popped up on the list and pointed everyone at his
work so far, and asked for help in finding more information.</p>

<p>If anyone would like to translate Christian's work from French to
English...</p>

<h3><a
href="http://groups.google.com/groups?threadm=41540125.3070401@toetsch.at">Bits
of introspection</a></h3>

<p>Leo announced that he'd started work on adding more introspection features
to Parrot, accessible through the <code>interpinfo</code> op. This looks very
cool.</p>

<h3><a
href="http://groups.google.com/groups?threadm=41542942.5080304@home.nl">Why
lexical pads</a></h3>

<p>Klaas-Jan wondered why Parrot had support for lexical pads, as he thought
that PIR's <code>.local</code> syntax was good enough.</p>

<p>Several people explained.  Essentially, lexical pads are <code>really</code>
handy, bordering on the essential, when you're implementing a language with
closures.</p>

<h2>Meanwhile, in perl6-language</h2>

<h3>In Brief</h3>

<p>Discussion of various synopses continued.</p>

<p>Larry can be very persuasive when he's right.</p>

<p>Michele Dondi is a chap.  (See last week's question.)</p>

<p>Trying to run a thread across multiple mailing lists is the sort of thing
that annoys a summarizer.</p>

<p>You have to write something before it goes in the core.</p>

<p>Patrick hopes to have a first cut at the Perl 6 rules engine available
within a couple of weeks.</p>

<h3><a
href="http://groups.google.com/groups?threadm=d60j42vy.fsf@jonadab.homeip.net">Pipeline
Performance</a></h3>

<p>Luke showed off Perl 6's little known <code>gather {...; take ...
}</code> construct in some example code. People were impressed.</p>

<h3><a
href="http://groups.google.com/groups?threadm=20040920132514.GA11388@babylonia.flatirons.org">Unary
dot and custom control</a></h3>

<p>Luke Palmer wondered about topicalization and scope in:</p>

<pre><code>    method foo () {
        preserve {
            .bar;
        }
    }</code></pre>

<p>In particular, he hoped that the topic that <code>.bar</code> sees is the
topic that's lexically current.</p>

<p>Larry set his mind to rest. (Well, he set my mind to rest).</p>

<h3><a
href="http://groups.google.com/groups?threadm=Pine.LNX.4.60.0409211313430.18712@q.pcteor1.mi.infn.it">attributes/methods
on sigils</a></h3>

<p>Michele Dondi wondered if sigils could be "(sort of special) operators ...
thus allowing attributes/methods or even adverbs". Larry's response was
superbly deadpan.</p>

<h2>The usual footer</h2>

<p>Hmm... maybe I should trying doing the perl6-language summary like that
every week; it's certainly quicker to write like that. Let me know what you
think.</p>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of Perl.
You might also like to send feedback or contributions to a <a
href="mailto:pdcawley@bofh.org.uk">getting Piers to OSCON 2005 fund</a>.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></p>

<p><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></p>

<p>Or, you can check out <a href="http://www.bofh.org.uk/">my website</a>.</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-998" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/p6pdigest/20040917.html" rel="bookmark">This Week on Perl 6, Week Ending 2004-09-17</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2004-09-23T00:00:00-08:00">September 23, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Another week, another summary, and I'm running late. So:</p>

<h3>This week in perl6-compiler</h3>

<h4>The current state of the compiler</h4>

<p>Discussion of the current state of the nascent perl 6 compiler and how best
to contribute to its development even before code has been released continued.
The best way to contribute right now is &quot;Write tests&quot;. Don't worry about what
the test harness should look like; simple tables of rules, test strings and
expected matches will be very welcome.</p>

<p>The status discussion also touched on how to handle different languages in
the closures embedded in rules.</p>

<h4><a href="http://groups.google.com/groups?threadm=x7u0u0yfpr.fsf@mail.sysarch.com">Bootstrapping
the grammar</a></h4>

<p>Uri Guttman had some thoughts on bootstrapping Perl 6's grammar. He hoped
that his suggested approach would enable lots of people to work on the thing at
once without necessarily getting in each other's way. Adam Turoff pointed
everyone at a detailed description of how Squeak (a free Smalltalk) got
bootstrapped.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040915062208.GA22692@wall.org">Synopsis
5 updated</a></h4>

<p>Larry announced that he has updated <a href="http://dev.perl.org/perl6/synopsis/S05.html">Synopsis 5</a>, which covers
Grammars, rules and all that good stuff. It's now only a week out of date
instead of two years and counting.</p>

<h3>This week on perl6-internals</h3>

<h4><a href="http://groups.google.com/groups?threadm=a06110405bd636771e587@[10.0.1.2]">Namespaces</a></h4>

<p>Discussion of Dan's namespace proposal really got going this week.</p>

<h4><a href="http://groups.google.com/groups?threadm=198c873804091021003cd8d12e@mail.gmail.com">Buffered
IO and Parrot Forth</a></h4>

<p>Matt Diephouse fell afoul of a problem with IO buffering when he was taking
a look at Parrot Forth, so he asked the list for help. Leo supplied the help,
so Matt supplied a patch to Parrot Forth which made it print its prompts
correctly when run under modern (CVS) Parrot.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040913003027.GA29524@stefp.dyndns.org">Pragma
<code>@LOAD</code> is not always honoured</a></h4>

<p>St&eacute;phane Payrard was bemused to discovered that parrot routines
declared with the <code>@LOAD</code> pragma don't automatically execute if
they're in the main segment. He suggested that the issue be either fixed or
documented.</p>

<p>Leo documented it.</p>

<h4>
NCI basics
</h4>

<p>Charles Somebody tried to crash the monomonikered big leagues by failing to
vouchsafe his surname when he posted a question about <a href="http://groups.google.com/groups?threadm=20040915082722.C5B2F17856F@mail.t0c.de">getting
NCI to work with wxWindows</a>. For reasons that escape me, the answers (and,
indeed, Charles's surname &mdash; Lowell) appeared in a different thread.</p>

<p>Sadly the answers were more along the lines of &quot;<a href="http://groups.google.com/groups?threadm=200409151417.48823.parrot@jensbeimsurfen.de">Oops,
that's a bug that is, we'll add it to the RT queue</a>&quot;. Still, better to have
it identified than festering away undiscovered.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040915044057.68837.qmail@web40702.mail.yahoo.com">Language::Zcode</a></h4>

<p>Who says Perl 6 is the only language that's taking a long time to appear on
Parrot? Amir Karger posted his first annual update on his attempt to get Parrot
to emulate the Z-machine. Hopefully subsequent updates will be more
frequent.</p>

<h3>Meanwhile, in perl6-language</h3>

<h4><a href="http://groups.google.com/groups?threadm=plato-A8E818.17472910092004@x6.develooper.com">Ordinals,
Hashes and Arrays, oh my!</a></h4>

<p>David Green had some thoughts on Perl 6's compound data structures.  Larry
didn't sound convinced.</p>

<h4><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.58.0409141202210.23717@q.pcteor1.mi.infn.it">Writing
<code>pack</code>, or something like it</a></h4>

<p>Michele Dondi wondered how to write <code>pack</code>-like functions in Perl
6, where the first argument is a string which specifies the signature of the
rest of the function call. The proposal stumped me, but maybe you all can make
something of it.</p>

<h4><a href="http://groups.google.com/groups?threadm=4146E6D7.1020102@Yahoo.com">But
is it intuitive?</a></h4>

<p>No it isn't.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040915175111.10763.qmail@lists.develooper.com">S5
Grammar compositions</a></h4>

<p>While peacefully reading Synopsis 5 (Rules &amp; Grammars), Dave Whipp
noticed that grammatical inheritance wasn't as flexible as the Role based
compositions that can be used when working with classes. Larry wondered allowed
about having grammar roles, but I don't think they've been officially mandated
yet...</p>

<h4><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.58.0409161635210.24252@leia.pcteor1.mi.infn.it">Still
about subroutines...</a></h4>

<p>Michele Dondi continues to make my head hurt with zir proposals. In part
it's because I've still not worked out whether zie is male or female, and in
part because, well, zir proposals are challenging. In this particular proposal
zie wondered if there would be a way to magically write recursive anonymous
functions without having to introduce a new symbol of some sort.</p>

<p>Luke and Larry think there will be such a way, but the precise syntax hasn't
settled just yet.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040917145714.GB9174@pobox.com">Range
quantifier woes</a></h4>

<p>Jonathan Scott Duff wasn't happy with the new range quantifier syntax in
Synopsis 5. He posted a bunch of questions that were nagging at him. Larry had
some good answers (if you're interested in contributing to the design of Perl 6
you should <em>really</em> read Larry's replies).</p>

<h3>Announcements, Apologies, Acknowledgements</h3>

<p>And so ends another summary. I hope you liked it. Sorry for the delay if
you're reading this on the mailing list; this teacher training malarkey is
remarkably tiring.</p>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of Perl.
You might also like to send feedback or contributions to a getting <a href="mailto:pdcawley@bofh.org.uk">Piers to OSCON 2005 fund</a>.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></p>

<p><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></p>

<p>Or, you can check out <a href="http://www.bofh.org.uk/">my web site</a>.</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-990" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/23/fsms.html" rel="bookmark">Building a Finite State Machine Using DFA::Simple</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bill Ruppert</span> on <abbr class="published" title="2004-09-23T00:00:00-08:00">September 23, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>I am converting some articles from MS Word to HTML by hand. I often use
bulleted outlines so I face a lot of work creating lists with nested sub-lists.
It didn't take opening and closing many <code>&lt;ul&gt;</code> and
<code>&lt;li&gt;</code> tags to realize I wanted to automate the task.</p>

<p>It's very easy to use filters with my text editor and I've written several
in Perl to speed up my HTML formatting. I decided to create a filter to handle
this annoying chore. After a little thought I decided the logic involved was
just tricky enough to use a finite state machine (FSM) to keep things
straight.</p>

<p>Large programs always require some thought and planning while most small
programs can be written off the top of the head.  Once in a while I run into a
small problem with just enough complexity that I know "off the top" will
quickly become "not so quick, very dirty, and probably wrong." Finite state
machines can help to solve these knotty problems cleanly and correctly.</p>

<p>There have been several times I wanted to use an FSM but didn't because I
lacked a good starting skeleton. I would do it some other way or hand code an
FSM using a loop, nested <code>if</code> statements, and a state variable. This
ad hoc approach was tedious and unsatisfying.</p>

<p>I knew there had to be a Perl module or two implementing FSMs and decided it
was time to add this tool to my toolbox.</p>

<h3>What Are Finite State Machines?</h3>

<p>A finite state machine is a set of states, one of which is the starting
state. Each state has a set of transitions to other states, based on the next
input token. A transition has a condition and an action. If the condition is
met, the FSM performs the action and then enters the new state.  This cycle
repeats until reaching the end state.</p>

<p>Finite state machines are important in the theory of computation.  A 

<a href="http://en.wikipedia.org/wiki/Finite_state_machine">Wikipedia article
on finite state machines</a> goes into the computer science aspect.  FSMs are
valuable because it is possible to identify precisely what problems they can
and cannot solve. To solve a new class of problems, add features to create
related machines. In turn, you can characterize problems by the kind of machine
needed to solve it. Eventually you work up to a <a href="http://en.wikipedia.org/wiki/Turing_machine">Turing machine</a>, the most
theoretically complete computing device. It is a finite state machine attached
to a tape with potentially infinite capacity.</p>

<p>The formal and highly abstract computer science approach to FSMs does not
hint at their usefulness for solving practical problems.</p>

<h3>The Bubble Diagram</h3>

<p>Figure 1 shows the parts of a finite state machine.  The circles represent
states. A double circle indicates the start state. The arcs represent the
transitions from one state to another. Each arc label is a condition.  The
slashes separate actions.</p>

<p><img src="/pub/2004/09/23/graphics/elements.jpg" width="400" height="186" alt="Finite state machine elements" /><br />
<em>Figure 1. Finite state machine elements.</em></p>

<p>I like FSMs because they are graphical. I can grab a pen and sketch the
solution to a problem. The bubble diagram helps me see the combinations of
states and input conditions in a logical and organized way.</p>

<p><img src="/pub/2004/09/23/graphics/handdrawn.jpg" width="450" height="350" alt="Hand drawn finite state bubble diagram" /><br />
<em>Figure 2. Initial rough diagram.</em></p>

<p>Figure 2 is the initial diagram I drew for the HTML list problem. The
diagram turned out to be have an omission &mdash; it does not handle blank
lines. Having discovered this bug, it was easy to make sure to consider blank
lines in every state.</p>

<p><img src="/pub/2004/09/23/graphics/final.jpg" width="500" height="463" alt="Final finite state diagram" /><br /> <em>Figure 3. The final diagram.</em></p>

<p>Figure 3 is a formal diagram of the final FSM, complete with blank-line
handling, prepared for this article. Normally, I would never be so elaborate
for such a small problem. You can see that it is an excellent way to
communicate a solution to others.</p>

<h3>Looking at DFA::Simple</h3>

<p>I have yet to look for a Perl module to do something and come up totally
empty handed. That's absolutely my favorite thing about Perl.</p>

<p>I looked for existing FSM modules and found <a href="http://search.cpan.org/~rsavage/DFA-Command-1.98/">DFA::Command</a> and
<a href="http://search.cpan.org/~randym/DFA-Simple-0.32/">DFA::Simple</a>.
DFA::Command looks good but was more than I needed. (By the way, the simplest
FSM is also a "deterministic finite automata," thus the DFA in the module
names.)</p>

<p>The "simple" in DFA::Simple sounded promising, but the module's
documentation is poor. The sample program is difficult to follow and does not
process input from a file. Using the module in the real world is left as an
exercise for the reader: the docs do not mention handling errors and the
end-of-file condition.</p>

<p>While FSMs start as circles and arcs, they end up as tables of states and
transitions. My interest was in exactly how the packages created these tables.
Having clean, easy-to-look-at code is very important to me. I'm probably the
one who'll have to change it someday!</p>

<p>I was very unhappy that DFA::Simple defines its sample FSM in a
position-dependent way. The state being defined depends upon its textual
position in the source. It uses numeric constants for state IDs within the
tables and you must synchronize them with any changes. Comments indicate which
state number you <em>think</em> you are working on, but they could easily
unsynchronize as you add, drop, and move states.</p>

<p>To clarify, I saw this:</p>

<pre><code>my $states = [
    # State 0 
    [ <em>...jump to state 2...</em> ],
    # State 1 
    [ <em>...jump to state 0...</em> ],
    # State 2 
    [ <em>...jump to state 1...</em> ],
    # ...
];</code></pre>

<p>But I wanted to see something like this:</p>

<pre><code>my %states;
$states{stStart}   = [ <em>...jump to stSubitem...</em> ];
$states{stItem}    = [ <em>...jump to stStart...</em>   ];
$states{stSubitem} = [ <em>...jump to stItem...</em>    ];
# ...</code></pre>

<p>This was a big negative. I have run into enough bugs caused by
position-dependency that I refused to consider using this code. I almost
decided to write my own module, but first went back and took a last look at
DFA::Simple to see if there was any way I could make it work.</p>

<p>I realized that an FSM use symbolic constants for state definitions.  Array
references using these symbolic constants would provide the self-documenting
and maintainable approach I demanded.  It was easy to develop a way to process
input (handling errors and EOF) that works in most cases. I put it together,
gave it a try, and it worked!</p>

<h3>The Input and Output</h3>

<p>The input comes from copying an MS Word document and pasting it
into my text editor. My bulleted outlines look like this:</p>

<pre><code>o Major bullet points
    - each line is a point
    - a leading "o " is removed
o Minor bullet points
    - indicated by a leading "- "
    - may not start a list
    - only one level of minor points is supported
o Future enhancements
    - numbering of points
    - handling of paragraphs

o Start a new group of points
    - a blank line indicates end of old group
    - old group is closed, new one opened</code></pre>

<p>This outline actually documents key features of the program.</p>

<p>A correctly nested HTML list must come entirely within the parent list item.
This is what made the filter tricky enough that I wanted to use a finite state
machine. When you open a top-level list element you have to wait for the next
input to see if you should close it or start a sub-list. When you look at an
input, you have to know if you have an open list element pending.  The current
state and the input determine what to do next, exactly fitting the finite state
machine model.</p>

<p>A snippet of output:</p>

<pre><code>&lt;ul&gt;
  &lt;li&gt;Major bullet points
    &lt;ul&gt;
      &lt;li&gt;Each line is a point&lt;/li&gt;
      &lt;li&gt;A leading "o " is removed&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
...
&lt;/ul&gt;</code></pre>

<p>Not being an HTML expert, I initially tried to insert my sub-list between
two higher-level list elements. The page rendered correctly but would not <a href="http://validator.w3.org/">validate</a>, revealing my error and starting
this project.</p>

<h3>The Parts of the Machine</h3>

<p>The first step in building the machine was deciding how to represent state
names symbolically rather than numerically. The natural choice is the 
<code>constant</code> pragma.</p>

<pre><code>use constant {
      stStart     =&gt; 0,
      stItem      =&gt; 1,
      stSubItem   =&gt; 2,
      stEnd       =&gt; 3,
};</code></pre>

<p>I defined the machine as two arrays. The first is <code>@actions</code>
defining what to do when entering and exiting a state. You might use it to
initialize a data structure on entry and save it on exit, or allocate resources
on entry and de-allocate them on exit.</p>

<p>Each element of <code>@actions</code> is a two-element array.  The first is
the enter action and the second the exit action. My program logs a message on
entry and leaves the exit action undefined.</p>

<pre><code>my @actions;

# log entry into each state for debugging
$actions[stStart]   = [sub{print LOG "Enter Start\n";}  ];
$actions[stItem]    = [sub{print LOG "Enter Item\n";}   ];
$actions[stSubItem] = [sub{print LOG "Enter SubItem\n";}];
$actions[stEnd]     = [sub{print LOG "Enter End\n";}    ];</code></pre>

<p>Each element of the second array, <code>@states</code>, is an array of
transitions for a state. A transition has three elements: the new state; the
test condition; and the action. The condition is a subroutine returning true or
false, or <code>undef</code>, which always succeeds.</p>

<p>The machine tests the transitions of the current state in sequence until a
condition returns true or is undefined. Then it takes the action and enters the
new state. If the new state is different than the old one, the respective exit
and entry actions execute.</p>

<p>As with the final <code>else</code> in a nested <code>if</code> statement,
consider having an <code>undef</code> at the end of the transitions. If nothing
else, log a "can't happen" error message to catch holes in your logic as well
as holes caused by future changes.</p>

<p>Here is the transition array for a state:</p>

<pre><code>my @states;

# Next State, Test,        Action

  $states[stSubItem] = [
    [stEnd,     sub{$done},  sub{end_sublist; end_list}  ],
    [stSubItem, sub{/^-\s/}, sub{output_subitem}         ],
    [stStart,   sub{/^$/},   sub{end_sublist; end_list}  ],
    [stItem,    undef,       sub{end_sublist; start_item}],
];</code></pre>

<p>This uses the symbolic constants for state IDs in both tables.  The states'
numerical values are irrelevant. I followed convention and numbered the states
consecutively from zero, but I tested the program using random state numbers.
It worked fine.</p>

<p>This is much better than the definition of the sample FSM in DFA::Simple.
Now adding, deleting, and shuffling states will not introduce
position-dependent bugs.</p>

<h3>Final Assembly</h3>

<p>The parts of the machine are built. Assembling them is easy:</p>

<pre><code>use DFA::Simple

my $fsm = new DFA::Simple \@actions, \@states;
$fsm-&gt;State(stStart);</code></pre>

<p>This creates a new DFA::Simple object using references to the
<code>@actions</code> and <code>@states</code> arrays. The <code>State</code>
method retrieves or sets the machine's state, invoking entry and exit routines
as needed. Here, the call sets the initial state.</p>

<h3>Putting the Machine in Motion</h3>

<p>The major goal of this project was to develop a skeleton to develop FSMs
quickly, with an emphasis on filters. I wanted to develop a way of handling
file input and processing errors that would work for future projects.</p>

<p>This loop accomplishes that:</p>

<pre><code>while (&lt;&gt;) {
      chomp;

      # log input line for debugging
      print LOG "Input &lt;$_&gt;\n";

      # trim input and get rid of leading "o "
      s/^\s+//;
      s/\s+$//;
      s/^o\s+//;

      # process this line of input
      $fsm-&gt;Check_For_NextState();

      # get out if an error occurred
      last if $error;
}</code></pre>

<p>The <code>while (&lt;&gt;)</code> loop is standard for filters.  The
application cleans up input as needed. In this case, it chomps each line and
trims and strips it of some text bullet characters.</p>

<p>The log message is for initial debugging. This, along with the new state
message, gives a clear picture of what is happening.</p>

<p>The most important statement is <code>$fsm-&gt;Check_For_NextState();</code>,
which does the major work &mdash; scanning the current state's transition table
to see what to do next.</p>

<p>The FSM must be able to exit early if it spots an error. This requires the
use of a global <code>$error</code> switch. It starts out as false. If
<code>$error</code> is true, the program ends and returns the value of
<code>$error</code>.</p>

<p>End-of-file handling also uses a global switch, <code>$done</code>. It is
initially false and changes to true when the program exhausts standard input.
One last cycle runs to give the machine a chance to clean up. Transition
conditions checking for EOF can simply return <code>$done</code>.</p>

<p>Here is the end-of-file code:</p>

<pre><code>unless ($error) {
      # finish up
      $done = 1;
      $fsm-&gt;Check_For_NextState();
}</code></pre>

<p>The program does not support early normal termination. You can enter a state
with no transitions and the program will read (but ignore) any remaining input.
However, there is no way to avoid reading all of the input without setting
<code>$error</code>. You can implement early exit by adding a
<code>$exit</code> switch and handling it similarly to <code>$error</code>.</p>

<p>Appropriately for filters, this program is line oriented. Many FSMs read
input a character at time: lexical scanners and regular expression parsers, for
example. This program could easily change to handle character input.</p>

<h3>The Action Routines</h3>

<p>Now that the machine is purring along, it needs to do something.  This is
the purpose of the actions. Those in my program are typical of a finite state
machine. They invoke small subroutines that form a mini-language for building
lists with sub-lists. The subroutines are very simple, but running them in the
right order does the job.</p>

<p>Thus, this approach breaks a complex problem into smaller pieces, each of
which is simply solvable. This is what programming is all about.</p>

<h3>Conclusion</h3>

<p>The next time you have a knotty little problem like this one, try sketching
a solution using a bubble diagram and implementing it with DFA::Simple. You'll
have added a great new tool to your toolbox.</p>

<h3>Resources</h3>

<ul>

<li>Zipped <a href="/2004/09/23/examples/fix_bullets.zip">source code</a> of the final program</li>

<li><a href="http://en.wikipedia.org/wiki/Finite_state_machine">Finite State
Machines</a> at Wikipedia</li>

<li><a href="http://en.wikipedia.org/wiki/Turing_machine">Turing Machines</a>
at Wikipedia</li>

<li><a href="http://search.cpan.org/~randym/DFA-Simple-0.32/">DFA::Simple</a>
at CPAN</li>

<li><a href="http://search.cpan.org/~rsavage/DFA-Command-1.98/">DFA::Command</a> at
CPAN</li>

<li><a href="http://www.xrce.xerox.com/competencies/content-analysis/fst/home.en.html">Finite
State Technology</a> at Xerox Research Centre Europe</li>

<li><a href="http://juggernaut.eti.pg.gda.pl/~jandac/fsa.html">Finite State
Utilities</a> in C++ by Jan Daciuk</li>

</ul>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-996" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/p6pdigest/20040910.html" rel="bookmark">This Week on Perl 6, Week Ending 2004-09-10</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2004-09-16T00:00:00-08:00">September 16, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h3>This week on perl6-compiler</h3>

<p>Yes you read that right; development of the Perl 6 compiler now has its own
mailing list. Hopefully, in the coming weeks, the current perl6-internals list
will get renamed parrot-internals to reflect that split.</p>

<p>As I write this, groups.google.com hasn't picked up the new list, but I'm
sure it will do eventually, so I'm going to continue to use Google URLs here on
the theory that they'll work eventually.  If you're desperate to read the whole
threads before then, start at <a href="http://www.nntp.perl.org/group/perl.perl6.compiler/">perl6-compiler on
Perl.org</a> &mdash; there's all of 35 messages there as I type this...</p>

<h4><a href="http://groups.google.com/groups?threadm=413E2AB4.2070107@lmco.com">Bundles</a></h4>

<p>In a thread that migrated over from perl6-language Gregory Keeney continued
discussion of whether Perl 6 will/should have an officially blessed bundling
system, or whether it should simply have good enough hooks that someone could
write one. There was some discussion about whether perl6-compiler is actually
the correct list for the discussion...</p>

<h4><a href="http://groups.google.com/groups?threadm=c1b5821504090803483f528a3d@mail.gmail.com">Current
state?</a></h4>

<p>Herbert Snorrason wondered what state the Perl 6 compiler was in. (I think
we all did to be honest, but Herbert got to ask the question.)</p>

<p>Patrick said that he and Luke (I think) are at the beginning stages of
building a basic perl 6 grammar engine that compiles to parrot and handles some
basic optimizations. In tandem with that, Patrick was also working on writing a
Perl 6 grammar. The plan is (and no plan survives contact with the enemy) to
get a working basic grammar engine up in the next month or so then use that to
build the Perl 6 parser.</p>
<csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<p>As soon as there's code, announcements will be made in all the right places
(and who knows? maybe even on Slashdot).</p>

<p>If you want to help with the process of writing the grammar engine, your
best bet (at least until there's some running code) is to snag the appropriate
apocalypse and use that to write tests and post 'em to the list.</p>

<h3>Meanwhile, in perl6-internals</h3>

<h4><a href="http://groups.google.com/groups?threadm=4137507F.5010606@toetsch.at">Fix ops</a></h4>

<p>Last week Leo had discussed unhooked ops without definite opcode numbers and
asked for comments on what to do with them. Apparently Dan finds many of the
boolean functions useful, so they're going to be kept, probably hidden behind a
namespace, once we know how namespaces work.</p>

<h4><a href="http://groups.google.com/groups?threadm=a06110402bd6243597a07@[10.0.1.2]">Perl
free configuration</a></h4>

<p>Right now, Parrot's configuration system palms off a lot of the work to the
local Perl installation by querying the perl config.  Which isn't ideal in the
long run. So Dan suggested that now's the time to make a list of what info
configure.pl grabs from the perl installation and instead to write(appropriate)
probing code ourselves so we can do perl-free configuration. The usual
"autoconf!" "No! Metaconfig!" "No! Something else entirely!" discussion
occurred. (For the record, Dan seems to favour the "something else entirely"
option).</p>

<p>The bike shed remains unpainted.</p>

<h4><a href="http://groups.google.com/groups?threadm=200409061855.51395.parrot@jensbeimsurfen.de">Oh
My. Minesweeper!</a></h4>

<p>Jens Rieks pointed everyone at the shiny new
<em>examples/sdl/minesweeper/mines.imc</em>. Speaking as a compulsive
Minesweeper in recovery, this is a bad, bad thing.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040907034002.GA22076@kevin.fink.com">Dynamic
PMC libraries</a></h4>

<p>Steve Fink posted a patch to Parrot's build system to make the process of
building libraries of dynamic PMCs rather less platform specific. After a
sanity check from Leo it got committed.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040907025916.GA13372@perlsupport.com">Semantics
for regexes</a></h4>

<p>The discussion of required semantics to implement a regular expression
engine continued. Chip Salzenberg chipped in with some experience from the
Topaz project (a brave project to reimplement Perl 5 in C++ that, sadly failed
whilst teaching Chip a great deal). I confess that the thought of an
<code>open_up_and_say_aaah</code> method on Perl Scalars delighted your
summarizer.</p>

<h4><a href="http://groups.google.com/groups?threadm=a06110405bd636771e587@[10.0.1.2]">Namespaces</a></h4>

<p>(Am I the only person who wants to repeat Namespaces! with the same
intonation used for "Monorail!" in the Simpsons?)</p>

<p>As Dan pointed out, Parrot needs namespaces, more than that, it needs them
to be designed. So, like the excellent designer he is, he laid out his plan for
namespaces and invited comments. And comments there were. We can probably
expect a PDD soon. Ish.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040907171607.GD23808@contra.vosn.net">Patrick
R. Michaud Speaks!</a></h4>

<p>Mark Patrick's words: There will be a Perl 6.</p>

<p>Now all that remains is to find out when.</p>

<h4><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.44.0409071154400.6586-100000@booger.sixgeeks.org">mod_parrot
progress</a></h4>

<p>Jeff Horwitz updated everyone on his progress with updating (rewriting) a
mod_parrot plugin for Apache 2.</p>

<h4><a href="http://groups.google.com/groups?threadm=200409072222.23542.parrot@jensbeimsurfen.de">Continuations
and GC. Continued</a></h4>

<p>They're baack! Just when you thought return continuations had been sorted,
they're back and causing memory leaks.</p>

<h4><a href="http://groups.google.com/groups?threadm=a06110414bd63e3cc0af3@[10.0.1.2]">No
Autoconf, dammit!</a></h4>

<p>Dan restated his position on using Autoconf in the parrot build system. It's
really rather simple:</p>

<blockquote><p>We're not using autoconf. Period.</p></blockquote>

<p>In the discussion, Herbert Snorrason suggested we institute a "Rule One" for
Dan. In other words, Dan is always right. Unless he changes his mind ("Rule
Two"). Or is overridden by Larry ("The One True Rule One").</p>

<p>It works for me.</p>

<h4>
Constant strings
</h4>

<p>Dan posted a discussion of <code>const_string</code>, a Parrot function for
making use of string constants from C. It's very useful, but it doesn't seem to
be as useful as Dan would like it to be, so he's extended the API.</p>

<p>Personally, I'd like Symbols as first class data structures in Parrot, but
not enough that I'm likely to implement the darned things.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110416bd63ed1036ea@[10.0.1.2]">Constant
strings</a></p>

<p><a href="http://groups.google.com/groups?threadm=a06110420bd64c13aad60@[10.0.1.2]">Part
two</a></p>

<h4><a href="http://groups.google.com/groups?threadm=CAC60D5C-01E2-11D9-8EAB-003065AE00B6@mac.com">Multiple
languages clarification</a></h4>

<p>Self-described newbie Richard Jolly asked for clarification on what mixing
languages will look like. Dan pointed out that it hadn't actually been
specified yet. Besides, the internals list didn't do syntax.</p>

<p>He then outlined what he thought the syntax would look like. He doubts that
people will end up mixing languages in single source files though. Further
discussion pretty much agreed with Dan, generally arguing that most uses of
multiple languages would come from using other languages' libraries.</p>

<h4><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.44.0409091048070.30590-100000@booger.sixgeeks.org">NCI
and the running process image</a></h4>

<p>Jeff "<code>mod_parrot</code>" Horwitz revived a thread from a year ago. He
wanted to be able to use the running process image (say httpd) and grab its
various API functions using <code>dlfunc</code>. Sadly, although this works for
functions that Apache uses from shared libraries, it doesn't work for those
functions that are statically linked into the binary. He wondered if this was a
bug, or if he was going to have to stick to using the workaround he'd come up
with.</p>

<p>It turns out that it isn't a bug, but it can be done by passing a NULL as
the filename from which you're dynamically loading a function. Thanks Leo.</p>

<h3>Meanwhile, in perl6-language</h3>

<h4><a href="http://groups.google.com/groups?threadm=20040902234740.GA29156@wall.org">Synopsis
9, the discussion continues</a></h4>

<p>Synopsis 9 covers Perl's data types. And, from such a small acorn grows one
might oak of a thread. Some of the discussion was even about Perl's data types.
There was also a snide remark about summaries and the correct pronunciation of
"Z" &mdash; in revenge for which I plan to make sure that David Green is never
mentioned in a Perl 6 Summary.</p>

<p>Oops.</p>

<h4><a href="http://groups.google.com/groups?threadm=20040904133421.GN759@c4.convolution.nl">Sub
signatures without parens</a></h4>

<p>Juerd wondered if the parentheses around the signatures of function/method
were still strictly necessary. Larry explained that they were and why.</p>

<h4><a href="http://groups.google.com/groups?threadm=m21xhhkfn3.fsf@obelisk.bofh.org.uk">The
reach of macros</a></h4>

<p>Last week, Larry pointed out that even existing keywords could be overridden
with macros. Piers Cawley pointed out that they'd be no fun if they didn't.
Larry added the caveat that macros couldn't work with precompiled library code
(which is a shame, but understandable). This thread developed into the
(occasionally intemperate) discussion of Bundles that later migrated to
perl6-compiler.</p>

<h4><a href="http://groups.google.com/groups?threadm=2921F1D6-027D-11D9-93DC-000A95B9602E@kineticode.com">Iterators
and for</a></h4>

<p>David Wheeler wondered if the (Smalltalk by way of) Rubyish style of
eschewing <code>for</code> in favour appropriate iterators and code blocks
would eventually become good Perl 6 style. (I expect it will in my code). Larry
didn't think it would, but pointed out that the syntax had been modified
recently to make it relatively easy to work that way if you wanted to. Instead
of writing, say:</p>

<pre><code>@foo.each({...})</code></pre>

<p>we'll be able to write</p>

<pre><code>@foo.each:{...}</code></pre>

<h3>Announcements, Apologies, Acknowledgements</h3>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of Perl.
You might also like to send feedback or contributions to a <a href="mailto:pdcawley@bofh.org.uk">getting Piers to OSCON 2005 fund</a>.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></p>

<p><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></p>

<p>Or, you can check out <a href="http://www.bofh.org.uk/">my website</a>.</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-988" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/12/embedded.html" rel="bookmark">Embedded Databases</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Philipp Janert</span> on <abbr class="published" title="2004-09-16T00:00:00-08:00">September 16, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>
      The expression "Embedded Database" requires an explanation. A
      "database" is an application that allows the targeted retrieval
      of stored data -- a log-file is not a database. By
      "embedded" I mean a database that does not run in a separate
      process, but instead is directly linked ("embedded") into the
      application requiring access to the stored data. This is in
      contrast to more conventional database management systems (such
      as Postgres or Oracle), which run as a separate process, and to
      which the application connects using some form of Inter Process
      Communication (such as TCP/IP sockets, for instance).</p>

    <p>
      The prime advantage of embedded database systems lies in their 
      availability and ease of administration. Since the data is kept 
      in ordinary files in the user's space, there is no need to 
      obtain special permissions to connect to the database process
      or to obtain a database account. Furthermore, since embedded 
      databases require nothing more than a normal library, they can 
      be useful in constrained environments (think shared web hosting),
      where no "proper" database is available. They can even be linked
      to an application and shipped with it.</p>     


    <h3>Sequential Access: <code>Tie::File</code></h3>



    <p>
      The simplest database is still a flat file of records, separated 
      by a record separator. If the separator is chosen to be the new line character <code>"\n"</code>, as it usually is, then a record 
      corresponds to a line.</p>

    <p>
      Flat files allow only sequential access. This can be both a blessing
      and a curse: if the application primarily requires the lookup of 
      individual records in arbitrary order, then flat files become 
      impractical once the number of records becomes too large. On the
      other hand, if the typical access pattern is sequential for at least a 
      substantial subset of records, then a flat file can be very practical.</p>

    <p>
      Here is a typical (if a little construed) example: Assume that
      we have several thousand very long strings (say, each string
      having more than one million characters) and we want to
      determine whether any two strings are equal. To do so, we have
      to compare each string to all remaining ones, using two nested
      loops. However, the total amount of data is too large to be all
      kept in memory. On the other hand, we access <em>all</em> the
      records in a predictable, sequential order.</p>

    <p>
      The Perl module <code>Tie::File</code> allows us to do so in a 
      particularly convenient fashion: it <code>tie</code>s a Perl
      array to the file in such a way that each record corresponds to
      an element of the array.</p>

    <p>
      Here then is a code snippet that demonstrates the use of
      <code>Tie::File</code> to our string comparison problem 
      introduced above:</p>

    <pre><code>
use Tie::File;

tie @array, 'Tie::File', 'data.txt' or die "Could not tie to file: $!";

$len = scalar( @array );

for( $i=0; $i&lt;$len; $i++ ) {
  $string1 = $array[$i];

  for( $j=$i; $j&lt;$len; $j++ ) {
    $string2 = $array[$j];

    compare_strings( $string1, $string2 );
  }
}

untie @array;

sub compare_strings {
  my ( $s1, $s2 ) = @_;

  # do something smart...
}
     </code></pre>

    <p>
      There is no question that this program requires heavy disk
      access, and if we had additional information about the data in
      question, we should try hard to use it and avoid the brute force
      approach of comparing "everything to everything".  However, if
      we have no choice, then <code>Tie::File</code> makes code like
      the above as efficient as can be: It does not attempt to load
      the entire file into memory, so that arbitrarily large files can
      be processed. The first time we iterate over the file,
      <code>Tie::File</code> builds up an index containing the offset
      of each record from the beginning of the file, so that
      subsequent accesses can go directly to the proper position in
      the file using <code>seek()</code>. Finally, accessed records
      are cached in memory and the cache size can be adjusted passing
      the <code>memory</code> option to the <code>tie</code>
      command.</p>

    <p>
      However, any changes to the array (and its underlying file), in
      particular insertions and deletions in the middle, will always
      be slow, since all the subsequent records will have to be moved. 
      If your application requires such capabilities, don't use
      <code>Tie::File</code>, use a Berkeley DB!</p>

    
    <h3>Fast Lookup: Berkeley DB</h3>

    <p>
      A Berkeley DB is almost the exact opposite of a flat file in regards
      to the access patterns it supports. Scanning through a large number
      of successive records is difficult if not entirely impossible, but
      reading, inserting, updating, and deleting random records is very,
      very fast!</p>

    <p>
      Conceptually, a Berkeley DB is a hash, saved to a file. Each record
      is found by its key, and the value of the record is treated as a
      string. It is up to the application to interpret this string - for
      instance, to break it up into parts, representing different fields.</p>

    <p>
      The following code opens a Berkeley DB (creating a new file, if 
      necessary) and writes a single record, containing information 
      suitable for the <code>/etc/passwd</code> file. We then look up
      the same record, using the login name as key, and <code>split</code>
      the data into its constituent fields.</p>

    <pre><code>
use BerkeleyDB;

$login = 'root';
@info  = ( 0, 0, 'SuperUser', '/root', '/bin/tcsh' );

$db = new BerkeleyDB::Hash( -Filename =&gt; 'data.dbm',
			    -Flags =&gt; DB_CREATE ) or die "Cannot open file: $!";

$db-&gt;db_put( $login, join(':', @info) );

$db-&gt;db_get( $login, $val );

( $uid, $gid, $name, $home, $shell ) = split ':', $val;

print "$login:\t$uid|$gid $name \t$home\t$shell\n";

$db-&gt;db_close();
      </code></pre>    

    <p> 
      The code above uses the Perl interface to the Berkeley DB
      modelled after its C API. The <code>BerkeleyDB</code> module
      also supports a <code>tie</code> interface, tying the database
      file to a Perl hash, making code like the following possible:
      <code>$hash{ $login } = join( ':', @info );</code>.  
      The API-style interface, on the other hand, follows the native
      interface of the Berkeley DB quite closely, which means that
      most of the (quite extensive) original C API documentation also
      applies when programming Perl - which is good, since the perldoc
      for <code>BerkeleyDB</code> is a bit sketchy in places. Try
      <code>man db_intro</code> to get started on the native Berkeley
      DB interface, or visit the Berkeley DB's homepage.</p>
 
    <p>
      Complex data structures can be stored in a Berkeley DB provided
      they have been serialized properly. If a simple solution using 
      <code>join</code> and <code>split</code> as demonstrated above 
      is not sufficient, we can use modules such as <code>Data::Dumper</code>
      or (better) <code>Storable</code> to obtain a flat string 
      representation suitable for storage in the Berkeley DB. There is
      also the <code>MLDBM</code> ("Mulit-Level DBM") module, which
      provides a convenient wrapper interface, bundling serialization 
      and storage.</p>

    <p>
      For suitable problems, solutions based on Berkeley DBs can work
      very well. However, there are a couple of problems. One is that
      the Berkeley DB must be available - it has to be installed 
      separately (usually as <code>/usr/lib/libdb.so</code>).
      The bigger limitation is that although there are quite a few 
      problems out there for which a single-key lookup is sufficient,
      for many applications such a simple access pattern will not work.
      This is when we require a relational database -- such as SQLite.</p>


    <h3>Complex Queries: SQLite</h3>
<csperl file="grab" domain="on" record="b/522" template="b/article_sidebar.view">
    <p>
      There are situations when neither of the aforementioned
      straightforward access patterns applies. Berkeley DBs are great
      if we know the key for the record - but what happens if we only
      know part of the key, or we are interested in a set of records,
      all matching some pattern or logical expression? Alas, the
      Berkeley DB does not allow wildcard searches. Another frequently
      arising problem occurs when each record has several fields or
      attributes and we want to be able to look up records by either
      one of them (such as being able to search a list of books by
      author as well as title).  This can be achieved in a Berkeley DB
      using multiple lookups, but one can't help thinking that there
      <em>got</em> to be a better way!  Finally, the simple key/value
      mapping of the Berkeley DB occasionally forces duplication of
      data, since all the relevant information has to be present in
      each record - this both wastes storage space and creates
      maintenance problems.</p>

    <p>
      Relational databases address all these points. They permit wildcard
      and logical expression searches, multiple searchable columns, and joins 
      to represent relationships. Unfortunately, search capabilities such
      as these used to be restricted to big, standalone relational database
      engines (such as Postgres or Oracle), often making them unavailable for 
      the quick-and-dirty Perl project.</p> 

    <p>
      This is where the SQLite project comes in: Founded in 2000, SQLite
      tries to combine the convenience of the Berkeley DB architecture with 
      the power of a relational (SQL) database. Its latest release is version
      2.8.14, with the next major revision, version 3.0, currently in beta.
      SQLite implements most of standard SQL (with some exceptions, such
      as correlated subqueries).</p>

    <p>
      However, with added power comes additional complexity: a relational
      database no longer <code>tie</code>s neatly to one of Perl's
      built-in data structures. Instead, one has to use the
      <code>DBI</code> (DataBaseInterface) module and code the queries
      in SQL. Furthermore, since the structure of the data is no
      longer predetermined, the programmer has to define and construct
      the required tables explicitly.</p>

    <p>
      This is not the place for a full discussion of the Perl-DBI, but
      the example below is enough to get started. First, SQLite has to
      be installed on the system. Conveniently, the DBI-driver for
      SQLite, <code>DBD::SQLite</code>, already contains the database
      engine itself as part of the module - so installing this module
      is all that is required to be able to use SQLite from Perl.</p>
      
    <p>
      We begin by <code>connecting</code> to the SQLite database
      contained in the file "<code>data.dbl</code>". Note that the
      <code>connect</code> method loads the appropriate database
      driver - all we need to do is specify <code>use DBI;</code>. We
      create and populate two tables, and then run a query joining the
      two tables and using an SQL wildcard. The results are returned
      as a reference to an array. Each array element is an array
      itself, containing the column values in its elements.</p>

    <pre><code>
use DBI;

$dbh = DBI-&gt;connect( "dbi:SQLite:data.dbl" ) || die "Cannot connect: $DBI::errstr";


$dbh-&gt;do( "CREATE TABLE authors ( lastname, firstname )" );
$dbh-&gt;do( "INSERT INTO authors VALUES ( 'Conway', 'Damian' ) " );
$dbh-&gt;do( "INSERT INTO authors VALUES ( 'Booch', 'Grady' ) " );

$dbh-&gt;do( "CREATE TABLE books ( title, author )" );
$dbh-&gt;do( "INSERT INTO books VALUES ( 'Object Oriented Perl',
                                          'Conway' ) " );
$dbh-&gt;do( "INSERT INTO books VALUES ( 'Object-Oriented Analysis and Design',
                                          'Booch' ) ");
$dbh-&gt;do( "INSERT INTO books VALUES ( 'Object Solutions', 'Booch' ) " );


$res = $dbh-&gt;selectall_arrayref( q( SELECT a.lastname, a.firstname, b.title
				    FROM books b, authors a
				    WHERE b.title like '%Orient%'
				    AND a.lastname = b.author ) );

foreach( @$res ) {
  print "$_-&gt;[0], $_-&gt;[1]:\t$_-&gt;[2]\n";
}

$dbh-&gt;disconnect;
      </code></pre>

    <p>
      The <code>books</code> table references the <code>authors</code>
      table via a foreign key. This is a one-to-many relationship: each 
      book has only a single author, but an author can have written 
      multiple books. What would we have done if books could have been
      co-authored by multiple writers? We would have used a cross-reference
      table to represent the resulting many-to-many relationship. Try
      <em>that</em> with Berkeley DBs!</p>

    <p>
      SQLite shares with the Berkeley DB the approach of being mostly
      typeless and treating data as simple strings. In our table
      definitions above, we did not specify the data types of any of
      the columns, as would be required by Oracle or Postgres. SQLite
      provides a bit more structure, in that it provides separate
      columns, so that distinct values do not have to be glued
      together to form a string, as was required when using a Berkeley
      DB.  Furthermore, SQLite will try to convert strings to
      floating point numbers if numerical comparisons or operations
      (such as <code>SUM</code> or <code>AVG</code>) are performed on
      them.</p>

    <p>
      Since SQLite is a relational database, the data architecture
      (the "schema") can be arbitrarily complex, with data distributed
      across multiple tables and with foreign keys to represent
      relationships. This is a big topic -- any book on the relational
      model will provide plenty of information, including issues such
      as database normalization and tools such as Entity/Relationship-Models.</p>
    
    
    <h3>Summary</h3>

    <p>
      In this paper, we considered three ways to add database capabilities to
      a Perl program, without requiring major external database installations 
      or administrative support. Depending on the typical access patterns, 
      flat files or Berkeley DBs may be suitable choices. For more complex
      queries, the SQLite project provides all the power of relational 
      database architecture in a single Perl DBD module.</p>


    <h3>Resources</h3>

    <ul>
      <li><a href="http://perl.plover.com/TieFile"><code>Tie::File</code> Home Page</a></li>
      <li><a href="http://www.sleepycat.com/">Berkeley DB Home Page</a></li>
      <li><a href="http://www.sqlite.org/">SQLite Home Page</a></li>
      <li><a href="http://search.cpan.org/~msergeant/DBD-SQLite-0.31/lib/DBD/SQLite.pm">
	  Perl DBI Driver for SQLite on CPAN</a></li>
      <li><a href="http://www-106.ibm.com/developerworks/web/library/wa-dbdsgn2.html">
	  Practical Database Design</a> A brief introduction to the representation 
	of relationships in relational DBs and to DB Normalization.</li>
    </ul>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-994" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/p6pdigest/20040903.html" rel="bookmark">This Week on Perl 6, Week Ending 2004-09-03</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2004-09-09T00:00:00-08:00">September  9, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Another week, a free weekend, and still I haven't started writing the
summary until Monday. Still, I don't actually start at college 'til next week,
so that's all right then.</p>

<p>We start with perl6-internals.</p>

<h4>Compile op with return values</h4>

<p>The discussion of how to return something from dynamically compiled code
continued with Leo, Dan and Steve Fink all working to clarify and address the
issues.</p>

<p><a href="http://groups.google.com/groups?threadm=20040828065049.GC12318@kevin.fink.com">Compile
op with return values</a></p>

<h4>Library loading</h4>

<p>Dan started the process of nailing down Parrot's dynamic loading API so that
it can be added to the embedding interface. Steve Fink and Aaron Sherman had
suggestions.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110410bd568c66e647@[10.0.1.2]">Library
loading</a></p>

<h4>Pathological register allocation scenarios</h4>

<p>Gregor N Purdy had asked Dan if his work compiler could be made to spit out
structurally equivalent C code to the Parrot code that was breaking IMCC. His
idea being that we could then see how C compilers dealt with such nastiness.
Dan thought that, whilst this was a good idea, it would be too much work to
implement. Gregor wasn't so sure.</p>

<p><a href="http://groups.google.com/groups?threadm=a0611041abd58ca5c3463@[10.0.1.2]">Pathological
Register Allocation Scenarios</a></p>

<h4>Dan and Leo demonstrate comic timing. Again.</h4>

<pre><code>14:17:09 GMT Dan: PerlHash test 20 is failing? Anyone know what's up
so we can fix it?
15:30:41 GMT Leo: It stopped failing at 15:55 CEST (13:55 GMT)
16:32:29 GMT Dan: D'oh!</code></pre>
<csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<p>We love it when a patch comes together.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110422bd58e6de10f8@[10.0.1.2]">Failing
perlhash test</a></p>

<h4>PMC Instantiation</h4>

<p>Leo had raised issues with the current scheme for PMC instantiation.  This
week Dan came through with some design which got discussed and (I think)
implemented.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110427bd590a576148@[10.0.1.2]">PMC
Instantiation</a></p>

<h4>Last bits of the basic math semantics</h4>

<p>If you believe Barbie, "Math is hard". She's right, up to a point. The
list's spent a couple of weeks now sorting out the design of Parrots underlying
mathematical and numeric systems to make sure that maths works right (for
sufficiently useful values of "right"). This particular line of discussion
covers rotations and stuff, where you're actually treating a number as a bit
field.</p>

<p><a href="http://groups.google.com/groups?threadm=200408310958.i7V9wN909589@thu8.leo.home">Last
bits of the basic math semantics</a></p>

<h4>Cross-compiling parrot</h4>

<p>And you thought compiling Parrot on a Win32 box was hard. Robert Schwebel
wants to cross compile Parrot and isn't having a good time. Dan wasn't
surprised because the Parrot build process still gets most of its information
from the local perl installation which will generally be wrong when you're
cross compiling.</p>

<p>Dan noted that part of the problem is that we don't have people on the team
with a need or the experience of doing cross compilation and added that he'd be
thrilled if this were to change. Any patches to make things better for cross
compilers will, of course, be gratefully received.</p>

<p><a href="http://groups.google.com/groups?threadm=20040901173244.GE1369@pengutronix.de">Cross-compiling
Parrot?</a></p>

<h4>Proposal for a new PMC layout and more</h4>

<p>Leo's concerned that the current PMC layout isn't the Right Thing, and laid
out a proposal describing some changes he thinks would be worthwhile.  In
essence, he argues for removing the requirement for fixed sized PMC headers and
separate variable sized buffers in favour of unifying buffers and PMCs so that
PMCs become variable sized, thus eliminating some time consuming indirection,
and space consuming overheads.</p>

<p>Nicholas Clark thought the proposal was interesting, but said that, since
the proposed changes would be invisible to the user, he'd be far happier with a
functionally complete implementation of parrot with stable, useful APIs.</p>

<p>Dan rejected the proposal (both for technical reasons and because he agreed
with Nicholas). I don't think Leo was convinced by the technical reasons, but
the "Let's get the interfaces finished!" argument clinched it.</p>

<p><a href="http://groups.google.com/groups?threadm=4135E823.7070902@toetsch.at">Leo's
layout proposal</a></p>

<p><a href="http://groups.google.com/groups?threadm=a0611040bbd5bb29d2c15@[172.24.18.155]">Dan
explains why not</a></p>

<h4>Semantics for regexes</h4>

<p>Dan appears to have opened an entertaining can of worms when he outlined his
view of the minimum string semantics required to support a regular expression
engine and asked for comments. Boy did he get them. And boy did they run off in
all sorts of strange directions. Interesting directions mind. Anyway, further
down the thread, Dan, Chip Salzenburg and Patrick Michaud seemed to reach
something approximating agreement about the low level semantics required.</p>

<p><a href="http://groups.google.com/groups?threadm=a0611040ebd5bbe03d7e1@[172.24.18.155]">Semantics
for regexes</a></p>

<h4>TODOs and calls for volunteers</h4>

<p>Leo came up with a list of things that need fixing/implementing and asked
for volunteers. These include sorting out what happens with the experimental
ops, implementing <code>new_extended</code> for every PMC class and finishing
up BigInt's MMD and vtable functions.</p>

<p>He also had some proposals for how we should get the Integer classes
properly implemented now we know what the semantics will be.</p>

<p><a href="http://groups.google.com/groups?threadm=4137507F.5010606@toetsch.at">TODOish
fix ops</a></p>

<p><a href="http://groups.google.com/groups?threadm=41385717.90803@toetsch.at">Takers
wanted: new_extended</a></p>

<p><a href="http://groups.google.com/groups?threadm=41385937.7020708@toetsch.at">Takers
wanted - BigInt/BigNum</a></p>

<p><a href="http://groups.google.com/groups?threadm=200409031221.i83CLUv13413@thu8.leo.home">Integer
PMCs</a></p>

<h3>Meanwhile, in perl6-language</h3>

<h4>Roles trying to be nice</h4>

<p>Abhijit Mahabal had some questions about making roles work. Luke, Patrick,
and Jonathan Scott Duff set about answering them. I'm not entirely sure that
any of the answers so far are enough for Abhijit, but then I'm not entirely
sure that any answer could be enough. At some point you have to take things on
trust and hope that nothing breaks at runtime.</p>

<p><a href="http://groups.google.com/groups?threadm=Pine.GSO.4.58.0408292126230.10203@prickly.cs.indiana.edu">Roles
trying to be nice</a></p>

<h4>Pipeline performance</h4>

<p>Rod Adams brought up some issues with the performance of "pipelining" arrays
in Perl 5 &mdash; in general doing say <code>grep {...} map {...} @ary</code>
is rather slower than writing an explicit loop. He wondered if Perl 6 would be
faster. Larry's answer that all lists function lazily if they can in Perl 6
seems to imply that yes, Perl 6 will be faster.</p>

<p><a href="http://groups.google.com/groups?threadm=41338F4C.2090300@rodadams.net">Pipeline
performance</a></p>

<h4>Synopsis 9 draft 1</h4>

<p>"Synopsis 9?" I hear you ask "But we haven't seen Apocalypse 9 yet!".
Indeed we haven't, but that's not stopped Larry writing it. Synopsis 9 gives an
overview of Perl 6's data structures (hopefully enough for anyone who happens
to be starting work on a rough cut of a Perl 6 implementation) which will be
covered in more detail when the Apocalypse itself comes out.</p>

<p>The usual storm of discussion and general proofreading goodness went on.</p>

<p><a href="http://groups.google.com/groups?threadm=20040902234740.GA29156@wall.org">Synopsis
9 draft 1</a></p>

<h4>The range operator</h4>

<p>Joe Gottman wondered if there would be sufficiently lazy way to generate
ranges. In particular, he wanted to know if he'd be able to write <code>reverse
(1..5)</code> and have Perl handle that lazily, or if he could do <code>5 .. 1
:by(-1)</code>. Larry thought that, if range objects were made sufficiently
smart, there would be no reason why the <code>reverse</code> approach couldn't
be lazy.</p>

<p><a href="http://groups.google.com/groups?threadm=200409030034.i830YESH008947@ms-smtp-04-eri0.southeast.rr.com">Reverse
.. operator</a></p>

<h4>Can PRE and POST be removed from program flow?</h4>

<p>John Siracusa wondered if it would be possible to turn off the PRE and POST
Design By Contract hooks in production code to improve performance.  (Leaving
aside arguments about whether this is sensible; personally I reckon that a
production environment is where you should be most worried about values that
might fail the PRE/POST hooks). Larry reckoned it would be possible to simply
clobber the global definitions of PRE and POST to make them no ops. This wasn't
enough for John, who wanted to be able to get rid of them entirely so even the
call to the no op didn't happen. So Damian showed him the obvious macros...</p>

<p><a href="http://groups.google.com/groups?threadm=BD5E4DEC.1CB3A%siracusa@mindspring.com">S4:
Can PRE and POST be removed from program flow?</a></p>

<h3>Announcements, Apologies, Acknowledgements</h3>

<p>It looks like the Google groups gateway is working again, so I'll keep with
the Google style linking.</p>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of Perl.
You might also like to send feedback or contributions to a <a href="mailto:pdcawley@bofh.org.uk">getting Piers to OSCON 2005</a> fund.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></p>

<p><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></p>

<p>Or, you can check out <a href="http://www.bofh.org.uk/">my website</a>.</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-986" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/09/09/lightning.html" rel="bookmark">Lightning Articles</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">perl.com</span> on <abbr class="published" title="2004-09-09T00:00:00-08:00">September  9, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <br /><br />
<h4>Simon Cozens</h4>
 <p>Serendipity -- it means those occasions when things come together to give you 
  moments of inspiration. While preparing perl.com one week, I was editing an 
  article on how to give lightning talks by Mark Fowler and at the same time 
  I was dealing with another author who said he was having difficulty stretching 
  out an article -- a very good article, on a topic I wanted to see covered -- to 
  a full 2,500-words-or-so length.</p>
<p>I then realized there were probably a load of people out there with interesting 
  things to say about what they're doing with Perl, but who couldn't or 
  didn't want to write a full-sized article. This is, after all, the principle 
  that makes lightning talks so popular. Maybe we could create a forum where people 
  could have short, informal articles published on an interesting Perl topic of 
  their choice -- lightning articles.</p>
<p>In the same vein as lightning talks, they can be both about an interesting 
  use of the technology, or social commentary on Perl and its community, or just 
  a bit of fun. If you've got something you want to get off your chest, or you've 
  got an interesting new idea you want to talk about, but don't think you 
  could fill 2,500 words, try writing a lightning article. You have an absolute 
  maximum of 500 words -- as measured by <code>wc -w</code> (or <code>perl -0lne 
  'print scalar split/\s+/'</code>) on your POD or plain text file -- to 
  say what you need to say.</p>
<p>Send them to <code>chromatic@oreilly.com</code>, and when we've got a good 
  batch of five or six together, we'll publish them here.</p>

<h3><a name="detecting_problem_automatically">Detecting Problems
Automatically</a></h3>

<h4>Mark Fowler</h4>

<p>How many times have you shipped something, and then as soon as it's gone 
  live you've spotted a glaring mistake that, despite staring you in the face the entire time you were developing the code, you've somehow overlooked?</p>
<p>One thing we have problems with at work is double-encoded HTML entities in 
  our web pages. We often use HTML entities to encode letters that aren't ASCII, since this way we then don't have to worry about the text encoding we're 
  using.</p>
<p>For example, we want to render the string <code>Hello L&#233;on</code>&#62; 
  into our HTML document. So, instead of including the &#233; into our document 
  directly we transform it into its entity form, replacing it with <code>&#38;eacute;</code>:</p>
<pre><code>  &#60;p&#62;Hello L&#38;eacute;on&#60;/p&#62;</code></pre>
<p>This can be done automatically by Perl in numerous ways, e.g. with <b>HTML::Entities</b>:</p>
<pre><code>  use HTML::Entities;
  
  my $string = &quot;Hello $name&quot;;
  encode_entity($string);</code></pre>
<p>Or if you're using the Template Toolkit through the <code>html_entity</code> 
  filter:</p>
<pre><code>  &#60;p&#62;Hello [% name | html_entity %]&#60;/p&#62;</code></pre>
<p>The root of the troubles we were experiencing was that entity encoding could 
  occur in our code in multiple, different places depending on where the string 
  we were about to render came from. And if we accidentally did it more than once 
  then we ended up with HTML that looked like this:</p>
<pre><code>   &#60;p&#62;Hello L&#38;amp;eactue;on&#60;/p&#62;</code></pre>
<p>This means the web browser sees the <code>&#38;amp;</code> and converts it 
  to an ampersand and then renders the rest of the <code>eacute;</code> as normal 
  text:</p>
<pre><code>  Hello L&#38;eacute;on</code></pre>
<p>Not exactly what we wanted. Of course, these things are fairly trivial to fix 
  once you spot them. The real problem we were having is that these errors kept 
  repeatedly popping up, and having our testing department coming back to us every 
  release with another one of these errors was getting embarrassing. We'd 
  gone blind to the errors -- working so closely with the web site we'd glance 
  at the page and not notice what should have been staring us in the face.</p>
<p>So we decided to automatically test for the problem.</p>
<p>In the end I decided to write <b>Test::DoubleEncodedEntities</b>, a <b>Test::Builder</b> 
  module that would test for these errors and run under <b>Test::Harness</b> like 
  all our other tests. The <code>ok_dee</code> function relies on the fact that none of our web sites would ever use strings like <code>&#38;amp;eacute;</code> 
  (this is true of most web sites - the only web sites that do are ones like this 
  that feature articles on how to encode HTML).</p>
<pre><code>  use LWP::Simple qw(get);
  use Test::More tests =&#62; 2;
  use Test::DoubleEncodedEntities;
  
  my $page = get &quot;http://testserver/index.html&quot;;
  ok($page, &quot;got page okay&quot;);
  ok_dee($page, &quot;check for double encoded entities&quot;)</code></pre>
<p>If the test fails then we get some useful diagnostic output:</p>
<pre><code>  1..2
  ok 1 - got page okay
  not ok 2 - check for double encoded entities
  #     Failed test (t/website.t at line 7)
  # Found 1 &quot;&#38;amp;eacute;&quot;
  # Looks like you failed 1 test of 2.</code></pre>
<p>And now we don't even have to look for these things. Our test suite catches 
  double-encoded entities for us and brings them to our attention. Problem solved.</p>

<h3><a name="cpan_miniaturized">CPAN, Miniaturized</a></h3>

<h4>Ricardo Signes</h4>
<p>Everyone has seen a problem too boring to solve. Rather than keep a stiff upper 
  lip and trudge forward, you head to the CPAN and find the pre-packaged solution 
  that probably already exists. It's just another display of your complete 
  impatience and laziness, and that's great: with the CPAN at your side, you 
  can solve boring problems effortlessly.</p>
<p>The problem, of course, is that CPAN isn't always at your side. Sure, a 
  simple <code>install Class::DBI</code> might be enough to implement half of 
  your project, but when you're offline and stuck on the plane, good luck 
  getting to your usual mirror. I've found myself in that position a number 
  of times, and usually when I've most wanted to get some work done. On the 
  way home from conventions, I've sat in cars and planes, wishing I'd 
  remembered to install <code>Test::Smoke</code> or <code>DBD::SQLite</code> before 
  leaving home.</p>
<p>The solution, of course, is to just mirror the whole CPAN. It's only three gigs, and if you've got a week to spare on your dial-up, that's just 
  fine. After all, later rsyncs are just a few hours a week!</p>
<p>Other problems loom, not the least of which is the possibility of losing those 
  three gigs when your drive crashes on the road. You can always back up the mirror 
  to a DVD in case you need to re-mirror it quickly... but by this point the solution 
  to your problem has become tedious, and I know how you feel about solving tedious 
  problems.</p>
<p>A better solution to this problem was published a few years ago by Randal Schwartz: 
  mini-CPAN. Its guiding principle is an old programmer standard: &quot;You aren't 
  going to need 90 percent of that crap.&quot;</p>
<p>Randal's script only retrieves the CPAN indices, and then the modules listed 
  in the package index -- basically, only the newest version of every distribution 
  -- the only files ever used by CPAN.pm and CPANPLUS to install modules. On subsequent 
  runs, only those distributions that have changed are updated.</p>
<p>With this miniature CPAN, you've cut CPAN down to about 400 MB. Not only 
  does it take a fraction of the time to mirror, but it fits nicely onto a CD. 
  You can stick it in your bag, right behind your rescue disk, and know that no 
  matter what happens, the CPAN will be right by your side.</p>
<p>With the script configured and run, you'll have your own personal CPAN 
  sitting on your machine, ready to be used. Pointing CPAN.pm at it is easy as 
  can be:</p>
<pre><code>        cpan&#62; o conf urllist unshift file:///home/japh/minicpan</code></pre>
<p>Alternately, just edit your CPAN::Config or CPANPLUS::Config.</p>
<p>The only problem left with mini-CPAN is that it was so hard to find. It's 
  been such a fantastic addition to my toolbox that I feel slighted, having spent 
  two years oblivious to its existence. To help others avoid this pain, I've 
  tweaked the script, shoved its guts into a module, and stuck it onto CPAN. Just 
  by installing <a href="http://search.cpan.org/perldoc?CPAN%3A%3AMini" class="podlinkpod">CPAN::Mini</a>, 
  you can have <code>minicpan</code> dropped into place and ready to go:</p>
<pre><code> minicpan -r http://your.favorite.mirror/of/cpan -l /home/japh/minicpan</code></pre>
<p>...and your personal CPAN is waiting.</p>

<h3><a name="database_bittwiddling">Bit-twiddling in your Database</a></h3>

<h4>Aaron Trevena</h4>
<p>Why would you use a bit mask in your database ?</p>
<p>They can be useful where you have a many-to-many relationship where one side 
  changes rarely and the other frequently. A good example is facilities provided by 
  a Tourist Resort, where the actual amenities change rarely but resorts are added 
  and updated often.</p>
<p>Normalization would add an intermediate table between them, but that can be 
  painfully slow if you have a significant number of amenities and frequently 
  queried records about many of them.</p>
<p>The same problem can occur to a lesser degree within a single table; perhaps 
  you are doing some statistical analysis on demographics with columns representing 
  gender, marital status, etc. For more than a few thousand records, querying 
  subsets of the table based on these criteria can become expensive very quickly.</p>
<p>How would you use bit masks?</p>
<p>Instead of holding information in a separate table or a group of columns, use 
  a bit mask with each bit representing a column in the table or a record in a 
  second table. For example, use 8 bits to represent gender, marital status, employment 
  status, smoker, drinker, driver, car-owner, and house-owner. A query to find 
  drivers under 25 who don't drink or smoke and own their own car contains 
  six conditions: </p>
<pre><code>    select id, age from people where age &#60; 25 and employment_status =
    'employed' and smoker = 'N' and drinker = 'N' and car_owner = 'Y'
    and driver = 'Y'</code></pre>
<p>While a bitmap would use two:</p>
<pre><code>    select id, age from people where age &#60; 25 where bitmap_col &#38; 00000110</code></pre>
<p>To allow employment status to have values for child, student, unemployed, employed, and retired, you would add extra bits representing each value. This applies 
  to any column with a low number of potential values.</p>
<p>This is a simple bitmap index, and you can use all kinds of bitwise operations 
  on your queries against it. Complex queries can be simplified to a couple of 
  binary operations. Of course, there is a downside. It's harder to maintain, 
  and if mapping a many-to-many relationship, you need to ensure consistency between 
  the bit mask order and the contents of the other table. This can be enforced 
  using a trigger or within the application.</p>
<p>If you split the bitmap into individual columns and rotate it you can make 
  a compressed bitmap index that only stores ranges of records that are true for 
  each column or value of a column. Oracle provides this feature.</p>
<p>These compressed bitmap indexes are even faster to query when used together 
  in combination, and take up very little space. However, as multiple records' 
  values can be held in a single entry in the index, updates to indexed columns 
  can be slower and suffer from excessive locking on the index itself.</p>
<p>Well-designed bitmap indices can have a huge impact on the performance of queries, 
  as they are much smaller than standard b-tree indices and much faster on queries 
  where a large proportion of that dataset is being queried.</p>
<ul>
  <li><a href="http://www.jlcomp.demon.co.uk/bitmaps.doc" class="podlinkurl">http://www.jlcomp.demon.co.uk/bitmaps.doc</a></li>
  <li><a href="http://www.dbazine.com/jlewis3.shtml" class="podlinkurl">http://www.dbazine.com/jlewis3.shtml</a></li>
  <li><a href="http://www.oracle.com/technology/oramag/oracle/02-may/o32expert.html" class="podlinkurl">http://www.oracle.com/technology/oramag/oracle/02-may/o32expert.html</a></li>
</ul>

<h3><a name="goodbye_farewell_amen">Goodbye, Farewell, Amen</a></h3>

<h4>Simon Cozens</h4>
<p>Let me first apologize for this personal note; I won't do it again.</p>
<p>Around the time I was busy being born, or maybe just a little after, Larry 
  Wall was planning to be a missionary with the Wycliffe Bible Translators. Working 
  on a degree in &quot;Natural and Artificial Languages,&quot; and then in linguistics 
  graduate school, he learned about the ideas of tagmemics, semantics, and the cultural 
  and anthropological concepts that have found their expression in the Perl language 
  and culture. Unfortunately due to health problems, Larry couldn't do the 
  missionary thing, so he invented Perl. That's why we're all here.</p>
<p>It was the beginning of May 2001 when Mark Dominus asked me if I'd be interesting 
  in taking over the job of managing editor here at perl.com. I was delighted, 
  and excited about the thought of working with the Perl community and hopefully 
  producing and publishing some great resources for Perl programmers. I hope I've 
  done a fair bit of that over the last three years, but now my time is up. I'm 
  moving on, and starting next week the man simply known as &quot;chromatic&quot; will 
  become Mr. Perl.com. Please treat him as well as you've treated me!</p>
<p>I need to thank a bunch of people, who've done all the hard work behind 
  the scenes that you don't hear about: Mark, of course, for getting me involved 
  here; Chris Coleman and Bruce Stewart from the O'Reilly Network who've 
  had the curious experience of trying to manage me; Steve McCannell and Chris 
  Valdez have been the producers of perl.com, and worked incessantly to get articles 
  up on the site, often on shockingly short notice; Tara McGoldrick and others 
  have been the copy editors; and of course, I've worked with a wide range 
  of great authors and contributors. Thank you all. And thanks, of course, to 
  the Perl community -- that's <b>you</b> -- without whom this wouldn't 
  be half as much fun.</p>
<p>And about that missionary thing? Well, if Larry's not going to be able 
  to do it, someone has to. Like many Perl programmers, and indeed Larry himself, 
  I've been interested in Japan for a very long time. In fact, I lived in 
  Japan for a year, and was studying Japanese for my university major back when 
  I started at perl.com; last year I decided that the time was right to prepare 
  to move back to Japan, as a fulltime missionary.</p>
<p>So in two weeks I'll be going to All Nations University here in England 
  for a two-year course to get me ready, and then I shall be off! I'm sure 
  you won't have heard the last of me, though, and I certainly won't be 
  stopping programming -- missionaries have things they need to automate too... 
  But for now, farewell! It's been fun, and now it's going to be fun in 
  a different way.</p>
<p>Take care out there, and happy hacking!</p>
<!-- img src="sign.png" / --> 

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-984" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/08/p6pdigest/20040827.html" rel="bookmark">This Week on Perl 6, Week Ending 2004-08-27</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2004-09-03T00:00:00-08:00">September  3, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Where does the time go?
I blame folk festivals.
Once I'm getting busy with the teacher training I'm going to have weekends free to write the summaries.
And if you'll believe that...</p>

<p>We start with perl6-internals.</p>

<h4><a name="Incremental_garbage_collection">Incremental Garbage Collection</a></h4>

<p>Discussion of implementing incremental garbage collection continued.</p>

<h4><a name="Calling_conventions_for_unprototyped_subroutines">Calling Conventions for Un-prototyped Subroutines</a></h4>

<p>Mattia Barbon asked for some clarification of how the calling conventions work for unprototyped subroutines in IMCC.
Specifically,
whether IMCC was behaving as documented in the Parrot Design Document (PDD3).
Leo reassured him that the TODO entry that had caused his disquiet was obsolete and that IMCC does the right thing.</p>

<p><a href="http://groups.google.com/groups?threadm=Mahogany-0.66.0-1060-20040821-182506.00@rbnet.it">http://groups.google.com/groups?threadm=Mahogany-0.66.0-1060-20040821-182506.00@rbnet.it</a></p>

<h4><a name="Compile_op_with_return_values">Compile op with Return Values</a></h4>

<csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">

<p>Steve Fink asked how to go about returning something from dynamically compiled code.
He,
Leo, and Dan went over the issues.
An unnamed (and as yet unvolunteered) volunteer will probably write it all up and add it to the parrot compiler FAQ.</p>

<p><a href='http://groups.google.com/groups?threadm=20040822060343.GI563@foxglove'>http://groups.google.com/groups?threadm=20040822060343.GI563@foxglove</a></p>

<h4><a name="NCI_and_callback_functions">NCI and Callback Functions</a></h4>

<p>Stephane Peiry and Leo continued to work on getting NCI callbacks working with the GTK library.
They finally tracked the problem down,
but it looks awfully like Stephane's going to have to re-implement the <code lang='und' xml:lang='und'>gtk_main</code> loop to get everything working.
Best of luck Stephane.
ParrotGTK would definitely be a cool thing.</p>

<p><a href='http://groups.google.com/groups?threadm=20040822164755.GA23921@pittypanda'>http://groups.google.com/groups?threadm=20040822164755.GA23921@pittypanda</a></p>

<h4><a name="Planet_Parrot">Planet Parrot</a></h4>

<p>Robert Spier announced the creation of Planet Parrot,
an aggregator of Parrot related blogs.
If you have such a blog,
Robert would probably be interested in hearing from you.</p>

<p><a href='http://groups.google.com/groups?threadm=4129706F.6090304@pobox.com'>http://groups.google.com/groups?threadm=4129706F.6090304@pobox.com</a></p>

<p><a href='http://planet.parrotcode.org/'>http://planet.parrotcode.org/</a></p>

<h4><a name="GC/DOD_API">GC/DOD API</a></h4>

<p>Leo and Dan continued to discuss and work on documenting Parrot's memory management API.</p>

<p><a href='http://groups.google.com/groups?threadm=a0611040cbd4f9cce3f0b@[172.24.10.164]'>http://groups.google.com/groups?threadm=a0611040cbd4f9cce3f0b@[172.24.10.164]</a></p>

<h4><a name="NCI_GC_issues">NCI GC Issues</a></h4>

<p>Dan noticed a problem with garbage collection and NCI PMCs.
Leo tracked the problem down and fixed it.</p>

<p>I love it when a plan comes together.</p>

<p><a href='http://groups.google.com/groups?threadm=200408271316.i7RDGIE02447@thu8.leo.home'>http://groups.google.com/groups?threadm=200408271316.i7RDGIE02447@thu8.leo.home</a></p>

<h4><a name="Opinions_on_base_behavior">Opinions on Base Behavior</a></h4>

<p>Base behavior is disgusting and should be stamped out I tell you.
We have a moral duty to...</p>

<p>Ah...</p>

<p>Actually,
the subject refers to Dan and Leo's desire to nail down the behavior of Parrot's basic types.
He outlined the issues and asked for discussion.
And that's what he got.</p>

<p>It looks like Parrot's going to have a reasonably complete set of numeric types which will allow accuracy nerds to avoid reals for as long as possible.
Which will be nice.</p>

<p><a href='http://groups.google.com/groups?threadm=a06110403bd502ac7855b@[172.24.10.164]'>http://groups.google.com/groups?threadm=a06110403bd502ac7855b@[172.24.10.164]</a></p>

<p><a href='http://groups.google.com/groups?threadm=a0611040ebd51295d034c@[172.24.10.164]'>http://groups.google.com/groups?threadm=a0611040ebd51295d034c@[172.24.10.164]</a></p>

<p><a href='http://groups.google.com/groups?threadm=a06110416bd52357268b0@[172.24.10.164]'>http://groups.google.com/groups?threadm=a06110416bd52357268b0@[172.24.10.164]</a></p>

<p><a href='http://groups.google.com/groups?threadm=a0611041abd52737df346@[172.24.10.164]'>http://groups.google.com/groups?threadm=a0611041abd52737df346@[172.24.10.164]</a></p>

<p><a href='http://groups.google.com/groups?threadm=a06110400bd53ecfa74a4@[10.0.1.2]'>http://groups.google.com/groups?threadm=a06110400bd53ecfa74a4@[10.0.1.2]</a></p>

<h4><a name="Concat,_Cows_&#38;_Basil">Concat,
Cows, &amp; Basil</a></h4>

<p>Comfortably winning the &quot;weirdest subject line of the week&quot; award,
Sam Phillips laid out some of the problems he's having implementing a Basil compiler that targets Parrot.
Leo supplied answers.</p>

<p><a href='http://groups.google.com/groups?threadm=412B2D64.7000204@mac.com'>http://groups.google.com/groups?threadm=412B2D64.7000204@mac.com</a></p>

<h4><a name="Low_level_math[s]_op_behavior">Low-level Math[s] op Behavior</a></h4>

<p>As well as discussing basic types,
Dan opened a discussion of the proper semantics of Parrot's low-level maths (yeah,
he spelt it "math,"
but I'm English and I'll spell it correctly) operators.
In particular he proposed variants that throw exceptions if strange things happen.</p>

<p><a href='http://groups.google.com/groups?threadm=a06110409bd5107fa798b@[172.24.10.164]'>http://groups.google.com/groups?threadm=a06110409bd5107fa798b@[172.24.10.164]</a></p>

<h4><a name="Benchmark_stuff">Benchmark Stuff</a></h4>

<pre lang='und' xml:lang='und'> Joshua Gatcomb posted some patches he'd made to F&#60;parrotbench.pl&#62; to
 make it a little less fragile and more useful. A few days later he
 announced a slightly more finished set of patches (Leo had checked his
 original patches in rather sooner than expected). </pre>

<p><a href='http://groups.google.com/groups?threadm=20040824182920.63794.qmail@web60804.mail.yahoo.com'>http://groups.google.com/groups?threadm=20040824182920.63794.qmail@web60804.mail.yahoo.com</a></p>

<p><a href='http://groups.google.com/groups?threadm=20040825225912.13884.qmail@web60809.mail.yahoo.com'>http://groups.google.com/groups?threadm=20040825225912.13884.qmail@web60809.mail.yahoo.com</a></p>

<h4><a name="Resuscitating_a_mod_parrot">Resuscitating a mod_parrot</a></h4>

<p>Dan Sugalski looked upon mod_parrot and saw that it was cool, to the point of being laid out on a mortuary slab. He thought that the time had come to try and put some life back into the project, now that Parrot's so much more capable. He asked for volunteers and Jeff Horwitz seems to be (the only?) one of 'em.</p>

<p><a href='http://groups.google.com/groups?threadm=a0611041dbd52934064f5@[172.24.10.164]'>http://groups.google.com/groups?threadm=a0611041dbd52934064f5@[172.24.10.164]</a></p>

<h4><a name="PMC_instantiation">PMC Instantiation</a></h4>

<p>Leo posted another of his discussion documents, this time on instantiating PMCs. No response so far.</p>

<p><a href='http://groups.google.com/groups?threadm=412D9577.4090409@toetsch.at'>http://groups.google.com/groups?threadm=412D9577.4090409@toetsch.at</a></p>

<h3><a name="Meanwhile,_in_perl6-language">Meanwhile, in perl6-language</a></h3>

<h4><a name="Return_with_no_expression.">Return with no Expression</a></h4>

<p>In the usual freewheeling perl6-language way, a thread entitled "Return with no Expression" ended up with a discussion of how to disambiguate a <code lang='und' xml:lang='und'>::</code>, which is part of <code lang='und' xml:lang='und'>... ?? ... :: ...</code> expression and <code lang='und' xml:lang='und'>::</code> in its role as module sigil. (According to Luke it's easy; white space is required.)</p>

<p><a href='http://groups.google.com/groups?threadm=20040820162108.GA18201@wall.org'>http://groups.google.com/groups?threadm=20040820162108.GA18201@wall.org</a></p>

<h4><a name="Synopses_discussed">Synopses Discussed</a></h4>

<p>Discussion of the draft synopses continued.</p>

<p><a href='http://groups.google.com/groups?threadm=BD4C401F.1E983%siracusa@mindspring.com'>http://groups.google.com/groups?threadm=BD4C401F.1E983%siracusa@mindspring.com</a> - Synopsis 2</p>

<h4><a name="POD_tables?">POD Tables?</a></h4>

<p>Aaron Sherman wondered if Perl 6's incarnation of POD would have support for tables. Luke wasn't overly keen on Aaron's proposed syntax, and Larry pointed out that they'd managed to use Perl 5's POD and some clever processing to write tables for the third edition of Programming Perl. Once again, it seems that everyone agrees that POD is great, but could be greater, but nobody can agree on how to <i>make</i> it greater. Me, I think Larry got it right enough.</p>

<p><a href='http://groups.google.com/groups?threadm=4126D251.9070105@ajs.com'>http://groups.google.com/groups?threadm=4126D251.9070105@ajs.com</a></p>

<h4><a name="Constructors_and_mixins">Constructors and Mixins</a></h4>

<p>Ovid had some questions about how Constructors work in Perl 6 and about how to disambiguate methods when using Roles. Larry and Damian provided answers.</p>

<p><a href='http://groups.google.com/groups?threadm=20040822150448.25180.qmail@web60804.mail.yahoo.com'>http://groups.google.com/groups?threadm=20040822150448.25180.qmail@web60804.mail.yahoo.com</a></p>

<h4><a name="Instantiation">Instantiation</a></h4>

<p>Instantiation was on Aaron Sherman's mind, too. He proposed some syntactic sugar for creating objects at "use" time. For some reason, syntactic sugar proposals do seem to create lots of discussion.</p>

<p><a href='http://groups.google.com/groups?threadm=1093279983.1171.104.camel@pps'>http://groups.google.com/groups?threadm=1093279983.1171.104.camel@pps</a></p>

<h3><a name="Announcements,_Apologies,_Acknowledgements">Announcements, Apologies, Acknowledgements</a></h3>

<p>I am reliably informed that a lot of last week's links were broken. Which is odd because the code to generate them hasn't changed. It looks like the problem's down to the gateway between nntp.perl.org and groups.google.com being slightly radished at present.</p>

<p>However, I'm going to stick with the Google links in this summary in the hopes that normal service will be returned shortly and things will get back-filled. If anyone has a handy tool for getting from a message id to an archive URL that works then I'd be happy to hear from them.</p>

<p>If you find these summaries useful or enjoyable, please consider contributing to the Perl Foundation to help support the development of Perl. You might also like to send feedback or contributions to a "Getting Piers to OSCON 2005" fund to <a href='mailto:pdcawley@bofh.org.uk'>mailto:pdcawley@bofh.org.uk</a>.</p>

<p><a href='http://donate.perl-foundation.org/'>http://donate.perl-foundation.org/</a> -- The Perl Foundation</p>

<p><a href='http://dev.perl.org/perl6/'>http://dev.perl.org/perl6/</a> -- Perl 6 Development site</p>

<p>Amazingly, there's a small amount of newer content on my web site this week. Will wonders never cease?</p>

<p><a href='http://www.bofh.org.uk/'>http://www.bofh.org.uk/</a></p>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2004/08/">&laquo; August 2004</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2004/10/">October 2004 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
