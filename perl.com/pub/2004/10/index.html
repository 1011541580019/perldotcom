<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: October 2004 Archives</title>


    <link rel="prev" href="/pub/2004/09/" title="September 2004" />
    <link rel="next" href="/pub/2004/11/" title="November 2004" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">October 2004 Archives</h1>





                            
                            <div id="entry-1010" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/10/p6pdigest/20041017.html" rel="bookmark">This Fortnight on Perl 6, October 2004</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Matt Fowles</span> on <abbr class="published" title="2004-10-28T00:00:00-08:00">October 28, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h2>Perl 6 Summary for 2004-10-01 through 2004-10-17</h2>

<p>All~</p>

<p>Welcome to my first summary. Since I am relatively new at this game, I will
just steal Piers' approach and start with Perl6 internals. But before that let
me warn you that my ability to make strange characters with accents is not
great, thus please do not be offended if I don't include them in your name. If
you want them to appear in the future, a quick email about how to make them
appear using a U.S. qwerty keyboard and Mozilla should suffice.</p>

<p>Also, groups.google.com does not seem to have picked up perl6.compiler
yet.</p>

<p>With that legal disclaimer out of the way onward to:</p>

<h3>Perl 6 Internals</h3>

<h4>Configure Problems and Improvements</h4>

<p>Leo noticed that Configure doesn't rebuild things correctly.  Takers
welcome. Nicholas Clark added a <code>--prefix</code> option for the <code>make
install</code> target.</p>

<p><a href="http://xrl.us/divy">http://xrl.us/divy</a><br />
<a href="http://xrl.us/divz">http://xrl.us/divz</a><br />
<a href="http://xrl.us/div2">http://xrl.us/div2</a><br /></p>

<csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">

<h4><a href="http://xrl.us/div3">Non-core Module Dependency</a></h4>

<p>Joshua Gatcomb accidentally introduced a dependency on Config::IniFiles.
Since it is implemented in pure Perl he offered to add it to the repository.
Warnock applies.</p>

<h4><a href="http://xrl.us/div4">OpenBSD Troubles</a></h4>

<p>Jens Rieks found and fixed a coredump on OpenBSD. Thanks, Jens.</p>

<h4><a href="http://xrl.us/div5">Threads on Cygwin</a></h4>

<p>Joshua Gatcomb discovered some trouble with threads on Cygwin.  It seems
that there are problems with both the thread implementation, and the tests not
being generous enough if accepting out-of-order input. Still unresolved, I
think.</p>

<h4><a href="http://xrl.us/div6">Parrot IO Not Quite Threadsafe</a></h4>

<p>Nicholas Clark discovered a double free in the IO system. While his problem
was solved by Jens, the underlying problem still remains.</p>

<h4><a href="http://xrl.us/div7">make install Portability Issues</a></h4>

<p>Nicholas Clark asked why the install taget was not portable.  Steve Fink
responded that it was a quick hack at the time and made it better.</p>

<h4>Namespaces</h4>

<p>The namespace thread continues to churn. It is slowly making progress, but I
believe there is a fair amount of people talking past each other going on.
Perhaps Dan could step in and provide one final state of the namespaces?</p>

<p><a href="http://xrl.us/div8">http://xrl.us/div8</a><br />
<a href="http://xrl.us/div9">http://xrl.us/div9</a><br />
<a href="http://xrl.us/diwa">http://xrl.us/diwa</a><br /></p>

<h4>Parrot Abstract Syntax Tree a.k.a. PAST</h4>

<p>Sam Ruby decided to pick up the Python on Parrot ball. To that end he
enquired as to what PAST is. Leo provided answers and help.  Will asked for
more help. Leo once again provided.</p>

<p><a href="http://xrl.us/diwb">http://xrl.us/diwb</a><br />
<a href="http://xrl.us/diwc">http://xrl.us/diwc</a><br /></p>

<h4>JIT for Non-Branching Compare opcodes</h4>

<p>Stephane Peiry provided a patch to JIT with some more opcodes. Leo applied.
Stephane then provided a patch with tests. Jens applied that one.</p>

<p><a href="http://xrl.us/diwd">http://xrl.us/diwd</a><br />
<a href="http://xrl.us/diwe">http://xrl.us/diwe</a><br /></p>

<h4>Comparing Pythons</h4>

<p>Sam Ruby posted a link comparing various Pythons and their conformance to a
test suite.</p>

<p><a href="http://xrl.us/diwf">Sam Ruby: Comparing Pythons</a></p>

<h4>Metaclasses?</h4>

<p>Dan admitted confusion as to what exactly metaclasses are/do.  Papers and
explanations were provided by Aaron Sherman, Michael Walter, and Sam Ruby.</p>

<p><a href="http://xrl.us/diwg">http://xrl.us/diwg</a><br />
<a href="http://xrl.us/diwh">http://xrl.us/diwh</a><br />
<a href="http://xrl.us/diwi">http://xrl.us/diwi</a><br /></p>

<h4><a href="http://xrl.us/diwj">Plain Old Hash</a></h4>

<p>William Coleda wondered if Parrot had a basic hash implementation (not a
PerlHas). Dan said "D'oh!" and asked for takers. Coleda added a TODO.</p>

<h4><a href="http://xrl.us/diwk">Parakeet 0.3</a></h4>

<p>Michael Pelletier's language Parakeet has hit 0.3 and been added
to CVS. Everybody should play with it.</p>

<h4><a href="http://xrl.us/diwm">make install Thoughts</a></h4>

<p>Leo conjectured about creating a <code>parrot_config.c</code>, which would
encode all of Parrot's configuration. Then Parrot would know its own config.
Jens suggested letting miniparrot generate it; Leo agreed.</p>

<h4><a href="http://xrl.us/diwn">More piethon</a></h4>

<p>Dan's register spilling problems give him free time. He used it to work on
piethon a little.</p>

<h4><a href="http://xrl.us/diwo">Privilege Implementation</a></h4>

<p>Felix Gallo posted some questions/thoughts with respect to privileges. While
Leo addressed Felix's question about the location of source files (and provided
a nice plug for vim). The others all remain Warnocked.</p>

<h4><a href="http://xrl.us/diwp">make in Languages/Tcl</a></h4>

<p>Matthew Zimmerman supplied a patch to fix Tcl's make. William Coleda
modified and applied it.</p>

<h4><a href="http://xrl.us/diwq">MANIFEST Fix Up</a></h4>

<p>Andy Dougherty provided a patch to remove some old files from the manifest.
Steve Fink applied it.</p>

<h4><a href="http://xrl.us/diwr">Parrot 0.1.1 "Poicephalus"</a></h4>

<p>There was a little talk about names. Then a little talk about getting it
posted to perl.org. In the end the 0.1.1 release did happen and even made it to
Slashdot.  Thank you to everyone who contributed.</p>

<h4><a href="http://xrl.us/diws">Data::Dumper TODO</a></h4>

<p>Will Coleda added a TODO for Data::Dumper. Apparently it cannot dump
FixedPMCArrays. Will conjectures that there are probably other new PMCs it
cannot handle either. Patches welcome.</p>

<h4><a href="http://xrl.us/diwt">Emacs, XEmacs, and pir-mode</a></h4>

<p>Jerome Quelin kicked off a thread that resulted in emacs getting better
pir-mode support. Thanks to all involved, but I will continue to use vim. ;-)</p>

<h4><a href="http://xrl.us/diwu">A %= B</a></h4>

<p>Dan noticed that we did not have support for <code>%=</code> in PIR. There
was some confusion as several people rushed to the rescue. In the end, the
problem was fixed. Thanks all.</p>

<h4>Pushing and Popping Arrays</h4>

<p>Will Coleda wondered why he could not push onto a Fixed Array.  The answer
was quickly provided that Fixed means that its size cannot be modified, not
that it is bounded. This answer seemed reasonable enough to him. He then went
on to ask why he could not pop a Resizable Array. The answer is, of course,
because it is not implemented yet; patches welcome.</p>

<p><a href="http://xrl.us/diwv">http://xrl.us/diwv</a><br />
<a href="http://xrl.us/diww">http://xrl.us/diww</a><br /></p>

<h4><a href="http://xrl.us/diwx">imcc Reserved Words</a></h4>

<p>Sam Ruby wondered how to create a subname <code>num</code> in imcc. The
answer, "No," and a workaround was provided by Jens.</p>

<h4><a href="http://xrl.us/diwy">Quiet vs. Loud Build System</a></h4>

<p>Andy Dougherty provided a patch to improve the build system.  Steve Fink
applied it. Leo disliked it. Consensus seems to be not to use it.</p>

<h4>Cygwin Bugs</h4>

<p>Joshua Gatacomb has been fighting with Cygwin getting Parrot to
work. Apparently we trip a few of its bugs. Read more if you
like.</p>

<p><a href="http://xrl.us/diwz">http://xrl.us/diwz</a><br />
<a href="http://xrl.us/diw2">http://xrl.us/diw2</a><br />
<a href="http://xrl.us/diw3">http://xrl.us/diw3</a><br /></p>

<h4><a href="http://xrl.us/diw4">Python Concerns</a></h4>

<p>Jeff Clites raised some concerns about dealing with Python's bound and
unbound methods. There was some discussion about it. In the end it just means
a little more work.</p>

<h4><a href="http://xrl.us/diw5">Makefile Cleanup</a></h4>

<p>Will submitted a patch to clean up the <code>Makefile</code>. There was some
back and forth about what parts of the patch should be kept.</p>

<h4>Win32 Issues</h4>

<p>Ron Blaschke provided a few patches for Win32 which Jens and Leo
applied.</p>

<p><a href="http://xrl.us/diw6">http://xrl.us/diw6</a><br />
<a href="http://xrl.us/diw7">http://xrl.us/diw7</a><br />
<a href="http://xrl.us/diw8">http://xrl.us/diw8</a><br />
<a href="http://xrl.us/diw9">http://xrl.us/diw9</a><br /></p>

<h4>Dynamically Loadable Modules</h4>

<p>Steve Fink spent some time chugging away at dynclass and dynamically loaded
modules. There was some discussion of proper variable names and some working
out of problems. Friendly reminder -- when in doubt <code>make clean; perl
Configure.pl; make</code>.</p>

<p><a href="http://xrl.us/dixa">http://xrl.us/dixa</a><br />
<a href="http://xrl.us/dixb">http://xrl.us/dixb</a><br /></p>

<h4><a href="http://xrl.us/dixc">ICU Without <code>--prefix</code> Problems</a></h4>

<p>Steve Fink was apparently having troubles with ICU and locating necessary
data files. Leo confirmed that it is a problem.</p>

<h4><a href="http://xrl.us/dixd">MinGW/MSYS</a></h4>

<p>Jens has apparently had success working with MinGW. Yay!</p>

<h4><a href="http://xrl.us/dixe">ICU Issues</a></h4>

<p>Will had some ICU issues. Various suggestions and solutions were attempted.
Any success?</p>

<h4><a href="http://xrl.us/dixf">Locals Inside Macros</a></h4>

<p>Will wants <code>.local</code>s inside <code>.macro</code>s. Apparently it
can only be done if your macro only takes PMCs.</p>

<h4><a href="http://xrl.us/dixg"><code>t/pmc/signal.t</code>
Improvements</a></h4>

<p>Jeff Clites provided a patch with improvements to
<code>t/pmc/signal.t</code>. Warnock applies.</p>

<h4><a href="http://xrl.us/dixh">Co-routines and <code>--python</code></a></h4>

<p>Michal at withoutane.com (whose last name I cannot find) wondered about the
<code>--python</code> flag. The answers and discussion that followed indicate
that it was a quick and dirty hack. Eventually it will be gone and Python will
have PMCs of its own (relatively quickly if Sam Ruby has anything to say about
it).</p>

<h4>Small Patches</h4>

<p>Sam Ruby fixed a small problem in PerlInt; Jeff Clites fixed a bug and
cleaned some warnings in <em>darwin/dl.c</em>. He also fixed some tests and
added a <code>Parrot_memalign</code> function for Mac OS X. Stephane Payrand
provided a patch to allow multiple identifiers on one line in pir. Stephane
also added a <code>get_representation</code> op. Bernhard Schmalhofer added
support for synchronous callbacks. Ion Alexandru Morega added more
functionality to complex PMC. Leo applied the patches.</p>

<h4><a href="http://xrl.us/dixr">Link Failure on amd64</a></h4>

<p>Adam Thomason pointed out that amd64 lost a vital link flag somewhere in the
shuffle.</p>

<h4>Non-vtable Methods on Built-in pmcs</h4>

<p>Sam Ruby wondered about allowing pmcs to implement additional non-vtable
methods. Leo thought it would be good. Sam provided a patch, chromatic tweaked
it, and Leo applied it.</p>

<p><a href="http://xrl.us/dixs">http://xrl.us/dixs</a><br />
<a href="http://xrl.us/dixt">http://xrl.us/dixt</a><br /></p>

<h4><a href="http://xrl.us/dixu">Tinderbox?</a></h4>

<p>Jens wondered what happened to tinderbox.perl.org. Apparently it died a
while back and has not yet been resurrected. Robert Spier also noted that it
was a little difficult to deal with and said he is interested in creating a new one.
He is also looking for help in this endeavor.</p>

<h4><a href="http://xrl.us/dixv">Register Stacks [Again]</a></h4>

<p>Leo has once again pushed forward his idea for register stacks
and been Warnocked.</p>

<h4><a href="http://xrl.us/dixw">Ncurses Troubles</a></h4>

<p>Andy Dougherty had some ncurses trouble. In particular, one of the error
messages was exceptionally unhelpful. Now it is a little more helpful.</p>

<h4>Coding Standards</h4>

<p>Leo would like to draw everyone's attention to
<em>docs/pdds/pdd07_codingstd.pod</em>, and the fact that it should also apply
to Perl code where appropriate. Thank you.</p>

<h4><a href="http://xrl.us/dixx"><code>Rx_compile</code> and FSAs</a></h4>

<p>Aaron Sherman has some ambitious stuff in the works with respect to regular
expressions. Stay tuned for details.</p>

<h4><a href="http://xrl.us/dixy">Single Character from STDIN</a></h4>

<p>Matt Diephouse wants to know how to get a single character from STDIN. The
answer seems to be no, but this has triggered Dan to go back to the IO/Event
doc. Best of luck, Dan.</p>

<h4><a href="http://xrl.us/dixz">Parrotcode.org Samples</a></h4>

<p>Paul Seamons noticed that some of the samples on parrotcode.org are really
out of date. Will Coleda agreed and suggested that they should all be updated
to PIR, too. Takers welcome.</p>

<h4><a href="http://xrl.us/dix2">Newcomers</a></h4>

<p>Pratik Roy wondered if he could join into the work on Parrot or if he would
remain an outsider looking in. Many people rushed to suggest ways in which he
could help. So, please don't feel afraid to contribute. At worst a patch of
yours will be turned away with an explanation as to why. At best, you will
start being referred to by first name only in the summaries.</p>

<h4><a href="http://xrl.us/dix3">Python and Perl Interop</a></h4>

<p>Sam Ruby wondered about how Python and Perl would interoperate.  Leo, Steve
Fink, and Thomas Sandlass have ideas and suggestions. I think the answer will be
"magically."</p>

<h4>Inline::Parrot</h4>

<p>Ovid pointed the world at Inline::Parrot. It looks cool.</p>

<p><a href="http://xrl.us/dix4">http://xrl.us/dix4</a><br />
<a href="http://xrl.us/dix5">http://xrl.us/dix5</a><br /></p>

<h4><a href="http://xrl.us/dix6">Problems with 0.1.1 on x86-64</a></h4>

<p>Brian Wheeler had a problem with Parrot on x86-64. He provided a patch, but
Leo couldn't apply it and asked for a resend. Silence thereafter. . . .</p>

<h4><a href="http://xrl.us/dix7">Bug in Factorial?</a></h4>

<p>James Ghofulpo wondered if the Parrot examples page's factorial program was
supposed to truncate output. Warnock applies.</p>

<h4><a href="http://xrl.us/dix8"><em>Configure.pl</em> Auto-detection</a></h4>

<p>Sridhar discovered that <em>Configure.pl</em> would fail if he told it to
<code>--cxx=/usr/bin/g++-3.3</code>; Jens pointed out that he would also need
to tell it <code>--link=g++-3.3</code>.</p>

<h4><a href="http://xrl.us/dix9">Parrot Forth 0.1</a></h4>

<p>Matt Diephouse releases Parrot Forth 0.1. It has many cool features. Nice
work. Perhaps this should go into <em>languages/</em>?</p>

<h4><a href="http://xrl.us/diya"><code>.return</code> Directives</a></h4>

<p>Stephane Payrard wants to remove the multiple meaning of
<code>.return</code> to provide a cleaner path forward. Everyone agrees.</p>

<h4><a href="http://xrl.us/diyb">YAGCB (Yet Another Garbage Collection
Bug)</a></h4>

<p>Will thought he had turned up another GC bug with Tcl. This time he hadn't
and it was his fault. Can't win them all I guess.</p>

<h4><a href="http://xrl.us/diyc">Testing a PMC for Truth</a></h4>

<p>Will wondered how to determine a PMC's Boolean value. Leo pointed him toward
<code>istrue</code>.</p>

<h4><a href="http://xrl.us/diyd">Grsecurity Problems</a></h4>

<p>Christian Jaeger noticed taht grsecurity was stopping on Parrot's attempts
to execute JITted code. Leo pointed out that we already have support for doing
the right thing, we are just failing to detect that we need to.</p>

<h4><a href="http://xrl.us/diye">PMCs and Inheritance</a></h4>

<p>Sam Ruby wanted inheritance for PMCs. Apparently what we really need is a
scheme for multiple inheritance of PMCs. Sam Ruby supplied several patches and
Leo applied parts of them.</p>

<h4><a href="http://xrl.us/diyf">C++ and <code>typedef struct Parrot_Interp
*Parrot_Interp</code> Don't Play Well</a></h4>

<p>Jeff Clites discovered that Parrot has troubles on Mac OS X because C++ does
not like <code>typedef struct Parrot_Interp *Parrot_Interp</code>. We need C++
to link ICU.  Fortunately, that particular typedef is out of the ordinary and
violates our normal conventions. Brent "Dax" Royal-Gordon threatened to apply
the (fairly large) fix. Will tested Brent's patch and gave it the thumbs
up.</p>

<h4><a href="http://xrl.us/diyg">JIT, Exec Core, Threads, and Architecture Proposal</a></h4>

<p>Leo proposed mandating that all JIT must be done interpreter-relative. This
allowed some happy optimizations including constant table access. General
response was favorable.</p>

<h4><a href="http://xrl.us/diyh"><code>pmc2c2.pl --tree</code> Option</a></h4>

<p>Bernhard Schmalhofer submitted a patch fixing the aforementioned
--tree option. No answer yet, but it has not really been long
enough to officially invoke Warnock.</p>

<h4><a href="http://xrl.us/diyi">Unununium</a></h4>

<p>Jacques Mony asked for help/advice porting Parrot to unununium.  No
responses yet...</p>

<h3>Perl 6 Compiler</h3>

<p>Google groups still doesn't have Perl 6 Compiler, so this section
won't have links. Sorry.</p>

<h4>Compilation Paradigms</h4>

<p>Jeff Clites put out a request for some basic P6 examples and resultant
bytecode so that everyone would be on the same page.  Warnock applies.</p>

<h4>Internals, rules, REPL</h4>

<p>Herbert Snorrason had some basic questions about Perl 6's interaction with
Parrot. He also wanted to know about whether he should be playing with the
re_tests or if that was wasted effort.  Finally he wanted to know about
read-eval-print loops. Sadly Warnock applies across the board.</p>

<h3>Perl 6 Language</h3>

<p>Google groups has nothing for Perl6.language between October 2 and 14. Is
this really the case? (I had not signed up until shortly before volunteering to
summarize.) If there is email that I just can't find, I would be appreciative
if someone could produce a summary or a pointer to the missing mail for me.
Thanks.</p>

<h4><a href="http://xrl.us/diyj">Updating Multiple Rows</a></h4>

<p>Nitin Thakur attempted to de-Warnock himself, apparently unsuccessfully.
Sorry, Nitin.</p>

<h3><a href="http://xrl.us/diyk">Perl 6 Summaries</a></h3>

<p>Piers raised the white flag after several years as a wonderful summarizer.
Having now just finished my first summary, let me say thank you for all of your
hard work and if you ever want the job back its yours. ;-) I hope you don't mind
my stealing your general format for these things.</p>

<h3>The Usual Footer</h3>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of Perl.
You might also like to send feedback to <a
href="mailto:ubermatt@gmail.com">ubermatt@gmail.com</a>.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a><br />
<a href="http://dev.perl.org/perl6/">Perl 6 Development site</a><br />
<a href="http://planet.parrotcode.org/">Parrot Blog aggregator</a></p>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1008" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/10/28/bricolage_installation.html" rel="bookmark">Installing Bricolage</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">David Wheeler</span> on <abbr class="published" title="2004-10-28T00:00:00-08:00">October 28, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<br clear="all" />
<p>Now that <a href="/pub/a/2004/08/27/bricolage.html"
title="Content Management with Bricolage">Content Management with Bricolage</a>
has piqued your interest, you might be wondering what you need to do to install
it. I'll be the first to admit that installing Bricolage is not trivial, given
that it requires several third-party applications and modules to do its job.
That said, the installer tries hard to identify what pieces you have and which
ones you don't, to help you through the process. Even still, it can help to
have a nice guide to step you through the process.</p>

<p>This article is here to help.</p>

<h3>Packaging Systems</h3>

<p>First off, depending on your operating system, you may be able to install
Bricolage via the supported packaging system. If you run FreeBSD, you can
install a recent version from the Free BSD ports collection. To do so, update
your ports tree, and then:</p>

<pre><code>% cd /usr/ports/www/bricolage
% make
% make install</code></pre>

<p>A Debian package is also available. To install it, add these lines to your
<em>/etc/apt/sources.list</em> file:</p>

<pre><code># bricolage
deb http://tetsuo.geekhive.net/mark/debian/unstable /
deb-src http://tetsuo.geekhive.net/mark/debian/unstable /</code></pre>

<p>Then you can install Bricolage using <code>apt-get</code>:</p>

<pre><code># apt-get install bricolage-db
# apt-get install bricolage</code></pre>

<csperl file="grab" domain="on" record="b/970" template="b/article_sidebar.view">

<p>The packaged distributions of Bricolage are great because they handle all of
the dependencies for you, making installation extremely easy. The downside,
however, is that there is frequently a lag behind a new release of Bricolage
and the updating of the relevant packages. For example, the current stable
release of Bricolage is 1.8.2, but the FreeBSD ports package is currently at
1.8.1. The Debian port is at 1.8.0. Furthermore, as of this writing, neither
packaging system supports upgrading an existing installation of Bricolage,
which may require database updates.</p>

<h3>Building Bricolage</h3>

<p>The alternative is to compile and install Bricolage and all of its
dependencies yourself. This is not as difficult as it might at first sound,
because Bricolage is a 100% Perl application and therefore requires no
compilation. Many of the dependencies, however, <em>do</em> require compilation
and have their own histories of successful installation on a given platform.
For the most part, however, they have solid histories of success, and in the
event of trouble, there are lots of resources for help on the Internet (see,
for example, my articles on <a href="http://www.oreillynet.com/pub/au/1059"
title="building Apache/mod_perl on Mac OS X">building
Apache/<code>mod_perl</code> on Mac OS X</a>). The platform-specific
<em>README</em> files that come with Bricolage also contain useful information
to help with your installation.</p>

<p>The next few sections of this article cover manual installation of
Bricolage. If you're happy with a package install, this information can still
be very useful for understanding Bricolage's requirements. If you're antsy, <a
href="/pub/a/2004/10/28/bricolage_installation.html?page=3#upnext" title="Bricolage Runtime Configuration">skip to the
end</a> to find out where to go next.</p>

<h3>Prerequisites</h3>

<p>First: did you read the <em>README</em> file for your platform?</p>

<p>The most important prerequisites for Bricolage are:</p>

<dl>
<dt>Perl</dt>
<dd>

<p>What kind of <cite>Perl.com</cite> article <em>wouldn't</em> have this
requirement? Bricolage requires Perl 5.6.1 or later, but if you're going to
work with <em>any</em> kind of non-ASCII characters in your content, I
<em>strongly</em> recommend Perl 5.8.3 or later for its solid Unicode support.
All text content managed by Bricolage is UTF-8, so for sites such as <a
href="http://www.rfa.org/" title="RFA publishes in ten different
languages!">Radio Free Asia</a> the newer versions of Perl are a must.</p>

<p>Experience has also shown that some vendor versions of Perl don't work too
well. Red Hat's Perl, in particular, seems to have several problems that just
go away once a sys-admin decides to compile her own. <em>Caveat
Perler.</em></p>
</dd>

<dt>Apache</dt>
<dd>

<p>Bricolage doesn't serve content, but it does require a web server to serve
its interface. It requires Apache 1.3.12 or later, with a strong recommendation
for the latest, 1.3.31.  Bricolage does not yet support Apache 2, though the
upcoming release of <code>mod_perl</code> 2 will lead to a port.</p>
</dd>

<dt><code>mod_perl</code></dt>
<dd>

<p>Speaking of <code>mod_perl</code>, Bricolage requires <code>mod_perl</code>
1.25 or later, with a strong recommendation to use the latest, 1.29.  You can
either statically compile <code>mod_perl</code> into Apache or, as of the
recent release of Bricolage 1.8.2, compile it as a dynamically shared object
library (DSO).  However, in order to use <code>mod_perl</code> as a DSO, you
must have compiled with a Perl that was configured with
<code>-Uusemymalloc</code> <em>or</em> <code>-Ubincompat5005</code>. See <a
href="http://perl.apache.org/docs/1.0/guide/install.html#When_DSO_can_be_Used"
title="When DSO can be Used in the mod_perl FAQ">this <code>mod_perl</code>
FAQ</a> for more details. Bricolage's installer will check this configuration
against the Perl you use to run the installation and will complain if the
installing Perl lacks these attributes.  However, this check is only valid if
the Perl running the installation is the same as the Perl used by
<code>mod_perl</code>, so it pays to be aware of this issue.</p>

<p>As I said, Bricolage does not currently support <code>mod_perl</code> 2.
However, now that <code>mod_perl</code> 2 is nearing release, there is greater
interest in porting Bricolage to it (and therefore to Apache 2). Some work has
begun in this area, and we hope to be able to announce <code>mod_perl</code> 2
support by the end of the year.</p> </dd>

<dt>PostgreSQL</dt>
<dd>

<p>Bricolage stores all of its data in a <a href="http://www.postgresql.org/"
title="PostgreSQL website">PostgreSQL</a> database. For those not familiar with
PostgreSQL, it is an advanced, ACID-compliant, open-source object-relational
database management system. I've found the compilation very easy on all
platforms I've tried it on (although I have had to install <a
href="http://www.justatheory.com/computers/os/macosx/libreadline.html"
title="Compiling libreadline on Mac OS X"><em>libreadline</em></a> on Mac OS X,
first). Bricolage requires PostgreSQL 7.3 or later and recommends version 7.4.
Bricolage will support the forthcoming PostgreSQL 8.0 around the time of its
release, but to date no one has tested them together.</p>

<p>The one other recommendation I make is that you <a
href="http://www.justatheory.com/computers/databases/postgresql/always_use_c_locale.html"
title="Always use the C Locale with PostgreSQL">specify
<code>--no-locale</code> or <code>--locale=C</code> when you initialize the
PostgreSQL database</a>. This is especially important if you will be managing
content in more than one language, as it will prevent searches and sort
ordering from being specific to one language and possibly incompatible with
others.  A <a
href="http://archives.postgresql.org/pgsql-general/2004-08/msg01079.php"
title="Subject: UTF-8 and LIKE vs =">Unicode and searching discussion on the
pgsql-general mail list</a> provides a broader perspective.</p> </dd>

<dt><code>mod_ssl</code> or <code>apache-ssl</code></dt>
<dd>

<p>If you want encrypted communications between Bricolage and its clients,
install either <code>mod_ssl</code> or <code>apache-ssl</code>. SSL is optional
in Bricolage, but I recommend using it for security purposes. Bricolage can use
SSL for all requests or just for authentication and password changing requests.
Tune in for the next article in this series, <q>Bricolage Runtime
Configuration</q>, for information on configuring SSL support.</p>
</dd>

<dt>Expat</dt>
<dd>

<p>Bricolage uses the <a
href="http://search.cpan.org/dist/XML-Parser">XML::Parser</a> Perl module,
which in turn requires the Expat XML parser library. Most Unix systems have a
version of Expat installed already, but if you need it, install it from the <a
href="http://expat.sourceforge.net/" title="The Expat XML Parser">Expat home
page</a>.</p> </dd>

<dt>CPAN Modules</dt>
<dd>

<p>Bricolage uses a very large number of CPAN modules. Most of those required
in turn require still more modules. For the most part, we recommend that you
let the Bricolage installer install the required modules. It will determine
which modules you need and install them using the <code>CPAN</code> module. If
you want to get ahead of the game, use the <code>CPAN</code> module to install
them yourself, first. The easiest way to do it is to install <a
href="http://search.cpan.org/dist/Bundle-Bricolage/">Bundle::Bricolage</a>.
This module bundles up all of the required modules so that <code>CPAN</code>
will install them for you:</p>

<pre><code>% perl -MCPAN -e 'install Bundle::Bricolage'</code></pre>

<p>There are also several optional modules.  Install these all in one command
by using the <a href="http://search.cpan.org/dist/Bundle-BricolagePlus/"
title="Bundle::BricolagePlus on CPAN">Bundle::BricolagePlus</a> module:</p>

<pre><code>% perl -MCPAN -e 'install Bundle::BricolagePlus'</code></pre>

<p>Installing the Perl modules yourself can be useful if you expect to have
trouble with one or more of them, as you can easily go back and manually
install any troublesome modules. If you want to install them all yourself,
without using the bundles, the <em>INSTALL</em> file has a complete list
(copied from <a href="http://www.bricolage.cc/docs/current/api/Bric::Admin"
title="Bric::Admin">Bric::Admin</a>).  I don't recommend this approach,
however; it will take you all night!</p> </dd>

</dl>

<p><strong>Note:</strong> Bricolage currently does not run on Windows. This
situation will likely change soon, with the forthcoming introduction of
PostgreSQL 8.0 with native Windows support as well as <code>mod_perl</code> 2.
Watch the <a href="http://www.bricolage.cc/" title="Bricolage
website">Bricolage web site</a> for announcements in the coming months.</p>













<h3>Installation</h3>

<p>With all of the major dependencies worked out, it's time to install
Bricolage. Download it from the <a href="http://www.bricolage.cc/downloads/"
title="Bricolage Downloads">Bricolage download page</a> to the directory of
your choice. Bricolage is distributed as a tarball like most Perl modules.
Decompress it and then execute the usual Perl module commands to install
it:</p>

<pre><code>% wget http://www.bricolage.cc/downloads/bricolage-1.8.2.tar.gz
% tar zxvf bricolage-1.8.2.tar.gz
% cd bricolage-1.8.2
% perl Makefile.PL
% make
% make test
% make install</code></pre>

<p>OK, to be fair, the process is actually more complicated than that,
principally during <code>make</code>. Let's walk through the process.</p>

<h3>Installation Configuration</h3>

<p>The first step, <code>perl Makefile.PL</code>, doesn't really do what it
does with your typical Perl modules. It's really just a wrapper around a custom
<code>Makefile</code> to make sure that everything thereafter uses the Perl
binary with which you executed <em>Makefile.PL</em>. If you're using an
installation of Perl somewhere other than in your path, use it to execute
<em>Makefile.PL</em> explicitly, such as <code>/path/to/my/perl
Makefile.PL</code>.</p>

<p>The next step, <code>make</code>, will take the most time as the installer
pauses to ask several questions. Let's take it step-by-step.</p>

<pre><code>% make
/usr/bin/perl inst/required.pl


==&gt; Probing Required Software &lt;==

looking for PostgreSQL with version &gt;= 7.3.0...
Found PostgreSQL's pg_config at '/usr/local/pgsql/bin/pg_config'.
Is this correct? [yes] </code></pre>

<p>The first thing the Bricolage installer does is to check for all of its
dependencies. Here, it asks for the location of <code>pg_config</code>, the
PostgreSQL configuration program. The installer will use this application to
determine the version number of PostgreSQL, among other things. If you're using
a package-installed version of PostgreSQL, make sure that you have the
PostgreSQL development tools installed, as well (yes, I'm looking at
<em>you</em>, Red Hat users!). Bricolage will look in several common locations
for <code>pg_config</code>; if it doesn't find it, or if it finds the wrong one
(because you have more than one installed), type in the location of
<code>pg_config</code>. Otherwise, simply accept the one it has found.</p>

<pre><code>Is this correct? [yes] <strong>[Return]</strong>
Found acceptable version of Postgres: 7.4.3.
Looking for Apache with version &gt;= 1.3.12...
Found Apache server binary at '/usr/sbin/httpd'.
Is this correct? [yes] </code></pre>

<p>Next, the Bricolage installer searches for an instance of Apache 1.3.x. This
time it's looking for the <code>httpd</code> executable. The same comments that
applied to PostgreSQL apply to the Apache Web server; either accept the
instance of <code>httpd</code> or type in an alternate. On my Mac, I never use
Apple's Apache (an old habit because Apple's Apache uses a DSO
<code>mod_perl</code>, whereas I always compile my own with a static
<code>mod_perl</code>).</p>

<pre><code>Is this correct? [yes] <strong>no</strong>
Enter path to Apache server binary [/usr/sbin/httpd] <strong>/usr/local/apache/bin/httpd</strong>
Are you sure you want to use '/usr/local/apache/bin/httpd'? [yes] <strong>[Return]</strong>
Found Apache executable at /usr/local/apache/bin/httpd.
Found acceptable version of Apache: 1.3.31.
Looking for expat...
Found expat at /usr/local/lib/libexpat.so.</code></pre>

<p>From here, the Bricolage installer continues looking for other dependencies,
starting with the Expat XML parsing library. Then the installer probes for all
of the required and optional Perl modules:</p>

<pre><code>==&gt; Finished Probing Required Software &lt;==

/usr/bin/perl inst/modules.pl


==&gt; Probing Required Perl Modules &lt;==

Looking for Storable...found.
Looking for Time::HiRes...found.
Looking for Unix::Syslog...found.
Looking for Net::Cmd...found.
Looking for Devel::Symdump...found.
Looking for DBI...found.
Checking that DBI version is &gt;= 1.18... ok.
&x2026;</code></pre>

<p>As I said, Bricolage requires quite a few Perl modules, so I'm truncating
the list here for the sake of space. If any required modules are missing, the
installer makes a note of it. If any optional modules are missing, it will
prompt you to find out if you want to install them. Respond as appropriate.</p>

<pre><code>&#x2026;
Looking for HTML::Template...found.
Looking for HTML::Template::Expr...found.
Looking for Template...found.
Checking that Template version is &gt;= 2.14... ok.
Looking for Encode...found.
Looking for Pod::Simple...found.
Looking for Test::Pod...found.
Checking that Test::Pod version is &gt;= 0.95... ok.
Looking for Devel::Profiler... found.
Checking that Devel::Profiler version is &gt;= 0.03... ok.
Looking for Apache::SizeLimit...found.
Looking for Net::FTPServer...found.
Looking for Net::SFTP...not found.
Do you want to install the optional module Net::SFTP? [no] <strong>[Return]</strong>
Looking for HTTP::DAV...not found.
Do you want to install the optional module HTTP::DAV? [no] <strong>[Return]</strong>
Looking for Text::Levenshtein...not found.
Do you want to install the optional module Text::Levenshtein? [no] <strong>yes</strong>
Looking for Crypt::SSLeay...found.
Looking for Imager...found.
Looking for Text::Aspell...not found.

Do you want to install the optional module Text::Aspell? [no] <strong>[Return]</strong>
Looking for XML::DOM...not found.
Do you want to install the optional module XML::DOM? [no] <strong>[Return]</strong>
Looking for CGI...found.</code></pre>

<p>In this example, I've elected to install the <a
href="http://search.cpan.org/dist/Text-Levenshtein">Text::Levenshtein</a>
module, but no other optional modules not already installed.</p>


<h4>Optional Perl Modules</h4>

<p>Of course, if you previously installed Bundle::BricolagePlus from CPAN, you
will have all of the optional modules installed.  Let me provide a bit of
background on each optional module so that you can decide for yourself which
you need and which you don't. If you're just starting out with Bricolage, I
recommend you don't worry too much about the optional modules; you can always
add them if you decide that you need them later.</p>

<dl>
<dt>HTML::Template and HTML::Template::Expr</dt>
<dd>

<p>These two modules are necessary to create HTML::Template templates to format
your content in Bricolage. Most Bricolage users use the required HTML::Mason
module, but you should elect to install these modules if you're an
HTML::Template user.</p>
</dd>

<dt>Template 2.14</dt>
<dd>

<p>Install the Perl Template Toolkit if you plan to write your content
formatting templates in Template Toolkit rather than in Mason or
HTML::Template.</p>
</dd>

<dt>Encode</dt>
<dd>

<p>The Encode module comes with and only works with Perl 5.8.0 and later.
Install it you plan to support any character encodings other than UTF-8 in the
Bricolage UI.</p>
</dd>

<dt>Pod::Simple and Test::Pod 0.95</dt>
<dd>

<p>These modules help to test the Bricolage API documentation,
but are not otherwise necessary.</p>
</dd>

<dt>Devel::Profiler 0.03</dt>
<dd>

<p>This module can be useful if you experience performance problems with Bricolage and need to profile it to identify the bottleneck.  You can always
install it later if you need it.</p>
</dd>

<dt>Apache::SizeLimit</dt>
<dd>

<p>This module is useful for busy Bricolage installations. Because Perl does
not return memory to the operating system when it has finished with it, the
Apache/<code>mod_perl</code> processes can sometimes get quite large. This is
especially true if you use the SOAP interface to import or publish a lot of
documents.  Apache::SizeLimit allows you to configure <code>mod_perl</code> to
kill off its processes when they exceed a certain size, thus returning the
memory to the OS. This is the best way to keep the size of Bricolage under
control in a busy environment.</p>
</dd>

<dt>Net::FTPServer</dt>
<dd>

<p>This module is necessary to use the Bricolage virtual FTP server.  The
virtual FTP server makes it easy to edit Bricolage templates via FTP. It's a
very nice feature when you're doing a lot of template development work,
offering a more integrated interface for your favorite editor than the
cut-and-paste approach of the UI. The downside is that FTP is an unencrypted
protocol, so it sends passwords used to log in to the Bricolage virtual FTP
server sent in the clear. This may not be so important if you're using
Bricolage behind a firewall or on a VPN, and is irrelevant if you're not using
SSL, because you're already sending passwords in the clear; but don't do
that.</p>

</dd>

<dt>Net::SFTP 0.08</dt>
<dd>

<p>This module is necessary if you plan to distribute document files to your
delivery server via secure FTP. Bricolage supports file system copying, FTP,
secure FTP, and DAV distribution.</p>
</dd>

<dt>HTTP::DAV</dt>
<dd>

<p>Install this module if you plan to distribute document files to your
delivery server via DAV.</p>
</dd>

<dt>Text::Levenshtein</dt>
<dd>

<p>This module is an optional alternative to the required Text::Soundex module.
Bricolage uses it to analyze field names and suggest alternatives for
misspellings in the <q>Super Bulk Edit</q> interface. Either of these modules
is fine, although many people consider Text::Levenshtein to have a superior
algorithm. I'll show an example of how this works in the Super Bulk Edit
interface in a later article.</p>

</dd>

<dt>Crypt::SSLeay</dt>
<dd>

<p>Install this module if you plan to use SSL with Bricolage.  It allows the
SOAP clients to negotiate an encrypted connection to Bricolage.</p>

</dd>

<dt>Imager</dt>
<dd>

<p>This module is necessary if you plan to enable thumbnail images in Bricolage
&#x2014; why wouldn't you want that? You'll need to make sure that you first
have all of the supporting libraries you need installed, such as
<em>libpng</em>, <em>libtiff</em>, and <em>libgif</em> (or <em>giflib</em>).
I'll discuss enabling thumbnail support in the next article.</p>

</dd>

<dt>Text::Aspell, XML::DOM, and CGI</dt>
<dd>

<p>These modules are necessary to use the spell-checking available with the
optional HTMLArea module. I'll discuss HTMLArea support in the next
article.</p>

</dd>
</dl>













<h4>Back to Installation Configuration</h4>

<p>After the Bricolage installer has determined which Perl module dependencies need to be satisfied, it moves on to checking the Apache dependencies,
using the path to the <code>httpd</code> binary we provided earlier:</p>

<pre><code>==&gt; Finished Probing Required Perl Modules &lt;==

/usr/bin/perl inst/apache.pl


==&gt; Probing Apache Configuration &lt;==

Extracting configuration data from `/usr/local/apache/bin/httpd -V`.
Reading Apache conf file: /usr/local/apache/conf/httpd.conf.
Extracting static module list from `/usr/local/apache/bin/httpd -l`.
Your Apache supports loadable modules (DSOs).
Found Apache user: nobody
Found Apache group: nobody
Checking for required Apache modules...
All required modules found.
====================================================================

Your Apache configuration suggested the following defaults.  Press
[return] to confirm each item or type an alternative.  In most cases
the default should be correct.

Apache User:                     [nobody]</code></pre>

<p>The most important settings relative to Apache are the Apache user, group,
and port, as well as the domain name of your new Bricolage server. The
Bricolage installer probes the default Apache <em>httpd.conf</em> file to
select default values, so you can often accept these:</p>

<pre><code>Apache User:                     [nobody] <strong>[Return]</strong>
Apache Group:                    [nobody] <strong>[Return]</strong>
Apache Port:                     [80] <strong>[Return]</strong>
Apache Server Name:              [geertz.example.com] <strong>bricolage.example.com</strong></code></pre>

<p>Here I've elected only to change the hostname for my Bricolage server.
Because Bricolage requires its own hostname to run, I've just given it a
meaningful name. Be sure to set up DNS as necessary to point to your
Bricolage-specific domain name. You can also run Bricolage on alternate ports,
which can be useful on a server running Bricolage in addition to an existing web server (see the Bricolage web site for more information on <a
href="http://www.bricolage.cc/docs/howtos/2004/09/18/separate_instance_config/"
title="Running Bricolage on the Same Machine as the Front-End Server">running
Bricolage concurrent with another web server process</a>).</p>

<p>Bricolage will also check to see if your Apache binary includes support for
<code>mod_ssl</code> or Apache-SSL. If so, it will ask if you wish to use SSL
support with Bricolage:</p>

<pre><code>Do you want to use SSL? [no] <strong>yes</strong>
SSL certificate file location [/usr/local/apache/conf/ssl.crt/server.crt] <strong>[Return]</strong>
SSL certificate key file location [/usr/local/apache/conf/ssl.key/server.key] <strong>[Return]</strong>
Apache SSL Port:                 [443] <strong>[Return]</strong></code></pre>

<p>Here I've elected to use the default values. If your Apache server has both
<code>mod_ssl</code> and Apache-SSL support, the installer will prompt to find
out which you wish to use. The installer will pull the default SSL certificates
from the Apache <em>conf</em> directory; type in alternatives if you want to
use different certificates or if the installer couldn't find any.</p>

<p>Once it has all of the Apache configuration information in hand, the
Bricolage installer moves on to gathering PostgreSQL information:</p>

<pre><code>==&gt; Finished Probing Apache Configuration &lt;==

/usr/bin/perl inst/postgres.pl


==&gt; Probing PostgreSQL Configuration &lt;==

Extracting postgres include dir from /usr/local/pgsql/bin/pg_config.
Extracting postgres lib dir from /usr/local/pgsql/bin/pg_config.
Extracting postgres bin dir from /usr/local/pgsql/bin/pg_config.
Finding psql.
Finding PostgreSQL version.</code></pre>

<p>In order to create the Bricolage database and populate it with default data,
the installer needs access to the database server as the PostgreSQL
administrative or <q>Root</q> user, usually <q>postgres</q>. Then it will ask
you to pick names for the Bricolage database and PostgreSQL user, which it will
create:</p>

<pre><code>Postgres Root Username [postgres] <strong>[Return]</strong>
Postgres Root Password (leave empty for no password) [] <strong>[Return]</strong>
Postgres System Username [postgres] <strong>[Return]</strong>
Bricolage Postgres Username [bric] <strong>[Return]</strong>
Bricolage Postgres Password [NONE] <strong>password</strong>
Are you sure you want to use 'password'? [yes] <strong>[Return]</strong>
Bricolage Database Name [bric] <strong>[Return]</strong></code></pre>

<p>Here I've accepted the default value for the <q>Postgres Root
Username</q>. I left the password empty because by default PostgreSQL allows
local users to access the server without a username. Instances of PostgreSQL
installed from a package may have other authentication rules; consult the
documentation for your installation of PostgreSQL for details. The <q>Postgres
System Username</q> is necessary only if you're running PostgreSQL on the same
box as Bricolage. If so, then you'll need to type in the Unix username under
which PostgreSQL runs (also usually <q>postgres</q>). If PostgreSQL is running
on another box, enter <q>root</q> or some other real local username for this
option.</p>

<p>You can give your Bricolage database and PostgreSQL user any names you like,
but the defaults are typical. You must provide a password for the Bricolage
PostgreSQL username (here I've entered <q>password</q>). Next, the Bricolage
installer will prompt for the location of your PostgreSQL server:</p>

<pre><code>Postgres Database Server Hostname (default is unset, i.e. local domain socket)
      [] <strong>[Return]</strong>
Postgres Database Server Port Number (default is local domain socket)
      [] <strong>[Return]</strong></code></pre>

<p>Here I've accepted the defaults, because I'm running PostgreSQL on the local
box and on the default port. In fact, if you leave these two options to their
empty defaults, Bricolage will use a Unix socket to communicate with the
PostgreSQL server. This has the advantage of not only being faster than a
TCP/IP connection, but it also allows you to turn off PostgreSQL's TCP/IP
support if you worry about having another port open on your server. However, if
PostgreSQL is running on a separate box, you must enter a host name or IP
address. If it's running on a port other than the default port (5432), enter
the appropriate port number.</p>

<p>Next, the Bricolage installer asks how you want to install its various
parts:</p>

<pre><code>==&gt; Finished Probing PostgreSQL Configuration &lt;==

/usr/bin/perl inst/config.pl


==&gt; Gathering User Configuration &lt;==

========================================================================

Bricolage comes with two sets of defaults.  You'll have the
opportunity to override these defaults but choosing wisely here will
probably save you the trouble.  Your choices are:

  s - "single"   one installation for the entire system

  m - "multi"    an installation that lives next to other installations
                 on the same machine

Your choice? [s] </code></pre>

<p>There are essentially two ways to install Bricolage: The first,
<q>single</q>, assumes that you will only ever have a single instance of
Bricolage installed on your server. In such a case, it will install all of the
Perl modules into the appropriate Perl <code>@INC</code> directory like any
other Perl module and the executables into the same <em>bin</em> directory as
your instance of Perl (such as <em>/usr/local/bin</em>).</p>

<p>The second way to install Bricolage is with the <q>multi</q> option. This
option allows you to have multiple versions of Bricolage installed on a single
server. Even if you never intend to do this, I generally recommend taking this
approach, because the upshot is that <em>all</em> of your Bricolage files (with
the exception of the database, the location of which depends on your PostgreSQL
configuration) will install into a single directory.  This makes it very easy
to keep track of where everything is.</p>

<pre><code>Your choice? [s] <strong>m</strong></code></pre>

<p>Next, the Bricolage installer wants to know where to install Bricolage.  The
default option, <em>/usr/local/bricolage</em>, is the easiest, but you can put
it anywhere you like. All of the other relevant directories will by default be
subdirectories of this directory, but you can change them too. For example, you
might prefer to have the error log file in the typical log directory for your
OS, such as <em>/var/log</em>. Personally, I prefer to keep everything in one
place.</p>

<pre><code>Bricolage Root Directory [/usr/local/bricolage] <strong>[Return]</strong>
Temporary Directory [/usr/local/bricolage/tmp] <strong>[Return]</strong>
Perl Module Directory [/usr/local/bricolage/lib] <strong>[Return]</strong>
Executable Directory [/usr/local/bricolage/bin] <strong>[Return]</strong>
Man-Page Directory (! to skip) [/usr/local/bricolage/man] <strong>[Return]</strong>
Log Directory [/usr/local/bricolage/log] <strong>[Return]</strong>
PID File Location [/usr/local/bricolage/log/httpd.pid] <strong>[Return]</strong>
Mason Component Directory [/usr/local/bricolage/comp] <strong>[Return]</strong>
Mason Data Directory [/usr/local/bricolage/data] <strong>[Return]</strong></code></pre>

<p>If you elected for the <q>single</q> installation option, then your choices
would look more like:</p>

<pre><code>Bricolage Root Directory [/usr/local/bricolage] <strong>[Return]</strong>
Temporary Directory [/tmp] <strong>[Return]</strong>
Perl Module Directory [/usr/local/lib/perl5/site_perl/5.8.5] <strong>[Return]</strong>
Executable Directory [/usr/local/bin] <strong>[Return]</strong>
Man-Page Directory (! to skip) [/usr/local/man] <strong>[Return]</strong>
Log Directory [/usr/local/apache/logs/] <strong>[Return]</strong>
PID File Location [/usr/local/apache/logs/httpd.pid] <strong>[Return]</strong>
Mason Component Directory [/usr/local/bricolage/comp] <strong>[Return]</strong>
Mason Data Directory [/usr/local/bricolage/data] <strong>[Return]</strong></code></pre>

<p>Again, you can customize these as you like. That's it for the installation
configuration!</p>

<pre><code>==&gt; Finished Gathering User Configuration &lt;==


===========================================================
===========================================================

Bricolage Build Complete. You may now proceed to
"make cpan", which must be run as root, to install any
needed Perl modules; then to
"make test" to run some basic tests of the API; then to
"make install", which must be run as root.

===========================================================
===========================================================</code></pre>

<h4>Installing CPAN Modules</h4>

<p>Whether you elected to install optional CPAN modules, the Bricolage
installer still might have identified missing module dependencies, so it's a
good idea to follow the helpful instructions and run <code>make cpan</code>. Of
course, the <code>cpan</code> target will implicitly execute if you just moved
on to <code>make test</code>, but it's a good idea to run it on its own to have
more control over things and to identify any possible problems.  My system had
all of the dependencies satisfied already (I've done this once or twice
before), but you'll recall that I had elected to install the optional
Text::Leventshtein module. The Bricolage installer will therefore attempt to
install it from CPAN.</p>

<pre><code>% make cpan
/usr/bin/perl inst/cpan.pl
This process must (usually) be run as root.
Continue as non-root user? [yes] <strong>n</strong>
make: *** [cpan] Error 1</code></pre>

<p>Whoops! Don't make the mistake I just made! <code>make cpan</code> must run
as the root user.</p>

<pre><code>% sudo make cpan 
/usr/bin/perl inst/cpan.pl


==&gt; Installing Modules From CPAN &lt;==

CPAN: Storable loaded ok
CPAN: LWP::UserAgent loaded ok

&x2026;

Found Text::Levenshtein.  Installing...
Running install for module Text::Levenshtein
Running make for J/JG/JGOLDBERG/Text-Levenshtein-0.05.tar.gz
Fetching with LWP:
  http://www.perl.com/CPAN/authors/id/J/JG/JGOLDBERG/Text-Levenshtein-0.05.tar.gz

&x2026;

Text::Levenshtein installed successfully.


==&gt; Finished Installing Modules From CPAN &lt;==</code></pre>

<p>I've truncated the output here, but you should have the general idea. The
Bricolage installer uses the Perl <code>CPAN</code> module to install any
needed modules from CPAN.  If you encounter any problems, you might need to
stop and manually configure and install a module. If so, once you're ready to
continue with the Bricolage installation, delete the <em>modules.db</em> file
in order to force the installer to detect all modules again so that it notices
that you now have the module installed:</p>

<pre><code>% rm modules.db
% sudo make cpan</code></pre>

<h4>Running Tests</h4>

<p>The next step in installing Bricolage is optional, but will help identify
any pitfalls before going any further. That's running the test suite.</p>

<pre><code>% make test                                    
PERL_DL_NONLAZY=1 /usr/bin/perl inst/runtests.pl
t/Bric/Test/Runner....ok                                                     
All tests successful, 7 subtests skipped.
Files=1, Tests=2510, 21 wallclock secs ( 8.83 cusr +  1.39 csys = 10.22 CPU)</code></pre>

<h4>Make it So!</h4>

<p>Once all tests pass, you're ready to install Bricolage:</p>

<pre><code>% sudo make install
/usr/bin/perl inst/is_root.pl
/usr/bin/perl inst/cpan.pl
All modules installed. No need to install from CPAN.
rm -f lib/Makefile
cd lib; /usr/bin/perl Makefile.PL; make install
&x2026;
==&gt; Finished Copying Bricolage Files &lt;==</code></pre>

<p>If you happened to select a database name for Bricolage for a database that
already exists, the installer will warn you about it:</p>

<pre><code>/usr/bin/perl inst/db.pl


==&gt; Creating Bricolage Database &lt;==

Becoming postgres...
Creating database named bric...
Database named "bric" already exists.  Drop database? [no] </code></pre>

<p>Now you have a choice. If you elect to dropt the database, the Bricolage
installer will drop it and then create a new copy &mdash; but it must have
<q>Root</q> user access to the PostgreSQL server. In other situations you might
want to continue with the installed database, as in the case when your ISP has
created the database for you ahead of time. You will also receive a prompt if
the PostgreSQL user for the Bricolage database already exists. Again, you can
either opt to drop and recreate the user or continue with the existing
username:</p>

<pre><code>Database named "bric" already exists.  Drop database? [no] <strong>[Return]</strong>
Create tables in existing database? [yes] <strong>[Return]</strong>
Creating user named bric...
User named "bric" already exists. Continue with this user? [yes] <strong>[Return]</strong>
Loading Bricolage Database (this may take a few minutes).</code> </pre>

<p>At this point, the Bricolage installer is creating the Bricolage database.
On my Mac, it takes about a minute to create the database, but your mileage may
vary. Once that ends, the installer grants the appropriate PostgreSQL
permissions and the installation is complete!</p>

<pre><code>Done.
Finishing database...
Done.
/usr/bin/perl inst/db_grant.pl
Becoming postgres...
Granting privileges...
Done.
/usr/bin/perl inst/done.pl


=========================================================================
=========================================================================

                   Bricolage Installation Complete

You may now start your Bricolage server with the command (as root):

  /usr/local/bricolage/bin/bric_apachectl start

If this command fails, look in your error log for more information:

  /usr/local/bricolage/log/error_log

Once your server is started, open a web browser and enter the URL for
your server:

  http://bricolage.example.com

Login in as "admin" with the default password "change me now!". Your
first action should be changing this password. Navigate into the ADMIN -&gt;
SYSTEM -&gt; Users menu, search for the "admin" user, click the "Edit"
link, and change the password.

=========================================================================
=========================================================================</code></pre>

<h4>Start 'er Up and Login</h4>

<p>That's it. Bricolage should start with the command helpfully provided by the
installer:</p>

<pre><code>% sudo /usr/local/bricolage/bin/bric_apachectl start
bric_apachectl start: starting httpd
bric_apachectl start: httpd started</code></pre>

<p>If you set the Bricolage root directory to something other than
<em>/usr/local/bricolage</em>, you'll need to set the
<code>$BRICOLAGE_CONF</code> environment variable, first. For example, using
Bash or Zsh, do:</p>

<pre><code>% BRICOLAGE_ROOT=/opt/bricolage \
&gt; sudo /opt/bricolage/bin/bric_apachectl start
bric_apachectl start: starting httpd
bric_apachectl start: httpd started</code></pre>

<p>Once Bricolage successfully starts, point your browser to the appropriate
URL and login as the <q>admin</q> user and change the password!</p>

<h3><a id="upnext">Up Next: Bricolage Runtime Configuration</a></h3>

<p>Now that you have Bricolage up and running, you can start using it. Consult
the documentation as directed in the <em>README</em> file to get started. Feel
free to also subscribe to the <a href="http://www.bricolage.cc/support/lists/"
title="Bricolage Mail Lists">Bricolage mail lists</a> to ask any questions and
to learn from the brave souls who have gone before you.</p>

<p>If you're interested in tuning your Bricolage installation, be sure to catch
my next article, <q>Bricolage Runtime Configuration</q>, in which I'll cover
all of the options when configuring Bricolage for added functionality and
features.</p>











        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1006" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/10/21/taint_testing_kata.html" rel="bookmark">Perl Code Kata: Testing Taint</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.modernperlbooks.com/">chromatic</a></span> on <abbr class="published" title="2004-10-21T00:00:00-08:00">October 21, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>To be a better programmer, practice programming.</p>

<p>It's not enough to practice, though. You must practice well and
persistently. You need to explore branches and ideas and combinations as
they come to your attention. Set aside some time to experiment with a new
idea to see what you can learn and what you can use in your normal
programming.</p>

<p>How do you find new ideas? One way is through <a
href="http://pragprog.com/pragdave/Practices/CodeKata.rdoc">code katas</a>,
short pieces of code that start your learning.</p>

<p>This article is the first in a series of code kata for Perl programmers.
All of these exercises take place in the context of writing tests for Perl
programs.</p>

<p>Why give examples in the context of testing? First, to promote the idea
of writing tests. One of the best techniques of writing good, simple, and
effective software is to practice test-driven development. Second, because
writing tests well is challenging. It often pushes programmers to find
creative solutions to difficult problems.</p>

<h3>Taint Testing Kata #1</h3>

<p>One of Perl's most useful features is the idea of tainting. If you
enable taint mode, Perl will mark every piece of data that comes from an
insecure source, such as insecure input, with a taint flag. If you want to
use a piece of tainted data in a potentially dangerous way, you must
untaint the data by verifying it.</p>

<p>The <a href="http://aspn.activestate.com/ASPN/CodeDoc/CGI-Untaint/CGI/Untaint.html">CGI::Untaint</a>
module family makes this process much easier for web programs &mdash; which
often need the most taint protection. There are modules to untaint dates,
email addresses, and credit card numbers.</p>

<p>Recently, I wrote <a
href="http://www.cpan.org/modules/by-module/CGI/CGI-Untaint-boolean-0.11.readme">CGI::Untaint::boolean</a>
to untaint data that comes from checkboxes in web forms. It's a simple module,
taking fewer than 20 lines of sparse code that untaints any incoming data and
translates a form value of <code>on</code> into a true value and anything else
(including a non-existent parameter) into false.</p>

<p>Writing the tests proved to be slightly more difficult. How could I make
sure that the incoming parameter provided to the module was tainted
properly? How could I make sure that the module untaints it properly?</p>

<p>Given the code for CGI::Untaint::boolean, how would you write the
tests?</p>

<pre><code>package CGI::Untaint::boolean;

use strict;

use base 'CGI::Untaint::object';

sub _untaint_re { qr/^(on)$/ }

sub is_valid
{
    my $self  = shift;
    my $value = $self-&gt;value();

    return unless $value and $value =~ $self-&gt;_untaint_re();

    $self-&gt;value( $value eq 'on' ? 1 : 0 );
    return 1;
}

1;</code></pre>

<p>Your code should check that it passes in a tainted value and that it
receives an untainted value. You should also verify that the resulting
value, when extracted from the handler, is not tainted, no matter its
previous status.</p>

<p>Write using one of Perl's core test modules. I prefer <a
href="http://www.perldoc.com/perl5.8.4/lib/Test/Simple.html">Test::Simple</a> and <a
href="http://www.perldoc.com/perl5.8.4/lib/Test/More.html">Test::More</a>, but if you
must use <a href="http://www.perldoc.com/perl5.8.4/lib/Test.html">Test</a>, go ahead.
Assume that <a
href="http://www.perldoc.com/perl5.8.4/lib/Test/Harness.html">Test::Harness</a> will
honor the <code>-T</code> flag passed on the command line.</p>

<p>Don't read the tests that come with CGI::Untaint::boolean unless you're
really stuck. The next section has a further explanation of that technique.  For
best results, spend at least 30 minutes working through the kata on your own
before looking at the hints.</p>













<h3>Tips, Tricks, Suggestions, and One Solution</h3>

<p>To test tainting properly, you must understand its effects. When Perl
sees the <code>-T</code> or <code>-t</code> flags, it immediately marks
some of its data and environment as tainted. This includes the
<code>PATH</code> environment variable.</p>

<p>Also, taint is sticky. If you use a piece of tainted data in an
expression, it will taint the results of that expression.</p>

<p>Both of those facts make it easy to find a source of taint.
CGI::Untaint::boolean's do the following to make tainted data:</p>

<pre><code>my $tainted_on = substr( 'off' . $ENV{PATH}, 0, 3 );</code></pre>

<p>Concatenating the clean string <code>off</code> with the tainted value
of the <code>PATH</code> environment variable produces a tainted string.
The <code>substr()</code> expression then returns the equivalent of
original string with tainting added.</p>

<p>How can you tell if a variable holds a tainted value? The Perl FAQ gives one
solution that attempts to perform an unsafe operation with tainted data, but I
prefer the <a
href="http://www.perldoc.com/perl5.8.0/lib/Scalar/Util.html">Scalar::Util</a> module's
<code>tainted()</code> function. It's effectively the same thing, but I don't
have to remember any abnormal details.</p>

<p>This technique does rely on Test::Harness launching the test program
with the <code>-T</code> flag. If that's not an option, the test program
itself could launch other programs with that flag, using the
<code>$^X</code> variable to find the path of the currently executing Perl.
It may be worthwhile to check that the <code>-T</code> flag is in effect
before skipping the rest of the tests or launching a new process and
reporting its results.</p>

<p>The <code>prove</code> utility included with recent versions of
Test::Harness may come in handy; launch the test with <code>prove -T
<em>testfile.t</em></code> to run under taint mode.  See <code>perldoc
prove</code> for more information.</p>

<p>You could also use this approach to launch programs designed to abort if
the untainting fails, checking for exit codes automatically. It seems much
easier to use Scalar::Util though.</p>

<h3>Conclusion</h3>

<p>This should give you everything you need to solve the problem. Check
your code against the tests for CGI::Untaint::boolean.</p>

<p>If you've found a differently workable approach, I'd like to hear from
you. Also, if you have suggestions for another kata (or would like to write
one), please let me know.</p>

<p><em>chromatic is the author of <a href="http://onyxneon.com/books/modern_perl/">Modern Perl</a>. In his spare time, he has been working on <a href="https://trendshare.org/how-to-invest/">helping novices understand stocks and investing</a>.</em></p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1004" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/10/14/file_editing.html" rel="bookmark">FMTYEWTK About Mass Edits In Perl</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Geoff Broadwell</span> on <abbr class="published" title="2004-10-14T00:00:00-08:00">October 14, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>For those not used to the terminology, FMTYEWTK stands for <em>F</em>ar
<em>M</em>ore <em>T</em>han <em>Y</em>ou <em>E</em>ver <em>W</em>anted
<em>T</em>o <em>K</em>now. This one is fairly light as FMTYEWTKs usually go. In
any case, the question before us is, "How do you apply an edit against a list
of files using Perl?" Well, that depends on what you want to do....</p>

<h3><a id="beginning">The Beginning</a></h3>

<p>If you only want to read in one or more files, apply a regex to the
contents, and spit out the altered text as one big stream -- the best approach is
probably a one-liner such as the following:</p>

<pre><code>perl -p -e "s/Foo/Bar/g" <em>&lt;FileList&gt;</em></code></pre>

<p>This command calls <code>perl</code> with the options <code>-p</code> and
<code>-e "s/Foo/Bar/g"</code> against the files listed in
<code><em>FileList</em></code>. The first argument, <code>-p</code>, tells Perl
to <em>p</em>rint each line it reads after applying the alteration. The second
option, <code>-e</code>, tells Perl to <em>e</em>valuate the provided
substitution regex rather than reading a script from a file. The Perl interpreter
then evaluates this regex against every line of all (space separated) files
listed on the command line and spits out one huge stream of the concatenated
fixed lines.</p>

<p>In standard fashion, Perl allows you to concatenate options without
arguments with following options for brevity and convenience.  Therefore,
you'll more often see the previous example written as:</p>

<pre><code>perl -pe "s/Foo/Bar/g" <em>&lt;FileList&gt;</em></code></pre>

<h3><a id="inplace">In-place Editing</a></h3>

<p>If you want to edit the files in place, editing each file before going on to
the next, that's pretty easy, too:</p>

<pre><code>perl -pi.bak -e "s/Foo/Bar/g" <em>&lt;FileList&gt;</em></code></pre>

<p>The only change from the last command is the new option <code>-i.bak</code>,
which tells Perl to operate on files <em>i</em>n-place, rather than
concatenating them together into one big output stream. Like the
<code>-e</code> option, <code>-i</code> takes one argument, an extension to add
to the original file names when making backup copies; for this example I chose
<code>.bak</code>.  <strong>Warning:</strong> If you execute the command twice,
you've most likely just overwritten your backups with the changed versions from
the first run. You probably didn't want to do that.</p>

<p>Because <code>-i</code> takes an argument, I had to separate out the
<code>-e</code> option, which Perl otherwise would interpret as the argument to
<code>-i</code>, leaving us with a backup extension of <code>.bake</code>,
unlikely to be correct unless you happen to be a pastry chef. In addition, Perl
would have thought that <code>"s/Foo/Bar/"</code> was the filename of the
script to run, and would complain when it could not find a script by that
name.</p>

<h3><a id="multiple">Running Multiple Regexes</a></h3>

<p>Of course, you may want to make more extensive changes than just one regex.
To make several changes all at once, add more code to the evaluated script.
Remember to separate each additional line of code with a semicolon
(technically, you should place a semicolon at the end of each line of code, but
the very last one in any code block is optional). For example, you could make a
series of changes:</p>

<pre><code>perl -pi.bak -e "s/Bill Gates/Microsoft CEO/g;
 	s/CEO/Overlord/g" <em>&lt;FileList&gt;</em></code></pre>

<p>"Bill Gates" would then become "Microsoft Overlord" throughout the files.
(Here, as in all examples, we ignore such finicky things as making sure we
don't change "HERBACEOUS" to "HERBAOverlordUS"; for that kind of information,
refer to a good treatise on regular expressions, such as Jeffrey Friedl's
impressive book <a href="http://www.oreilly.com/catalog/regex2/">Mastering
Regular Expressions, 2nd Edition</a>. Also, I've wrapped the command to
fit, but you should type it in as just one line.)</p>

<h3><a id="printing">Doing Your Own Printing</a></h3>

<p>You may wish to override the behavior created by <code>-p</code>, which
prints every line read in, after any changes made by your script. In this case,
change to the <code>-n</code> option. <code>-p -e "s/Foo/Bar/"</code> is
roughly equivalent to <code>-n -e "s/Foo/Bar/; print"</code>. This allows you
to write interesting commands, such as removing lines beginning with hash marks
(Perl comments, C-style preprocessor directives, etc.):</p>

<pre><code>perl -ni.bak -e "print unless /^\s*#/;" <em>&lt;FileList&gt;</em></code></pre>

<h3><a id="fields">Fields and Scripts</a></h3>

<p>Of course, there are far more powerful things you can do with this. For
example, imagine a flat-file database, with one row per line of the file, and
fields separated by colons, like so:</p>

<pre><code>Bill:Hennig:Male:43:62000
Mary:Myrtle:Female:28:56000
Jim:Smith:Male:24:50700
Mike:Jones:Male:29:35200
...</code></pre>

<p>Suppose you want to find everyone who was over 25, but paid less than
$40,000. At the same time, you'd like to document the number and percentage of
women and men found. This time, instead of providing a mini-script on the
command line, we'll create a file, <code>glass.pl</code>, which contains the
script.  Here's how to run the query:</p>

<pre><code>perl -naF':' glass.pl <em>&lt;FileList&gt;</em></code></pre>

<p><em><code>glass.pl</code> contains the following</em>:</p>

<pre><code>BEGIN { $men = $women = $lowmen = $lowwomen = 0; }

next unless /:/;
/Female/ ? $women++ : $men++;
if ($F[3] &gt; 25 and $F[4] &lt; 40000)
    { print; /Female/ ? $lowwomen++ : $lowmen++; }

END {
print "\n\n$lowwomen of $women women (",
      int($lowwomen / $women * 100),
      "%) and $lowmen of $men men (",
      int($lowmen / $men * 100),
      "%) seem to be underpaid.\n";
}</code></pre>

<p>Don't worry too much about the syntax, other than to note some of the awk
and C similarities. The important thing here and in later sections is to see
how Perl makes these problems easily solvable.</p>

<p>Several new features appear in this example; first, if there is no
<code>-e</code> option to evaluate, Perl assumes the first filename listed, in
this case <code>glass.pl</code>, refers to a Perl script for it to execute. Secondly, two new options make it easy to deal with field-based data. <code>-a</code> (<em>a</em>utosplit mode) takes each line and splits its fields
into the array <code>@F</code>, based on the field delimiter given by the
<code>-F</code> (<em>F</em>ield delimiter) option, which can be a string or a
regex. If no <code>-F</code> option exists, the field delimiter defaults to
<code>' '</code> (one single-quoted space). By default, arrays in Perl are
zero-based, so <code>$F[3]</code> and <code>$F[4]</code> refer to the age and
pay fields, respectively.  Finally, the <code>BEGIN</code> and <code>END</code>
blocks allow the programmer to perform actions before file reading begins and
after it finishes, respectively.</p>

<h3><a id="files">File Handling</a></h3>

<p>All of these little tidbits have made use only of data from within the files
being operated on. What if you want to be able to read in data from elsewhere?
For example, imagine that you had some sort of file that allows includes; in
this case, we'll assume that you somehow specify these files by relative
pathname, rather than looking them up in an include path.  Perhaps the includes
look like the following:</p>

<pre><code>...
#include foo.bar, baz.bar, boo.bar
...</code></pre>

<p>If you want to see what the file looks like with the includes placed into
the master file, you might try something like this:</p>

<pre><code>perl -ni.bak -e "if (s/#include\s+//) {foreach $file
 (split /,\s*/) {open FILE, '&lt;', $file; print &lt;FILE&gt;}}
 else {print}" <em>&lt;FileList&gt;</em></code></pre>

<p>To make it easier to see what's going on here, this is what it looks like
with a full set of line breaks added for clarity:</p>

<pre><code>perl -ni.bak -e "
        if (s/#include\s+//) {
            foreach $file (split /,\s*/) {
                open FILE, '&lt;', $file;
                print &lt;FILE&gt;
            }
        } else {
            print
        }
    " <em>&lt;FileList&gt;</em></code></pre>


<p>Of course, this only expands one level of include, but then we haven't
provided any way for the script to know when to stop if there's an include
loop. In this little example, we take advantage of the fact that the
substitution operator returns the number of changes made, so if it manages to
chop off the <code>#include</code> at the beginning of the line, it returns a
non-zero (true) value, and the rest of the code splits apart the list of
includes, opens each one in turn, and prints its entire contents.</p>

<p>There are some handy shortcuts as well: if you open a new file using the
name of an old file handle (<code>FILE</code> in this case), Perl automatically
closes the old file first.  In addition, if you read from a file using the
<code>&lt;&gt;</code> operator into a list (which the <code>print</code>
function expects), it happily reads in the entire file at once, one line per
list entry.  The <code>print</code> call then prints the entire list, inserting
it into the current file, as expected. Finally, the <code>else</code> clause
handles printing non-include lines from the source, because we are using
<code>-n</code> rather than <code>-p</code>.</p>

<h3><a id="filelists">Better File Lists</a></h3>

<p>The fact that it is relatively easy to handle filenames listed within other
files indicates that it ought to be fairly easy to deal entirely with files
read from some other source than a list on the end of the command line. The
simplest case is to read all of the file contents from standard input as a
single stream, which is common when building up pipes. As a matter of fact,
this is so common that Perl automatically switches to this mode if there are no
files listed on the command line:</p>

<pre><code><em>&lt;Source&gt;</em> | perl -pe "s/Foo/Bar/g" | <em>&lt;Sink&gt;</em></code></pre>

<p>Here <em>Source</em> and <em>Sink</em> are the commands that generate the
raw data and handle the altered output from Perl, respectively. Incidentally, the
filename consisting of a single hyphen (<code>-</code>) is an explicit alias
for standard input; this allows the Perl programmer to merge input from files
and pipes, like so:</p>

<pre><code><em>&lt;Source&gt;</em> | perl -pe "s/Foo/Bar/g" header.bar - footer.bar
 | <em>&lt;Sink&gt;</em></code></pre>

<p>This example first reads a header file, then the input from the pipe source,
and then a footer file &mdash; the whole mess.  The program modifies this text
and sends it through to the out pipe.</p>

<p>As I mentioned earlier, when dealing with multiple files it is usually
better to keep the files separate, by using in-place editing or by explicitly
handling each file separately. On the other hand, it can be a pain to list all
of the files on the command line, especially if there are a lot of files, or
when dealing with files generated programmatically.</p>

<p>The simplest method is to read the files from standard input, pushing them
onto <code>@ARGV</code> in a <code>BEGIN</code> block; this has the effect of
tricking Perl into thinking it received all of the filenames on the command
line!  Assuming the common case of one filename per input line, the following
will do the trick:</p>

<pre><code><em>&lt;FilenamesSource&gt;</em> | perl -pi.bak -e "BEGIN {push @ARGV,
 &lt;STDIN&gt;; chomp @ARGV} s/Foo/Bar/g"</code></pre>

<p>Here we once again use the shortcut that reading in a file in a list context
(which <code>push</code> provides) will read in the entire file.  This adds the
entire contents, one filename per entry, to the <code>@ARGV</code> array, which
normally contains the list of arguments to the script. To complete the trick,
we <code>chomp</code> the line endings from the filenames, because Perl
normally returns the line ending characters (a carriage return and/or a line
feed) when reading lines from a file.  We don't want to consider these to be
part of the filenames. (On some platforms, you <em>could</em> actually have
filenames containing line ending characters, but then you'd have to make the
Perl code a little more complex, and you deserve to figure that out for
yourself for trying it in the first place.)</p>

<h3><a id="response">Response Files</a></h3>

<p>Another common design is to provide filenames on the command line as usual,
treating filenames starting with an <code>@</code> specially.  The program
should consider their contents to be lists of filenames to insert directly into
the command line. For example, if the contents of the file
<code>names.baz</code> (often called a <em>response file</em>) are:</p>

<pre><code>two
three
four</code></pre>

<p>then this command:</p>

<pre><code>perl -pi.bak -e "s/Foo/Bar/g" one @names.baz five</code></pre>

<p>should work equivalently to:</p>

<pre><code>perl -pi.bak -e "s/Foo/Bar/g" one two three four five</code></pre>

<p>To make this work, we once again need to do a little magic in a
<code>BEGIN</code> block. Essentially, we want to parse through the
<code>@ARGV</code> array, looking for filenames that begin with <code>@</code>.
We pass through any unmarked filenames, but for each response file found, we
read in the contents of the response file and insert the new list of filenames
into <code>@ARGV</code>.  Finally, we chomp the line endings, just as in the <a
href="#filelists">previous section</a>.  This produces a canonical file list in
<code>@ARGV</code>, just as if we'd specified all of the files on the command
line. Here's what it looks like in action:</p>

<pre><code>perl -pi.bak -e "BEGIN {@ARGV = map {s/^@// ? @{open RESP,
 '&lt;', $_; [&lt;RESP&gt;]} : $_} @ARGV; chomp @ARGV} s/Foo/Bar/g"
 <em>&lt;ResponseFileList&gt;</em></code></pre>

<p>Here's the same code with line breaks added so you can see what's going
on:</p>

<pre><code>perl -pi.bak -e "
        BEGIN {
            @ARGV = map {
                        s/^@// ? @{open RESP, '&lt;', $_;
                                   [&lt;RESP&gt;]}
                               : $_
                    } @ARGV;
            chomp @ARGV
        }
        
        s/Foo/Bar/g
    " <em>&lt;ResponseFileList&gt;</em></code></pre>

<p>The only tricky part is the <code>map</code> block.  <code>map</code>
applies a piece of code to every element of a list, returning a list of the
return values of the code; the current element is in the <code>$_</code>
special variable. The block here checks to see if it could remove a
<code>@</code> from the beginning of each filename. If so, it opens the file,
reads the whole thing into an anonymous temporary array (that's what the square
brackets are there for), and then inserts that array instead of the response
file's name (that's the odd <code>@{...}</code> construct). If there is no
<code>@</code> at the beginning of the filename to remove, the filename goes
directly into the map results. Once we've performed this expansion and chomped
any line endings, we can then proceed with the main work, in this case our
usual substitution, <code>s/Foo/Bar/g</code>.</p>

<h3><a id="recursing">Recursing Directories</a></h3>

<p>For our final example, let's deal with a major weakness in the way we've
been doing things so far &mdash; we're not recursing into directories, instead
expecting all of the files we need to read to appear explicitly on the command
line. To perform the recursion, we need to pull out the big guns:
<code>File::Find</code>. This Perl module provides very powerful recursion
methods.  It also comes standard with any recent version of the Perl
interpreter. The command line is deceptively simple, because all of the brains
are in the script:</p>

<pre><code>perl cleanup.pl <em>&lt;DirectoryList&gt;</em></code></pre>

<p>This script will perform some basic housecleaning, marking all files
readable and writeable, removing those with the extensions <code>.bak</code>,
<code>.$$$</code>, and <code>.tmp</code>, and cleaning up <code>.log</code>
files. For the log files, we will create a master log file (for archiving or
perusal) containing the contents of all of the other logs, and then delete the
logs so that they remain short over time. Here's the script:</p>

<pre><code>use File::Find;

die "All arguments must be directories!"
    if grep {!-d} @ARGV;
open MASTER, '&gt;', 'master.lgm';
finddepth(\&amp;filehandler, @ARGV);
close MASTER;
rename 'master.lgm', 'master.log';

sub filehandler
{
    chmod stat(_) | 0666, $_ unless (-r and -w);
    unlink if (/\.bak$/ or /\.tmp$/ or /\.\$\$\$$/);
    if (/\.log$/) {
        open LOG, '&lt;', $_;
        print MASTER "\n\n****\n$File::Find::name\n****\n";
        print MASTER &lt;LOG&gt;;
        close LOG;
        unlink;
    }
}</code></pre>

<p>This example shows just how powerful Perl and Perl modules can be, and at
the same time just how obtuse Perl can appear to the inexperienced.  In this
case, the short explanation is that the <code>finddepth()</code> function
iterates through all of the program arguments (<code>@ARGV</code>), recursing
into each directory and calling the <code>filehandler()</code> subroutine for
each file. That subroutine then can examine the file and decide what to do with
it. The example checks for readability and writability with <code>-r</code> and
<code>-w</code>, fixing the file's security settings if needed with
<code>chmod</code>. It then <code>unlink</code>s (deletes) any file with a name
ending in any of the three unwanted extensions. Finally, if the extension is
<code>.log</code>, it opens the file, writes a few header lines to the master
log, copies the file into the master log, closes it, and deletes it.</p>

<p>Instead of using <code>finddepth()</code>, which does a depth-first search
of the directories and visits them from the bottom up, we could have used
<code>find()</code>, which does the same depth-first search from the top down.
As a side note, the program writes the master log file with the extension
<code>.lgm</code>, then renames it at the end to have the extension
<code>.log</code>, so as to avoid the possibility of writing the master log
into itself if the program is searching the current directory.</p>

<h3><a id="end"></a>Conclusion</h3>

<p>That's it. Sure, there's a lot more that you could do with these examples,
including adding error checking, generating additional statistics, producing
help text, etc. To learn how to do this, find a copy of <em><a
href="http://www.oreilly.com/catalog/pperl3/">Programming Perl, 3rd
Edition</a></em>, by Larry Wall, Tom Christiansen, and Jon Orwant. This is the
bible (or the Camel, rather) of the Perl community, and well worth the read.
Good luck!</p>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1002" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2004/10/07/code_reviews.html" rel="bookmark">Why Review Code?</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Luke Schubert</span> on <abbr class="published" title="2004-10-07T00:00:00-08:00">October  7, 2004 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>Richard Gabriel of Sun Microsystems suggests that <a href="http://java.sun.com/features/2002/11/gabriel_qa.html">beginning programmers should study the source code for great works of software</a> as part of a <a href="http://www.dreamsongs.com/MFASoftware.html">Master of Fine Arts course in software</a>. Prominent Extreme Programmers talk about finding the <a href="http://c2.com/cgi/wiki?QualityWithoutaName">Quality Without a Name</a> in software, listening to your code, and reworking your code when it "smells."</p>

<p>With this in mind, this article contains a review of one of the "base" Perl modules, available from CPAN but also included as part of any distribution of Perl. It's a module that I particularly like (with algorithms that I can more or less understand); I aim to show why I like it and what you can learn from it.</p>

<h3>Code and Communication</h3>

<p>Reviewing (even reading) source code is not always easy. Most software
doesn't have human readability as a primary goal &#8212; just compilers or
interpreters.  The exception is software written as examples or to help others
learn. This code is primarily of interest in itself and not for what it does.
As far as a computer cares, software would have the same behavior if it had no
comments and all variables named as <code>a1, a2, ...</code> -- as the
obfuscated programming contests prove.  They also prove that we humans then
find it difficult to read. Most literature (including poems, essays, short
stories, novels), on the other hand, has the primary purpose of communicating
with other people, and so is often easier to understand.</p>

<p>Nonetheless, code reviews are still useful. Projects that perform them
usually do so to find bugs or to suggest improvements; they exist for the
benefit of the code writer or tester. Here, we seek to learn from the code, to
take away from it lessons that we can apply to our own code. These are lessons,
or patterns, but not design patterns; the patterns discussed here appear at a
lower level and are more of the order of tips and tricks.</p>

<p>As mentioned above, there are parts of software programs that do exist to
communicate: comments as well as variable and function (or method) names are all about
communicating (with other people).  The challenge for the considerate <a href="#codemaintainer">[1]</a> software developer (who thinks beyond the short term) is to use comments and names to tell the story of the software: what it
is, what it should do, and why the developers made certain choices.  Ideally,
the form of software should match its function <a href="#camel">[2]</a>:
comments and names should explain and clarify the rest of the code, rather than
disagreeing with it, repeating what it says, or being irrelevant. Source code
reviews are part of this process.  They further explain the code to a wider
audience, telling its story in a broader and hopefully deeper way.</p>

<h3>The Review Itself</h3>

<p><a href="http://search.cpan.org/perldoc?Math::Complex">Math::Complex</a> is
an open source Perl package that is part of the core Perl distribution. It
provides methods for complex arithmetic (and overloading of operators).</p>

<p><a href="http://c2.com/cgi/wiki?RaphaelManfredi">Raphael Manfredi</a> created the module in 1996. Since then, first <a href="http://www.hut.fi/~jhi/">Jarkko Hietaniemi</a> and, currently, <a href="http://www.prairienet.org/~dslewart/">Daniel S.  Lewart</a> have maintained it (according to its own comments). My comments below relate to version 1.34.</p>

<p>I should explain that while I've been using Perl for maybe three years, it's
mostly been for test automation and text processing; my day-to-day programming
is primarily in C. I tend to notice the things about Perl that are difficult
(at times verging on impossible) to do in C.</p>

<p>Early on in the <code>Math::Complex</code> package, a huge (and often reused) regular
expression <code>$gre</code> appears:</p>

<pre><code># Regular expression for floating point numbers.
my $gre =
qr'\s*([\+\-]?(?:(?:(?:\d+(?:_\d+)*(?:\.\d*(?:_\d+)*)?|\.\d+(?:_\d+)*)(?:[eE][\+\-]?\d+(?:_\d+)*)?)))';</code></pre>

<p>This regular expression captures floating-point numbers (which may include
isolated underscores) in a single reference. It thus provides flexibility and
robustness (key motivations for using regular expressions) without repetition.
It also uses <code>?:</code> within the brackets to cluster parts of the
regular expression without providing back references; this means that the whole
regular expression provides one back reference rather than five or six.</p>

<p>This regular expression may be easier to understand when refactored into
smaller chunks. The test I used when refactoring was quite simple:</p>

<pre><code>my @testexpressions = ('100', '100.12', '100.12e-13', '100_000.545_123',
	'1e-3', '.1', '-100_000.545_123e+11_12');
foreach my $expr (@testexpressions)
{
   if ($expr =~ m/$gre/)
   {
      print "$expr matches gre\n";
   }
}</code></pre>

<p>The same test code can run against the refactored regular expression to make
sure that it still matches the same strings.  Here, working from the inside
out, I extracted some common expressions. For each expression extracted and
captured by the quote-like operator <code>qr</code>, I also removed the
<code>?:</code> clustering. <code>$gre</code> above is equivalent to
<code>$newgre</code> below:</p>

<pre><code>my $underscoredigits = qr/_\d+/;
my $digitstring      = qr/\d+$underscoredigits*/;
my $fractional       = qr/\.\d*$underscoredigits*/;
my $mantissa         = qr/$digitstring$fractional?|\.$digitstring/;
my $exponent         = qr/[eE][\+\-]?$digitstring/;
my $newgre           = qr/\s*([\+\-]?$mantissa$exponent?)/;</code></pre>

<p> For example, <code>$underscoredigits</code> matches <code>_123</code>;
<code>$digitstring</code> matches <code>545_123</code>;
<code>$fractional</code> matches <code>.545_123</code>; <code>$mantissa</code>
matches either <code>100_000.545_123</code> or <code>.1</code>;
<code>$exponent</code> matches <code>e+11_12</code>; and finally
<code>$newgre</code> matches the whole string
<code>-100_000.545_123e+11_12</code>.</p>

<p>The construction method <code>make</code> is, again, flexible and robust.
The author has extracted part of its complexity to different methods to avoid
repetition. For example, the module uses the <code>_cannot_make</code> function
internally to report errors, calling it from several places in
<code>make</code>. It looks like:</p>

<pre><code># Die on bad *make() arguments.

sub _cannot_make {
    die "@{[(caller(1))[3]]}: Cannot take $_[0] of $_[1].\n";
}</code></pre>

<p>In turn, it calls the built-in <code>caller</code> function to refer back to
the original code (similar to an <code>assert</code> in C, or a lightweight
version of the <code>cluck</code> or <code>confess</code> functions in the <a href="http://search.cpan.org/~nwclark/perl-5.8.5/lib/Carp.pm">Carp</a> package).</p>

<p><code>make</code> also calls the the <code>remake</code> function, if
<code>make</code> receives only one argument (for example, a string such as
<code>"1 + 2i"</code>) and must deduce the real and/or imaginary parts:</p>

<pre><code>sub _remake {
    my $arg = shift;
    my ($made, $p, $q);

    if ($arg =~ /^(?:$gre)?$gre\s*i\s*$/) {
        ($p, $q) = ($1 || 0, $2);
        $made = 'cart';
    } elsif ($arg =~ /^\s*\[\s*$gre\s*(?:,\s*$gre\s*)?\]\s*$/) {
        ($p, $q) = ($1, $2 || 0);
        $made = 'exp';
    }

    if ($made) {
        $p =~ s/^\+//;
        $q =~ s/^\+//;
    }

    return ($made, $p, $q);
}</code></pre>

<p>The regular expression <code>$gre</code> appears here as part of a larger
regular expression, to interpret not only <code>"1 + 2i"</code> but also
<code>"2i"</code> by itself. The expression <code>$1 || 0</code>, used here and
elsewhere, replaces the <code>undef</code> value of Perl (treated as 0 in a
Boolean context) with 0, while leaving other values unchanged.</p>

<p>The <code>plus</code> function, one of the several binary operators provided
in the package, also has some interesting features:</p>

<pre><code>#
# (plus)
#
# Computes z1+z2.
#
sub plus {
        my ($z1, $z2, $regular) = @_;
        my ($re1, $im1) = @{$z1-&gt;cartesian};
        $z2 = cplx($z2) unless ref $z2;
        my ($re2, $im2) = ref $z2 ? @{$z2-&gt;cartesian} : ($z2, 0);
        unless (defined $regular) {
                $z1-&gt;set_cartesian([$re1 + $re2, $im1 + $im2]);
                return $z1;
        }
        return (ref $z1)-&gt;make($re1 + $re2, $im1 + $im2);
}</code></pre>

<p>It uses the trinary conditional operator <code>* = * ? * : *</code>, which
is also present in C. In Perl, this can return not just scalars but also lists.
Thus the code to calculate the values of <code>$re2</code> and
<code>$im2</code> is much more compact than the equivalent code in C could be.
This code uses the Cartesian coordinates of <code>$z2</code> if it's already a
complex number.  Otherwise, it turns a real number into a complex number.</p>

<p>The <code>plus</code> function later uses <code>ref $z1</code>, the package
name of <code>$z1</code>, to create the sum of <code>$z1</code> and
<code>$z2</code>; this allows subclasses of Math::Complex to reuse exactly the
same function.</p>

<p>Finally, the <code>Cartesian</code> function mentioned above can either
return existing values for the real and imaginary part, if these are "clean"
(valid), or recalculate them from the polar form.  Each complex number object
stores the "cleanliness" (validity) of its Cartesian values, as follows:</p>

<pre><code>sub cartesian {$_[0]-&gt;{c_dirty} ?
        $_[0]-&gt;update_cartesian : $_[0]-&gt;{'cartesian'}}</code></pre>

<p>This is a neat trick to avoid recalculating Cartesian coordinates when it's
not necessary.</p>

<h3>Summary</h3>

<p>The <code>Math::Complex</code> package is not only useful, but efficient, robust, and
flexible. It does use brief variable names, but this is traditional in
mathematics; given that it uses complicated (or at least long) expressions,
this means that the full expression is easy to understand (or read aloud). The
functions themselves tend also to be brief and easy to understand.</p>

<p>We see here the benefits of reuse and refactoring. Over 8 years and 34
versions of this code, it has no doubt seen heavy rewriting, to the point of
perhaps each line being different from the corresponding line in version 1.1
(or 0.1!). This extended refactoring has removed unnecessary and repeated code,
clarified comments and usage, and led to clear and clean code. It provides an
example not only of how to write a mathematical package in Perl, using regular
expressions and references as described above, but also of what code can look
like. That is perhaps its best lesson.</p>

<h3>Endnotes</h3>

<p><a id="codemaintainer">[1]</a> "Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live." (Martin Golding)</p>

<p><a id="camel">[2]</a> Though perhaps not always to <a href="http://www.perlmonks.org/index.pl?node_id=45213">this</a> extent.</p>







        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2004/09/">&laquo; September 2004</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2004/11/">November 2004 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
