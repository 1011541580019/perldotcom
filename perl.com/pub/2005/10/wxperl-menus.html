<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.02" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
    
    <link rel="prev bookmark" href="/pub/2005/09/onion.html" title="The State of the Onion 9" />
    <link rel="next bookmark" href="/pub/2005/10/scriptome.html" title="Data Munging for Non-Programming Biologists" />
    
    
    <title>Making Menus with wxPerl - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <div id="top_advert"> 
<!-- Put any landscape advert in here -->
<a href="http://www.perlfoundation.org/" target="_new">
<img src="/i/tpf_banner.png" width="468" height="60" /></a>
        </div> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description"></div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-838" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">Making Menus with wxPerl</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Roberto Alamos</span> on <abbr class="published" title="2005-10-06T00:00:00-08:00">October  6, 2005 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<br clear="all" />
<p>In a previous article about wxPerl published on Perl.com, Jouke Visser taught <a href="/pub/a/2001/09/12/wxtutorial1.html">the very basics of wxPerl programming</a>. In this article, I will continue with Jouke's work, explaining how to add menus in our wxPerl applications. I will cover the creation, editing, and erasure of menus with the <a href="http://search.cpan.org/perldoc?Wx::Menu">Wx::Menu</a> and Wx::MenuBar modules, and also will show examples of their use.</p>

<h3>Conventions</h3>

<p>I assume that you understand the wxPerl approach to GUI programming, so I won't explain it here. The following code is the base for the examples in this article:</p>

<pre><code>use strict;
use Wx;

package WxPerlComExample;

use base qw(Wx::App);

sub OnInit {
    my $self  = shift;
    my $frame = WxPerlComExampleFrame-&gt;new(undef, -1, "WxPerl Example");

    $frame-&gt;Show(1);
    $self-&gt;SetTopWindow($frame);

    return 1;
}

package WxPerlComExampleFrame;

use base qw(Wx::Frame);

use Wx qw( 
    wxDefaultPosition wxDefaultSize wxDefaultPosition wxDefaultSize wxID_EXIT
);

use Wx::Event qw(EVT_MENU);

our @id = (0 .. 100); # IDs array

sub new {
    my $class = shift;
    my $self  = $class-&gt;SUPER::new( @_ );

    ### CODE GOES HERE ###

    return $self;
}

### PUT SUBROUTINES HERE ###

package main;

my($app) = WxPerlComExample-&gt;new();

$app-&gt;MainLoop();</code></pre>

<p><code>@id</code> is an array of integer numbers to use as unique identifier numbers. In addition, the following definitions are important:</p>

<ul>
<li><b>Menu bar</b>: The bar located at the top of the window where menus will appear. This is a particular instance of Wx::MenuBar.</li>

<li><b>Menu</b>: A particular instance of Wx::Menu.</li>

<li><b>Item</b>: An option inside of a (sub)menu.</li>
</ul>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1714" template="b/article_sidebar2.view">
<!-- sidebar ends -->













<h3>A Quick Example</h3>

<p>Instead of wading through several pages of explanation before the first example, here is a short example that serves as a summary of this article. Note that I have divided it in two parts. Add this code to the base code in the <code>WxPerlComExampleFrame</code> constructor:</p>

<pre><code># Create menus
my $firstmenu = Wx::Menu-&gt;new();
$firstmenu-&gt;Append($id[0], "Normal Item");
$firstmenu-&gt;AppendCheckItem($id[1], "Check Item");
$firstmenu-&gt;AppendSeparator();
$firstmenu-&gt;AppendRadioItem($id[2], "Radio Item");

my $secmenu   = Wx::Menu-&gt;new();
$secmenu-&gt;Append(wxID_EXIT, "Exit\tCtrl+X");

# Create menu bar
my $menubar   = Wx::MenuBar-&gt;new();
$menubar-&gt;Append($firstmenu, "First Menu");
$menubar-&gt;Append($secmenu, "Exit Menu");

# Attach menubar to the window
$self-&gt;SetMenuBar($menubar);
$self-&gt;SetAutoLayout(1);

# Handle events only for Exit and Normal item
EVT_MENU( $self, $id[0], \&amp;ShowDialog );
EVT_MENU( $self, wxID_EXIT, sub {$_[0]-&gt;Close(1)} );</code></pre>

<p>Insert the following code into the base code at the line <code>### PUT SUBROUTINES HERE ###</code>.</p>

<pre><code>use Wx qw(wxOK wxCENTRE);

# The following subroutine will be called when you click in the normal item

sub ShowDialog {
  my($self, $event) = @_;
  Wx::MessageBox( "This is a dialog", 
                  "Wx::MessageBox example", 
                   wxOK|wxCENTRE, 
                   $self
               );
}</code></pre>

<p>Run this example to see something like Figures 1 and 2.</p>

<p><img src="/pub/2005/10/06/graphics/qexample1.jpg" width="290" height="224" alt="a menu with complex sub-items" /><br />
<em>Figure 1. A menu with complex sub-items</em>
</p>

<p><img src="/pub/2005/10/06/graphics/qexample2.jpg" width="290" height="224" alt="a menu with a single sub-item" /><br />
<em>Figure 2. A menu with a single sub-item</em>
</p>

<h3>Programming Menus</h3>

<p>To add a menu to your wxPerl application, you must know how to use two Perl modules that come with WxPerl: Wx::MenuBar and Wx::Menu. Wx::MenuBar creates and manages the bar that contains menus created with Wx::Menu. There is also a third module involved: Wx::MenuItem. This module, as its name implies, creates and manages menu items. You usually don't need to use it, because almost all of the operations you need for a menu item are available through Wx::Menu methods.</p>













<h4>Using Wx::Menu</h4>

<p>Creating a menu with Wx::Menu is as easy as:</p>

<pre><code>my $menu = Wx::Menu-&gt;new();</code></pre>

<p>Now <code>$menu</code> is a Wx::Menu object. WxPerl has five types of items. The first is the normal item, upon which you can click to get a response (a dialog or something else). The second is the check item, which has the Boolean property of being checked or not (independent of another check items). The third item is the radio item, which is an "exclusive check item;" if you check a particular radio item, other radio items in its radio group get unchecked instantly. The fourth type of item is the separator, which is just a straight line that acts as a barrier that separates groups of similar items inside of a menu. The fifth type is the submenu, an item that expands another menu when the mouse cursor is over it.</p>

<h5>Setting Up Menu Items</h5>

<p>To create a normal item for your menu, write:</p>

<pre><code>$menu-&gt;Append($id, $label, $helpstr);</code></pre>

<p>where <code>$id</code> is an unique integer that identifies this item, <code>$label</code> is the text to display on the menu, and <code>$helpstr</code> is a string to display in the status bar. (This last argument is optional.) Note that every menu item must have an unique identifier number in order to be able to operate with this item during the rest of the program. (From now on, <code>$id</code> will denote the unique identifier number of a menu item.)</p>

<p>To create a check or radio item, the methods are analogous to <code>Append</code>--<code>AppendCheckItem</code> and <code>AppendRadioItem</code>, respectively. Add a separator with the <code>AppendSeparator</code> method; it does not expect arguments. Create a submenu with the <code>AppendSubMenu</code> method:</p>

<pre><code>$menu-&gt;AppendSubMenu($id, $label, $submenu, $helpstr);</code></pre>

<p>where <code>$submenu</code> is an instance to another Wx::Menu object. (Don't try to make that a submenu be a submenu of itself, because the Universe will crash or, in the best case, your program won't execute at all.)</p>

<p>While append methods add menu items in the last position of your menus, Wx::Menu gives you methods to add menu items at any position you want. For instance, to add a normal item at some position in a menu:</p>

<pre><code>$menu-&gt;Insert($pos, $id, $label, $helpstr);</code></pre>

<p>where <code>$pos</code> is the position of the item, starting at 0. To add a radio item, check item, or separator, use the <code>InsertRadioItem</code>, <code>InsertCheckItem</code>, or <code>InsertSeparator</code> methods. As usual, the latter takes no arguments. To insert a submenu, use the <code>InsertSubMenu</code> method:</p>

<pre><code>$menu-&gt;InsertSubMenu($pos, $id, $label, $submenu, $helpstr);</code></pre>

<p>You can also insert an item at the first position by using the <code>Prepend</code> method:</p>

<p>$menu-&gt;Prepend($id, $label, $helpstr);</p>

<p><code>PrependRadioItem</code>, <code>PrependCheckItem</code>, and <code>PrependSeparator</code> methods are also available. As you might expect, there's a <code>PrependSubMenu</code> method that works like this:</p>

<p><code>$menu-&gt;PrependSubMenu($id, $label, $submenu, $helpstr);</code>
</p>

<p>Sometimes, a menu grows to include too many menu items, and then it's impractical to show them all. For this problem, Wx::Menu has the <code>Break</code> method. When called, it causes Wx to place subsequently appended items into another column. Call this method like so:</p>

<pre><code>$menu-&gt;Break();</code></pre>

<h5>Menu Item Methods</h5>

<p>Once you have created your items, you need some way to operate on them, such as finding information about them through their identifier numbers, getting or setting their labels or help strings, enabling or disabling them, checking or unchecking them, or removing them. For example, you may want to retrieve some specific menu item in some point of your program. To do this, use the <code>FindItem</code> method in either of two ways:</p>

<pre><code>my $menuitem_with_the_given_id = $menu-&gt;FindItem($id);
my ($menuitem, $submenu)        = $menu-&gt;FindItem($id);</code></pre>

<p>where <code>$menuitem</code> is the corresponding Wx::MenuItem object with the identifier <code>$id</code>, and <code>$submenu</code> is the (sub)menu to which <code>$menuitem</code> belongs. You can also retrieve a menu item through the <code>FindItemByPosition</code> method (but remember that positions start at 0):</p>

<pre><code>my $menuitem = $menu-&gt;FindItemByPosition($pos);</code></pre>

<p>Wx::Menu provides methods to get or set properties of menu items. To set a property, there are two methods: <code>SetLabel</code> and <code>SetHelpString</code>. A <code>SetLabel</code> call might be:</p>

<pre><code>$menu-&gt;SetLabel($id, $newlabel);</code></pre>

<p><code>SetHelpString</code> works similarly:</p>

<pre><code>$menu-&gt;SetHelpString($id, $newhelpstr);</code></pre>













<p>To retrieve the label or help string of a particular item, use the <code>GetLabel</code> and <code>GetHelpString</code> methods. Both methods expect the menu item identifier number as the sole argument.</p>

<p>Every menu item has an <em>enabled</em> property that makes an item available or unavailable. By default, all items are enabled. To enable or disable a particular menu item, use the <code>Enable</code> method:</p>

<pre><code>$menu-&gt;Enable($id, $boolean);</code></pre>

<p>where <code>$boolean</code> is 0 or 1, depending if you want to disable or enable it, respectively. Maybe your next question is how to check if a menu item is enabled; use the <code>IsEnabled</code> method:</p>

<pre><code>$menu-&gt;IsEnabled($id);</code></pre>

<p>This returns <code>TRUE</code> or <code>FALSE</code>, depending on the status of the menu item.</p>

<p>Radio items and check items have the <em>checked</em> property that indicates the selection status of the item. By default, no check item is checked at the start of the execution of your program. For radio items, the first one created is checked at the start of execution. Use the <code>Check</code> method to check or uncheck a radio or check item:</p>

<pre><code>$menu-&gt;Check($id, $boolean);</code></pre>

<p>To determine if a menu item is checked, use <code>IsChecked</code>:</p>

<pre><code>$menu-&gt;IsChecked($id);</code></pre>

<p>This method, as does <code>IsEnabled</code>, returns <code>TRUE</code> or <code>FALSE</code>.</p>

<p>It's also possible to get the number of menu items your menu has. For this, use the <code>GetMenuItemCount</code> method:</p>

<pre><code>$menu-&gt;GetMenuItemCount();</code></pre>

<p>note that if <code>@args</code> is the argument's array, then <code>$menu-&gt;Append(@args)</code> and <code>$menu-&gt;Insert($menu-&gt;GetMenuItemCount(), @args)</code> are the same.</p>

<p>Finally, it's important to know that there are three ways to remove an item from a menu (honoring Larry Wall's phrase: "There's more than one way to do it"). The first is the <code>Delete</code> method, which just kills the menu item without compassion:</p>

<pre><code>$menu-&gt;Delete($id);</code></pre>

<p>This method returns nothing. Be careful--WxWidgets documentation says that the <code>Delete</code> method doesn't delete a menu item that's a submenu. Instead, the documentation recommends that you use the <code>Destroy</code> method to delete a submenu. In wxPerl, this isn't true. <code>Delete</code> is certainly capable of deleting a submenu, and is here equivalent to the <code>Destroy</code> method. I don't know the reason for this strange behavior.</p>

<p>The <code>Destroy</code> method looks like this:</p>

<pre>$menu-&gt;Destroy($id);</pre>

<p>If you want to remove an item but not destroy it, then the <code>Remove</code> method is for you. It allows you to store the menu item that you want to delete in a variable for later use, and at the same time delete it from its original menu. Use it like so:</p>

<pre><code>my $removed_item = $menu-&gt;Remove($id);</code></pre>

<p>Now you have your menu item with the identifier <code>$id</code> in the <code>$removed_item</code> variable (it now contains a Wx::MenuItem object). You can now use this variable to relocate the removed item into another menu with the append methods. For example:</p>

<pre><code>$other_menu-&gt;Append($removed_item);</code></pre>

<p>does the same thing as:</p>

<pre><code>$other_menu-&gt;Append($id_removed_item, $title_removed_item, 
    $helpstr_removed_item);</code></pre>

<p>but in a shorter way.</p>

<p>Finally, it's useful to be able to remove a submenu's menu item. You can't use the <code>Destroy</code>, <code>Delete</code>, or <code>Remove</code> methods, because they don't work. Instead, you need to do something like this:</p>

<pre><code>my ($mitem, $submenu) = $menu-&gt;FindItem($mitem_id);</code></pre>

<p>where <code>$mitem_id</code> is the identifier number of the submenu's menu item you're looking for. <code>$submenu</code> is a Wx::Menu object, just as <code>$menu</code> is, and hence you can use all the methods mentioned here, so the only thing you have to do to remove <code>$mitem</code> from <code>$submenu</code> is:</p>

<pre><code>$submenu-&gt;Delete($mitem_id);</code></pre>

<p>As the good reader that I am sure you are, you already have realized that this isn't the only thing you can do with the <code>$submenu</code> object. In fact, you can now add new menu items to your submenu, delete another menu item, and in general do everything mentioned already.</p>













<h4>Using Wx::MenuBar</h4>

<p>You have created your menus and obviously want to use them. The last step to get the job done is to create the menu bar that will handle your menus. When you want to create a menu bar, the first step is to enable your code to handle menu events. This is the job of the Wx::Event module:</p>

<pre><code>use Wx::Event qw(EVT_MENU)</code></pre>

<p>Now create a Wx::MenuBar object:</p>

<pre><code>my $menubar = Wx::MenuBar-&gt;new();</code></pre>

<p>This object will contain all of the menus that you want to show on your window. To associate a menu bar with a frame, call the <code>SetMenuBar</code> method from Wx::Frame:</p>

<pre><code>$self-&gt;SetMenuBar($menubar);</code></pre>

<p>where <code>$self</code> is the Wx::Frame object inherited in <code>WxPerlComExampleFrame</code>'s constructor. Note that if your application has MDI characteristics, or has many windows, then you have to take in account that Wx first sends menu events to the focused window. (I won't cover this issue in this article, so for more information, review the WxWidgets documentation.) Finally, be sure to call the <code>EVT_MENU</code> subroutine as many times as you have menu items that execute some action when clicked:</p>

<pre><code>EVT_MENU($self, $menu_item_id, \&amp;subroutine);</code></pre>

<p>where <code>$self</code> is the object of your package's <code>new</code> method, <code>$menu_item_id</code> is the unique identifier of the menu item involved, and <code>subroutine</code> is the name of the subroutine that will handle the click event you want to catch.</p>

<h5>Setting Up Menus</h5>

<p>The first thing to do once you have created your menu bar is to attach your menus to the menu bar. There are two methods for this: <code>Append</code> and <code>Insert</code>. <code>Append</code>, as you might expect, attaches a menu in the last position:</p>

<pre><code>$menubar-&gt;Append($menu, $label);</code></pre>

<p>where <code>$menu</code> is the menu created in the previous section and <code>$label</code> is the name to display for this menu in the menu bar. To insert a menu in an arbitrary position, use the <code>Insert</code> method:</p>

<pre><code>$menubar-&gt;Insert($pos, $menu, $label);</code></pre>

<p>where <code>$pos</code> is the position of your menu, starting at 0.</p>

<h5>Menu Methods</h5>

<p>Wx::MenuBar provides some methods that are also present in Wx::Menu and work in the same way. This methods are <code>Check</code>, <code>Enable</code>, <code>FindItem</code>, <code>GetLabel</code>, <code>GetHelpString</code>, <code>SetLabel</code>, <code>SetHelpString</code>, <code>IsChecked</code>, and <code>IsEnabled</code>. Besides these methods, Wx::MenuBar has its own set of methods to manage the properties of the menu bar. For example, as a menu item, a menu has its own <em>enabled</em> property, which you toggle with the <code>EnableTop</code> method:</p>

<pre><code>$menubar-&gt;EnableTop($pos, $boolean);</code></pre>

<p>where <code>$pos</code> is the position of your menu (starting at 0) and <code>$boolean</code> is <code>TRUE</code> or <code>FALSE</code>, depending on whether you want that menu enabled. Note that you can use this method only after you attach your menu bar to the window through the <code>SetMenuBar</code> method.</p>

<p>Wx::MenuBar has methods to retrieve an entire menu or menu item given its title or (menu title, menu item label) pair, respectively. In the first case, use the code:</p>

<pre><code>$menu_with_the_given_title = $menubar-&gt;FindMenu($title);</code></pre>

<p>In the second case:</p>

<pre><code>$menu_item = $menubar-&gt;FindMenuItem($menu_title, $menu_item_label);</code></pre>

<p>In both cases, the returned variables are Wx::Menu objects. You can also retrieve a menu if you provide its position (starting at 0):</p>

<pre><code>$menu_with_the_given_pos = $menubar-&gt;GetMenu($pos);</code></pre>

<p>As in the Wx::Menu case, Wx::MenuBar provides methods to set or get the label of a specific menu and to retrieve the number of menus in a menu bar. Those methods are <code>SetLabelTop</code>, <code>GetLabelTop</code>, and <code>GetMenuCount</code> respectively. Use them like this:</p>

<pre><code>$menu-&gt;SetLabelTop($pos, $label);
my $menu_label = $menu-&gt;GetLabelTop($pos);
my $num_menu   = $menu-&gt;GetMenuCount();</code></pre>

<p>where <code>$pos</code> is the position of the menu and <code>$label</code> is the new label that you want to put on your menu. Note that <code>GetLabelTop</code>'s result doesn't include accelerator characters inside the returned string.</p>

<p>Finally, Wx::MenuBar gives two more choices to remove a menu. The first method is <code>Replace</code>, which replaces it with another menu:</p>

<pre><code>$menubar-&gt;Replace($pos, $new_menu, $label);</code></pre>

<p>where <code>$pos</code> is the position of the menu to remove, <code>$new_menu</code> is the new menu that will be in the <code>$pos</code> position, and <code>$label</code> is the label to display on the menu bar for <code>$new_menu</code>. The second choice is to remove a menu, just by removing it with the <code>Remove</code> method:</p>

<pre><code>my $removed_menu = $menubar-&gt;Remove($pos);</code></pre>

<p><code>Remove</code> returns the <code>$removed_menu</code> object, so if you need it in the future, it'll be still there waiting for you.</p>













<h3>Example</h3>

<p>With all of that explained, I can show a full, working example. As before, add this code to the base code in the blank spot in the <code>WxPerlComExampleFrame</code> constructor.</p>

<pre><code># Create menus
# Action's sub menu
my $submenu = Wx::Menu-&gt;new();
$submenu-&gt;Append($id[2], "New normal item");
$submenu-&gt;Append($id[3], "Delete normal item");
$submenu-&gt;AppendSeparator();
$submenu-&gt;Append($id[4], "New check item");
$submenu-&gt;Append($id[5], "Delete check item");
$submenu-&gt;AppendSeparator();
$submenu-&gt;Append($id[6], "New radio item");
$submenu-&gt;Append($id[7], "Delete radio item");

# Disable items for this submenu
for(2..7) {
    $submenu-&gt;Enable($id[$_], 0);
}

# Actions menu
my $actionmenu = Wx::Menu-&gt;new();
$actionmenu-&gt;Append($id[0], "Create Menu"); # Create new menu
$actionmenu-&gt;Append($id[1], "Delete Menu"); # Delete New Menu
$actionmenu-&gt;AppendSeparator();
$actionmenu-&gt;AppendSubMenu($id[100], "New Item", $submenu); # Create item submenu
$actionmenu-&gt;AppendSeparator();
$actionmenu-&gt;Append(wxID_EXIT, "Exit\tCtrl+X"); # Exit

# At first, disable the Delete Menu option
$actionmenu-&gt;Enable($id[1], 0);

# Create menu bar
$self-&gt;{MENU} = Wx::MenuBar-&gt;new();
$self-&gt;{MENU}-&gt;Append($actionmenu, "Actions");

# Attach menubar to the window
$self-&gt;SetMenuBar($self-&gt;{MENU});
$self-&gt;SetAutoLayout(1);

# Handle events
EVT_MENU($self, $id[0], \&amp;MakeActionMenu);
EVT_MENU($self, $id[1], \&amp;MakeActionMenu);
EVT_MENU($self, $id[2], \&amp;MakeActionNormal);
EVT_MENU($self, $id[3], \&amp;MakeActionNormal);
EVT_MENU($self, $id[4], \&amp;MakeActionCheck);
EVT_MENU($self, $id[5], \&amp;MakeActionCheck);
EVT_MENU($self, $id[6], \&amp;MakeActionRadio);
EVT_MENU($self, $id[7], \&amp;MakeActionRadio);

EVT_MENU($self, wxID_EXIT, sub {$_[0]-&gt;Close(1)});</code></pre>

<p>This code creates a menu called <em>Actions</em> with the following options inside:</p>

<ul>
<li><b>Create Menu</b>: When a user clicks this option, the program creates a new menu called <em>New Menu</em> at the right side of the <em>Actions</em> menu. The <em>Create Menu</em> option is enabled by default, but creating the menu disables this option.</li>

<li><b>Delete Menu</b>: Deletes the menu created with <em>Create Menu</em>. This option is disabled by default and is enabled when <em>New Menu</em> exists.</li>

<li><b>New normal item</b>: This option creates the <em>Normal item</em> option on <em>New Menu</em> when it exists. It is disabled by default.</li>

<li><b>Delete normal item</b>: Deletes <em>Normal item</em> when it exists. It is disabled by default.</li>

<li><b>New check item</b>: Creates the <em>Check item</em> option on <em>New Menu</em> when it exists. It is disabled by default. <em>Check item</em> is unchecked by default.</li>

<li><b>Delete check item</b>: Deletes <em>Check item</em> when it exists. It is disabled by default.</li>

<li><b>New radio item</b>: Creates the <em>Radio item</em> option on <em>New Menu</em> when it exists. It is disabled by default. <em>Radio item</em> is checked by default.</li>

<li><b>Delete radio item</b>: Deletes <em>Radio item</em> when it exists. It is disabled by default.</li>

<li><b>Exit</b>: Exits the program.</li>
</ul>

<p>Once the code has created the menu, it attaches the menu to the menu bar saved on <code>$self-&gt;{MENU}</code>, then calls the <code>EVT_MENU</code> subroutine eight times to handle all of the menu events from <em>Action</em>'s menu items. Add the following code to the base code where it says <code>### PUT SUBROUTINES HERE ###</code>:</p>

<pre><code># Subroutine that handles menu creation/erasure
sub MakeActionMenu {
    my($self, $event) = @_;

    # Get Actions menu
    my $actionmenu    = $self-&gt;{MENU}-&gt;GetMenu(0);

    # Now check if we have to create or delete the New Menu
    if ($self-&gt;{MENU}-&gt;GetMenuCount() == 1) {
        # New Menu doesn't exist

        # Create menu
        my $newmenu = Wx::Menu-&gt;new();
        $self-&gt;{MENU}-&gt;Append($newmenu, "New Menu");       

        # Disable and Enable options
        $actionmenu-&gt;Enable($id[0], 0); # New menu
        $actionmenu-&gt;Enable($id[1], 1); # Delete menu
        $actionmenu-&gt;Enable($id[2], 1); # New normal item
        $actionmenu-&gt;Enable($id[3], 0); # Delete normal item
        $actionmenu-&gt;Enable($id[4], 1); # New check item
        $actionmenu-&gt;Enable($id[5], 0); # Delete check item
        $actionmenu-&gt;Enable($id[6], 1); # New radio item
        $actionmenu-&gt;Enable($id[7], 0); # Delete radio item
    } else {
        # New Menu exists

        # Remove menu
       $self-&gt;{MENU}-&gt;Remove(1);

        # Enable and disable options
        $actionmenu-&gt;Enable($id[0], 1);

        for(1..7) {
               $actionmenu-&gt;Enable($id[$_], 0);
        }
    }

    return 1;
}

# Subroutine that handles normal item creation/erasure
sub MakeActionNormal {
    my($self, $event) = @_;
    # Check if New Menu exists
    if($self-&gt;{MENU}-&gt;GetMenuCount() == 2) {
        # New menu exists

        # Get Action menu
        my $actionmenu = $self-&gt;{MENU}-&gt;GetMenu(0);
        my $newmenu    = $self-&gt;{MENU}-&gt;GetMenu(1);

        # Check if we have to create or delete a menu item
        if($actionmenu-&gt;IsEnabled($id[2])) {
            # Create normal menu item
            $newmenu-&gt;Append($id[50], "Normal item");           

            # Disable and Enable options
            $actionmenu-&gt;Enable($id[2], 0);
            $actionmenu-&gt;Enable($id[3], 1);
        } else {
            # Delete menu item
               $newmenu-&gt;Delete($id[50]);

            # Enable and disable options
            $actionmenu-&gt;Enable($id[2], 1);
            $actionmenu-&gt;Enable($id[3], 0);
        }
    }

    return 1;
}

# Subroutine that handles check item creation/erasure
sub MakeActionCheck {
    my($self, $event) = @_;

    # Check if New Menu exists
    if($self-&gt;{MENU}-&gt;GetMenuCount() == 2) {
        # New menu exists

        # Get Action menu
        my $actionmenu = $self-&gt;{MENU}-&gt;GetMenu(0);
        my $newmenu    = $self-&gt;{MENU}-&gt;GetMenu(1);

        # Check if we have to create or delete a menu item
        if($actionmenu-&gt;IsEnabled($id[4])) {
            # Create check item
               $newmenu-&gt;AppendCheckItem($id[51], "Check item");

           # Disable and Enable options
           $actionmenu-&gt;Enable($id[4], 0);
           $actionmenu-&gt;Enable($id[5], 1);
        } else {
           # Delete menu item
           $newmenu-&gt;Delete($id[51]);

              # Enable and disable options
              $actionmenu-&gt;Enable($id[4], 1);
              $actionmenu-&gt;Enable($id[5], 0);
        }
    }

    return 1;
}

# Subroutine that handles radio item creation/erasure

sub MakeActionRadio {
    my($self, $event) = @_;

    # Check if New Menu exists
    if($self-&gt;{MENU}-&gt;GetMenuCount() == 2) {
        # New menu exists

        # Get Action menu
        my $actionmenu = $self-&gt;{MENU}-&gt;GetMenu(0);
        my $newmenu    = $self-&gt;{MENU}-&gt;GetMenu(1);

        # Check if we have to create or delete a menu item
        if ($actionmenu-&gt;IsEnabled($id[6])) {
               # Create radio item
              $newmenu-&gt;AppendRadioItem($id[52], "Radio item");

              # Disable and Enable options
              $actionmenu-&gt;Enable($id[6], 0);
              $actionmenu-&gt;Enable($id[7], 1);
        } else {
              # Delete menu item
              $newmenu-&gt;Delete($id[52]);

              # Enable and disable options
              $actionmenu-&gt;Enable($id[6], 1);
              $actionmenu-&gt;Enable($id[7], 0);
        }
    }

    return 1;
}</code></pre>

<p>The <code>MakeActionMenu</code> subroutine handles events for the <em>New Menu</em> and <em>Delete Menu</em> items. It first gets the <em>Actions</em> menu and checks whether the <em>New Menu</em> exists by retrieving the number of menus attached to the <code>$self-&gt;{MENU}</code> menu bar. If the new menu doesn't exist, the number of menus in the menu bar is equal to 1, and the subroutine then creates <em>New Menu</em>. If it exists, the subroutine deletes <em>New Menu</em>.</p>

<p>The <code>MakeActionNormal</code>, <code>MakeActionCheck</code>, and <code>MakeActionRadio</code> subroutines are almost identical. They differ only in the involved identifier numbers. These subroutines handle events for <em>New normal item</em>, <em>Delete normal item</em>, <em>New check item</em>, <em>Delete check item</em>, <em>New radio item</em>, and <em>Delete radio item</em>, respectively. They first check if <em>New Menu</em> exists (the number of menus attached to the menu bar is equal to 2). If so, they check if the options to create normal, check, or radio items are enabled, respectively. If the corresponding option is enabled, then the corresponding item doesn't exist on <em>New Menu</em>, and the subroutine creates it. If the option to create an item is disabled, then that item exists on <em>New Menu</em> and hence it must be deleted. If <em>New Menu</em> doesn't exist, the subroutines do nothing. Figure 3 shows how there are no options available if <em>New Menu</em> does not exist, and Figure 4 shows <em>New Menu</em> with two options added.</p>

<p><img src="/pub/2005/10/06/graphics/example1.jpg" width="289" height="268" alt="no available options without New Menu" /><br />
<em>Figure 3. No available options without New Menu</em>
</p>

<p><img src="/pub/2005/10/06/graphics/example2.jpg" width="289" height="268" alt="New Menu has menu options" /><br />
<em>Figure 4. New Menu has menu options</em>
</p>

<h3>Conclusion</h3>

<p>As this article has shown, menu programming with wxPerl is an extremely simple task. Wx::MenuBar and Wx::Menu's methods are very easy to use and remember. If you understood this article, you can do anything possible with menus in your wxPerl programs.</p>

<p>I have covered almost all of the available methods in Wx::Menu and Wx::MenuBar. I left out some methods related to pop-up menus, but I hope to cover these topics in future articles. WxPerl is a really great module, but its lack of adoption is due to its severe lack of documentation. This situation must be reversed, and this article is a small contribution to that cause.</p>

<h3>See Also</h3>

<ul>
<li><a href="http://www.wxwidgets.org/manuals/2.4.2/wx262.htm">WxMenu tutorial</a> and <a href="http://www.wxwidgets.org/manuals/2.4.2/wx263.htm">WxMenuBar tutorial</a> by Julian Smart, Robert Roebling, Vadim Zeitlin, Robin Dunn, et al.</li>

<li>"<a href="http://www.bzzt.net/~wxwidgets/icpp_wx2.html#menubar">Adding a Menu Bar</a>," by David Beech.</li>

<li>"<a href="/pub/a/2001/09/12/wxtutorial1.html">wxPerl: Another GUI for Perl</a>," by Jouke Visser.</li>
</ul>


                                    </div>


                                </div>
                                <div class="asset-footer">

    
                                    <div class="entry-categories">
                                        <h4>Categories<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="/pub/graphics/" rel="tag">Graphics</a><span class="delimiter">,</span></li> <li class="entry-category"><a href="/pub/programming/" rel="tag">Programming</a><span class="delimiter">,</span></li> <li class="entry-category"><a href="/pub/user-interfaces/" rel="tag">User Interfaces</a></li>
                                        </ul>
                                    </div>
    


                                    <div class="entry-tags">
                                        <h4>Tags<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=Perl%20GUI&amp;limit=20';return false;" rel="tag">Perl GUI</a><span class="delimiter">,</span></li> <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=Perl%20GUI%20programming&amp;limit=20';return false;" rel="tag">Perl GUI programming</a><span class="delimiter">,</span></li> <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=Perl%20menus&amp;limit=20';return false;" rel="tag">Perl menus</a><span class="delimiter">,</span></li> <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=Perl%20wxWidgets&amp;limit=20';return false;" rel="tag">Perl wxWidgets</a><span class="delimiter">,</span></li> <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=wxPerl&amp;limit=20';return false;" rel="tag">wxPerl</a><span class="delimiter">,</span></li> <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=wxWidgets&amp;limit=20';return false;" rel="tag">wxWidgets</a></li>
                                        </ul>
                                    </div>

                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2010/07/">July 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.02" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
