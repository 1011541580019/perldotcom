<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: April 2005 Archives</title>


    <link rel="prev" href="/pub/2005/03/" title="March 2005" />
    <link rel="next" href="/pub/2005/05/" title="May 2005" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">April 2005 Archives</h1>





                            
                            <div id="entry-754" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/28/bdfoy.html" rel="bookmark">People Behind Perl: brian d foy</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.modernperlbooks.com/">chromatic</a></span> on <abbr class="published" title="2005-04-28T00:00:00-08:00">April 28, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p><em><code>brian d foy</code>  is a longtime leader in the Perl community.
Besides founding the <a href="http://www.pm.org/">Perl Mongers</a> and being a
trainer for <a href="http://www.stonehenge.com/">Stonehenge Consulting
Services</a>, he founded and edits <a href="http://www.theperlreview.com/">The
Perl Review</a>, a quarterly magazine for Perl users.  If that weren't enough,
he writes and contributes to several CPAN modules.  Recently, Perl.com
interviewed <code>brian</code> on his work and plans.</em></p>

<p><strong>Can you give us a brief professional biography?</strong></p>

<p><strong><code>brian d foy</code>:</strong> I started out studying nuclear
physics, and I started using Perl to extract simulation results out of huge
text reports produced by legacy systems.  The researchers were doing it with
highlighter pens before I wrote them some programs to turn a three week task
into a 15 minute one. Around that time, the dot.com bubble was rapidly
expanding, and I got sucked in to that.  I worked for a couple of ventures in
New York that never really went anywhere. Around 1998, Randal Schwartz hooked
me into working with Stonehenge Consulting Services as a Perl trainer, which
I've been doing ever since. Along the way I've done a lot of work in the
Perl community, with technical and non-technical contributions.</p>

<p><strong>Had you known Perl previously, or did you learn it for
this?</strong></p>

<p><strong><code>bdf</code>:</strong> I picked up Perl sometime around the beginning of
graduate school.  I wasn't a programmer, and had only gotten my first
computer about a year before that (previously using school computers for
anything I needed).  At the start I just wanted to understand these
weird characters that people were using in messages on a BBS I read.  It
turned out that they were Perl regular expressions.  I bought
<cite>Programming Perl</cite>, then <cite>Learning Perl</cite> in the same week. (I still have
the receipts, oddly: <a
href="http://www.theperlreview.com/Found/learning-perl-receipt.html">Learning
Perl receipt</a> and <a
href="http://www.theperlreview.com/Found/programming-perl-receipt.html">Programming
Perl receipt</a>.) And I was on my way.</p>

<p><strong>Stonehenge has its headquarters in Portland, Oregon, and you live in
Chicago.  Do they send you out to East Coast gigs?  How does that
work?</strong></p>

<p><strong><code>bdf</code>:</strong> When I started with Stonehenge, I was living in New
York, and we actually had a lot of business in New York.  We also had a lot of
business in the usual places like Silicon Valley, Research Triangle, and other
tech centers.  Teaching assignments are handed out more on availability than
location, although each of the Stonehenge instructors has a favorite part of
the country to visit, so we sometimes trade assignments to make it work out.
Lately I've been taking the New England area assignments.</p>

<p><strong>How'd you come up with the idea for "The Perl Review"?</strong></p>

<p><strong><code>bdf</code>:</strong> It really had nothing to do with Perl.
I had just left a dot.com company, and I was dating an opera singer.  We moved
to Chicago because she had a long-term engagement in Chicago.  I went on
several interviews, and being the dummy that I am, I was honest about my
chances of staying in the Chicago area.  I found Chicago much more hostile to
job mobility than New York, and I wasn't going to get a job unless I committed
the rest of my working life to it. I couldn't do that and follow my wife
around the world as she pursued her career.  I figured, she has to actually
<em>be</em> where she wants to sing, whereas I could live in a virtual office
from anywhere that had an internet connection.  It's especially nice now that
a lot of hotels have wireless connectivity.</p>

<p>I needed something I could do from a hotel room, literally.  I published
most of the first print issue of "The Perl Review" from a hotel during a
month-long production of The Pirates of Penzance.</p>

<p><strong>Can we expect to see small discounts for orphans then?  (Just
kidding.)</strong></p>

<p><strong><code>bdf</code>:</strong> Yes, but only until their 21st birthday.</p>

<p>I looked around to see what was missing from the Perl community.  "The
Perl Journal" had disappeared almost completely, and "Perl Month", an
online Perl magazine, had stopped publishing new stuff.  No one seemed
to be publishing much good stuff about Perl.  A lot of magazines that
had had some Perl content had disappeared in the dot.com shakeout too.
I also realized that many of the people still writing about Perl had
been writing about Perl for a while, and the community didn't have too many
ways to develop new writing talent.</p>

<p>When I asked around to gauge the interest, no one spoke any words of
doom or misery, so I just kept going with the idea.</p>

<p><strong>Is that the key to success in Perl, or do you think it worked
out only in your particular situation?</strong></p>

<p><strong><code>bdf</code>:</strong> Well, I had made a lot of friends through my
work with Perl Mongers, so I was able to talk to a lot of people and get
their support because they knew me.  I also had a track record in the
Perl community, so I think my personal reputation gave the project a bit
of a boost.  If no one knew who I was, I think things would have been a
lot tougher.</p>

<p><strong>What's "Extreme Publishing" and how is that working out for
you?</strong></p>

<p><strong><code>bdf</code>:</strong> I started calling the process we used for "The Perl Review" Extreme
Publishing as a bit of a joke on Extreme Programming.  I had this idea that
we'd be able to publish in short iterations with fast turn-around, and build a
set of tools to automate the process.</p>

<p>On the technical side, that worked nicely.  I could take a text file
(usually in POD) from an author, run it through a converter to get LaTeX, then
typeset the whole thing and turn it into a PDF file.  If I changed some text, I
only had to type a few characters to get a new PDF file.  Everything was
text-based and in source control, just how a good Perl programmer likes it.</p>

<p>On the aesthetic side, it wasn't so great.  I had put the technical details
before the creative ones, and no one had said anything about it because
everyone working on it was a techie, and those were the bits that we liked to
play with. Those weren't the hard parts of the process, and they weren't the
parts that needed the most time. The process I had set up really restricted the
aesthetic side. Publishing is not programming.</p>

<p>The real process in creating something better than an author can do on his
own (for instance, putting something on his website with no help from us) doesn't involve
many technical considerations: the value of a magazine or book is editorial
help that develops and matures the content.  All of that happens before we get
to the point where we want to create the final output, and it's the part of the
process that takes the longest.  By paying attention only to the last part of
the process like we were, and then only the technical details of it, we had
fallen into the trap of premature optimization.</p>

<p>After we printed our first issue, I switched from LaTeX to Adobe InDesign
because we could produce better output faster.  LaTeX is very difficult to
wrangle if you want to precisely control the placement of a lot of things: you
don't want the last line of a paragraph at the top of a column or on the next
page all by itself, or several hyphenated lines in a row.  You can control all
that in LaTeX, but you have to edit the input files, process them, and see what
you get. You have to do that every time you want to make a change.  We don't
have that problem with InDesign.  Not only that, a much larger work pool
becomes available. A good designer will probably know how to really use
InDesign or Quark but know nothing of LaTeX, while the situation is reversed
for a good technical person.</p>

<p>Although we still prefer POD from our authors, I've backed off of that
requirement too.  The more restrictive we are with submissions, the less
motivated the authors are to do the work.  Now we let them submit their
articles in any format they want; they were doing that anyway.  We're here to
publish good content, so the content should be first and the technical details
later.  If we have to do a couple extra minutes worth of work to convert a
Microsoft Word document into another format, that isn't going to kill us.</p>

<p><strong>What do you look for from your authors editorially?  Do you put
together a theme for an issue and look for contributions there, or do you try
to find a mix of solicited and unsolicited articles?</strong></p>

<p><strong><code>bdf</code>:</strong> The themes come from what we get.  I tried to come up
with themes, but it just never worked out.  I go after new authors rather than
the same ones people see in every other magazine.  My friend Randal Schwartz
writes a column for just about any magazine that has Perl in it, and he'd be a
popular author for "The Perl Review", but I'd like to develop new talent too.</p>

<p>Most of the articles we publish now are solicited.  One of the editors will
see something cool, like a usenet post, new module registration, or blog entry,
and we'll get the author to expand that into a story.</p>

<p><strong>How do you motivate authors to hit deadlines?  Seriously, I'd like
to know.</strong></p> 

<p><strong><code>bdf</code>:</strong> Deadlines are tough for part-time (or one time)
authors.  I tell the authors not to worry about the time.  Whoever gets their
articles in first gets into the next issue.  If we want a particular article,
we'll just keep asking for it, or asking for rough drafts, or even
outlines.</p>

<p>We have a big stack of articles waiting for space in the magazine, though.
At first, when we were only a PDF file, every article could make it into the
magazine because we didn't have to commit to a page count.  That also meant we
started from scratch for the next one.  Now that we have to commit to a certain
number of pages to coordinate the designers, printers, and everyone else, we
have articles left over after each cycle.  Some are longer than the space we
have and we don't want to cut them, and some we want to give a more prominent
position.</p>

<p>I don't know if I've discovered any special secret, or really been any more
successful than anyone else regarding deadlines.  If you see a short article by me in
the magazine, that probably means something that was supposed to take up that
space didn't get done in time.</p>

<p><strong>How do you keep track of the dozens of little details?  Sticky
notes?  Database?  Notepads?</strong></p>

<p><strong><code>bdf</code>:</strong> My personal to-do list is mostly a mail folder.
Anything in that folder needs attention.  Other than that, I have a several
whiteboards in my office.  Around production time, every page in the next issue
turns into a Post-it note, and those notes go onto my big corkboard.  As things
change, like an article going from 6 to 8 pages perhaps, I move around all the
Post-its.</p>

<p>For long-term article tracking, I have a mysql database and web application
that tracks each submission.  I know when I received it, what stage it's in, and
who's worked on it.  When it comes time to pick the articles we want to focus
on, I look at those that have gone through most of the steps (such as technical
reviews, re-writes, and peer review).  We then concentrate on those
articles.</p>

<p>I don't think I've found the best way to do that, though (and I've been
meaning to ask you about <a
href="http://wgz.org/chromatic/jellybean/">Jellybean</a>).  In the end, I don't
think it's a technical problem.  I think the real solution is going to be
something that an editor uses to collect and view information.  It's not going
to be something that automatically collects things because the value of the
process is in the editor and what that person knows.  I've found that that sort of
information is not self-organizing, and that we really need one person who
takes the article from start to finish.  If we try to cut the human out of that
process by automating things, we're going to lose out on the creativity and writing
side.  Whatever the right answer is, I think it's going to be something that
helps rather than enforces.</p>

<p><strong>I've noticed that you're now shipping paper copies to Europe.  How
has the process of collecting addresses, billing, printing, and mailing worked
out?</strong></p>

<p><strong><code>bdf</code>:</strong> I'm continuing to learn a lot, and the main thing I'm
learning is that a lot of the service industries are still protecting their
knowledge so they can get me to pay thousands of dollars for them to handle all
that for me.  It's not at all like the open source world.</p>

<p>Billing is pretty easy, although international credit cards fall into a
higher risk category in the bank's calculus of fraud. Sometimes the bank flags
a transaction as suspicious because the bank on the other side doesn't give it
the right secret handshake. It's better to be cautious, though.</p>

<p>We haven't started printing in Europe yet, but that's a big part of the
plan. Some people have asked about printing on A4 paper, but that would be a
new layout. Whatever we do, it will be the same size wherever we print as long
as we're using the same content in each edition.</p>

<p>Mailing is most of the excitement. Every country has their own format and
includes different things in the address. I'm used to dealing with ASCII, but
other languages (hence country, city, and street names) use lots of other
characters. I'm learning about all the stuff I've been avoiding. People want to see
everything in the right place and spelled correctly (and with the right
characters) on the address labels. I'm still learning a lot, and plenty of
people are being sufficiently patient with me to help. The information to make
it all work is often closely guarded by service bureaus, but I've been learning
to use the post office websites from all over the world.</p>

<p><strong>What's one question no interviewer has ever asked you that
you think someone should?</strong></p>

<p><strong><code>bdf</code>:</strong> As for "The Perl Review", no one has asked me "Are you a
masochist?" It's a big undertaking that takes a lot of work and I started with
no experience in the publishing business. It's a business where the costs are
high, the margins low, and there is an ongoing customer service commitment. I'm
not in this to make money, though, so I think I'm safe.</p>

<p><strong>What's next for "The Perl Review"?</strong></p>

<p><strong><code>bdf</code>:</strong> The big goal for the first year is to just keep going.
So far, we've paid all of our bills on time, and we've been getting a lot of
subscribers. At the end of the first year, I hope enough people think we've
done a good enough job that they want to renew.</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/936" template="b/article_sidebar2.view">
<!-- sidebar ends -->





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-760" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/p6pdigest/20050421.html" rel="bookmark">This Week in Perl 6, April 12 - 19, 2005</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Matt Fowles</span> on <abbr class="published" title="2005-04-21T00:00:00-08:00">April 21, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>All~</p>

<p>Sadly, a slip of the mouse caused me to delete a partially completed
summary, so I am going to push ahead on the rewrite without a witty intro.
Feel free to make one up for yourself involving stuffed animals, musicians, and
dinner.</p>

<h3>Perl 6 Compilers</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/96465d8b9ad451d9/506edf0f1f75fd18#506edf0f1f75fd18">Pugs
6.2.0</a></h4>

<p>Autrijus released Pugs 6.2.0, marking the first major milestone for Pugs.
This includes most of the control flow primitives of Perl 6 and is a testament
to the solid work that all of the "lambdacamels" have put in.</p>

<h4><em>CGI.pm</em> and Multibyte Characters</h4>

<p>B&Aacute;RTH&Aacute;ZI Andr&aacute;s had trouble encoding and decoding multibyte
characters in <em>CGI.pm</em>. This led to a general discussion of how to
avoid such characters in URLs as well as when to call <code>chr</code>.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/750a78b4aba5ab30/18de224db1c6456a#18de224db1c6456a">Discussion</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2583cd2ad56bcb8a/b146ba42087af46e#b146ba42087af46e">More
Discussion</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/c188af3a040a766c/2bed10c78e871766#2bed10c78e871766">Auto
Currying? </a></h4>

<p>Matthew D. Swank wondered if he really needed an extra set of parens to call
a function generator and its generated function simultaneously.  Autrijus told
him that yes he did as Perl 6 is not quite Haskell yet.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/e02fee049f84a748/0a265818f9c46346#0a265818f9c46346">Case
Insensitive P5 Regex</a></h4>

<p>B&Aacute;RTH&Aacute;ZI Andr&aacute;s wanted to use the <code>:i</code> switch on P5
regexes. Autrijus implemented it, but Larry noticed that this introduced a flag
ordering dependency. As a result, the new way to supply flags to a Perl 5 regex
is <code>rx:P5&lt;imsxg&gt;/.../</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/46d6404cce43e170/0e86f5489b6951e8#0e86f5489b6951e8">Cookbook
Ettiquette</a></h4>

<p>Marcus Adair wondered if there were rules of etiquette he should obey when
writing examples for the Perl 6 Cookbook. In particular, should examples run
and be only one file? Ovid suggested that one file was a good idea, but was
open to contrary arguments.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/cdccc751c9d251a2/12384146569d9acd#12384146569d9acd">Austrian
Parrot/Pugs Hackathon</a></h4>

<p>Thomas Klausner announced that on June 9-10 in Vienna, Austria there would be
a Hackathon featuring the collective might of Autrijus, Chip, Leo, and more.
When that much brain power gets together only two things can happen: much
hacking and much drinking.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/fb83a5437e07b928/ba9781abcd3406ca#ba9781abcd3406ca">Encoding
Illegal Byte Sequences in Strings</a></h4>

<p>B&Aacute;RTH&Aacute;ZI Andr&aacute;s wanted to know if he could encode an illegal byte
sequence in a string. Much discussion ensued, but Larry promised that it would
be possible.</p>

<h4><code>Test::TAP</code></h4>

<p>Yuval Kogman announced the release of two new modules to CPAN that provide
Pugs smoke HTML.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2bb8a11c2456fdce/f27a8093b5667c5e#f27a8093b5667c5e">Announcement</a></li>

<li><a href="http://nothingmuch.woobling.org/pugs_test_status/"Smoke 'em if You
Got 'em</a></li>

</ul>

<h4>Quoting Constructs</h4>

<p>Roie Marianer noticed that Pugs was missing some quoting constructs.  He
implemented them. This led to discussion of interpolation and corner cases. As
usual, Larry provided both answers and questions. Roie produced a patch which
Autrijus applied.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/bb1969aa24008431/f7eb1b0d77d6e3cd#f7eb1b0d77d6e3cd">Discussion</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/209d5a637ab00993/e7eb743f074c8f8d#e7eb743f074c8f8d">Useful
Pugs Hacking Pointer</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/f61f0ef868e0d9e0/653a73b1f938d4e9#653a73b1f938d4e9">The
Patch</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/82071725b70ea804/992d32212401500b#992d32212401500b">Code
Block as Argument</a></h4>

<p>Stevan Little found some bugs with passing a code block to a function in
Pugs. Warnock applies.</p>

<h4><code>push</code>, <code>pop</code>, <code>shift</code>, and
<code>unshift</code> on Infinite Lists</h4>

<p>Stevan Little has been playing with <code>push</code>, <code>pop</code>,
<code>shift</code>, and <code>unshift</code> on infinite lists. He thinks he
has found a bug, although maybe he just hasn't let it run long enough. Larry
provided answers regarding the correct semantics.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/727e096e9985ffc6/2f200d6cf002ecda#2f200d6cf002ecda"><code>shift
unshift</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/bfa0db91e317104f/41f8dcf309c64d9c#41f8dcf309c64d9c"><code>push
pop</code></a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/d4717e1fcdd5a631/bbd547275ba2f292#bbd547275ba2f292"><code>cd</code>
Issue in <em>Makefile</em></a></h4>

<p>Jonathan Worthington noticed a Win32 issue in the <em>Makefile</em>. He can
point to the offending line in the autogenerated <em>Makefile</em>, but that is
not where the fix belongs.  Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/ffc05ce65d1302fa/cab2f4338c64478d#cab2f4338c64478d">Hyperoperator
Tests</a></h4>

<p>David Christensen provided a patch for hyperoperators. Unfortunately,
character set transcodings ate his patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2a8de017213467c9/7ac0b26446af4265#7ac0b26446af4265"><code>shift</code>
Oddity</a></h4>

<p>Stevan Little noticed that <code>shift</code> did not act like
<code>pop</code>. Larry noted that the examples were not semantically valid, but
even so, Pugs should not freeze.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/03cfcd08924cf777/758242dfd55d908d#758242dfd55d908d">Pugs
SEGV</a></h4>

<p>Aaron Sherman managed to make Pugs segfault. Autrijus thinks someone might
already have fixed it.</p>

<h3>Parrot</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e458e5ae236f2475/a14a81f3562cabb4#a14a81f3562cabb4">Dynamic
Perl 2</a></h4>

<p>William Coleda provide the second of his patches to move
<code>Perl*PMC</code> out of the core. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/4470945c9b73132f/8d408c82edcb9eb0#8d408c82edcb9eb0">SVN
Revision in Bug Reports</a></h4>

<p>Jens Rieks reported a difficult-to-reproduce bug. This caused Leo to pine
for having the SVN revision in the bug report. Brent "Dax" Royal-Gordon
commented that this was a good idea. Jens Rieks offered to implement it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/ec13c071e394b978/75c590055366af40#75c590055366af40">Win32
SDL</a></h4>

<p>Jerry Gay tried to get SDL working on Windows. There was some give and take,
but in the end, it works.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e3b32552ce77272d/8ebf83f7e535740e#8ebf83f7e535740e"><code>-l/path/to/icu</code></a></h4>

<p>Andy Dougherty provided a patch making <em>Configure.pl</em> provide a link
flag to ICU headers if provided. Jens Rieks applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/8ab9759222802158/cc3f9249ea9441a9#cc3f9249ea9441a9">Svk
and SVN issues</a></h4>

<p>Roger Hale noticed a small problem with parrotcode.org. Robert Spier fixed
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/4a44170fc7012544/0638cc2ec3747287#0638cc2ec3747287"><em>nci.t</em>
Failure Under MinGW</a></h4>

<p>Fran&ccedil;ois Perrad fixed a MinGW test failure. Leo applied the
patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/478cb1819d5e4dfb/8e8947f606dab7ff#8e8947f606dab7ff">Trailing
Space with <code>${LD_OUT}</code></a></h4>

<p>Andy Dougherty fixed an old bug with <code>LD_OUT</code> having trailing
space. Leo applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/db8a711f8f85bb1c/74874b2eff5780d2#74874b2eff5780d2">Warnings
Cleaning</a></h4>

<p>Jerry Gay cleaned some warnings from the source tree. Leo applied most of
the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/413b03fc07ad6c74/65e6069a591a6928#65e6069a591a6928">Win32
Path Nit</a></h4>

<p>Philip Taylor fixed a small Win32 path issue. Leo applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/2ecfcdab123baf79/198c31b75714fff0#198c31b75714fff0"><code>cmp</code>
Op Bug</a></h4>

<p>Leo found a bug in <code>cmp_p_i_ic</code> opcodes.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/d69310fb11e75b26/eb47aeb6783e19fe#eb47aeb6783e19fe">SDL
Uninitialized Variable</a></h4>

<p>Nick Glencross provided a patch fixing an uninitialized variable in SDL.  Leo
applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/2fa7db6f961df407/5f38f717c8d5bfa8#5f38f717c8d5bfa8"><code>PerlScalar</code>
Morph Bug</a></h4>

<p>Nicholas Clark found a bug in morph for <code>PerlScalar</code>. Leo
verified that it was a bug.  Nick Glencross offered to fix it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/472630c2b0603134/56a30ffedd8e248f#56a30ffedd8e248f">Infix
Method Change</a></h4>

<p>Leo threatened to continue with his plan to simplify infix methods. No one
objected.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/52baedbc2dc5202a/c6de6d510bd2249a#c6de6d510bd2249a">Used
Before Set Warning? </a></h4>

<p>Nick Glencross wanted a warning for using unset variables in imcc. Leo
pointed out that this was not as simple as one might like.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/980a3f7cd83bd1cc/2d53606491e903a0#2d53606491e903a0">Remove
Temp Files for Win32 <code>make clean</code></a></h4>

<p>Jerry Gay provided a patch removing more files under <code>make clean</code>
in Win32.  Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/d75f7b9d5c4c8103/d473935613cca66e#d473935613cca66e">Fix
Typos</a></h4>

<p>Nick Glencross provided a patch which fixes some typos in docs.  chromatic
applied it with a few extra tweaks.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/6285245dd83ead1b/d029a1bd60ba207c#d029a1bd60ba207c">Parrot
Security</a></h4>

<p>B&Aacute;RTH&Aacute;ZI Andr&aacute;s wondered about the general security mechanisms that
Parrot would provide. Dan assured him that security would be a fundamental part
of Parrot. He also provided <a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/becd70c749ed8802/b2cc77c111663f98#b2cc77c111663f98">a
sketch of the Parrot security model</a> which sparked some discussion.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/b06bf58efba82f2e/fb7f013cb9f7acab#fb7f013cb9f7acab">Debian
ARM Failure</a></h4>

<p>Falls Huang reported a build failure on Debian-ARM. Leo provided a pointer
in the right direction.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/fc24f59f5f8e18bd/1202ce973afc6c31#1202ce973afc6c31">Missing
Make Target</a></h4>

<p>Fran&ccedil;ois Perrad notice that <code>make src/revision.c</code> couldn't
handle <em>.svn/entries</em>. Jens Rieks fixed the problem.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/2efaf5a6b85e4fa1/349b6ced77429368#349b6ced77429368">JIT
Generation Help</a></h4>

<p>Adam Preble put out a call for some general advice on understanding Parrots
JIT. Leo provided some general advice.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/856b25471e33d77e/9e48338f07dcea83#9e48338f07dcea83">"Attribute
not found" Exception</a></h4>

<p>Cory Spencer provide a patch changing <code>getattribute</code> to throw a
real exception. Jens applied the patch with a few tweaks.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/65999ab8b88da37d/b9507ee27d6c606a#b9507ee27d6c606a">stderr
during <code>bc</code> Configure Step</a></h4>

<p>Jerry Gay provided a patch to suppress stderr during the <code>bc</code>
configure step. There was some debate on how to make this cross platform. I
don't think there was a resolution.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/1ff44911f0e2da89/d604a37767fdc8c7#d604a37767fdc8c7"><em>string.c</em>
Segfault</a></h4>

<p>Nick Glencross provided a patch fixing a few segfaults in <em>string.c</em>.
Jens applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/94e648ab1d0cd3a7/b0c6963d1198ef36#b0c6963d1198ef36">MSWin32
ICU Linkage</a></h4>

<p>Ron Blaschke added ICU to the linkage for Win32. Jens applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/a9d14d8a39269642/a08a9039624088c4#a08a9039624088c4">Win32
Readme Updates</a></h4>

<p>Ron Blaschke updated the <em>README.win32</em> document. chromatic applied
the patch.</p>

<p><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/a511e0acef3f8b43/bfb9fed4636e8d30#bfb9fed4636e8d30">Discussion
Before the Patch</a></p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/3e12c06edb87e91d/e87790daa8de6a28#e87790daa8de6a28">Big
Changes Afoot</a></h4>

<p>Our pumpking Leo has some big changes underway and asked someone else to man
the pumps for a little while. Jens volunteered to be someone.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e9737a0ff59741d1/d222280d60722b24#d222280d60722b24">More
Registers Make Dan's Code less Unhappy</a></h4>

<p>Dan has some very ugly generated code. It takes a LONG time to compile.  Leo
sped it up by giving Parrot more registers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/999b9f6c744a4164/c63f9d4079202df9#c63f9d4079202df9"><code>.const</code>
Weirdness</a></h4>

<p>Nick Glencross found some weirdness with <code>.const</code> in IMCC. Warnock
applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f111410d97e18467/14bfd19da3a901cc#14bfd19da3a901cc">PMC
Help</a></h4>

<p>Bloves hoped for a pointer on PMC writing. Leo provided a helpful
pointer.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/1ad9467b1025793a/8791eb8b69566cab#8791eb8b69566cab"><code>&amp;&amp;</code>
in Commands is Not Cross Platform</a></h4>

<p>Jens noticed that <code>&amp;&amp;</code> in commands causes problems on
some platforms.  Michael G. Schwern fixed it and Jens applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/0ecded2105e1a6b3/a959e059396ada4f#a959e059396ada4f">MMD
Migration</a></h4>

<p>Leo continued his slow but steady migration to a more MMD-like world.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/049e4a3c48c6274d/25976b013f93c575#25976b013f93c575">Make
Config Info Available at Runtime</a></h4>

<p>Leo wants to have useful config information available at runtime. Steven
Philip Schubiger offered to try.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e5f150409499a4b9/7c45bf5dd6f975e2#7c45bf5dd6f975e2">Remove
Old Files</a></h4>

<p>Leo opened a ticket for removing some outdated files.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/83fc0d3cb83d9e04/e452b42305facec0#e452b42305facec0">Small
Spelling Errors</a></h4>

<p>Steven Philip Schubiger provided a patch fixing some small spelling errors.
He worried that perhaps he picked nits needlessly. I don't think so, but
Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/a88e134e75e0fb96/7cc20604fbe7b7e6#7cc20604fbe7b7e6">Win32
ICU Error</a></h4>

<p>Fran&ccedil;ois Perrad fixed a small mistake in the naming of
<em>icudt.lib</em>.  chromatic applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/bd016ece7efbf6dc/c671582313435f6a#c671582313435f6a">Drunken
Parrot</a></h4>

<p>Cory Spencer has succeed in making LISP run on Parrot and uncovered a few GC
bugs in the process, impressing everyone.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9ea5d132cb6a328b/8de3ed74d8f99b17#8de3ed74d8f99b17">Python
on Parrot</a></h4>

<p>Kevin Tew wondered about the state of Pyrate. Sam Ruby provided a general
explanation.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/1118ffddecae2eee/2b17b5c039d9f944#2b17b5c039d9f944">C
=&gt; Parrot Compiler</a></h4>

<p>Philip Taylor posted a few questions about Parrot for help with Carrot, his
C to Parrot Compiler. Leo and Chip provided a few answers.</p>

<h3>Perl 6 Language</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/ae5d3611ba59254c/3cea8fe11ab66c7b#3cea8fe11ab66c7b">Yet
Another Perl Conference, North America</a></h4>

<p>Gerard Lim announced YAPC::NA with much information and useful links.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/357eb32072df6ca1/34e9f3ed3232620b#34e9f3ed3232620b">Subscripts
as Objects</a></h4>

<p>Yuval Kogman threw out the idea of using subscripts as objects. Larry
worried that this would hurt speed a little too much.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/50537b038eb01049/504dc73599f6b0e9#504dc73599f6b0e9">Statement
Modifiers and Scopes</a></h4>

<p>Paul Seamons posted some examples involving local scopes and statement
modifiers. Larry decided that only curlies will delimit scopes, so as not to
surprise too many people.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f5dd10f62f347193/4f9e9e44613ece7b#4f9e9e44613ece7b">Whitespace
in heredocs</a></h4>

<p>Juerd posted a question from the p6cookbook asking about spaces v. tabs.
Larry took a guess as to the context and pointed to A2 for info.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/cd7710fe025526db/0159190cdac55ae1#0159190cdac55ae1"><code>&amp;nbsp;</code>
in <code>\s</code>, <code>&lt;?ws&gt;</code>, <code>&lt;&gt;</code></a></h4>

<p>Juerd wondered what sort of character classes matched nonbreaking spaces.
Larry replied that they did, but postulated a <code>&lt;bws&gt;</code> class
for breaking whitespace.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/42c0bc951df70bc4/a08367349c36ed44#a08367349c36ed44"><code>trim()</code>
and <code>words()</code></a></h4>

<p>Marcus Adair wondered about <code>trim</code> and <code>words</code> and if
they actually existed. It seems that <code>trim</code> will exist although
words might be <code>&lt;&lt;$string&gt;&gt;</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/539638737ca1c467/1f9b4c87e3ae6219#1f9b4c87e3ae6219"><code>&lt;[]&gt;</code>
Ugly and Hard to Type</a></h4>

<p>Some people are complaining that character classes are difficult to type.  The
design team considers this a feature as character classes do not handle
internationalization well.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a3625d9fefe6f350/bcf5011ed73acc84#bcf5011ed73acc84">Comparing
Floats with Fudge</a></h4>

<p>Marcus Adair wants an easy way to compare floats with a fudge factor.  Larry
seemed to feel that <code>~~</code> could use more DWIMery.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/c1ff319f1cf023f5/5c8a97dca9de168c#5c8a97dca9de168c"><code>$*CWD</code>
vs <code>cwd()</code> and <code>chdir()</code></a></h4>

<p>Michael G. Schwern wanted a simple tied variable interface to
<code>$*CWD</code>. This is apparently a sensitive topic. Much discussion
ensued of changing directory in bizarre circumstances. It looks like Michael's
suggestion will not reach the core, although it looks like a fairly simple
module.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/9cbe727d2d3c7127/a5b95a51b4f1faba#a5b95a51b4f1faba">Junction
Precedence Error</a></h4>

<p>Brad Bowman noticed an error in some examples involving junction precedence.
Larry confirmed the error. Patrick R. Michaud fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/10f723c000997305/2f8569964e8d201d#2f8569964e8d201d">Spelling
Mistake in A06</a></h4>

<p>Steven Philip Schubiger found a spelling error in A06. Patrick R. Michaud
applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/eb469e49d67ee887/5d5ce1a957b4a656#5d5ce1a957b4a656"><code>&lt;[a-z]&gt;</code>
to Become <code>&lt;[a..z]&gt;</code></a></h4>

<p>Larry decided that the range operator in character classes should change to
<code>..</code>. Much discussion ensued. I like it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/9627c979812b1881/18e4deaee9092db2#18e4deaee9092db2">Tainted
Variables</a></h4>

<p>B&Aacute;RTH&Aacute;ZI Andr&aacute;s wondered if he could mark variables as tainted.
Luke Palmer showed him a way.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a3ee0ad28cfc7358/b954df420903258e#b954df420903258e">Re-declarable
<code>temp</code> Variables</a></h4>

<p>Aaron Sherman wants a way to re-declare variables without warnings.
He suggested <code>temp</code>. Larry suggested <code>ok</code> to turn off a
warning, but doesn't think Aaron's feature is really necessary. There's no
official ruling yet, I think.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/7e5c8e60a262b033/a7e2220ac0c3cc26#a7e2220ac0c3cc26">Hyper
Slices</a></h4>

<p>David Christensen wants to use hyper slices as a convenient way of dealing
with multidimensional data structures. Luke Palmer showed him how.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/d19673092609908c/952a1c33601dce87#952a1c33601dce87">Hyperoperator Corner Case</a></h4>

<p>David Christensen wondered how hyperoperators know what to pad with when one
side is not long enough. The answer appears to be slightly ill-defined magic,
especially when considering subtraction or division.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/5ef4b7c6b01cd63a/a627dd913e587f72#a627dd913e587f72">Fine
Granularity Sleeping/Events</a></h4>

<p>Gaal Yahas wants to have an <code>alarm</code> function that takes a double
(for systems with sub-second timing promises). He also wants a version that
takes a callback (possibly called <code>later</code>). Warnock applied.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/2dbde23ef0bb8940/cd9c7a6b2e672cb8#cd9c7a6b2e672cb8">Junctions
in Subscripts</a></h4>

<p>David Christensen wants junctions in subscripts to autothread. Luke Palmer
commented that they might. I think they do.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/2d5818a0af6f6232/e190635e9d89b772#e190635e9d89b772">Quote
Operators and Interpolation</a></h4>

<p>Roie Marianer had a few questions about how interpolation and quote
operators would work. Larry and Juerd provided some answers. Larry's short
version: "We pretend we're a top-down parser even if we aren't".</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/fa98d6ef70da6f85/8f099d9225ffb5a1#8f099d9225ffb5a1">Junctions
with Adverbs</a></h4>

<p>David Christensen wants to use adverbs to supply exceptions to junctions.
Luke Palmer told him that it doesn't work that way.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f44055d378fa3515/0466f9879137871e#0466f9879137871e"><code>++</code>
Evaluation Order</a></h4>

<p>Lam Fayland found an oddity in Pugs evaluation order for <code>++</code>.
Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/121ac8d96c776bb9/6e51a2caa5699e94#6e51a2caa5699e94">Statement
Modifiers for Setting Variables</a></h4>

<p>Dave Whipp wants to use statement modifiers to restrict the scope for
variables in his <code>print</code> statements. Larry provided a different
technique.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/4bf493833cdb0e0b/57da4ba88cf2aa4a#57da4ba88cf2aa4a">Tie
Hashes</a></h4>

<p>Ingo Blechschmidt wondered what syntax to use for tying hashes. Larry began
to muse aloud.</p>

<h3>The Usual Footer</h3>

<p>Posting via the Google Groups interface does not work. To post to any of
these mailing lists please subscribe by sending email to
<code>perl6-internals-subscribe@perl.org</code>,
<code>perl6-language-subscribe@perl.org</code>, or
<code>perl6-compiler-subscribe@perl.org</code>. If you find these summaries
useful or enjoyable, please consider contributing to the Perl Foundation to
help support the development of Perl. You might also like to send feedback to
<a href="mailto:ubermatt@gmail.com">ubermatt@gmail.com</a>.</p>

<ul>

<li><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></li>
<li><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></li>
<li><a href="http://planet.parrotcode.org/">Parrot Blog aggregator</a></li>

</ul>





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-752" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/21/win32ole.html" rel="bookmark">Automating Windows Applications with Win32::OLE</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Henry Wasserman</span> on <abbr class="published" title="2005-04-21T00:00:00-08:00">April 21, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<h3>Getting My Feet Wet</h3>

<p>My first glimpse of the Internet happened at Lotus Development somewhere around
1994. A Mosaic demonstration duly impressed me. A few months later, working at
a small Cambridge, MA company called Dataware brought me closer to the online
revolution.</p>

<p>I landed a job at America Online in 1995 working for their browser team.
They originally had their own browser, which they had purchased from CMGI. It
was kind of cool at the time because it included a tabbed frames feature about
eight years before the Gecko engine.</p>

<p>It was there that Pete Deschanes wrote a tool using Microsoft Visual Test to
automate the America Online embedded web browser. I was especially interested
in certain functions he was using that captured browser events.</p>

<p>Later, I moved on to a company in Chelmsford, MA that was using OLE Automation
to drive the translation of Microsoft Word Documents into Fax documents. Rob
Murtha explained a lot to me about OLE Automation and introduced me to Perl and
Java.</p>

<h3>Washed Up</h3>

<p>The internet bubble burst for me in 2002 and I wound up stranded on the
shores of Fidelity Investments as a manual tester for one of their many
investment Web page groups. After a few weeks of manual testing, I was ready to
automate several of my tasks.</p>

<p>There was a problem. There were plenty of available Winrunner licenses, but
I was not allowed to use them because I was not part of their automation group.
In fact, I was reprimanded and almost lost my job for being too persistent in
asking to use one. Then I decided to write my own automation tool.</p>

<p>I had experience with C, C++, Java, and Perl. I decided to start with a
scripting language just to get a prototype going. I also thought it would be
cool to have a real open source script language to write code with instead of
something that a few engineers had developed exclusively for Web
automation.</p>

<p>My process consisted of:</p>

<ul>

<li>Ask a question.</li>
<li>Do some research.</li>
<li>Write some code.</li>

</ul>

<h3>Getting Started</h3>

<p>The first thing I needed to do was to see if I could start
<code>IExplore.exe</code> from Perl. I knew I did not want to simply start the
process with <code>system("C:\\Program Files\\Internet
Explorer\\IExplore.exe");</code>. Yes, I could get IE up and running that way,
but I would not be able to do anything useful with it except to kill it.</p>

<p>I noticed that Active Perl contained an interesting module called <a
href="http://search.cpan.org/perldoc?Win32::OLE">Win32::OLE</a>. I opened the
<em>OLE.pm</em> file and began to read the comments.</p>

<p>Comments like this looked very promising:</p>

<blockquote>This module provides an interface to OLE Automation from Perl.  OLE
Automation brings VisualBasic-like scripting capabilities and offers powerful
extensibility and the ability to control many Win32 applications from Perl
scripts.</blockquote>

<p>This one also looked pretty good:</p>

<blockquote>The <code>MessageLoop()</code> class method will run a standard Windows message
loop, dispatching messages until the <code>QuitMessageLoop()</code> class method is called.
It is used to wait for OLE events.</blockquote>

<p>Keeping in mind that faith is the substance of things hoped for and the
evidence of things not seen, I set about to write a Simple Automation Module
for Internet Explorer using Active Perl's <code>Win32::OLE</code>.</p>

<p>Going back to the <code>Win32::OLE</code> documentation I found out how to
start IE through the COM object. I translated some examples for Excel and Word
and wound up with this:</p>

<pre><code>$IE = Win32::OLE-&gt;new("InternetExplorer.Application")
	|| die "Could not start Internet Explorer.Application\n";</code></pre>

<p>That was nice, but nothing appeared on my computer screen. I could hear the
hard drive making a sound like it was starting an application but I couldn't
see Internet Explorer.  I decided to Google for some examples. The information
out there was very sparse but I found something that set the visible attribute
to 1:</p>

<pre><code>$IE-&gt;{visible} = 1;</code></pre>

<p>This time Internet Explorer appeared with a blank screen. It was a start. I
figured that there were a bunch of IE processes that I could not see on my machine from my previous
efforts, so I killed those using the task manager.</p>

<p>Next, I started a free Microsoft tool called <code>OLEVIEW.exe</code>. This
gave me a tree view of all automation objects registered on my machine. There
were hundreds of them. I found the one called Internet Explorer (Ver. 1.0) and
expanded the tree looking for methods. <code>IWebBrowser2</code> looked
interesting so I clicked on that and selected the View Type Info button. Out
popped up a new window with a list of methods. This was looking better all the
time.</p>

<p>I clicked on a method called <code>Navigate</code> and saw:</p>

<pre><code>[id(0x00000068), helpstring("Navigates to a URL or file.")].
void Navigate(
    [in] BSTR URL,
    [in, optional] VARIANT* Flags,
    [in, optional] VARIANT* TargetFrameName,
    [in, optional] VARIANT* PostData,
    [in, optional] VARIANT* Headers);</code></pre>

<p>I decided to try it:</p>

<pre><code>$IE-&gt;Navigate("http://www.google.com");</code></pre>

<p>Now I had navigated to my first website with my new automation tool.</p>

<h3>On the Road</h3>

<p>I knew I was getting close to hitting the wall. I had seen through Google
and newsgroups that lots of folks had reached this point in the game and turned
around. Remembering back to Pete Deschanes' Visual Test Tool, I was certain that
I could make more progress if I could capture Internet Explorer's events. I
went back to the <em>OLE.pm</em> documentation to do a little more reading
about events.</p>

<pre><code>=item Win32::OLE-&gt;WithEvents(OBJECT[, HANDLER[, INTERFACE]])

This class method enables and disables the firing of events by
the specified OBJECT.</code></pre>

<p>If I could just grok what <code>OBJECT</code>, <code>HANDLER</code>, and
<code>INTERFACE</code> represented, I felt that I could get my events. I made
some guesses.</p>

<p>The Object: that would be what <code>Win32::OLE-&gt;new()</code> returned.
Everyone knows you instantiate an object with the <code>new</code>
operator.</p>

<p>The Handler: I read further through <em>OLE.pm</em>:</p>

<blockquote><p>The HANDLER argument to <code>Win32::OLE-&gt;WithEvents()</code> can either
be a CODE reference or a package name. In the first case, all events will
invoke this particular function. The first two arguments to this function will
be the OBJECT itself and the name of the event. The remaining arguments will be
event-specific.</p>

<pre><code>Win32::OLE-&gt;WithEvents($Obj, \&amp;Event);</code></pre></blockquote>

<p>Now I understood that <code>WithEvents</code> was going to tell Internet
Explorer to call my Perl Handler whenever IE fired an event.  I had to give the
<code>WithEvents</code> call a reference to my subroutine like this:</p>

<pre><code>\&amp;Event</code></pre>

<p>What was the Interface name going to be? I went back to OLEVIEWER and looked
through the interface folder. It looked like <code>DwebBrowserEvents2</code>
would deliver what I wanted.</p>

<p>This is what I came up with:</p>

<pre><code>Win32::OLE-&gt;WithEvents($IE,\&amp;Event,"DWebBrowserEvents2");</code></pre>

<p>Now all I needed was to write an Event subroutine for IE to call.  The
<em>OLE.pm</em> comments told me that "the first two arguments to this function
will be the OBJECT itself and the name of the event", so I just used the
document example.</p>

<pre><code>sub Event {
    my ($Obj,$Event,@Args) = @_;
    print "Event triggered: '$Event'\n";
}</code></pre>

<p>I noticed that there was a third argument called <code>@Args</code> and
assumed that this was there to catch all other unknown parameters for each
event.</p>

<p>How was I going to block my code to wait for the events to transpire?  I
returned to the <em>Win32::OLE</em> comments:</p>

<blockquote>The <code>MessageLoop()</code> class method will run a standard Windows message
loop, dispatching messages until the <code>QuitMessageLoop()</code> class method is called.
It is used to wait for OLE events.</blockquote>

<p>I added this code, just to see if I could capture IE events:</p>

<pre><code>Win32::OLE-&gt;MessageLoop();</code></pre>

<h3>I've Been to the Mountain Top</h3>

<p>It was quite a moment when I saw these events pouring out of my nine
lines of code:</p>

<pre><code>Event triggered: CommandStateChange
Event triggered: OnVisible
Event triggered: PropertyChange
Event triggered: BeforeNavigate2
Event triggered: DownloadBegin
Event triggered: StatusTextChange
Event triggered: ProgressChange
Event triggered: FileDownload
Event triggered: DownloadComplete
Event triggered: TitleChange
Event triggered: NavigateComplete2
Event triggered: OnQuit</code></pre>

<p>Internet Explorer was firing off events and its COM object was calling my
Perl Event subroutine.</p>

<p>From here, I kept searching the newsgroups. I found one sentence where
someone mentioned acquiring the DOM from the <code>DocumentComplete</code>
Event. I knew this was a key, but how could I take this reference using
Perl?</p>

<p>I read up about the DOM. I borrowed a book from someone at work.  <a
href="http://msdn.microsoft.com/workshop/author/dhtml/reference/dhtml_reference_entry.asp">Microsoft
has their own version</a> of the DOM called DHTML and I came across their Web
page.  After reading this documentation for a while, I saw that the DOM
could give me everything I needed to have a full-blown automation tool. All I
needed was the reference.</p>

<h3>Finding the DOM</h3>

<p>I broke up my Event subroutine into pieces. I wanted to do something
different for each triggered event. Specifically I wanted to try to take a
reference to the DOM when the <code>DocumentComplete</code> event triggered.
My idea was that if I shifted out the first element of the @Args array, I would
find the reference I was looking for.  I rewrote the Event subroutine:</p>

<pre><code>sub Event {
    my ($Obj,$Event,@Args) = @_;
    print " Event triggered: $Event\n";
    if ($Event eq "DocumentComplete") {
        $IEObject = shift @Args;
        print "Here is my reference: $IEObject\n";
    }
}</code></pre>

<p>This printed out:</p>

<pre><code>Here is the Event: DocumentComplete
Here is my reference: Win32::OLE=HASH(0x1a524fc)</code></pre>

<p>This was looking better all the time.</p>

<p>I had a reference, but was it to the DHTML on the page that had just loaded?
There was only one way to find out: could I use it to make a DHTML call?  I
looked on the Microsoft DHTML reference page for a property that would tell me
I had a reference. <code>URL</code> looked like a good one, so I tried this
code:</p>

<pre><code>print "URL: " . $IEObject-&gt;URL . "\n";</code></pre>

<p>That gave me nothing. I went back to the OLEVIEWER and found this
interesting method</p>

<pre><code>[id(0x000000cb), propget, helpstring("Returns the active 
   Document automation object, if any.")]
IDispatch* Document();</code></pre>

<p>The Active document sounded good, so I tried:</p>

<pre><code>print "URL: " . $IEObject-&gt;Document-&gt;URL . "\n";</code></pre>

<p>This gave me:</p>

<pre><code>URL: http://www.google.com/</code></pre>

<p>Golden! My next step was to find a way to break out of the
<code>MessageLoop()</code> I was in.</p>

<pre><code>Win32::OLE-&gt;QuitMessageLoop();</code></pre>

<h3>Going On Home</h3>

<p>My last step was to do something more useful with my reference to
the DHTML. It was time to write a subroutine that would enter text into an edit
box. That would seal my proof of concept.</p>

<p>Other automation tools need you to make a GUI map (Mercury Winrunner) or an
include file (Segue Silk) of every page you view before running the automation.
I wanted something that would just look through the code that was already on
the page and pick out a control on the fly using the power of regular
expressions.</p>

<p>I found all of the methods and properties in the following example in the <a
href="http://msdn.microsoft.com/workshop/author/dhtml/reference/dhtml_reference_entry.asp">Microsoft
DHTML API documentation</a>.  First I needed a name for my subroutine.
<code>SetEditBox</code> seemed easy to understand.</p>

<pre><code>sub SetEditBox {
}</code></pre>

<p>Next I need to pass in two parameters. The first would be the name of the
control and the second would set the text.</p>

<pre><code>sub SetEditBox {
    my ($name,$value) = @_;</code></pre>

<p>I had to start with the document object from my reference to the DOM:</p>

<pre><code>sub SetEditBox {
    my ($name,$value) = @_;
    $IEDocument = $IEObject-&gt;{Document};</code></pre>

<p>To save time iterating, I made the assumption that edit boxes would only
appear inside forms. I used the collection called <code>forms</code> to return
all forms on the page.</p>

<pre><code>$forms = $IEDocument-&gt;forms;</code></pre>

<p>Now it was time to iterate.</p>

<pre><code>for ($i = 0; $i &lt; $forms-&gt;length; $i++) {
}</code></pre>

<p>First I needed each item in the form collection.</p>

<pre><code>$form = $forms-&gt;item($i);</code></pre>

<p>Inside this iteration I wanted to find a specific element of the form with
the name of the edit box.</p>

<pre><code>if (defined($form-&gt;elements($name))) {
}</code></pre>

<p>Inside this if statement I wanted to set the value of the edit box to the
value passed into the subroutine.</p>

<pre><code>$form-&gt;elements($name)-&gt;{value} = $value;</code></pre>

<p>Then it was time to get out of Dodge so I wouldn't waste time continuing the
iteration.</p>

<pre><code>return;</code></pre>

<p>Here is the final initial subroutine.</p>

<pre><code>sub SetEditBox {
    my ($name, $value) = @_;
    my $IEDocument     = $IEObject-&gt;{Document};
    my $forms          = $IEDocument-&gt;forms;

    for (my $i = 0; $i &lt; $forms-&gt;length; $i++) {
        my $form       = $forms-&gt;item($i);
        if (defined($form-&gt;elements($name))) {
           $form-&gt;elements($name)-&gt;{value} = $value;
        }
        return;
    }
}</code></pre>

<p>Here is something very similar to the first original proof of concept
version of <a href="http://samie.sourceforge.net">SAMIE</a>:</p>

<pre><code>use Win32::OLE qw(EVENTS);
my $URL = "http://samie.sf.net/simpleform.html";
my $IE  = Win32::OLE-&gt;new("InternetExplorer.Application")
    || die "Could not start Internet Explorer.Application\n";
Win32::OLE-&gt;WithEvents($IE,\&amp;Event,"DWebBrowserEvents2");

$IE-&gt;{visible} = 1;

$IE-&gt;Navigate($URL);

Win32::OLE-&gt;MessageLoop();
SetEditBox("name","samie");

sub Event {
    my ($Obj,$Event,@Args) = @_;
    print "Here is the Event: $Event\n";
    if ($Event eq "DocumentComplete") {
        $IEObject = shift @Args;
        print "Here is my reference: $IEObject\n";
        print "URL: " .  $IEObject-&gt;Document-&gt;URL . "\n";
            Win32::OLE-&gt;QuitMessageLoop();
    }
}

sub SetEditBox {
    my ($name, $value) = @_;
    my $IEDocument     = $IEObject-&gt;{Document};
    my $forms          = $IEDocument-&gt;forms;

    for (my $i = 0; $i &lt; $forms-&gt;length; $i++) {
        my $form       = $forms-&gt;item($i);
        if (defined($form-&gt;elements($name))) {
           $form-&gt;elements($name)-&gt;{value} = $value;
        }
        return;
    }
}</code></pre>

<p>It made me laugh and tip my hat to Larry Wall, to think that I had the basic
proof of concept of a $3,000 dollar per seat automation tool with about thirty
lines of Perl.  See more at the <a href="http://samie.sourceforge.net/">SAMIE
home page</a>.</p>
<csperl file="grab" domain="on" record="b/1714" template="b/article_sidebar2.view">

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-758" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/p6pdigest/20050410.html" rel="bookmark">This Week in Perl 6, April 4-11, 2005</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2005-04-14T00:00:00-08:00">April 14, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>Whoa! Deja vu! Where'd Matt go?</p>

<p>Don't worry, Matt's still writing summaries. As you may have noticed, Matt's
been writing summaries every two weeks. Now so am I. Because we love you, we've
decided to arrange things so I write summaries in the weeks when Matt doesn't.
We could do it the other way, but that some could see as self-defeating.  Heck,
when I say "some" I probably mean "all."</p>

<p>So bear with me while I remember how to type all those accented characters
and get back into the swing of writing these things (and of reading everything
in the mailing lists once more--someone should write a summary for us
summarizers).</p>

<p>I'll be sticking to my old "lists in alphabetical order" scheme of
writing summaries. Let's get going.</p>

<h3>This Week in <i>perl6-compiler</i></h3>

<h4><a
href="http://groups.google.com/groups?threadm=6.2.0.14.2.20050405083226.02fbc8a8@pop.pipeline.com">Array
of Arrays, Hash of Hashes, Elems, Last</a></h4>

<p>Lev Selector asked for confirmation that Pugs didn't support compound data
structures, <code>@ar.elems</code>, or <code>@ar.last</code>. Autrijus and
others confirmed that they didn't then, but they do now.</p>

<h4><a
href="http://groups.google.com/groups?threadm=p06210202be7926b05de8@[192.168.1.102]">MakeMaker6
Stalls on Takeoff</a></h4>

<p>Darren Duncan pointed out that while last week's summary had claimed he was
working on implementing MakeMaker in Perl 6, this is, sadly, not the case. He
reckoned he'd possibly look into it again when he had tuits and Pugs was more
complete (supporting objects, for instance).</p>

<h4><a
href="http://groups.google.com/groups?threadm=200504072344.18631.roiem@actcom.co.il">Declaration
Oddness</a></h4>

<p>Roie Marianer pointed out what looks like some weirdness in Pugs' parsing of
lexically scoped subroutines. Warnock applies.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050407174040.GA26479@lupus.perlwolf.com">Toronto
Pugs Hackathon</a></h4>

<p>John Macdonald asked for people who wanted to come to the YAPC::NA Pugs
hackathon to get in touch with him beforehand, as there is limited space.
If you're interested, drop him a line.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050409104859.63926.qmail@web50803.mail.yahoo.com">Pugs
Slice Oddities</a></h4>

<p>Andrew Savige noticed some weirdness in Pugs's slicing behavior. He posted
some example code showing the problem. Autrijus agreed that there was a problem
and explained that he was in the process of rewriting all the variable types,
symbol tables, and casting rules to agree with the Perl 5 model as described in
<em>perltie.pod</em>. The rewrite is currently failing tests, so he posted a
patch for people who want to play. On Sunday, he bit the bullet and committed
the entire 2500-line patch which "touches pretty much all evaluator code."</p>

<ul>

<li><a href="http://autrijus.org/tmp/itype.patch">Autrijus's Patch</a></li>

<li><a href="http://use.perl.org/~autrijus/journal">Autrijus on the
patch</a></li>

</ul>

<h3>Meanwhile, in <i>perl6-internals</i></h3>

<h4><a
href="http://groups.google.com/groups?threadm=42534227.7000005@coleda.com">Tcl,
Unicode</a></h4>

<p>William Coleda has been trying to add Unicode support to his Tcl
implementation and he fell across issues with missing methods in
<em>charset/unicode.h</em>. Leo waved a magic wand and checked in an
implementation that he fenced around with disclaimers.</p>

<h4><a
href="http://groups.google.com/groups?threadm=cdcef3714478b9d9e45d6571b17ce460@fotango.com">The
Status of Ponie</a></h4>

<p>Nicholas Clark confessed that Ponie had stalled for some time, but sweetened
the pill by announcing that it's about to restart and that he will be able to
allocate at least one day a week to the project. He pointed people at the <a
href="http://opensource.fotango.com/software/ponie/plan">Ponie
intro/roadmap</a> that breaks down the required tasks between here and a first
release, complete with time estimates. If you're interested in getting Ponie to
a ridable state, this is a good place to start.</p>

<p>People were pleased.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050406222449.GS12946@perlsupport.com">Monthly
Release Schedule</a></h4>

<p>Chip donned his "Fearless Leader" hat and announced that Parrot will move to
a monthly release schedule (with an initial three-week "month" to get things
into sync). There was some debate about whether Solaris/SPARC should be one of
the officially required monthly release platforms (Darwin, <code>linux-x86-gcc3.*</code>, and
<code>win32-ms-cl</code> were Chip's initial blessed three). This morphed into a discussion
of Tinderbox; apparently there are cool things happening behind the scenes.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050407082131.24711.qmail@lists.develooper.com">Calling
Convention Abstraction</a></h4>

<p>What do you know? You go away for <em>n</em> months and when you come back
people are <em>still</em> talking about calling conventions.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/54bef4c32fea8d8f/222d23c8b8d1f347">Dynamic
Perl, Part 1</a></h4>

<p>William Coleda announced that he was starting work on removing the core's
dependence on <code>Perl*</code> PMCs in favor of using language-agnostic PMCs
internally and loading the Perl ones dynamically as required.  He dealt with
everything but <code>PerlArray</code> quickly and the list discussed names and
ways forward with that tricky case. It looks like someone with tuits needs to
add and write tests for some <code>vtable</code> methods for
<code>ResizablePMCArray</code>.</p>

<h4><a
href="http://groups.google.com/groups?threadm=m3oecqrlm4.wl_rs@pobox.com">Subversion</a></h4>

<p>Another discussion that wouldn't go away back when I was last writing
summaries has come to a head. Parrot's finally migrating from CVS to
Subversion. By the time you read this, Parrot's main repository should be
at <a href="http://svn.perl.org/parrot">svn.perl.org/parrot</a>. Hurrah!</p>

<p>There were, of course, <a
href="http://groups.google.com/groups?threadm=m34qeeqzzm.wl_rs@pobox.com">wrinkles
to iron out</a>.</p>

<ul><li><p><a href="http://www.parrotcode.org/source.html">Getting started with
subverted Parrot</a></p></li></ul>

<h4><a
href="http://groups.google.com/groups?threadm=198c873805041115575359f54c@mail.gmail.com">The
<em>imcc/</em> Subdirectory</a></h4>

<p>Matt Diephouse wondered if, now that IMCC has been integrated with Parrot,
we really need the <em>imcc/</em> subdirectory. He suggested that maybe its
contents should be distributed about the rest of the Parrot directory
structure. MrJoltCola (Melvin Smith?) thought it was best kept separate and
thought of as a front end. Bernhard Schmalhofer pointed out PAST, another
Parrot front end, and suggested that it may make sense to refactor
<em>imcc/main.c</em> into (he suggests) <em>src/main.c</em> and
<em>imcc/frontend.c</em>, which would make the distinction rather clearer and
provide an opportunity to clean up the exported symbols. Leo pretty much agreed
with Melvin (no comment on Bernhard's suggestions yet, though).</p>

<h4><a
href="http://groups.google.com/groups?threadm=425B900E.6050409@toetsch.at">Perl
Jobs for the Willing</a></h4>

<p>Leo looked for volunteers to rejig <em>t/src/manifest.t</em> to use
<em>.svn/Entries</em> instead of <em>CVS/Entries</em> when checking the
<em>MANIFEST</em>. Michael Schwern (possibly accidentally) volunteered.</p>

<h3>Meanwhile, in <i>perl6-language</i></h3>

<p>A quick note about notation: I've started borrowing notation from
Ruby/Smalltalk to discuss methods. Where I write <code>SomeClass#method</code>,
then I am referring to an instance method of <code>SomeClass</code> and where I
write <code>SomeClass.method</code>, I am referring to a class method.</p>

<h4><a
href="http://groups.google.com/groups?threadm=42517043.1080204@orthogon.com">Identity
Tests and Comparing Two References</a></h4>

<p>By heck, but I've not been keeping up.</p>

<p>I started understanding what was going on when people started talking about
implicit dereferencing of long chains of references. Larry's saying that even
if <code>$foo</code> is a reference to a reference to a reference to a ... to
"10," then <code>$$foo</code> will chase all the way along the reference chain
and evaluate to "10." The general response seemed to be, "Wah! How do I make it
not do that?"</p>

<p><a
href="http://groups.google.com/groups?threadm=20050406183035.GB20211@wall.org">How
to help Larry</a></p>

<h4><a
href="http://groups.google.com/groups?threadm=20050408060706.8683.qmail@web60801.mail.yahoo.com"><code>say</code>
What? </a></h4>

<p>Ovid wondered if <code>say</code> (and <code>print</code>, come to that)
should default to printing the current topic. An initial hunt through the Perl
6 documents proved to be "like trying to sip through a firehose," so he asked
the list (and dropped a heavy hint about indexing the docs).</p>

<p>According to Luke, it should default to the current topic.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050408140311.GD21475@sci.fi">Blocks,
Continuations, and <code>eval()</code></a></h4>

<p>Wolverian's been looking at the Perl 5 debugger and wondered if it would be
possible to add an <code>eval</code> method to objects that represent scopes.
The idea is that:</p>

<pre><code>$scope.eval 'say $foo'</code></pre>

<p>would evaluate <code>say $foo</code> with all of <code>$scope</code>'s
bindings, etc. in place. (I wonder what <code>$scope.eval 'return'</code> would
do.) At least, that's what <em>I</em> think he meant. Others asked for
clarification. Wolverian also wanted to know how to get hold of a scope's
continuation (or at least the current continuation). Larry has in the past said
that he wouldn't expose continuations in the core language. Others have noted
that it wouldn't be beyond the bounds of possibility to write a Parrot-level
module which would expose them, though.</p>

<h4><a
href="http://groups.google.com/groups?threadm=f773baa01367af7f6305d2d9624ae684@iinteractive.com">Questions
on <code>$pair.kv</code></a></h4>

<p>Stevan Little had some questions about the behavior of the <code>Pair#kv</code>
method.  Luke came through with the answer ("when all else fails, consider the
pair to be a one-element hash").</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050410030004.16112.qmail@web60805.mail.yahoo.com">Managing
PLEAC</a></h4>

<p>Prompted by a suggestion from Tim Bunce, Ovid started porting the examples
in the Perl Cookbook into <a
href="http://svn.openfoundry.org/pugs/examples/cookbook/">idiomatic Perl 6</a>.
He asked for comments and suggestions on how to proceed.</p>

<p>Marcus Adair proposed, and Luke Palmer strongly seconded, moving the
development of the code onto a mediawiki (wikipedia)-style Wiki that has good
support for "offline" discussion of code as it develops. Autrijus reckoned that
his current practice of handing out SVN committer bits to anyone who expressed
an interest and leaving discussion in the files themselves seems to be working
pretty well so far. He pointed at <a href="http://pugs.kwiki.org/">pugs.kwiki.org</a>, though.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050410104626.GA11509@ttul.org">Collaborative
Synopses</a></h4>

<p>Bryan Ingerson posted a preliminary cut of Synopsis 26 and asked for
comments. Yuval Kogman pointed out that the <a
href="http://svn.openfoundry.org/pugs/docs/"><em>docs/</em> subdirectory of the
Pugs distribution</a> is filled with documentation that needed proofreading and
nitpicking. Go to it, people.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050410174751.88219.qmail@web60805.mail.yahoo.com">Aliasing
Swapped Values</a></h4>

<p>Ovid wondered what:</p>

<pre><code>($x,$y) := ($y, $x)</code></pre>

<p>would do.</p>

<p>Juerd reckoned the answer is straightforward, and I must say I agree with
him.</p>

<h4><a
href="http://groups.google.com/groups?threadm=fb07797705041111035357ff89@mail.gmail.com"><code>String#chars</code>
in a List Context</a></h4>

<p>Marcus Adair argued that it seems natural that <code>String#chars</code>,
when used in a list context, should return a list of the Unicode chars in the
string.  Opinion seemed to favor the idea, but there's been no ruling from
Larry (or anyone else on the Design Team).</p>

<h4><a
href="http://groups.google.com/groups?threadm=200541194433.231936@GatewayM275">Whither
<code>use English</code></a></h4>

<p>David Vergin wondered if Perl 6 would have an equivalent of <code>use
English</code>, which will give sensible names to the various magic globals
(those that still exist, least). The answer: yes and no. There will be no
<em>English.pm</em> module, but the magic globals will all have English names
by default.</p>

<h4><a
href="http://groups.google.com/groups?threadm=fb07797705041117364d084d8e@mail.gmail.com">Heredocs
and Their Workings</a></h4>

<p>Marcus Adair wondered about the use of Heredocs as positional parameters.
Luke confirmed that they should work just like they do in Perl 5, modulo minor
matters of spelling (now <code>qq::to/END/</code>, etc.) and whitespace
removal.</p>

<h4><a
href="http://groups.google.com/groups?threadm=20050412063042.GA29831@navi.cx">Slicing
Conflict</a></h4>

<p>Luke pointed out that:</p>

<pre><code>my @a = (1,2,3,4);
my @b = @a[1...];
say +@b;</code></pre>

<p>is potentially problematic (he argues it should print "3", but Perl 5
semantics imply that it should print "Inf"). He proposed breaking with the Perl
5 way. Autrijus agreed with him and has implemented his proposal in Pugs.</p>

<h3>Coo--That Was Fun, I Think I'll Do It Again Some Time</h3>

<p>If you find these summaries useful or enjoyable, please consider
contributing to the Perl Foundation to help support the development of
Perl.</p>

<ul>

<li><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></li>
<li><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></li>

</ul>

<p>Or you can check out <a href="http://www.bofh.org.uk/">my website</a>.
Maybe now that I'm back writing stuff, I'll start updating it.  There are also <a
href="http://www.flickr.com/photos/pdcawley"> vaguely pretty photos by
me</a>.</p>

<p>That's quite enough shameless self-promotion. See you in two weeks.</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar2.view">
<!-- sidebar ends -->
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-750" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/14/cpan_guidelines.html" rel="bookmark">Building Good CPAN Modules</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Rob Kinyon</span> on <abbr class="published" title="2005-04-14T00:00:00-08:00">April 14, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->

<p>When you are planning to release a module to CPAN, one of your first tasks
is figure out what OS, Perl version(s), and other environments you will and
will not support. Often, the answers will come from what you can and cannot
support, based on the features you want to provide and the modules and
libraries you have used.</p>

<p>Many CPAN modules, however, unintentionally limit the places where they can
work. There are several steps you can take to remove those limitations.  Often,
these steps are very simple changes that can actually enhance your module's
functionality and maintainability.</p>

<h3>It Runs On My Machine</h3>

<p>You have the latest PowerBook, update from CPAN every day, and run the
latest Perl version. The people using your module are not.  Remember, just
because an application or OS is older than your grandmother doesn't mean that
it isn't useful anymore. Code doesn't spontaneously develop bugs over time, nor
does it collect cruft that makes it run slower.  Some vitally important
applications have run untouched for 30+ years in languages that were
deprecated when you were in diapers. These applications keep the lights on and
keep track of all the money in the world, for example, and they typically run
on very old computers.</p>

<p>Companies want to keep using their older systems because these systems work
and they want to use Perl because Perl works everywhere.  If you can leverage
CPAN, you already have 90 percent of every Perl application written.</p>

<h4>When in Rome</h4>

<p> <a href="http://www.cpan.org/ports/index.html">Perl runs on at least 93
different operating systems</a>. In addition, there are <a
href="http://ftp.funet.fi/pub/CPAN/src/">18 different productionized Perl 5
versions</a> floating around out there (not counting the development
branches and build options). <code>93 x 18 = 1674</code>.  That means your
module could run on one of well over 1500 different OS/Perl version
environments. Add in threading, Unicode, and other options, and there is simply
no way you can test your poor module in all of the places it will end up!</p>

<p>Luckily, Perl also provides (many of) the answers.</p>

<h5>Defining Your Needs</h5>

<p>If you know that your module simply will not run in a certain environment,
you should set up prerequisites. These allow you to provide a level of safety
for your users. Prerequisites include:</p>

<ul>

<li><p>OSes that your module will not run under</p>

<p>Check <code>$^O</code> and <code>%Config</code> for this.  <code>$^O</code>
will tell you the name of the operating system. Sometimes, this isn't specific
enough, so you can check <code>%Config</code>.</p>

<pre><code>use Config;

if ( $Config{ osname } ne 'solaris' || $Config{ osver } &lt; 2.9 )
{
    die "This module needs Solaris 2.9 or higher to run.\n";
}</code></pre>

<p>It's usually better to limit yourself to a specific set of OSes that you
know to be good. As your module's popularity grows, users will let you know if
it works elsewhere.</p></li>

<li><p>Perl versions/features</p>

<p>Check <code>$]</code> and <code>%INC</code> for this. <code>$]</code> holds
the Perl version and <code>%INC</code> contains a list of loaded Perl modules
so far. (See the <a href="/pub/a/2005/04/14/cpan_guidelines.html?page=2#threading">Threading section</a> for an example.) If
your module simply cannot be run in Perl before a certain version, make sure you
have a <code>use 5.00<i>#</i></code> (where <code><i>#</i></code> is the version you need)
within your module. Additionally, <a
href="http://search.cpan.org/perldoc?Module::Build">Module::Build</a> allows
you to specify a minimum Perl version in the <code>requires</code> option for
the constructor.</p></li>

<li><p>Modules/libraries</p>

<p>In <a
href="http://search.cpan.org/perldoc?ExtUtils::MakeMaker">ExtUtils::MakeMaker</a>,
you can specify a <code>PREREQ_PM</code> in your call to
<code>WriteMakefile()</code> to indicate that your module needs other modules
to run. That can include version numbers, both the minimum and maximum acceptable.
<code>Module::Build</code> has a similar feature with the <code>requires</code>
option to the constructor.</p>

<p>If you depend on external, non-Perl libraries, you should see if they exist
before continuing onwards. Like everything else, CPAN has a solution: <a
href="http://search.cpan.org/perldoc?App::Info">App::Info</a>.</p>

<pre><code>use App::Info::HTTPD::Apache;

my $app = App::Info::HTTPD::Apache-&gt;new;

unless ( $app-&gt;installed ) {
    die "Apache isn't installed!\n";
}</code></pre></li>

</ul>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/936" template="b/article_sidebar.view">
<!-- sidebar ends -->

<h5>Operating System</h5>

<p>What OS your module happens to land on is both less and more of an issue
than most people realize. Most of us have had to work in both Unix-land and
Windows-land, so we know of pitfalls with directory separators and hard-coding
outside executables. However, there are other problems that only arise when
your module lands in a place like VMS.</p>

<p>The VMS filesystem, for example, has the idea of a volume in a
fully qualified filename. VMS also handles file permissions and file versioning
very differently than the standard Unix/Win32/Mac model. An excellent example
of how to handle these differences is the core module <a
href="http://search.cpan.org/perldoc?File::Spec">File::Spec</a>.</p>

<p>Because this is an issue most authors have had to face at some point, there
is a standard <code>perlpod</code> called, fittingly, <a
href="http://perldoc.perl.org/perlport.html"><code>perlport</code></a>. If you
follow what's in there, you will be just fine.</p>

<h5>Perl Version</h5>

<p>It's been over ten years since the release of Perl 5.0.0, and Perl has
changed a lot in that time. Most installations, however, are not the latest and
greatest version. The main reason is "<em>If it ain't broke, don't fix it</em>."
There is no such thing as a <em>safe upgrade</em>.</p>

<p>Most applications have no need for the latest features and will never trip
most of the bugs or security holes. They just aren't that complex. If you
restrict your module to features only found in 5.8, or even 5.6, you will
ignore a large number of potential users.</p>

<h5>Security Improvements</h5>

<p>Most security fixes are transparent to the programmer. If the algorithms
behind Perl hashes improve, you won't see it. If a new release fixes a hole in
<code>suidperl</code>, your module won't care.</p>

<p>Sometimes, however, a security fix is a new feature whose usage will (and
should) become the accepted norm: for example, the three-arg form of
<code>open()</code> of 5.6. In these cases, I use <code>string-eval</code> to try to use the
new feature and default to the old feature if it doesn't work.  (Checking
<code>$]</code> here isn't helpful because if your Perl version is pre-5.6, it
will still try to compile the three-arg form and complain.)</p>

<pre><code>eval q{
    open( INFILE, "&gt;", $filename )
          or die "Cannot open '$filename' for writing: $!\n";
}; if ( $@ ) {
    # Check to see if it's a compile error
    if ( $@ =~ /Too many arguments for open/ ) {
        open( INFILE, "&gt; $filename" )
            or die "Cannot open '$filename' for writing: $!\n";
    }
    else {
        # Otherwise, rethrow the error
        die $@;
    }
}</code></pre>

<h5>Bug Fixes</h5>

<p>Like security fixes, most bug fixes are transparent to the programmer.  Most
of us didn't notice that the hashing algorithm was less than optimal in 5.8.0
and had several improvements in 5.8.1. I know I didn't. In general, these will
not affect you at all.</p>

<p>Unlike security fixes, if your module breaks on a bug in a prior version of
Perl, there's probably not much you can do other than require the version where
the bug fix occurred.</p>

<h5>New Features</h5>

<p>Everyone knows about <code>use warnings;</code> and <code>our</code>
appearing in 5.6.0. You may, however, not know about the smaller changes. A
good example is sorting.</p>

<p>5.8.0 changed sorting to be stable. This means that if the two items compare
equally, the resulting list will preserve their original order.  Prior versions
of Perl made no such guarantee.  This means that code like this may not do what
you expect:</p>

<pre><code>my @input = qw( abcd abce efgh );
my @output = sort {
    substr( $a, 0, 3 ) cmp substr( $b, 0, 3 )
} @input;</code></pre>

<p>If you depend on the fact that <code>@output</code> will contain <code>qw(
abcd abce efgh )</code>, your module may be run into problems on versions prior
to 5.8.0. <code>@output</code> could contain <code>qw( abce abcd efgh)</code>
because the sorting function considers <code>abcd</code> and <code>abce</code>
identical.</p>

<h5>Gotchas With OS and Perl Versions</h5>

<p>Your module may be pristine when it comes to OS or Perl versions.  Is the
rest of your distribution? Your tests may betray a dependency that you weren't
aware of.</p>

<p>For example, 5.6.0 added lexically scoped warnings. Instead of using the <code>-w</code>
flag to the Perl executable, you can now say <code>use warnings</code>. Because
enabling warnings is generally a good thing, this is a very common header for
test files written by conscientious programmers using Perl 5.6.0+:</p>

<pre><code>use strict;
use warnings;

use Test::More tests =&gt; 42;</code></pre>

<p>Now, even if your module runs with Perls older than 5.6.0, your tests won't!
This means your distribution will not install through CPAN or CPANPLUS. For
administrators who install modules this way and who have better things to do
that debug a module's tests, they won't install it.</p>













<h4>Major New Features</h4>

<p>Some new features are so large that they change the name of the game.  These
include Unicode and threading. Unicode has had support, in one form or another,
in every version of Perl 5. That support has slowly moved from modules (such as
<a href="http://search.cpan.org/perldoc?Unicode::String">Unicode::String</a>)
to the Perl core itself.</p>

<h5 id="threading">Threading</h5>

<p>In 5.8.0, Perl's threading model changed from the 5.005 model (which never
worked very well) to ithreads (which do). Additionally, multi-core processors
are coming to the smaller servers. More and more, developers using 5.8+ choose
to write threaded applications.</p>

<p>This means that your module might have to play in a threaded playground,
which is a weird place indeed to process-oriented folks. Now, Perl's threading
model is unshared by default, which means that global variables are safe from
clobbering each other. This is different from the standard threading model,
like Java's, which shares all variables by default. Because of this decision,
most modules will run under threads with little to no changes.</p>

<p>The main issue you will need to resolve is what happens with your stateful
variables. These are the variables that persist and keep a value in between
invocations of a subroutine, yet need coordination across threads. A good
example is:</p>

<pre><code>{
    my $counter;
    sub next_value ( return ++$counter; }
}</code></pre>

<p>If you depend on this counter being coordinated across every invocation of
the <code>next_value()</code> subroutine, you need to take three steps.</p>

<ul>

<li><p>Sharing</p>

<p>Because Perl doesn't share your variables for you, you must explicitly share
<code>$counter</code> to make sure that it is correctly updated across
threads.</p></li>

<li><p>Locking</p>

<p>Because a context-switch between threads can happen at any time, you 
need to lock <code>$counter</code> within the <code>next_value()</code>
subroutine.</p></li>

<li><p>Version safety</p>

<p>Also, because ithreads is an optional 5.8.0+ feature and the
<code>lock()</code> subroutine is undefined before 5.6.0+, you may want to
do some version checks.</p>

<pre><code>{
    my $counter = 0;
    if ( $] &gt;= 5.008 &amp;&amp; exists $INC{'threads.pm'} ) {
        require threads::shared;
        import threads::shared qw(share);
        share( $counter );
    }
    else {
        *lock = sub (*) {}
    }

    sub next_value {
        lock( $counter );
        $counter++;
    }
}</code></pre></li>

</ul>

<p>The best description that I've seen of what you need to do to port your
application to a threaded works successfully is "<a
href="/pub/a/2002/06/11/threads.html">Where Wizards Fear to
Tread</a>" on Perl 5.8 threads.</p>

<h5>Unicode</h5>

<p>Although Unicode had some support prior to 5.8.0, a major feature in 5.8.0
was the near-seamless handling of Unicode within Perl itself.  Prior that that,
developers had to use Unicode::String and other modules.  This means that you
should look to handling strings as gingerly as possible if you consider support
for Unicode on Perls prior to 5.8.0 as important. Luckily, most major modules
already do this for you without you having to worry about it.</p>

<p>Discussing how to handle Unicode cleanly is an article in itself.  Please
see <a href="http://perldoc.perl.org/perlunicode.html"><code>perlunicode</code></a> and <a
href="http://perldoc.perl.org/perluniintro.html"><code>perluniintro</code></a> for more
information.</p>

<h4>Playing Nicely with Others</h4>

<p>If you're like me, you heard "Doesn't play well with others" a lot in
kindergarten. While that's an admirable trait for a hacker, it's not something
to praise in any modules that production systems depend upon. There are several
common items to look out for when trying to play nicely with others.</p>

<h5>Persistent Environments</h5>

<p>Persistent environments, like <code>mod_perl</code> and FastCGI, are a fact of life.
They make the WWW work. They are also a very different beast than a basic
script that runs, does its thing, and ends. Basically, a persistent
environment, such as <code>mod_perl</code>, does a few things.</p>

<ul>

<li><p>Persistent interpreter</p>

<p>Launching the Perl executable is expensive, relatively speaking. In an
environment such as a web application, every request is a separate invocation of
a Perl script. Persistence keeps a Perl interpreter around in memory between
invocations, reducing the startup overhead dramatically.</p></li>

<li><p>Forked children</p>

<p>In order to handle multiple requests at once, persistent environments tend
to provide the capability for forked child processes, each with its own
interpreter. Normally, this requires a copy of each module in every child's
memory area.</p></li>

<li><p>Shared memory</p>

<p>Nearly every request will use the same modules (CGI, DBI, etc). Instead of
loading them every time, persistent environments load them into shared memory
that each of the child processes can access. This can save a lot of memory
that would otherwise be required to load DBI once for every child.  This allows the same
machine to create many more children to handle many more requests
simultaneously on the same machine.</p></li>

</ul>

<p>Caching needs a special mention. Because most persistent environments load
most of the code into shared memory before forking off children, it makes sense
to load as much code that won't change as possible before forking. (If the code does
change, the child process receives a fresh copy of the modified memory space,
reducing the benefit of shared memory.) This means that modules need to be able
to pre-load what they need on demand. This is why CGI, which normally defers
loading anything as much as possible, provides the <code>:all</code> option to
load everything at once.</p>

<!-- <p><em>Editor's note: add a link to this.</em></p> -->

<p>The <code>mod_perl</code> folks have an excellent set of documentation as to what's
different about persistent environments, why you should care, and what you need
to do for your module to work right.</p>

<h5>Overloading</h5>

<p>It's very easy to create an overloaded class that cannot work with other
overloaded classes. For example, if I'm using Overload::Num1 and
Overload::Num2, I would expect <code>$num1 + $num2</code> to DWIM.
Unfortunately, with most overloaded classes written as below, they won't. (For
more information as to how this code works, please read <a
href="http://perldoc.perl.org/overload.html"><code>overload</code></a>, or the excellent article "<a
href="/pub/a/2003/07/22/overloading.html">Overloading</a>.")</p>

<pre><code>sub add {
    my ($l, $r, $inv) = @_;
    ($l, $r) = ($r, $l) if $inv;

    $l = ref $l ? $l-&gt;numify : $l;
    $r = ref $r ? $r-&gt;numify : $r;

    return $l + $r;
}</code></pre>

<p>Overload::Num1 uses the <code>numify()</code> method to retrieve the number
associated with the class. Overload::Num2 uses the <code>get_number()</code>
method. If I tried to use the two classes together, I would receive an error
that looks something like <em>Can't locate object method "numify" via package
"Overload::Num2"</em>.</p>

<p>The solution is very simple--don't define an <code>add()</code> method.
Define a <code>numify</code> (<code>0+</code>) method, set fallback to true, and walk away.
You don't need to define a method for each option. You only need to do so if
you have to do something special as part of doing that operation. For example,
complex numbers have to add the rational and complex parts separately.</p>

<p>If you absolutely have to define <code>add()</code>, though, use something
like this:</p>

<pre><code>sub add {
    my ($l, $r, $inv) = @_;
    ($l, $r) = ($r, $l) if $inv;

    my $pkg = ref($l) || ref($r);

    # This is to explicitly call the appropriate numify() method
    $l = do {
        my $s = overload::Method( $l, '0+' );
        $s ? $s-&gt;($l) : $l
    };

    $r = do {
        my $s = overload::Method( $r, '0+' );
        $s ? $s-&gt;($r) : $r
    };

    return $pkg-&gt;new( $l + $r );
}</code></pre>

<p>This way, each overloaded class can handle things its way. The assumption,
you'll notice, is to bless the return value into the class whose
<code>add()</code> the caller called. This is acceptable; someone called its
method, so <em>someone</em> thought it was top dog! (If you have an <code>add</code> method,
no <code>numify</code> method, and fallback activated, you will enter an infinite loop
because <code>numify</code> falls back to <code>$x + 0</code>.)</p>

<h5>Finding Out What Something Is</h5>

<p>At some point, your module needs to accept some data from somewhere. If
you're like me, you want your module to DWIM based on what data it has
received.  Eventually, you want to know "Is it a scalar, arrayref, or hashref?"
(Yes, I know there are seven different types in Perl.) There are many, many
ways to do this.  Some even work.</p>

<ul>

<li><p><code>ref()</code></p>

<p><code>ref()</code> is the time-honored way to dispatch based on datatype,
resulting in code that looks like:</p>

<pre><code>my $is_hash = ref( $data ) eq 'HASH';</code></pre>

<p>The problem is that <code>ref( $data )</code> will return the class name of
<code>$data</code> if it's an object. If someone has defined a class named
<code>HASH</code> (don't do that!) that uses blessed array references, this
will also break spectacularly.</p></li>

<li><p><code>isa()</code></p>

<p><code>isa()</code> will tell you whether a reference inherits from a class.
The various datatypes are actually class-like.  Some people suggest writing
code like:</p>

<pre><code>my $is_hash = UNIVERSAL::isa( $data, 'HASH' );</code></pre>

<p>This will work whether or not <code>$data</code> is blessed.  Again, though, if
someone is mean enough to call a class <code>HASH</code> and bless an arrayref
into it, you'll have trouble.  Worse, this technique may break polymorphism
spectacularly if <code>$data</code> is an object with an overloaded
<code>isa()</code> method.</p></li>

<li><p><code>eval</code> blocks</p>

<p>Just try the data as a hashref and see if it succeeds.</p>

<pre><code>my $is_hash = eval { %{$data}; 1 };</code></pre>

<p>This avoids the primary issue of the two options listed above, but this may
unexpectedly succeed in the case of overloaded objects. If <code>$data</code>
is a Number::Fraction, you will mistakenly use <code>$data</code> as a hash
because Number::Fraction uses blessed hashes for objects, even though the
intent is to use them as scalars.</p></li>

<li><p>Assume that objects are special</p>

<p>By using <a
href="http://search.cpan.org/perldoc?Scalar::Util">Scalar::Util</a>'s
<code>blessed()</code> and <code>reftype()</code> functions, you can determine
if a given scalar is a blessed reference or what type of reference it really
is. If you want to find out if something is a hash reference, but you want to
avoid the pitfalls listed above, write:</p>

<pre><code>my $is_hash = ( !blessed( $data ) &amp;&amp; ref $data eq 'HASH' );
# or
my $is_hash = reftype( $data ) eq 'HASH';</code></pre>

<p>Nearly every use of overloading is to make an object behave as a scalar, as
in Number::Fraction and similar classes. Using this technique allows you to
respect the client's wishes more easily. You will still miss a few
possibilities, such as (the somewhat eccentric) <a
href="http://search.cpan.org/perldoc?Object::MultiType">Object::MultiType</a>
(an excellent example of what you <em>can</em> do in Perl, if you put your mind
to it).</p>

<p>My personal preference is to let <code>$data</code> tell <em>you</em> what
it can do.</p></li>

<li><p>Object representations</p>

<p>Not all objects are blessed hashrefs. I like to represent my objects as
arrayrefs, and other people use Inside-Out objects which are references to
undef that work with hidden data. This means that my overloaded numbers are
arrays, but I want you to treat them as scalars. Unless you ask
<code>$data</code> how it wants you to treat it, how will you handle it
correctly?</p></li>

<li><p>Overloading accessors</p>

<p><a href="http://perldoc.perl.org/overload.html"><code>overload</code></a> allows you to
overload the accessor operators, such as <code>@{}</code> and <code>%{}</code>.
This means that one can theoretically bless an array reference and provide the
ability to access it as a hash reference. Object::MultiType is an example of
this. It is a hashref that provides array-like access.</p>

<p>Unfortunately, the CPAN module that would do this doesn't exist, yet.</p></li>

</ul>

<h4>Letting Others Do Your Dirty Work</h4>

<p>The modules that you and I use on a daily basis are, in general, as
OS-portable, version-independent, and polite as possible.  This means that the
more your module depends upon other modules to do the dirty work, the less you
have to worry about it. Modules like File::Spec and Scalar::Util exist to help
you out. Other modules like <a
href="http://search.cpan.org/perldoc?XML::Parser">XML::Parser</a> will do their
jobs, but also handle things like any Unicode you encounter so that you don't
have to.</p>

<p>That said, you still have to be careful with whom your young module
fraternizes with. Every module you add as a dependency is another module that
can restrict where your module can live. If one of your module's dependencies
is Windows-only, such as anything from the Win32 namespace, then your module is
now Windows-only. If one of your dependencies has a bug, then you also have
that bug. Fortunately, there are a few ways to bypass these problems.</p>

<ul>

<li><p>Buggy dependencies</p>

<p>Generally, module authors fix bugs relatively quickly, especially if you've
provided a test file that demonstrates the bug and a patch that makes those
tests pass. Once your module's dependency has a new version released, you can
release a new version that requires the version with the bug fix.</p></li>

<li><p>OS-specific dependencies</p>

<p>The first option is to accept it. If no one on Atari MiNT cares, then why
should you? Alternatively, you can encapsulate the OS-dependent module and find
another module that provides the same features on the OS you're trying to
support. File::Spec is an excellent example of how to encapsulate OS-specific
behavior behind a common API.</p></li>

</ul>

<p>There's a lot to keep in mind when writing a module for CPAN: OS and Perl
versions, Unicode, threading, persistence--it can be very overwhelming at
times. With a few simple steps and a willingness to let your users tell you
what they need, you'll be the toast of the town.</p>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-756" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/p6pdigest/20050403.html" rel="bookmark">This Fortnight in Perl 6, March 22 - April 3, 2005</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Matt Fowles</span> on <abbr class="published" title="2005-04-07T00:00:00-08:00">April  7, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<h3>Perl 6 Language</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/9872651345221180/dfb6e19d48233e5e#dfb6e19d48233e5e"><code>ceil</code>
and <code>floor</code></a></h4>

<p>Ingo Blechschmidt wondered if <code>ceil</code> and <code>floor</code> would
be in the core.  Warnock applies, although Unicode operators would let me
define circumfix <code>\lfloor</code> <code>\rfloor</code> (although I only
know how to make those symbols in TeX.).  Hmmm...using TeX to write Perl 6
code is an interesting idea.  At least then I could figure out how to make all
the special symbols. Maybe someone should make a package for that.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/6c59b6296687b28b/ee4f77b9920d10f7#ee4f77b9920d10f7"><code>s///</code>
object?</a></h4>

<p>Stevan Little wanted to know if <code>s///</code> could return some sort of
magic object to poke or prod. Larry said "no".</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a9ed04e00bade7c0/a98a66b19415638c#a98a66b19415638c">Markup-Like Features</a></h4>

<p>Michele Dondi asked if Perl 6 would have markup-like features in it.  Luke
Palmer asked for a more full explanation of what he meant. Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/2095c65253615777/846c34493a77f952#846c34493a77f952">The
Many Moods of <code>does</code></a></h4>

<p>Thomas Sandla&szlig; wondered if anyone would actually write S14 or if
<code>does</code> ate up <code>tie</code>/<code>bless</code>, enumerating the
many powers of <code>does</code>. Larry explained that <code>does</code> will probably have
mutated <code>bless</code> and then explained the contexts under which
<code>does</code> performs each of its powers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/376a1703e186fdc7/cd926e769f641b48#cd926e769f641b48">
Even More Moods of <code>does</code></a></h4>

<p>To follow up on his question about <code>does</code>, Thomas Sandla&szlig; wondered about
<code>is</code>, specifically whether it stubbed or initialized its variable.
Larry explained that <code>is</code> would probably initialize its variable and explained
how to use <code>is Ref</code> to stub but not initialize something.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/55f891b192f20c14/83bbcb56abdc82bb#83bbcb56abdc82bb">Perl
5 -&gt; Perl 6 Converter</a></h4>

<p>Adam Kennedy dropped a line to the list about PPI 0.903, which could form a
good base for a Perl 5 to Perl 6 converter. Larry explained that he is actually
using PPD (the actual Perl parser) to construct such a tool.  He also explained how he was going to do it. Actually, it's a really cool
approach for those of you who like elegant design approaches.  You should check
it out. I'll give you a hint: it starts by writing a glorified version of
<code>cat</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f92eba73771f2ea4/2bbcccff8279f3e8#2bbcccff8279f3e8">p5
Library Compatibility?</a></h4>

<p>Andrew Savige wondered if p6 would maintain the interface for most p5
libraries. chromatic almost died of fright from the suggestion. Juerd suggested
a deprecated namespace for such things. Larry gave him a Ponie instead. Later,
Larry thought that perhaps a special namespace for those libraries that could
be automatically converted might be appropriate.</p>

<p><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/317bd71bbbdcb75b/f25e44a2a6acaac7#f25e44a2a6acaac7">Follow-up</a></p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/e689486905f15375/a66721f161fa1b8f#a66721f161fa1b8f">Importing
Constants and Header Files</a></h4>

<p>Song10 wondered if there was an easy way to import constants from a module
and not have to specify their full scope in the includers file.  Larry
explained that p6 will have "policy" modules which would allow this.  He then
began to let his mind explore the possibility of allowing these modules to
return a string to evaluate in the user's scope. Then he realized how nasty
textual inclusion was in C and C++, and figured that a hygienic policy would be
better.</p>

<h4>Giving Lists More Operators</h4>

<p>Juerd constructed a table of string, integer, and list operators. He noticed
that the list section had blank spots where string and integer both had items.  He then
suggested quite a few more operators to fill these blanks. This morphed into
a discussion of code complexity and reading code.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/5421becb49cd4d45/93d8d0a1784b26de#93d8d0a1784b26de">Operators</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f17650313a30cbd2/13e063f81b8fc046#13e063f81b8fc046">Complexity</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a95fa7c746d4701a/cb333037a316bf59#cb333037a316bf59">String
Pain</a></h4>

<p>Chip wondered what exactly set <code>str</code> apart from <code>Str</code>
and the impact this difference had on Unicode support. Larry and Rod Adams explained that
<code>str</code> specifies a raw bytes view of strings and requires explicit
casts between different Unicode levels.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f092a633812dd0f2/968acd5602237302#968acd5602237302"><code>xx</code>
on Coderefs</a></h4>

<p>Luke Palmer wondered if the <code>xx</code> operator could include
overloading to run a coderef repeatedly and slap the results together. Others
liked it, but there was no word from on high.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/c934ac4a3d8062fb/b2e6bc96f946f634#b2e6bc96f946f634">Running
Pugs</a></h4>

<p>Adam Preble had some strange problems with Pugs' <code>make install</code>
target.  Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/acceda3b5d2f187e/2ec6fd2eccb43de7#2ec6fd2eccb43de7">Manipulating
Many Dimensional Hashes</a></h4>

<p>Zhuang Li wanted to know how to manipulate hashes of unknown dimension.
Luke Palmer provided the answer.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/24aa21dd6f97b3b0/7ad67c4f07be22f8#7ad67c4f07be22f8">Semantics
of Currying</a></h4>

<p>Yuval Kogman has been implementing currying in Pugs. As such, he has found
some of the under-specified corner cases. Thus he, Larry, Luke Palmer, and
Thomas Sandla&szlig; delved into these mysteries.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/4cfcd0a1d4f53443/b41f615fc1e53d96#b41f615fc1e53d96">Multi-paradigmatic Perl 6</a></h4>

<p>Someone named Eddie posted a fairly long message to p6l on the Google Groups
interface suggesting that Perl 6 support delegation and other programming
paradigms. Sadly, no one told him that it already does both of those things,
because nobody saw his email. Google Groups does not send messages back to the
list.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/0af412a7054b8d13/4479115dcdc51e44#4479115dcdc51e44">NB
for Pugs on Low Memory Machines</a></h4>

<p>Adam Preble posted a helpful warning about installing Pugs on machines with
less than 200 MB of memory. Unfortunately he also posted it to Google Groups.
People should stop doing that. Is there some way to tell Google to prevent them
from doing that?</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/b29d689814d0a50e/bd6ed3ba5ee17ffb#bd6ed3ba5ee17ffb">PLEAC</a></h4>

<p>Tim Bunce suggested that people could add programming examples to PLEAC for
Perl 6. Of course they should run in Pugs if they are being released to the
world at large.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/ee84f795b861a961/7df6e2459c0bead8#7df6e2459c0bead8">Annotating
Code with Documentation</a></h4>

<p>Chip wants to be able to document his code by attaching documentation
directly to it. This would allow for nifty introspective features. Larry
pointed out that code will have access to the surrounding POD.</p>

<h4>Typo in S03</h4>

<p>Aaron Sherman pointed out a typo in S03. Luke Palmer explained that
dev.perl.org did not mirror the svn tree just yet. Juerd found one too and
received the same answer. This time, though, Robert Spier put in the necessary
magic so that dev.perl.org would update from svn.perl.org.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/68a7e0178a8a95f7/09503722ee7bc48d#09503722ee7bc48d">Aaron</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/65be84ce6c31bbbf/f5c9381e2193c02c#f5c9381e2193c02c">Juerd</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a89f6bf2170ebc88/27fab5f0a8dc612c#27fab5f0a8dc612c">Optimization
Hints</a></h4>

<p>Yuval Kogman noted that Perl 6 has some ability to provide lexically scoped
hints and suggested a few more things that might be hintable. Larry opened the
door for him to try to design such features.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/17969d56c1fb86e0/849d4e45300554bd#849d4e45300554bd">S29
Update</a></h4>

<p>Rod Adams' efforts to update S29 continue to push a very large thread about
things including numification of strings and various core operators.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/afad6d022c082774/1c880e5b9a5d101b#1c880e5b9a5d101b">String
Positions</a></h4>

<p>Aaron Sherman wanted a more OO way to look at the OS. Larry did not really
agree but suggested that someone could create a proxy object which would
reference all of those globals. Then a conversation about having units attached
to numbers sprang up. That sounds like a good module to me.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/1813d3d7b46c1bc5/bf70c18431f210b4#bf70c18431f210b4"><code>modify</code>
and <code>assign</code> Operators</a></h4>

<p>Andrew Savige wondered if there was a complete list of operators anywhere,
because he could not find <code>~^=</code> (string xor) documented anywhere.
Larry explained that the assign should probably be a meta operator to allow for
better extensibility</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/6bf1b2d4d5ffaf32/b107fe5aac5709d2#b107fe5aac5709d2">p5
-&gt; p6 Guide</a></h4>

<p>Adam Preble wondered if there was a basic p5 -&gt; p6 guide. Unfortunately
he posted to Google Groups.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/cf458503a5ec514f/2ea8a9d3e3e0fc75#2ea8a9d3e3e0fc75"><code>$_.method</code>
vs <code>$self.method</code></a></h4>

<p>The debate about whether <code>.method</code> should mean
<code>$self.method</code> or <code>$_.method</code> continued.
<code>$self</code> is still winning.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f6f0b8c28f4a7e00/d89b9178125802ca#d89b9178125802ca">Typo
Problems</a></h4>

<p>It seems that Juerd has typing problems. He wanted to know if he could form
a support group. Apparently he can only if he uses vim.</p>

<h4>Renaming Flattening and Slurp</h4>

<p>Terrence Brannon wants to change the terms "flatten" and "slurp" to something
else. Larry told him that this usage was unlikely to change.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/6364ee28da83e810/fe2a9bb6f846a662#fe2a9bb6f846a662">Flatten</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/699cf7f622b1e571/a9bb20ee75538f60#a9bb20ee75538f60">Slurp</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/4a8eb25e57148fcb/03ba459e92fde91a#03ba459e92fde91a">How
Read-Only is Read-Only? </a></h4>

<p>Chip wondered how deep read-only-ness or <code>is copy</code>-itude went on
arguments. The answer appears to be: shallow. This led to a very long discussion
of how much type checking will actually occur.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/24e369fba3ed626e/6e6a2aad1dcc879d#6e6a2aad1dcc879d"><code>pick</code>
on Non-Junctions</a></h4>

<p>Ingo Blechschmidt wondered what <code>pick</code> would do on an array or a
hash.  Many folk explained that it would remove and return an item or pair from
the container respectively. Larry commented that <code>pick</code> on a hash
could be harder than it looks.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/50079a618601b80d/e7c815b3765d8103#e7c815b3765d8103">Built-in
Multi Methods</a></h4>

<p>Wolverian wondered if some of the common functions called on strings would
actually be methods. Larry answered that they would more likely be multis to
allow for easier extension.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a264690496f82a28/383b82ce7c84105e#383b82ce7c84105e">Comparing
Two References</a></h4>

<p>Darren Duncan wanted to know if <code>=:=</code> was the correct operator
for testing if two variables refer to the same object. Larry explained that it
was. This led to a debate about how easily people can deal with chains of
references in Perl 6.</p>













<h3>Perl 6 Compiler</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/7ec5b9680b2e2b25/44dd1e2c65a9ec0e#44dd1e2c65a9ec0e">Pugs
Test Failures</a></h4>

<p>Will Coleda worriedly reported 115 failing subtests in Pugs. Stevan Little
explained that this was normal for between releases and was really more of a
TODO list than a problem.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/403ad974f7e3295d/be5a3ad79573ae3f#be5a3ad79573ae3f">Pugs
Darcs Repo</a></h4>

<p>Greg Buchholz noticed that the darcs repo for Pugs has trouble staying up to
date. Tupshin Harper suggested using <code>darcs whatsnew --look-for-adds
--summary</code> to find the offending files.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/7d0fcc2e85d25883/7c202ea0f1302c96#7c202ea0f1302c96"><code>BEGIN
{}</code> Time</a></h4>

<p>Autrijus wondered when <code>BEGIN</code> should run. Markus Laire posted a
useful summary of when the various CAPITAL things should run. Larry confirmed
Autrijus' suspicion.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/244ea8a4b952c9c2/71eff01bb226d6e1#71eff01bb226d6e1">YAML
Test Output</a></h4>

<p>Nathan Gray wondered if he should change his tests log to YAML output.
Stevan Little pointed him to <a
href="http://search.cpan.org/perldoc?Test::Harness::Straps">Test::Harness::Straps</a>, which can collect test output and transform it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/c08bbb8c8ba05f23/e425757e0f39458d#e425757e0f39458d">Semicolons
in p6</a></h4>

<p>Andrew Savige found some strange behavior with respect to statement
separation in Pugs. He thought that perhaps semicolons had changed their
status. They haven't.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2996dd373c00a9f0/bdf1c3471a53045b#bdf1c3471a53045b">Ugly
Dog Meets Ugly Bird</a></h4>

<p>Pugs r2^10 can compile p6 to imc which Parrot can run. I think I speak for
everyone when I say "Wow. Nice work, Autrijus.".</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/4cff94d05a0f66e8/5865ad1edbec35a3#5865ad1edbec35a3">String
Interpolation and Various Special Variables</a></h4>

<p>Andrew Savige noticed a couple of odd corner cases for string interpolation
in Pugs. This led to a discussion of which special variables (like
<code>$!</code>, <code>$/</code>, and <code>$"</code>) will continue to
exist.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/92946e6c221cea6e/bee7738ae13d3611#bee7738ae13d3611">Code
Coverage Metadata</a></h4>

<p>Paul Johnson posted a list of requirements he would like to see satisfied so
that he can easily generate Perl 6 coverage reports. Warnock applies.</p>

<h4>Pugs Release</h4>

<p>As is the fashion, Pugs went through two minor releases during this two week
period: 6.0.13 and 6.0.14.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/d977531c8c3c26a6/fef6c555d7f2d77f#fef6c555d7f2d77f">6.0.13</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/503f0f59d17d6de6/fc3c3dfa03be639b#fc3c3dfa03be639b">6.0.14</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/06170de60f15c7d1/b8af8ddd9f6668e6#b8af8ddd9f6668e6">Text
Editor Support for Perl 6</a></h4>

<p>Darren Duncan suggested that it might be a good idea for people to begin
prepping their favorite text editors to handle Perl 6 syntax correctly. Why
stop at syntax? I know I want to be able to type <code>:perl6do</code> in
vim.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/b908159d1d42be9d/4f7c49cf1c4913eb#4f7c49cf1c4913eb"><code>Makefile.PL</code></a></h4>

<p>Darren Duncan noticed that most things in Pugs use
Perl 6, while <code>Makefile.PL</code> was still Perl 5. He suggested writing the
<code>Makefile.PL</code>s in various modules in Perl 6 also. He then began
work on a <code>Pugs::Makemaker</code> module.</p>

<p><a href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/a54799a8447544d7/75deb16e3f23bba6#75deb16e3f23bba6">Work Begins</a></p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/a3de948450686dfb/f8bd616ed25e8ba9#f8bd616ed25e8ba9">Pugs
to Become a Perl 6 -&gt; Parrot AST Compiler</a></h4>

<p>Autrijus explained that he was planning on steering Pugs toward becoming a
Perl 6 -&gt; Parrot compiler which would interpret code (when Parrot is not
available) by mapping imc to Haskell.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/7c8a2fde84a44680/cc7ccf80f1db6b9f#cc7ccf80f1db6b9f">Pugs
Re-org</a></h4>

<p>Stevan Little suggested rearranging the Pugs repository a bit. The end
result is that modules which don't run in Pugs (yet) should go in
<code>modules/</code> while those which do should go in <code>ext/</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/b7654876184c315a/e5c177b644291946#e5c177b644291946">YAPC::NA
Pugs hack-a-thon</a></h4>

<p>John Macdonald posted his plan for the<code> YAPC::NA</code> Pugs hack-a-thon. His
description of the location makes me want to take time off work to go.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/bbfafdaf0f206314/bcb73c32ffd9f8f4#bcb73c32ffd9f8f4"><code>split</code>
Semantics</a></h4>

<p>Stevan Little found a bug in Pugs' <code>split</code>. Autrijus fixed it,
but noted that he had not replicated the full, bizarre semantics of Perl 5
(which come from awk). Larry told him not to work too hard on it, as it would
probably work in Perl 6 through a separate function.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/e655790aec06ff1c/b6bc7f344224557d#b6bc7f344224557d">Statement
Modifiers</a></h4>

<p>A bug in Pugs' parsing led Autrijus to seek information from a higher
authority. Larry explained the power of statement modifiers.</p>

<h3>Parrot</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5d07eef5fd6cc4e8/ae7deac783274d56#ae7deac783274d56">Move
Perl Tests Out of <code>pmc/pmc.t</code></a></h4>

<p>Steven Schubiger volunteered to reorganize <code>pmc/*.t</code> last time. He
did it, and Leo applied the patches.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/bf62dabc84b701c6/14246cc09d5e5efd#14246cc09d5e5efd">Areas
of Focus</a></h4>

<p>Chip, in a circumloquacious attempt to come up to speed, indirectly asked
what design issues needed attention. Leo explained the CPS issues that bogged
down Parrot of late.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/c64adac9b6b4b822/0b570c16d600dffd#0b570c16d600dffd">Improving
MinGW Docs</a></h4>

<p>Fran&ccedil;ois Perrad provided a patch improving the documentation for
building with MinGW. Leo applied part of it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/0cbe09585e5a3aed/75773e6add39f91b#75773e6add39f91b">Moving
<code>pmc2c2.pl</code> or <code>pmc2c.pl</code></a></h4>

<p>Matt Diephouse opened an RT ticket for cleaning up the file system
(specifically <code>pmc2c2?.pl</code>).</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/a5c89c1afb285fda/6de665799f024868#6de665799f024868">The
Learned Parrot</a></h4>

<p>Christian Aperghis-Tramoni reported that he has had success using Parrot
assembly as a teaching tool.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/17d6d6f97b715e1c/ca0ffab9e2314369#ca0ffab9e2314369">Performance
and Parrot</a></h4>

<p>Falcon posted a series of questions about Parrot in a fairly general sense.
Unfortunately, because he posted it to Google Groups, Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/98dbeeeefc63093c/e4d842b427760caf#e4d842b427760caf">First
MMD call</a></h4>

<p>Leo posted a first MMD call which uses an MMD PMC and a fair amount of
hand-made calling conventions set up.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f0304137d88751b6/7fb8c5d8b405e5ff#7fb8c5d8b405e5ff">OpenBSD
<code>atan2</code> Trouble</a></h4>

<p>Steve Peters noticed that <code>atan2</code> on OpenBSD is not quite
right.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/d3e1c7eadf5f7192/71a24123fabd55b8#71a24123fabd55b8">API
Change</a></h4>

<p>Leo changed various packfile functions to take an <code>Interp*</code>
argument. This does change the embedding API, but it had to be done.</p>

<h4><code>pmc2c2.pl</code> Cleanup</h4>

<p>Leo pointed out that <code>pmc2c2.pl</code> was not functioning correctly on all
platforms. He put out a call for interested parties. Matt Diephouse provided a
patch to clean up the internals of <code>pmc2c2.pl</code> a bit. Leo applied it.
Peter Sinnott returned a <code>$</code> that got lost in the shuffle, and
chromatic applied it. Matt went on to add better comments.</p>

<ul>

<li><a href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/06a1f8e695ef1aa1/c47eb087e2a86dd5#c47eb087e2a86dd5">Call</a></li>

<li><a href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/33304f22363ae810/81b48613c09a87ee#81b48613c09a87ee">Refactor</a></li>

<li><a href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/523ee2c3f024ea21/025c3cf568cdc087#025c3cf568cdc087">$ Found</a></li>

<li><a href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/a032216f4e4d4a71/e9221136e02bf015#e9221136e02bf015">Comments</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/56fd45369cc73260/952fba174cef9d9a#952fba174cef9d9a"><code>README.win32</code>
Update</a></h4>

<p>Klaas-Jan Stol provided an update to the <code>README.win32</code> directions.
Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9c9bf38c5ca50048/11363375f1e55224#11363375f1e55224"><code>SET_NON_ZERO_NULL</code></a></h4>

<p>Chip wondered why Parrot had a SET_NON_ZERO_NULL macro and suggested
removing it. The answer was, of course, speed. On architectures with a zero null,
this can be a no-op allowing the use of <code>calloc()</code>. Otherwise it has
to do something.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/ff04eefc36e9ea76/c72babeefba6f5a3#c72babeefba6f5a3">PMC
Constants</a></h4>

<p>Leo added support for <code>.const</code> things to imc. Unfortunately, the
GC eats them so you can't use it yet.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5b6a6e14efa7b74d/cdd2e03ca8a80a7f#cdd2e03ca8a80a7f">Garbage
Collection and Hash Creation</a></h4>

<p>Cory Spencer's LISP implementation revealed a bug in the hash creation
sequence. Leo fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f1c260366651efd4/021b233898e21a3a#021b233898e21a3a">MD5
Update</a></h4>

<p>Nick Glencross provided an update to the MD5 library. Leo applied it.</p>

<h4>Tcl Updates</h4>

<p>Will Coleda has been updating Tcl. He moved the parser into a PMC. Then he
tried to add octal and hex escapes only to discover missing transcodings. He
also found missing hash functions, but Leo fixed that.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/01fb6c6708902757/7e63bfff44b38cf3#7e63bfff44b38cf3">Parser</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f99a9979165e08dd/fd4c8b0780abb7b6#fd4c8b0780abb7b6">Transcodings</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/46298cb009469440/84a812d27e659c62#84a812d27e659c62">Hash</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e21a3949e4760878/5efff144d804f62e#5efff144d804f62e">Logging
IRC</a></h4>

<p>Someone suggested that we start to log IRC. Chip suggested that this might
not be cost effective as such logs are 99% dross and 1% value. He suggests
instead that people paste the good part into emails for the list.  I know that
I, for one, would not volunteer to summarize IRC.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e969976fbb944239/7b3eab465b44ab5a#7b3eab465b44ab5a">Segfault
Generating <code>config.fpmc</code></a></h4>

<p>chromatic (as his Linux PPC is wont to do) found a bug in the build. He
fixed it, and Leo applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/89a3517b473389fd/860892e9d0f5b12f#860892e9d0f5b12f">Lazy,
Lazy Steve</a></h4>

<p>Leo added a first implementation of a Lazy PMC for Autrijus to play
with.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f047aae076f5df5d/0ab639455638d725#0ab639455638d725">Win32
<code>make install</code></a></h4>

<p>Fran&ccedil;ois Perrad provided a patch fixing <code>MANIFEST.generated</code>
for Win32.  Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5417ba0786150aa6/43f10dcc8c2e9c58#43f10dcc8c2e9c58">Parrot
on Win32</a></h4>

<p>Ron Blaschke spent some time fixing Parrot on Win32, extending it to provide
a shared library.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/837c5d3bf114b39e/a67922987c2a4498#a67922987c2a4498">mod_parrot</a></h4>

<p>Jeff Horwitz released mod_parrot 0.2. It includes nifty features like
the beginning of an interpreter pool.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9fa5bf0bf84e783a/f0e37d095ada4337#f0e37d095ada4337">C90
Cleanup</a></h4>

<p>Peter Sinnott moved a few declarations further up. Leo applied the
patch.</p>













<h4>MMD on Argument Count</h4>

<p>Leo added the ability to MMD on argument count and PMC types.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/77ca782dd06c0271/4c42835ce6388c3d#4c42835ce6388c3d">Count</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5326320dee6c5480/6c5f23d859e7a2f4#6c5f23d859e7a2f4">Types</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/12f6f0ef9392c03d/8ebff13ccba5eb58#8ebff13ccba5eb58">Documentation
Typos</a></h4>

<p>Offer Kaye fixed a few typos. chromatic applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/eaf8660cb92100bf/006a51cbb9bdc9b3#006a51cbb9bdc9b3"><code>pmc
freeze.t</code></a></h4>

<p>Leo admired the trickiness of Bernhard Schmalhofer in his
<code>freeze</code> implementation.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/c0e9e185719ea7ae/f818bdab1df8b19f#f818bdab1df8b19f"><code>sys.t</code>
failure on MinGW</a></h4>

<p>Fran&ccedil;ois Perrad fixed a test failure on MinGW. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/6e795edbac04ef39/23e648965fbcafdf#23e648965fbcafdf">Builtin
Namespaces Issue</a></h4>

<p>Peter Sinnott pointed out some failing tests. Leo fixed them.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/c6eb0df40f37237c/6b4165aed54fd51a#6b4165aed54fd51a"><code>locate_runtime_file</code>
Error</a></h4>

<p>Bob Rogers provide a patch to switch <code>PARROT_TEST</code> to 1 by
default. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/fe139bf30260fa2e/aa1df4154c4e828a#aa1df4154c4e828a">Bytecode
Re-entrance</a></h4>

<p>Nigel Sandever had some questions about how Parrot and threading worked.
Melvin Smith provided the answers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/2df9d71e603fc2af/0236d8408d5c696f#0236d8408d5c696f">Pugs
Questions for Parrot FAQ</a></h4>

<p>Nicholas Clark noted that the question of why bother with Parrot when one
has Pugs has come up recently. The answer went into the Parrot FAQ: speed.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/0d03005eee522bfa/7327ab601eeae744#7327ab601eeae744">Pascal
for Perl</a></h4>

<p>Sven Schubert wondered if people had any suggestions for how to get PAPAgei
(his Pacal for Parrot compiler) up and running quickly. Leo told him to stick
with the tools he knows rather than going too far afield.</p>

<h4>Infix Op Proposal</h4>

<p>Leo posted his proposal for how to revamp infix ops. Nicholas Clark and
Luke Palmer asked a few questions.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9872731839119930/18f0a04dcae50a5b#18f0a04dcae50a5b">Discussion</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/472630c2b0603134/0815f5def2528387#0815f5def2528387">Moae</a></li>
Discussion</p>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/27ad49203fb127e9/860547f9152f1c15#860547f9152f1c15">Lexical
Pad Depth</a></h4>

<p>Cory Spencer wondered how to find the depth of the lexical pad stack.  Leo
told him.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/212955f9b4d3a2ad/c4c5e050ce386f1b#c4c5e050ce386f1b">Win32
Exit Codes</a></h4>

<p>Ron Blaschke noticed that there were tests failing on Win32 because the exit
code was not in the high 8 bits, but appeared directly. Leo suggested looking
to Perl 5 for prior art on what to do.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/72c0c2401220a3dd/6584831afd40324c#6584831afd40324c">Other
Languages on Parrot</a></h4>

<p>Bloves wondered if any other compilers were currently working toward
targeting Parrot. I pointed him to Cardinal, a Ruby compiler for Parrot that
appears dead.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/efedec7ce9c44b2a/e5769b252a9941c3#e5769b252a9941c3">Parrot64</a></h4>

<p>Adam Preble wondered if there has been any work on Parrot for AMD64. The
answer is: some, but nobody told him because he posted to Google Groups.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/54aba6b5de626a03/990013f2549886ff#990013f2549886ff">Parrot
Win32-Setup</a></h4>

<p>Fran&ccedil;ois Perrad provided a patch that creates a standard binary
distribution for Win32. There was some debate over the name of the make target,
but Fran&ccedil;ois is ready to send an updated version at Leo's command.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/d0fe25767929714f/c1f5f17efc7b6560#c1f5f17efc7b6560">Calling
Convention Abstraction</a></h4>

<p>Leopold Toetsch proposed a calling convention abstraction that would allow
Parrot to change its ABI a little more freely in the future. Roget Hale asked a
few questions which Leo answered.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/63feffac3e90a07e/c2a932928fb1c823#c2a932928fb1c823">No
0 Size Arrays</a></h4>

<p>Ron Blaschke noticed a broken Windows build, because of a 0 sized array.
Leo fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5583663eb8a02b6f/7d4a76dfd09b45ee#7d4a76dfd09b45ee">Unicode
String Literal Assertion Failed</a></h4>

<p>Will Coleda discovered a failing assertion in <code>utf8.c</code>.  Leo fixed
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/99d4af353893d1a1/b00816d25aff741a#b00816d25aff741a">NCI
Call Signature Change</a></h4>

<p>Leo changed the call signature for NCI to make <code>I</code> mean INTVAL
and <code>J</code> mean Parrot Interpreter.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/cf0aec53e126c012/4fbb010b37b34fec#4fbb010b37b34fec">Builtin
Infix Multis</a></h4>

<p>Leo added support for MMD on infix multis.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/2b4206275a5bf5b6/7c1e998cc73ecac4#7c1e998cc73ecac4"><code>touch</code>
vs <code>utime</code></a></h4>

<p>Chip asked if there was a reason that the <code>TOUCH</code> variable
doesn't use <code>utime</code>. Michael G. Schwern suggested <a
href="http://search.cpan.org/perldoc?ExtUtils::Command">ExtUtils::Command</a>.
Steve Peters points out that <code>utime</code> works only on existing
files.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/8dc8adf441fa6805/173d69e1fc260fda#173d69e1fc260fda"><code>make
imcc.l</code> For Modern Flex</a></h4>

<p>Chip opened a TODO for updating <code>imcc.l</code> to modern flex.</p>

<h4>Mac OS X Build Broken</h4>

<p>Will Coleda reported a broken build on Mac OS X with undefined symbols. Leo
found the cause and reverted it.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5e58af5059fa2946/356b9e568eca3039#356b9e568eca3039">Problem</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/4d012f6c68ffb933/1b1ec3ecc2e16fb0#1b1ec3ecc2e16fb0">Solution</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/8eece4a7517b63cd/91249b1c59096f12#91249b1c59096f12">SVN
Switch</a></h4>

<p>After much debate, the decision to switch from CVS to SVN has happened.  The
move will include the removal of ICU as a dependency.  <a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/506f637ec0cb36cc/adc0690ef419b75d#adc0690ef419b75d">Good
progress</a> has occurred on that front.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/7197ff1e2d33d6ec/b0533304331f2186#b0533304331f2186">MD5
on 64 Bits</a></h4>

<p>Nick Glencross has been hard at work trying to fix the MD5 library for
64-bit systems. It would be easier if he had access to one.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/caabd5aa219eebc8/d711871c5d49df91#d711871c5d49df91">Python
Version Guesswork</a></h4>

<p>Ron Blaschke noticed that ActiveState Python reports its build as 2.4
instead of 2.4.0. He provided a patch to account for this.</p>

<h3>The Usual Footer</h3>

<p>Posting via the Google Groups interface does not work. To post to any of
these mailing lists please subscribe by sending email to
<code>perl6-internals-subscribe@perl.org</code>,
<code>perl6-language-subscribe@perl.org</code>, or
<code>perl6-compiler-subscribe@perl.org</code>. If you find these summaries
useful or enjoyable, please consider contributing to the Perl Foundation to
help support the development of Perl. You might also like to send feedback to
<a href="mailto:ubermatt@gmail.com">ubermatt@gmail.com</a>.</p>

<ul>

<li><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></li>
<li><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></li>
<li><a href="http://planet.parrotcode.org/">Parrot Blog aggregator</a></li>

</ul>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar2.view">
<!-- sidebar ends -->
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-748" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/04/07/mockobject_kata.html" rel="bookmark">Perl Code Kata: Mocking Objects</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Stevan Little</span> on <abbr class="published" title="2005-04-07T00:00:00-08:00">April  7, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>The last Perl Code Kata was on <a
href="http://search.cpan.org/perldoc?DBD::Mock">DBD::Mock</a>, a mock DBI
driver which is useful for <a
href="/pub/a/2005/02/10/database_kata.html">testing Perl DBI
applications</a>. This Kata delves once again into the world of mock objects,
this time using the more general <a
href="http://search.cpan.org/perldoc?Test::MockObject">Test::MockObject</a>
module.</p>

<h3>What are Mock Objects?</h3>

<p>Mock objects are exactly what they sound like: "mocked" or "fake"
objects. Through the power of polymorphism, it's easy to swap one object for
another object which implements the same interface. Mock objects take advantage
of this fact, allowing you to substitute the <em>most minimally mocked
implementation of an object possible</em> for the real one during testing. This
allows a greater degree of isolation within your tests, which is just an all
around good thing.</p>

<h3>What are Mock Objects Good For?</h3>

<p>Mock objects are primarily useful when writing unit tests. They share a
certain similarity with the Null Object pattern in that they are
purposefully <em>not</em> meant to work. Mock objects take things one step
further and allow you to mock certain actions or reactions that your mock
object should have, so they are especially useful in scenarios usually
considered <em>hard to test</em>. Here is a short list of some scenarios in
which mock objects make hard things easy.</p>

<ul>

<li><p><em>Tests which depend on outside resources such as networks, databases,
etc.</em></p>

<p>If your code properly encapsulates any outside resources, then it should be
possible to substitute a mocked object in its place during testing.  This is
especially useful when you have little control over the execution environment
of your module. The previous Test Code Kata illustrated this by mocking the
database itself.  You need not stop with databases; you can mock any
sufficiently encapsulated resource such as network connections, files, or
miscellaneous external devices.</p></li>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<!-- sidebar ends -->

<li><p><em>Tests for which dependencies require a lot of setup.</em></p>

<p>Sometimes your object will have a dependency which requires a large amount
of set-up code. The more non-test code in your tests, the higher the
possibility that it will contain a bug which can then corrupt your test
results. Many times your code uses only a small portion of this hard-to-setup
dependency as well. Mock objects can help simplify things by allowing you to
create the most minimally mocked implementation of an object and its
dependencies possible, thus removing the burden of the set-up code and reducing
the possibility of bugs in your non-test code.</p></li>

<li><p><em>Tests for failures; in particular, failure edge cases.</em></p>

<p>Testing for failures can sometimes be very difficult to do, especially
when the failure is not immediate, but triggered by a more subtle set of
interactions. Using mock objects, it is possible to achieve exacting
control over when, where, and why your object will fail. Mock
objects often make this kind of testing trivial.</p></li>

<li><p><em>Tests with optional dependencies.</em></p>

<p>Good code should be flexible code. Many times this means that your code
needs to adapt to many different situations and many different environments
based on the resources available at runtime. Requiring the presence of these
situations and/or environments in order to test your code can be very difficult
to set up or to tear down.  Just as with testing failures, it is possible to
use mock objects to achieve a high degree of control over your environment and
mock the situations you need to test.</p></li>

</ul>

<h3>The Problem</h3>

<p>The example code for this kata illustrates as many points as possible about
which mock objects are good at testing. Here is the code:</p>

<pre><code>package Site::Member;

use strict;
our $VERSION = '0.01';

sub new { bless { ip_address =&gt; '' }, shift }

sub ip_address { 
    my ($self, $ip_address) = @_;
    $self-&gt;{ip_address} = $ip_address if $ip_address;
    return $self-&gt;{ip_address};
}

# ...

sub city {
    my ($self) = @_;
    eval "use Geo::IP";
    if ($@) {
        warn "You must have Geo::IP installed for this feature";
        return;
    }
    my $geo = Geo::IP-&gt;open(
                "/usr/local/share/GeoIP/GeoIPCity.dat", 
                Geo::IP-&gt;GEOIP_STANDARD
            ) || die "Could not create a Geo::IP object with City data";
    my $record = $geo-&gt;record_by_addr($self-&gt;ip_address());
    return $record-&gt;city();
}</code></pre>

<p>This example code comes from a fictional online community software package.
Many such sites offer user homepages which can display all sorts of user
information. As an optional feature, the software can use the member's IP
address along with the <a
href="http://search.cpan.org/perldoc?Geo::IP">Geo::IP</a> module to determine
the user's city. The reason this feature is optional is that while
<code>Geo::IP</code> and the C library it uses are both free, the city data is
not.</p>

<p>The use cases suggest testing for the following scenarios:</p>

<ul>

<li>User does not have <code>Geo::IP</code> installed.</li>

<li>User has <code>Geo::IP</code> installed but does not have the city
data.</li>

<li>User has <code>Geo::IP</code> and city data installed correctly.</li>

</ul>

<p>Using <code>Test::MockObject</code>, take thirty to forty minutes and see if
you can write tests which cover all these use cases.</p>

<h3>Tips, Tricks, and Suggestions</h3>

<p>Some of the real strengths of <code>Test::MockObject</code> lie in its
adaptability and how simply it adapts. All
<code>Test::MockObject</code> sessions begin with creating an instance.</p>

<pre><code>my $mock = Test::MockObject-&gt;new();</code></pre>

<p>Even just this much can be useful because a <code>Test::MockObject</code>
instance warns about all un-mocked methods called on it. I have used this
"feature" to help trace calls while writing complex tests.</p>

<p>The next step is to mock some methods. The simplest approach is to use the
<code>mock</code> method. It takes a method name and a subroutine reference.
Every time something calls that method on the object, your <code>$mock</code>
instance will run that sub.</p>

<pre><code>$mock-&gt;mock('greetings' =&gt; sub {
    my ($mock, $name) = @_;
    return "Hello $name";
});</code></pre>

<p>How much simpler could it be?</p>

<p><code>Test::MockObject</code> also offers several pre-built mock method
builders, such as <code>set_true</code>, <code>set_false</code>, and
<code>set_always</code>. These methods pretty much DWIM.</p>

<pre><code>$mock-&gt;set_true('foo'); # the foo() method will return true
$mock-&gt;set_false('bar'); # the bar() method will return false
$mock-&gt;set_always('baz' =&gt; 100); # the bar() method will always return 100

</code></pre>

<p>It's even possible for the object to mock not only the methods, but its class as well. The simplest approach is to use the <code>set_isa</code>
method to tell the <code>$mock</code> object to pretend that it belongs to
another class.</p>

<pre><code>$mock-&gt;set_isa('Foo::Bar');</code></pre>

<p>Now, any code that calls this mock object's <code>isa()</code> method will
believe that the <code>$mock</code> is a <code>Foo::Bar</code> object.</p>

<p>In many cases, it is enough to substitute a <code>$mock</code> instance for
a real one and let polymorphism do the rest. Other times it is necessary to
inject control into the code much earlier than this. This is where the
<code>fake_module</code> method comes in.</p>

<p>With the <code>fake_module</code> method, <code>Test::MockObject</code> can
subvert control of an entire package such that it will intercept any calls to
that package. The following code:</p>

<pre><code>my $mock = Test::MockObject-&gt;new();
$mock-&gt;fake_module('Foo::Bar' =&gt; (
    'import' =&gt; sub { die "Foo::Bar could not be loaded" }
));
use_ok('Foo::Bar');</code></pre>

<p>...actually gives the illusion that the <code>Foo::Bar</code> module failed to
load regardless of whether the user has it installed. These kinds of edge cases
can be very difficult to test, but <code>Test::MockObject</code> simplifies
them greatly.</p>

<p>But wait, that's not all.</p>

<p>After your tests have run using your mock objects, it is possible to inspect
the methods called on them and query the order of their calls.  You can even
inspect the arguments passed into these methods.  There several methods for
this, so I refer you to the POD documentation of <code>Test::MockObject</code>
for details.</p>













<h3>The Solution</h3>

<p>I designed each use case to illustrate a different capability of
<code>Test::MockObject</code>.</p>

<ul>

<li><p>User does not have Geo::IP installed.</p>

<pre><code>use Test::More tests =&gt; 4;
use Test::MockObject;

my $mock = Test::MockObject-&gt;new();
$mock-&gt;fake_module('Geo::IP' =&gt; (
    'import' =&gt; sub { die "Could not load Geo::IP" },
));

use_ok('Site::Member');

my $u = Site::Member-&gt;new();
isa_ok($u, 'Site::Member');

my $warning;
local $SIG{__WARN__} = sub { $warning = shift };

ok(!defined($u-&gt;city()), '... this should return undef');
like($warning, 
        qr/^You must have Geo\:\:IP installed for this feature/, 
        '... and we should have our warning');</code></pre>

<p>This use case illustrates the use of <code>Test::MockObject</code> to mock
the failure of the loading of an optional resource, which in this case is the
<code>Geo::IP</code> module.</p>

<p>The sample code attempts to load <code>Geo::IP</code> by calling <code>eval
"use Geo::IP"</code>. Because <code>use</code> always calls a module's

<code>import</code> method, it is possible to exploit this and mock a
<code>Geo::IP</code> load failure. This is easy to accomplish by using the
<code>fake_module</code> method and making the <code>import</code> method
die. This then triggers the warning code in the <code>city</code> method, which
the <code>$SIG{__WARN__}</code> handler captures into <code>$warning</code> for
a later test.</p>

<p>This is an example of a failure edge case which would be difficult to test
without <code>Test::MockObject</code> because it requires control of the Perl
libraries installed. Testing this without <code>Test::MockObject</code> would
require altering the <code>@INC</code> in subtle ways or mocking a
<code>Geo::IP</code> package of your own. <code>Test::MockObject</code> does
that for you, so why bother to re-invent a wheel if you don't need to?</p></li>

<li><p>User has <code>Geo::IP</code> installed but does not have the city
data.</p>

<pre><code>use Test::More tests =&gt; 3;
use Test::Exception;
use Test::MockObject;

my $mock = Test::MockObject-&gt;new();
$mock-&gt;fake_module('Geo::IP' =&gt; (
    'open'           =&gt; sub { undef },
    'GEOIP_STANDARD' =&gt; sub { 0 }
));

use_ok('Site::Member');

my $u = Site::Member-&gt;new();
isa_ok($u, 'Site::Member');

$u-&gt;ip_address('64.40.146.219');

throws_ok {
    $u-&gt;city()
} qr/Could not create a Geo\:\:IP object/, '... got the error we expected';</code></pre>

<p>This next use case illustrates the use of <code>Test::MockObject</code> to
mock a dependency relationship, in particular the failure case where
<code>Geo::IP</code> cannot find the specified database file.</p>

<p><code>Geo::IP</code> follows the common Perl idiom of returning
<code>undef</code> if the object constructor fails. The example code tests for
this case and throws an exception if it comes up. Testing for this failure
uses the <code>fake_module</code> method again to hijack <code>Geo::IP</code>

and install a mocked version of its <code>open</code> method (the code also
fakes the <code>GEOIP_STANDARD</code> constant here). The mocked
<code>open</code> simply returns <code>undef</code> which will create the
proper conditions to trigger the exception in the example code.  The exception
is then caught using the <code>throws_ok</code> method of the <a
href="http://search.cpan.org/perldoc?Test::Exception">Test::Exception</a>

module.</p>

<p>This example illustrates that it is still possible to mock objects even if
your code is not in the position to pass in a mocked instance itself.  Again,
to test this without using <code>Test::MockObject</code> would require control
of the outside environment (the <code>Geo::IP database</code> file), or in some
way having control over where <code>Geo::IP</code> looks for the database file.
While well-written and well-architected code would probably allow you to alter
the database file path and therefore test this without using mock objects, the
mock object version makes no such assumptions and therefore works the same in
either case.</p></li>

<li><p>User has <code>Geo::IP</code> and the Geo-IP city data installed
correctly.</p>

<pre><code>use Test::More tests =&gt; 7;
use Test::MockObject;

my $mock = Test::MockObject-&gt;new();
$mock-&gt;fake_module('Geo::IP' =&gt; (
    'open'           =&gt; sub { $mock },
    'GEOIP_STANDARD' =&gt; sub { 0 }
));

my $mock_record = Test::MockObject-&gt;new();
$mock_record-&gt;set_always('city', 'New York City');

$mock-&gt;set_always('record_by_addr', $mock_record);

use_ok('Site::Member');

my $u = Site::Member-&gt;new();
isa_ok($u, 'Site::Member');

$u-&gt;ip_address('64.40.146.219');

is($u-&gt;city(), 'New York City', '... got the right city');

cmp_ok($mock-&gt;call_pos('record_by_addr'), '==', 0,
        '... our mock object was called');
is_deeply(
        [ $mock-&gt;call_args(0) ],
        [ $mock, '64.40.146.219' ],
        '... our mock was called with the right args');
        
cmp_ok($mock_record-&gt;call_pos('city'), '==', 0,
        '... our mock record object was called');
is_deeply(
        [ $mock_record-&gt;call_args(0) ],
        [ $mock_record ],
        '... our mock record was called with the right args');</code></pre>

<p>This next case illustrates a success case, where <code>Geo::IP</code> finds
the database file it wants and returns the expected results.</p>

<p>Once again, the <code>fake_module</code> method of
<code>Test::MockObject</code> mocks <code>Geo::IP</code>'s <code>open</code>

method, this time returning the <code>$mock</code> instance itself.  The code
creates another mock object, this time for the <code>Geo::IP::Record</code>
instance which <code>Geo::IP</code>'s <code>record_by_addr</code> returns.
<code>Test::MockObject</code>'s <code>set_always</code> method mocks the

<code>city</code> method for the <code>$mock_record</code> instance. After
this, <code>Geo::IP</code>'s <code>record_by_addr</code> is mocked to return
the <code>$mock_record</code> instance. With all of these mocks in place, the
tests then run. After that, inspecting the mock objects ensures that the code
called the correct methods on the mocked objects in the correct order and with
the correct arguments.</p>

<p>This example illustrates testing success without needing to worry about the
existence of an outside dependency. <code>Test::MockObject</code> supports
taking this test one step further and providing methods for inspecting the
details of the interaction between the example code and that of the mocked

<code>Geo::IP</code> module. Accomplishing this test without
<code>Test::MockObject</code> would be almost impossible given the lack of
control over the <code>Geo::IP</code> module and its internals.</p></li>

</ul>

<h3>Conclusion</h3>

<p>Mock objects can seem complex and overly abstract at first, but once grasped
they can be a simple, clean way to make hard things easy. I hope to have shown
how creating simple and minimal mock object with <code>Test::MockObject</code>
can help in testing cases which might be difficult using more traditional
means.</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2005/03/">&laquo; March 2005</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2005/05/">May 2005 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
