<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: March 2005 Archives</title>


    <link rel="prev" href="/pub/2005/02/" title="February 2005" />
    <link rel="next" href="/pub/2005/04/" title="April 2005" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">March 2005 Archives</h1>





                            
                            <div id="entry-742" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/31/lightning2.html" rel="bookmark">More Lightning Articles</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.modernperlbooks.com/">chromatic</a></span> on <abbr class="published" title="2005-03-31T00:00:00-08:00">March 31, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<h3><a name="emacsperl">Customizing Emacs with Perl</a></h3>

<p>by Bob DuCharme</p>

<p>Over time, I've accumulated a list of Emacs customizations I wanted to
implement when I got the chance. For example, I'd like macros to perform
certain global replaces just within a marked block, and I'd like a macro to
reformat an Outlook formatted date to an ISO 8609 formatted date. I'm not
overly intimidated by the elisp language used to customize Emacs behavior; I've
copied elisp code and modified it to make some tweaks before, I had a healthy
dose of Scheme and LISP programming in school, and I've done extensive work
with XSLT, a descendant of these grand old languages. Still, as with a lot of
postponed editor customization work, I knew I'd have to use these macros many,
many times before they earned back the time invested in creating them, because
I wasn't that familiar with string manipulation and other basic operations in a
LISP-based language. I kept thinking to myself, "This would be so easy if I
could just do the string manipulation in Perl!"</p>

<p>Then, I figured out how I could write Emacs functions that called Perl to
operate on a marked block (or, in Emacs parlance, a "region"). Many Emacs users
are familiar with the <code>Escape+|</code> keystroke, which invokes the
<code>shell-command-on-region</code> function. It brings up a prompt in the
minibuffer where you enter the command to run on the marked region, and after
you press the Enter key Emacs puts the command's output in the minibuffer if it
will fit, or into a new "*Shell Command Output*" buffer if not. For example,
after you mark part of an HTML file you're editing as the region, pressing
<code>Escape+|</code> and entering <code>wc</code> (for "word count") at the
minibuffer's "Shell command on region:" prompt will feed the text to this
command line utility if you have it in your path, and then display the number of
lines, words, and characters in the region at the minibuffer. If you enter
<code>sort</code> at the same prompt, Emacs will run that command instead of
<code>wc</code> and display the result in a buffer.</p>

<p>Entering <code>perl /some/path/foo.pl</code> at the same prompt will run the
named Perl script on the marked region and display the output appropriately.
This may seem like a lot of keystrokes if you just want to do a global replace
in a few paragraphs, but remember: <code>Ctrl+|</code> calls Emacs's built-in
<code>shell-command-on-region</code> function, and you can call this same
function from a new function that you define yourself. My recent great
discovery was that along with parameters identifying the region boundaries and
the command to run on the region, <code>shell-command-on-region</code> takes an
optional parameter that lets you tell it to replace the input region with the
output region. When you're editing a document with Emacs, this allows you to
pass a marked region outside of Emacs to a Perl script, let the Perl script do
whatever you like to the text, and then Emacs will replace the original text
with the processed version. (If your Perl script mangled the text, Emacs'
excellent <code>undo</code> command can come to the rescue.)</p>

<p>Consider an example. When I take notes about a project at work, I might
write that Joe R. sent an e-mail telling me that a certain system won't need any
revisions to handle the new data. I want to make a note of when he told me
this, so I copy and paste the date from the e-mail he sent. We use Microsoft
Outlook at work, and the dates have a format following the model "Tue 2/22/2005
6:05 PM". I already have an Emacs macro bound to <code>alt+d</code> to insert
the current date and time (also handy when taking notes) and I wanted the date
format that refers to e-mails to be the same format as the ones inserted with
my <code>alt+d</code> macro: an ISO 8609 format of the form
"2005-02-22T18:05".</p>

<p>The <em>.emacs</em> startup file holds customized functions that you want
available during your Emacs session. The following shows a bit of code that I
put in mine so that I could convert these dates:</p>

<pre><code>(defun OLDate2ISO ()
  (interactive)
  (shell-command-on-region (point)
         (mark) "perl c:/util/OLDate2ISO.pl" nil t))</code></pre>

<p>The <code>(interactive)</code> declaration tells Emacs that the function
being defined can be invoked interactively as a command. For example, I can
enter "OLDate2ISO" at the Emacs minibuffer command prompt, or I can press a
keystroke or select a menu choice bound to this function. The
<code>point</code> and <code>mark</code> functions are built into Emacs to
identify the boundaries of the currently marked region, so they're handy for
the first and second arguments to <code>shell-command-on-region</code>, which
tell it which text is the region to act on. The third argument is the actual
command to execute on the region; enter any command available on your operating
system that can accept standard input. To define your own Emacs functions that
call Perl functions, just change the script name in this argument from
<code>OLDate2ISO</code> to anything you like and then change this third
argument to <code>shell-command-on-region</code> to call your own Perl
script.</p>

<p>Leave the last two arguments as <code>nil</code> and <code>t</code>.  Don't
worry about the fourth parameter, which controls the buffer where the shell
output appears. (Setting it to <code>nil</code> means "don't bother.") The
fifth parameter is the key to the whole trick: when non-nil, it tells Emacs to
replace the marked text in the editing buffer with the output of the command
described in the third argument instead of sending the output to a buffer.</p>

<p>If you're familiar with Perl, there's nothing particularly interesting about
the <em>OLDate2ISO.pl</em> script. It does some regular expression matching to
split up the string, converts the time to a 24 hour clock, and rearranges the
pieces:</p>

<pre><code># Convert Outlook format date to ISO 8309 date 
#(e.g. Wed 2/16/2005 5:27 PM to 2005-02-16T17:27)
while (&lt;&gt;) {
  if (/\w+ (\d+)\/(\d+)\/(\d{4}) (\d+):(\d+) ([AP])M/) {
     $AorP = $6;
     $minutes = $5;
     $hour = $4;
     $year = $3;
     $month = $1;
     $day = $2;
     $day = '0' . $day if ($day &lt; 10);
     $month = '0' . $month if ($month &lt; 10);
     $hour = $hour + 12 if ($6 eq 'P');
     $hour = '0' . $hour if ($hour &lt; 10);
     $_ = "$year-$month-$day" . "T$hour:$minutes";
  }
  print;
}</code></pre>

<p>When you start up Emacs with a function definition like the <code>defun
OLDate2ISO</code> one shown above in your <em>.emacs</em> file, the function is
available to you like any other in Emacs. Press <code>Escape+x</code> to bring
up the Emacs minibuffer command line and enter "OLDate2ISO" there to execute it
on the currently marked buffer. Like any other interactive command, you can
also assign it to a keystroke or a menu choice.</p>

<p>There might be a more efficient way to do the Perl coding shown above, but I
didn't spend too much time on it. That's the beauty of it: with five minutes of
Perl coding and one minute of elisp coding, I had a new menu choice to quickly
do the transformation I had always wished for.</p>

<p>Another example of something I always wanted is the following
<em>txt2htmlp.pl</em> script, which is useful after plugging a few paragraphs
of plain text into an HTML document:</p>

<pre><code># Turn lines of plain text into HTML p elements.
while (&lt;&gt;) {
  chop($_);
  # Turn ampersands and &lt; into entity references.
  s/\&amp;/\&amp;amp\;/g;
  s/&lt;/\&amp;lt\;/g;
  # Wrap each non-blank line in a "p" element.
  print "&lt;p&gt;$_&lt;/p&gt;\n\n" if (!(/^\s*$/));
}</code></pre>

<p>Again, it's not a particularly innovative Perl script, but with the
following bit of elisp in my <em>.emacs</em> file, I have something that
greatly speeds up the addition of hastily written notes into a web page,
especially when I create an Emacs menu choice to call this function:</p>

<pre><code>(defun txt2htmlp ()
  (interactive)
  (shell-command-on-region (point) 
         (mark) "perl c:/util/txt2htmlp.pl" nil t))</code></pre>

<p>Sometimes when I hear about hot new editors, I wonder whether they'll ever
take the place of Emacs in my daily routine. Now that I can so easily add the
power of Perl to my use of Emacs, it's going to be a lot more difficult for any
other editor to compete with Emacs on my computer.</p>













<h3><a name="linetrace">Debug Your Programs with Devel::LineTrace</a></h3>

<p>by Shlomi Fish</p>

<p>Often, programmers find a need to use print statements to output information
to the screen, in order to help them analyze what went wrong in running the
script. However, including these statements verbatim in the script is not such
a good idea. If not promptly removed, these statements can have all kinds of
side-effects: slowing down the script, destroying the correct format of its
output (possibly ruining test-cases), littering the code, and confusing the
user. It would be a better idea not to place them within the code in the first
place. How, though, can you debug without debugging?</p>

<p>Enter <a
href="http://search.cpan.org/dist/Devel-LineTrace/">Devel::LineTrace</a>, a
Perl module that can assign portions of code to execute at arbitrary lines
within the code. That way, the programmer can add print statements in relevant
places in the code without harming the program's integrity.</p>

<h4>Verifying That <code>use lib</code> Has Taken Effect</h4>

<p>One example I recently encountered was that I wanted to use a module I wrote
from the specialized directory where I placed it, while it was already installed
in the Perl's global include path. I used a <code>use lib "./MyPath"</code>
directive to make sure this was the case, but now had a problem.  What if there
was a typo in the path of the <code>use lib</code> directive, and as a result,
Perl loaded the module from the global path instead? I needed a way to verify
it.</p>

<p>To demonstrate how <code>Devel::LineTrace</code> can do just that, consider
a similar script that tries to use a module named <code>CGI</code> from the
path <em>./MyModules</em> instead of the global Perl path. (It is a bad idea to
name your modules after names of modules from CPAN or from the Perl
distribution, but this is just for the sake of the demonstration.)</p>

<pre><code>#!/usr/bin/perl -w

use strict;
use lib "./MyModules";

use CGI;

my $q = CGI-&gt;new();

print $q-&gt;header();</code></pre>

<p>Name this script <em>good.pl</em>. To test that Perl loaded the <code>CGI</code> module
from the <em>./MyModules</em> directory, direct <code>Devel::LineTrace</code> to print the
relevant entry from the <code>%INC</code> internal variable, at the first line
after the <code>use CGI</code> one.</p>

<p>To do so, prepare this file and call it <em>test-good.txt</em>:</p>

<pre><code>good.pl:8
    print STDERR "\$INC{CGI.pm} == ", $INC{"CGI.pm"}, "\n";</code></pre>

<p>Place the file and the line number at which the trace should be inserted on the first line.
Then comes the code to evaluate, indented from the start of the line. After the
first trace, you can put other traces, by starting the line with the filename
and line number, and putting the code in the following (indented) lines.  This
example is simple enough not to need that though.</p>

<p>After you have prepared <em>test-good.txt</em>, run the script
through <code>Devel::LineTrace</code> by executing the following command:</p>

<pre><code>$ PERL5DB_LT="test-good.txt" perl -d:LineTrace good.pl</code></pre>

<p>(This assumes a Bourne-shell derivative.). The <code>PERL5DB_LT</code>
environment variable contains the path of the file to use for debugging, and
the <code>-d:LineTrace</code> directive to Perl instructs it to debug the
script through the <code>Devel::LineTrace</code> package.</p>

<p>As a result, you should see either the following output to standard
error:</p>

<pre><code>$INC{CGI.pm} == MyModules/CGI.pm</code></pre>

<p>meaning that Perl indeed loaded the module from the <em>MyModules</em>
sub-directory of the current directory. Otherwise, you'll see something
like:</p>

<pre><code>$INC{CGI.pm} == /usr/lib/perl5/vendor_perl/5.8.4/CGI.pm</code></pre>

<p>...which means that it came from the global path and something went wrong.</p>

<h4>Limitations of <code>Devel::LineTrace</code></h4>

<p><code>Devel::LineTrace</code> has two limitations:</p>

<ol>

<li>Because it uses the Perl debugger interface and stops at every line (to
check whether it contains a trace), program execution is considerably slower
when the program is being run under it.</li>

<li>It assigns traces to line numbers, and therefore you must update it if the
line numbering of the file changes.</li>

</ol>

<p>Nevertheless, it is a good solution for keeping those pesky
<code>print</code> statements out of your programs. Happy LineTracing!</p>

<h3><a name="mockdbi">Using Test::MockDBI</a></h3>

<p>by Mark Leighton Fisher</p>

<p>What if you could test your program's use of the DBI just by creating a set
of rules to guide the DBI's behavior&#8212;without touching a database (unless you
want to)?  That is the promise of <a
href="http://search.cpan.org/perldoc?Test::MockDBI">Test::MockDBI</a>, which by
mocking-up the entire DBI API gives you unprecedented control over every aspect
of the DBI's interface with your program.</p>

<p><code>Test::MockDBI</code> uses <a
href="http://search.cpan.org/perldoc?Test::MockObject::Extends">Test::MockObject::Extends</a>
to mock all of the DBI transparently.  The rest of the program knows nothing
about using <code>Test::MockDBI</code>, making <code>Test::MockDBI</code> ideal for testing programs that
you are taking over, because you only need to add the <code>Test::MockDBI</code> invocation code&#8212;
you do not have to modify any of the other program code.  (I have found this
very handy as a consultant, as I often work on other people's code.)</p>

<p>Rules are invoked when the current SQL matches the rule's SQL pattern.  For
finer control, there is an optional numeric DBI testing type for each rule, so
that a rule only fires when the SQL matches <em>and</em> the current DBI
testing type is the specified DBI testing type.  You can specify this numeric
DBI testing type (a simple integer matching <code>/^\d+$/</code>) from the
command line or through <code>Test::MockDBI::set_dbi_test_type()</code>.  You
can also set up rules to fail a transaction if a specific
<code>DBI::bind_param()</code> parameter is a specific value.  This means there
are three types of conditions for <code>Test::MockDBI</code> rules:</p>

<ul>

<li>The current SQL</li>
<li>The current DBI testing type</li>
<li>The current <code>bind_param()</code> parameter values</li>

</ul>

<p>Under <code>Test::MockDBI</code>, <code>fetch*()</code> and <code>select*()</code>
methods default to returning nothing (the empty array, the empty hash, or undef
for scalars).  <code>Test::MockDBIM</code> lets you take control of their returned data with
the methods <code>set_retval_scalar()</code> and
<code>set_retval_array()</code>.  You can specify the returned data directly in
the <code>set_retval_*()</code> call, or pass a CODEREF that generates a return
value to use for each call to the matching <code>fetch*()</code> or
<code>select*()</code> method.  CODEREFs let you both simulate DBI's
interaction with the database more accurately (as you can return a few rows,
then stop), and add in any kind of state machine or other processing
needed to precisely test your code.</p>

<p>When you need to test that your code handles database or DBI failures,
<code>bad_method()</code> is your friend.  It can fail any DBI method, with the
failures dependent on the current SQL and (optionally) the current DBI testing
type.  This capability is necessary to test code that handles bad database
<code>UPDATE</code>s, <code>INSERT</code>s, or <code>DELETE</code>s, along with
being handy for testing failing <code>SELECT</code>s.</p>

<p><code>Test::MockDBI</code> extends your testing capabilities to testing code that is
difficult or impossible to test on a live, working database.  <code>Test::MockDBI's</code>
mock-up of the entire DBI API lets you add <code>Test::MockDBI</code> to your programs
without having to modify their current DBI code.  Although it is not finished
(not all of the DBI is mocked-up yet), <code>Test::MockDBI</code> is already a powerful tool
for testing DBI programs.</p>













<h3><a href="#unbuffering">Unnecessary Unbuffering</a></h3>

<p>by chromatic</p>

<p>A great joy in a programmer's life is removing useless code, especially
when its absence improves the program. Often this happens in old codebases
or codebases thrown together hastily. Sometimes it happens in code written
by novice programmers who try several different ideas all together and fail
to undo their changes.</p>

<p>One such persistent idiom is wholesale, program-wide unbuffering, which
can take the form of any of:</p>

<pre><code>local $| = 1;
$|++;
$| = 1;</code></pre>

<p>Sometimes this is valuable. Sometimes it's vital. It's not the default
for very good reason, though, and at best, including one of these lines in
your program is useless code.</p>

<h4>What's Unbuffering?</h4>

<p>By default, modern operating systems don't send information to output
devices directly, one byte at a time, nor do they read information from
input devices directly, one byte at a time. IO is so slow, especially for
networks, compared to processors and memory that adding buffers and trying
to fill them before sending and receiving information can improve
performance.</p>

<p>Think of trying to fill a bathtub from a hand pump. You <em>could</em>
pump a little water into a bucket and walk back and forth to the bathtub,
or you could fill a trough at the pump and fill the bucket from the trough.
If the trough is empty, pumping a little bit of water into the bucket will
give you a faster start, but it'll take longer in between bucket loads than
if you filled the trough at the start and carried water back and forth
between the trough and the bathtub.</p>

<p>Information isn't exactly like water, though. Sometimes it's more
important to deliver a message immediately even if it doesn't fill up a
bucket. "Help, fire!" is a very short message, but waiting to send it when
you have a full load of messages might be the wrong thing.</p>

<p>That's why modern operating systems also let you unbuffer specific
filehandles. When you print to an unbuffered filehandle, the operating
system will handle the message immediately. That doesn't guarantee that
whoever's on the other side of the handle will respond immediately; there
might be a pump and a trough there.</p>

<h4>What's the Damage?</h4>

<p>According to Mark-Jason Dominus' <a
href="http://perl.plover.com/FAQs/Buffering.html">Suffering from
Buffering?</a>, one sample showed that buffered reading was 40% faster than
unbuffered reading, and buffered writing was 60% faster. The latter number may
only improve when considering network communications, where the overhead of
sending and receiving a single packet of information can overwhelm short
messages.</p>

<p>In simple interactive applications though, there may be no benefit. When
attached to a terminal, such as a command line, Perl operates in
line-buffered mode. Run the following program and watch the output
carefully:</p>

<pre><code>#!/usr/bin/perl

use strict;
use warnings;

# buffer flushed at newline
loop_print( 5, "Line-buffered\n" );

# buffer not flushed until newline
loop_print( 5, "Buffered  " );
print "\n";

# buffer flushed with every print
{
    local $| = 1;
    loop_print( 5, "Unbuffered  " );
}

sub loop_print
{
    my ($times, $message) = @_;

    for (1 .. $times)
    {
        print $message;
        sleep 1;
    }
}</code></pre>

<p>The first five greetings appear individually and immediately.  Perl flushes
the buffer for STDOUT when it sees the newlines.  The second set appears after
five seconds, all at once, when it sees the newline after the loop. The third
set appears individually and immediately because Perl flushes the buffer after
every <code>print</code> statement.</p>

<p>Terminals are different from everything else, though. Consider the case of
writing to a file. In one terminal window, create a file named
<em>buffer.log</em> and run <code>tail -f buffer.log</code> or its equivalent
to watch the growth of the file in real time. Then add the following lines to
the previous program and run it again:</p>

<pre><code>open( my $output, '&gt;', 'buffer.log' ) or die "Can't open buffer.log: $!";
select( $output );
loop_print( 5, "Buffered\n" );
{
      local $| = 1;
      loop_print( 5, "Unbuffered\n" );
}</code></pre>

<p>The first five messages appear in the log in a batch, all at once, even
though they all have newlines.  Five messages aren't enough to fill the buffer.
Perl only flushes it when it unbuffers the filehandle on assignment to
<code>$|</code>.  The second set of messages appear individually, one second
after another.</p>

<p>Finally, the STDERR filehandle is hot by default. Add the following lines to
the previous program and run it yet again:</p>

<pre><code>select( STDERR );
loop_print( 5, "Unbuffered STDERR " );</code></pre>

<p>Though no code disables the buffer on STDERR, the five messages should print
immediately, just as in the other unbuffered cases. (If they don't, your OS is
weird.)</p>

<h4>What's the Solution?</h4>

<p>Buffering exists for a reason; it's almost always the right thing to do.
When it's the wrong thing to do, you can disable it. Here are some rules of
thumb:</p>

<ul>

<li>Never disable buffering by default.</li>

<li>Disable buffering when and while you have multiple sources writing to
the same output and their order matters.</li>

<li>Never disable buffering for network outputs by default.</li>

<li>Disable buffering for network outputs only when the expected time
between full buffers exceeds the expected client timeout length.</li>

<li>Don't disable buffering on terminal outputs. For STDERR, it's useless,
dead code. For STDOUT, you probably don't need it.</li>

<li>Disable buffering if it's more important to print messages regularly
than efficiently.</li>

<li>Don't disable buffering until you know that the buffer is a
problem.</li>

<li>Disable buffering in the smallest scope possible.</li>

</ul>
<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1518" template="b/article_sidebar2.view">
<!-- sidebar ends -->



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-746" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/p6pdigest/20050321.html" rel="bookmark">This Fortnight in Perl 6, March 7 - March 21, 2005</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Matt Fowles</span> on <abbr class="published" title="2005-03-24T00:00:00-08:00">March 24, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->

<p>All~</p>

<p>Welcome to yet another fortnight's summary. I believe this is the highest
volume I have ever seen the three lists at simultaneously. Hopefully they will
keep it up, because they're doing good work. To aid the epic endeavor of
summarizing all this, I have had to add some new Jazz to my playlist. We will
see how it works out. If it doesn't work well, blame Seton.</p>

<h3>Perl 6 Language</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/038d53bce6baca3a/2bc5895525215f2f#2bc5895525215f2f">The
Actual Name of <code>&amp;?SUB</code></a></h4>

<p>David Storrs wanted to know how he could find the name of
<code>&amp;?SUB</code>. Larry told him that <code>$?SUBNAME</code> would be the
most reliable way to get the short name.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/2feef37c11edaa9e/4dd34d9d0ae95e5e#4dd34d9d0ae95e5e">Unlimited
Argument Patterns</a></h4>

<p>Luke Palmer has tasted the forbidden fruit of Haskell, and now he wants more
of it in Perl 6. In particular he wants even more powerful pattern matching of
arguments for MMD. Rod Adams speculated that Larry had decided Perl 6 would not
be ML. In the end there was no real consensus, but the feeling seems to be to
say "don't hold your breath".</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/bb118c7350c76657/6338e5bb22c89ba6#6338e5bb22c89ba6">Limited
Argument Patterns</a></h4>

<p>Wolverian was a little unsure of what exactly <code>sub foo(0) {...}</code>
meant. Larry explained that it was just sugar for <code>sub foo ( $bar of Int
where { $_ == 0 } $bar ) { ... }</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/322bd2ced30a06d0/c39068c3b61f780e#c39068c3b61f780e">List
Constructors</a></h4>

<p>Wolverian made a list of list constructors, asking what each did. Larry
explained: for the most part, they're the same thing as in Perl 5, though a few
will produce a warning.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/086a99985beac390/80ca81ed0f831948#80ca81ed0f831948">Decorating
Primitives</a></h4>

<p>The question of how decorating objects with roles interacted with low-level types arose. 
Larry came to the conclusion that it was okay, unless you wanted to decorate a single element in a primitive array.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/31d8c3054628253c/e9f77f4a2edd9551#e9f77f4a2edd9551">Splat
Operator in Assignment</a></h4>

<p>Juerd was unsure how splats and list assignment interacted. The answer is
that list assignment is exactly the same as Perl 5 to allow for extending a
return list.</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<!-- sidebar ends -->

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/63f9c15e5ef27c17/ccf0a7f26d229344#ccf0a7f26d229344">Logic
Programming</a></h4>

<p>Rod Adams pointed out that it's possible to implement much of logic
programming using the rules engine. Unfortunately, the syntax gets a little
hairy and cumbersome. Larry said that this particular goal might be something
that 6.0 does not address, deferring it instead.  Ovid rumbled about porting a
Warren Abstract Machine to Parrot.  I would like it.</p>

<h4>
Locale-Keyed Text
</h4>

<p>Darren Duncan finished up the first non-core Perl 6 module. Being properly
hubristic, he asked for a critique. His questions touched on subjects including
subtypes, module loading, and strictness.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/5e1c7888b8b771c3/3f03a9a2ace1a375#3f03a9a2ace1a375">Critique
Request</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/0757424a38d65e97/a4a53ed54d48d7f4#a4a53ed54d48d7f4">Misc
Questions</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/d718bf73790d072e/736a522e91cb0870#736a522e91cb0870"><code>bar
$f =?= $f.bar</code></a></h4>

<p>Rod Adams wondered what would happen if he had both a sub and a method named
<code>bar</code>. What would <code>$f.bar</code> and <code>bar $f</code> do?
Jonathan Scott Duff explained that <code>$f.bar</code> would call the method
while <code>bar $f</code> would call the sub.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/42a32bb7c727de7e/5891f6a40d031af2#5891f6a40d031af2">MMD
Object</a></h4>

<p>Rod Adams wants a single object to represent all of the possible multi
methods associated with a particular short name. It seems that Rod drank some
of the Lisp Kool-Aid (although in this case, I agree). He explained how this
allowed the dispatch scheme to be changed on a multi by multi basis, and also
allowed for nice introspection. This led to a discussion of how this would work
with lexically installed multi methods, and if this would trip people up. No
real consensus appeared.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/77d165f146b6da7f/99893d787d04f496#99893d787d04f496"><code>:foo&lt;o&gt;
!= :foo('o'); :foo&lt;o&gt; == :foo{'o'}</code></a></h4>

<p>Juerd wondered what the implications of <code>&lt;a&gt;</code> mapping to
<code>('a')</code> were. Larry replied that it did not map in that manner.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/8d37df23ea9b1429/459494c94afe7681#459494c94afe7681">Lazy
Loading of Object</a></h4>

<p>Yuval Kogman wondered how he could get his objects to load lazily. Larry
told him that delegation would probably be the best bet.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/1466172da2ed2c32/33e471f95f198b67#33e471f95f198b67">Throwing
From Higher Up the Call Stack</a></h4>

<p>Thomas Yandell wants a way to throw from further down the call stack.  Sadly,
Warnock applied.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/b02884b476fe87c7/8c7be753bf0ee372#8c7be753bf0ee372"><code>sprintf</code></a></h4>

<p>Juerd wants a <code>sprintf</code>-like function
<code>f/FORMAT/EXPR/</code>.  Larry seems to think that
<code>EXPR.as(FORMAT)</code> will suffice, especially if it is a list op.</p>

<h4>S29, Built-in Functions</h4>

<p>Rod Adams has been hard at work creating <a
href="http://www.rodadams.net/Perl/S29.html">a list of built-in Perl 6
functions</a>.  This led to good discussions about which things had alternate
forms and which did not.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/1bf5b21a8dbb991a/02c5bfc9ab3bae9e#02c5bfc9ab3bae9e">Discussion</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/17969d56c1fb86e0/3274abd0d8b8ed5c#3274abd0d8b8ed5c">More
Discussion</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/d03b4d33ca8b5260/a6526b909001d7b8#a6526b909001d7b8">Python
to Eliminate <code>reduce()</code></a></h4>

<p>Aristotle Pagaltzis posted a link explaining that Python 3000 will eliminate
<code>reduce</code>. This led to a brief discussion of various design
philosophies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/8127c2b44893bed4/387d5076256105db#387d5076256105db">SEND
+ MORE = JUNCTIONS</a></h4>

<p>Sam Vilain fixed up the SEND + MORE example to work correctly with
junctions. Unfortunately, the hoops through which he had to jump are pretty
horrendous. Larry mumbled that the option of autothreading all conditionals
might work, but would send too many lynch mobs after him. I for one like both
Twin Peaks and that idea.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/f89531093cc2e3da/cd015186c0b67a77#cd015186c0b67a77"><code>for</code>
With a Function Reference</a></h4>

<p>Rod Adams wanted to know how <code>for</code> would behave with various
types of functions or codeblocks. Luke Palmer provided answers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/d7d6bd1506544ee5/9433d70b82708e82#9433d70b82708e82">Adding
Interfaces to Arguments</a></h4>

<p>Thomas Sandla&szlig; wondered when arguments to function would be decorated
with roles from the function signature if they didn't exist. Larry conjectured
about allowing different views on objects versus mixing in various roles. This
led people to talk about covariant typing. An array of ints will always return
you a number and an array of numbers will always accept an int, but an array of
ints will not necessarily accept a number and an array of numbers will not
necessarily return an int. Thus, changing your view can be valid when writing
and not when reading, or vice versa.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2aca524a1203cd41/912bea4d0d05554a?q=surprised#912bea4d0d05554a">Pugs too Lazy</a></h4>

<p>Andrew Savige noticed that closing a file handle in Pugs did not force
all the thunks associated with the file. While this was a bug in Pugs, it led
to conversation about whether <code>=</code> should be lazy or eager. Larry
thinks that it will be safer to start eager and become lazy then vice
versa.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/52274a6d4736795a/7886d251717dcbcf#7886d251717dcbcf"><code>exists</code>
and <code>delete</code> as Functions</a></h4>

<p>Rod Adams wondered how he would define the signature of <code>exists</code>
and <code>delete</code> as they do not evaluate the subscripted variables in
their arguments. Larry explained that they are now methods on the hash, so
someone will have to do a little macro magic to get it to work the old way.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/b83fa0819060ca02/e86555009e886e36#e86555009e886e36"><code>remove(reset())</code></a></h4>

<p>Steve Peters pointed out that <code>reset()</code> was now almost useless
and has been "vaguely deprecated" for a while. Larry declared it dead.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/d14425dbcd70da26/49ce257ba619e231#49ce257ba619e231">Lists
in String Context</a></h4>

<p>Juerd put out a plea for lists in string context not to provide spaces
between elements automatically. Larry pointed out various ways to join on the
empty string, which I think is his way of saying "too bad".</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/00ea49729b4fb348/7352b8e80a4bec26#7352b8e80a4bec26">Popping
a Multidimensional Array</a></h4>

<p>Rod Adams wondered what it meant to pop a multidimensional array. Larry
agreed that it should pop off entire dimensions. Does this mean that popping
such an array in a loop will pop dimensions until there is only one left, at
which point it will switch to popping elements?</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/5df636005a324a20/edfd61c7066429f0#edfd61c7066429f0">Index
Out of Bounds</a></h4>

<p>Markus Laire wondered what <code>index("Hello", "", 999)</code> would
return. Larry explained that it is not as simple as Markus thinks, because strings
use magic indices that do Unicode stuff, but it would probably throw an
exception.</p>













<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a9ed04e00bade7c0/52337570505cb3f5#52337570505cb3f5">GUI
Paradigm</a></h4>

<p>Michele Dondi wants Perl 6 to support a GUI paradigm better than most
languages currently do. He is not quite sure how, but he is sure that it would
be cool. I agree.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/cba8748ebd6084c6/05cbce0b1ca98174#05cbce0b1ca98174">Hiding
From One's Callee</a></h4>

<p>Autrijus wants to call a function but make it appear as if his caller did
it. Larry suggested that <code>wrap</code>/<code>call</code> would be
appropriate.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/ae745954ee8361c6/fd6dc65151a03ae9#fd6dc65151a03ae9"><code>quotemeta</code></a></h4>

<p>Rod Adams voted for axing <code>quotemeta</code>. People seemed to agree
that it should go, but they disagreed on what to use in its place. Larry
suggested an argument to <code>as</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/be17e769ee1b3ae9/4da615a5a91eaf2b#4da615a5a91eaf2b"><code>zip</code>
Function Signature</a></h4>

<p>Rod Adams <code>had</code> difficulty determining the function signature for
<code>&amp;zip</code>. This led to a discussion of when <code>is rw</code> was
implied, but not an answer to his question.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/60dce44260f2a93d/8713b16d403879e5#8713b16d403879e5">Symbol
Table Interactions</a></h4>

<p>Gall Yahas wondered how <code>::()</code> would react to undefined
variables. Larry explained that it might be either legal or illegal as an
lvalue depending on whether or not the scope had finished being compiled, and
that it would be undefined as an rvalue.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/601792cc6008e3b1/f3c5cdf9ab6c7a5c#f3c5cdf9ab6c7a5c">Propagating
Called Context</a></h4>

<p>Yuval Kogman wants to call a sub with the same context he was called in so
that he can munge the result(s). Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/027584c278aa0ecc/d658af04afb41def#d658af04afb41def"><code>true(0)</code></a></h4>

<p>Juerd suggested renaming <code>true</code>, as it was really
counter-intuitive. Much discussion ensued about alternatives. Larry hemmed for a
bit, but decided to stick with <code>true</code> in the end</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/c31ccf483dbe1948/0b6c7014b4be8ff4#0b6c7014b4be8ff4">Junction
Questions</a></h4>

<p>Stevan Little wondered if the junctions in Pugs behaved correctly.  Luke
Palmer assured him that they were for the examples he posted.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/171cd34b1e84bf8c/5531a708a6b8a333#5531a708a6b8a333">POD
vs. kwid : Round 1. FIGHT! </a></h4>

<p>Aaron Sherman posted a rough draft of a better POD. This led to many people
passionately discussing the merits and demerits of POD and kwid.  Fortunately,
as the summarizer endowed with the power of double speaking, I can definitively
report that the conclusion was that everybody prefers both kwid over Pod and vim
over emacs.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/e689486905f15375/b876a174c00da4b8#b876a174c00da4b8">Importing
Constants From Another Module</a></h4>

<p>Song10 wanted to know how to import constants from another module into his module
without having to specify scope everywhere. Warnock applied.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/eaf15ca9e032cfa1/53d856b79ec5aabd#53d856b79ec5aabd">Returning
References vs. Copies</a></h4>

<p>Darren Duncan wants to protect his classes from their malicious enemies who
would use his references against him. Thus, he wants to know if his accessor
methods return references or copies. Larry explained that they would probably
return lazy copies, to provide the requisite protection, except when used
inside that class.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/376a1703e186fdc7/e30509cf16667057#e30509cf16667057">Precedence
of <code>where</code></a></h4>

<p>Chip Salzenberg wondered if <code>where</code> or <code>|</code> had higher
precedence. Larry replied that <code>where</code> is part of a magic group of
declarational keywords that did some weird stuff.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a95fa7c746d4701a/caef6fe695f484cd#caef6fe695f484cd">Strings
and Pain</a></h4>

<p>Rod Adams wants to change strings to deal with Unicode differently.  Larry
thinks his idea forces the programmer into the machine's mindset too much.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/7318f41d1354a449/6cae07180e484d20#6cae07180e484d20">Caller's
Slurpy Array</a></h4>

<p>Rod Adams wants access to his caller's slurpy array and suggested that it be
<code>@_</code>. Larry agreed.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/2095c65253615777/250915713d504ccf#250915713d504ccf">lvalue
Slices</a></h4>

<p>Matt Diephouse wants to assign to an array slice but doesn't know if he can.
He can.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/cf458503a5ec514f/9083077118873dd3#9083077118873dd3"><code>.method</code>;
<code>$self.method</code>; <code>$_.method</code></a></h4>

<p>As originally specified, <code>.method</code> means <code>$_.method</code>.
This sets it apart from <code>$.foo</code>, <code>@.foo</code>, and
<code>%.foo</code>, which all refer to <code>$self</code>. Much discussion
ensued. I think the pendulum is slowly swinging toward switching the meaning of
<code>.method</code> to refer to <code>$self.method</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a42b280a81d56ae2/90c1b8d03c869e59#90c1b8d03c869e59">Duff's
Device</a></h4>

<p>Gaal Yahas lamented his inability to use Duff's Device in Perl 6.
Larry made noises that it might not be impossible, but would still not be a
good idea.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/6534a326e4840512/bed755ec9ba75c14#bed755ec9ba75c14">The
Fate of <code>study</code></a></h4>

<p>Rod Adams wondered what would happen to <code>study</code>. Because I never did it in
high school or college, I doubt I will begin now. Other people seem to think it
would be easier to leave it as a no-op in case we want to do it eventually.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/a1a5bdbf912fd91a/8d1aef1de9edad01#8d1aef1de9edad01">Some
Ado About Nothing</a></h4>

<p>Rod Adams wants a no-op function and suggested nothing. There was some
discussion about whether 1 should work. I am surprised that no one suggested
<code>study</code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_frm/thread/ea49812733e46265/776d142ee2edcb2f#776d142ee2edcb2f"><code>chr</code>
and <code>ord</code></a></h4>

<p>Rod Adams thought that perhaps <code>chr</code> and <code>ord</code> have a restriction to work only
at the code point level. Larry was less sure.</p>

<h3>Perl 6 Compilers</h3>

<p>Last week, I tried to link to many of the Pugs patches. I now think that was
a mistake for two reasons: first, there are a great many;  and second, many more occur
off-list where I miss them. Therefore, I will not provide links for specific
patches unless they pass this arbitrary test: Are they as important as my pizza?</p>

<h4>
Pugs 6.0.12
</h4>

<p>Autrijus released Pugs 6.0.11 and 6.0.12. The features are plentiful and
awesome. For a more complete list (which is long) as well as daily blow-by-blow
of the Pugs development (which is fast) check out <a
href="http://use.perl.org/~autrijus/journal/">Autrijus's journal</a>.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/252e51259e2e8668/296f1effec2f7ece#296f1effec2f7ece">6.0.11</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/dfb62cfd8d7c9ae8/7701be9639425bc3#7701be9639425bc3">6.0.12</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/2f991178dc3f0310/39f0bee1765b05ba#39f0bee1765b05ba">Helping
Pugs</a></h4>

<p>Matthew Campbell wondered how best to help Pugs. Autrijus Tang gave him a
helpful nudge.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/83250035939400f5/b51d37ddbcbc4b48#b51d37ddbcbc4b48">p6ify
Algorithm::Dependency</a></h4>

<p>Adam Kennedy asked for a volunteer to translate Algorithm::Dependency to
Perl 6. Darren Duncan did it, and quickly, too.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/8192eea1c2584767/db780fa372437a16#db780fa372437a16">Help
Pugs</a></h4>

<p>Anthony Kilna knew that one of the best ways to help Pugs was to write tests,
but didn't know if there was a database of tests that needed to be written or
were written. Stevan Little pointed him to the in-progress attempt to build
just such a database, and said that would be a good place to help.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/f4005c8df3c892bf/a6efb74699ea57fa#a6efb74699ea57fa">Sand
Traps Abound When Golfing in p6</a></h4>

<p>Andrew Savige (a.k.a "mad golfer") has been working at <a
href="http://www.perlmonks.org/?node_id=440685">porting a "small" program to
Perl 6</a>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/f4f2cedbc5b97061/eb81ac0b17fd1bd8#eb81ac0b17fd1bd8">Numification
of Strings</a></h4>

<p>There was some discussion of how to numify a string. Some wanted smart
parsing, others wanted simple parsing. For a while simple was winning. I am not
sure if it won in the end though.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/6974d4cff16fb2bf/f7786d53603fc773#f7786d53603fc773">SQL::Routine</a></h4>

<p>Darren Duncan announced his intent to port SQL::Routine to Perl 6 shortly.
You might be able to hold your breath.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_frm/thread/d579becc29dec05f/a47f1de3c76b11af#a47f1de3c76b11af">Pugs'
Bugs vs. Blue's Clues</a></h4>

<p>Stevan Little compiled a list of bugs for Pugs. By the time you read this,
many will probably have been fixed.</p>













<h3>Parrot</h3>

<p>I will start this part with a very large announcement. Dan has decided to
step down as Parrot's Chief Architect. Chip Salzenberg (who just earned first
name-only status) has taken up the burning parrot...err...torch. To forestall
questions/outrage/grumbling, Dan explained that Leo did not get the position
because he did not want it. I know that I personally have learned a lot from
Dan and Squawks of the Parrot (including how to turn crystal sugar into baker's
sugar), and want to think him a great deal for the work he put into Parrot.
This means the responsibility of returning the pie to Guido now falls on Chip's
shoulders.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e0d274fbb5120b33/14e48637be806485#14e48637be806485"><code>make
install</code> Parrot Headers</a></h4>

<p>Lambeck noticed that <code>make install</code> does not install Parrot's
header files. It probably should; he filed a bug.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f41e809121ef5335/2f7420ec96a32121#2f7420ec96a32121"><code>atan2</code>
needs <code>-xlibmieee</code> on Sun</a></h4>

<p>Andy Dougherty provided a patch adding appropriate hints to the Solaris
build. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/4b2cc5857c50a76c/48b36b3efb9fe952#48b36b3efb9fe952">Burning
Parrot</a></h4>

<p>Leo put out a request to revive the Parrot tinderboxen. Steve Peters
suggested integrating it with the current Perl smoke reporting process. Peter
Sinnot put up a server on a spare machine in the meantime.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/f3e4cb739062468c/0c3d76d031ac94de#0c3d76d031ac94de"><code>ncurses_life</code></a></h4>

<p>Uwe Voelker reported a bug in <code>ncurses_life</code>. Leo fixed it and put
out a plea for someone to update it. Matt Diephouse updated it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/329dc516447d2104/eeb2c77b3ca37aeb#eeb2c77b3ca37aeb">Refactor
of <code>t/pmc/pmc.t</code> Needed</a></h4>

<p>Leo suggested that an interested party would be able to factor the
<code>Perl*</code> tests out of <code>pmc.t</code> and into <code>perl.t</code>. Steven
Schubiger <a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/458c7e0121e480a3/b73023e931faf731#b73023e931faf731"> offered to try</a>.</p>

<h4>String Tasks</h4>

<p>Leo posted a set of tasks looking for takers with respect to string stuff.
Steven Schubiger and Aldo Calpini each stepped up to some.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/68715e4f35b78064/07b7ae78e013dbcf#07b7ae78e013dbcf">Initial
Request</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/0d7d08d47e33c546/9465b678d81a6bfd#9465b678d81a6bfd">Aldo's
Offer</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/42b4c69ce7b376e5/2b8d1ab0976fa155#2b8d1ab0976fa155"><code>thr-primes.imc</code></a></h4>

<p>Bernhard Schmalhofer updated <code>thr-primes.imc</code> to not use
<code>Perl*</code> PMCs, which uncovered a bug in <code>Undef.pmc</code>. Leo fixed
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/8870881652047d2e/111693f3a2d7c6fa#111693f3a2d7c6fa">Aggregate
Clone vtable</a></h4>

<p>Leo noticed that some aggregates do deep copies while others do shallow.
All should do shallow. Takers welcome.</p>

<h4><code>**Arrays</code> TODO</h4>

<p><code>Fixed*Arrays</code> should have a limited form of <code>splice</code>
available to them.  Also, the <code>Resizable*Arrays</code> should have their
allocation schemes adapted to that of the <code>ResizeablePMCArray</code>, and
<code>*BooleanArray</code> should store just bits.  Bernhard Schmalhofer
offered to take on the <code>*BooleanArrays</code>.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/48ad2aae2d583d4a/5b5311c4fc191ef0#5b5311c4fc191ef0">The
Request</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/d0540dca561770d2/fb27be1eb9fa8112#fb27be1eb9fa8112">The
Offer</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/fe09eef1be4f75fd/f05daf33ba86a454#f05daf33ba86a454">Anonymous
Subclasses</a></h4>

<p>Simon Glober discovered that anonymous subclasses were not working in
December. Leo fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9145d543f52f35bd/e2b62a27a803370a#e2b62a27a803370a">Perl
6 Compiler in Perl 6</a></h4>

<p>Millsa Erlas hoped that writing a Perl 6 compiler in Perl 6 was still a
priority. Markus Laire pointed her to Pugs. She seemed happy.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e778497a56444f84/db497f0efde11445#db497f0efde11445">Object
Internals</a></h4>

<p>Leo has been steadily hacking away at the object internals. There is now
a <code>get_mro</code> opcode.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/4af0306d5b4bdb5d/f9079cdebbfb3651#f9079cdebbfb3651">Dynclasses
Failure in gcc 3.3.3</a></h4>

<p>Leo committed a workaround to a GC problem with dynamic library loading.
Eventually someone needs to implement the real solution.</p>

<h4>The Many Faces of Win32</h4>

<p>It turns out that there are several different flavors of Windows builds
with MinGW (not to mention Cygwin or MSVC). This causes pain.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/aeaf62dbeb16f14a/9d77af5c1c99a840#9d77af5c1c99a840">MinGW</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/82b2988e0777be6b/45b485d60499377c#45b485d60499377c">Pain</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/ea4934debf27ef24/2af4665d9f0509a6#2af4665d9f0509a6">The
Many Moods of MinGW</a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/075f871cfeba125e/f7f0ae2f3d71f5c3#f7f0ae2f3d71f5c3">TODO:
Clean Parrot's A*I</a></h4>

<p>Jarkko Hietaniemi posted a TODO for cleaning up both Parrot's API and ABI.
Leo agreed that it would be very nice.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/52275131d2b6ba0b/5d04a0e33841544d#5d04a0e33841544d">Calling
PIR from a PMC</a></h4>

<p>William Coleda wanted to know how to call PIR code from a PMC. Jeff Horwitz
pointed him to the <code>Parrot_call_sub_*</code> API.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/0377ffb9409a4db6/d87dcd5b13f79c33#d87dcd5b13f79c33">PAST
Compiler Problems</a></h4>

<p>Bernhard Schmalhofer has a program that he can make work in imc, but not
from PAST. It turns out that we don't yet have a way to pass options to the
<code>compile</code> opcode. We need that.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/c0dbe1c83c032522/82d308ca303342fb#82d308ca303342fb"><code>Makefile</code>
Cleanup</a></h4>

<p>Bernhard Schmalhofer offered to clean some old imcc targets out of the
<code>Makefile</code>. Leo told him to go for it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/ffc411a054b614d6/347b5254037f240d#347b5254037f240d">MRO
Broke Tcl</a></h4>

<p>Will Coleda was sad that Leo kept breaking Tcl. Leo suggested that he add
the Tcl tests to the base <code>make test</code>. Also, there is some funniness
going on because tests fail for Leo and not Will.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/8e24f6db5638451b/3aedf5963bbf574a#3aedf5963bbf574a">TODO:
Add Multiple Return Values to <code>Parrot_call_sub</code></a></h4>

<p>Matt Diephouse posted a TODO for adding the ability to access multiple
return values from C.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/40f344f759cb5df4/b11b606daea1abb6#b11b606daea1abb6">MANIFEST Failures</a></h4>

<p>Bob Rogers was seeing MANIFEST failures. It turns out that he forgot to use
the <code>-dP</code> switch with CVS. We have all done it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/aabfb7940abc0611/e15c16162f92a6ca#e15c16162f92a6ca">PASM
-&gt; IMC</a></h4>

<p>Bernhard Schmalhofer committed a few TODO tests for generating and running
PASM from Pir. Jens Rieks pointed out that this does not work and is only a
debugging aid.  I don't see anything wrong with wanting it to work, though.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/825d0b2ee8e15d73/bd72ed3b4004ce9c#bd72ed3b4004ce9c">Segfault
on <code>splice</code></a></h4>

<p>Nick Glencross found a segfault when splicing an <code>IntList</code>. Jens
Rieks provided a patch that allowed Parrot to die earlier and more cleanly. Leo
fixed the problem.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/c64adac9b6b4b822/dcdeb12bb567f52e#dcdeb12bb567f52e">Documenting
the MinGW build</a></h4>

<p>Fran&ccedil;ois Perrad provided a patch updating documentation for building
with MinGW. Warnock applies.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/6ef839077855a882/e90e4226ded8159f#e90e4226ded8159f">Segfaulting
md5sums</a></h4>

<p>Nick Glencross decided to check up on his md5sum library. It still compiles,
but it segfaults. Leo found and fixed the GC bug.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/9872aae4f7d39836/e4496796bc505458#e4496796bc505458"><code>Parrot_Exec_OS_Command</code></a></h4>

<p>Fran&ccedil;ois Perrad noticed that MinGW was very particular about how you
execs OS commands. He wondered if this should be fixed at the configure layer
or the <code>Parrot_Exec_OS_Command</code> layer. Dan explained that he never
intended the latter to be language independent, and that a language independent
version should go in a library.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5b0867aaa2381186/2c1e5c08e857421d#2c1e5c08e857421d">Namespaces
in PIR</a></h4>

<p>Leo posted a call for comments on PIR namespaces. Dan suggested a small
addition.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/478fad3d3c66989b/0768c592db76d962#0768c592db76d962">Builtins</a></h4>

<p>Leo committed a change moving builtins to a class namespace and provided
convenient access to them from PIR.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/bb978033e3dc8b06/7e90050886739a28#7e90050886739a28">MMD:
Multi Sub Syntax</a></h4>

<p>Leo put out a call to develop a syntax for multi subs in PIR. Many people
suggested options.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/e6f47902d1c0e9c4/b9cf876745f5e8c8#b9cf876745f5e8c8">Returning
a Variable Number of Arguments</a></h4>

<p>Bob Rogers updated PIR code to allow returning a variable number of
arguments. Leo applied it.</p>

<h3>The Usual Footer</h3>

<p>Posting via the Google Groups interface does not work. To post to any of
these mailing lists please subscribe by sending email to
<code>perl6-internals-subscribe@perl.org</code>,
<code>perl6-language-subscribe@perl.org</code>, or
<code>perl6-compiler-subscribe@perl.org</code>. If you find these summaries
useful or enjoyable, please consider contributing to the Perl Foundation to
help support the development of Perl. You might also like to send feedback to
<a href="mailto:ubermatt@gmail.com">ubermatt@gmail.com</a>.</p>

<ul>

<li><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></li>
<li><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></li>
<li><a href="http://planet.parrotcode.org/">Parrot Blog aggregator</a></li>

</ul>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-740" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/24/perl_dns.html" rel="bookmark">Automating Windows (DNS) with Perl</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Thomas Herchenroeder</span> on <abbr class="published" title="2005-03-24T00:00:00-08:00">March 24, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h3>Driving Windows DNS Server</h3>

<p>If you happen to manage a DNS server running on Windows 2000 or Windows 2003
with more than just a couple of dozen resource records on it, you've probably
already hit the limits of the MMC DNS plugin, the Windows administrative GUI
for the DNS server implementation. Doing mass operations like creating 20 new
records at once, moving a bunch of A records from one zone to another, or just
searching for the next free IP in a reverse zone, can challenge your patience.
To change the name part of an A record, you have to delete the entire record and
re-create it from scratch using the new name.  You've probably thought to yourself,
"There MUST be another way to do this."  There is!</p>

<p>Silently, almost shyly, behind the scenes and without the usual bells and
whistles, Microsoft has arrived at the <a
href="http://www.pragmaticprogrammer.com/ppbook/extracts/rule_list.html">power
of the command shell</a>. For the DNS services[1], the command line utility
<code>dnscmd</code> is available as part of the AdminPac for the server
operating systems. <code>dnscmd</code> is a very solid command line utility,
with lots of options and subcommands, that allows you to do almost every
possible operation on your DNS server. These include starting and stopping the
server, adding and deleting zones and resource records, and controlling a lot
of its behavior.</p>

<p>This article explores how to run <code>dnscmd</code> from Perl. In that
respect, it is a classic "Perl-as-a-driver" script, invoking
<code>dnscmd</code> with various options and working on its outputs.</p>

<h3>DNSCMD</h3>

<p>Invoke <code>dnscmd /?</code> to see a top-level list of available subcommands
and type <code>dnscmd /<code>subcommand</code> /?</code> for more specific help
for this subcommand. <code>dnscmd /?</code> shows that there is a subcommand
<code>RecordDelete</code>, and <code>dnscmd /recorddelete /?</code> (case not
significant) explains that you need a zone name (like "my.dom.ain"), a node name
within this zone (like "host1"), a record type (like "A"), and the data part of
the resource record to delete (like "10.20.40.5").</p>

<p>The first argument to <code>dnscmd</code>, if you actually want to do
something with it, is the name of the DNS server to use. A full working
command looks something like:</p>

<pre><code>dnscmd dnssrv.my.dom.ain /RecordDelete my.dom.ain host1 A 10.20.40.5</code></pre>

<p>This opens the very welcome opportunity to run <code>dnscmd</code>
remotely&#8212;from your workstation, for example&#8212;which frees you from the need to
log in to your DNS server.</p>

<h3><a href="/pub/2005/03/24/examples/wdns.pl">WDNS.PL</a> (The Script)</h3>

<p>The script in the current version only handles A and PTR records.
There is no handling of CNAME records, for example. Within this limitation, it
is also very A record-oriented: you can add or delete A records, change the IP or name
of an A record, or move the A record to a different zone. It
keeps PTR records in sync with these changes, creating or deleting a
corresponding PTR record with its A record. This is mostly what you want.</p>

<p>The most important thing to understand with this script is the format and
the meaning of the input data it takes ("Show me your data ...")[2]. The
format is simple, just:</p>

<pre><code>    &lt;name1&gt;      &lt;target1&gt;
    &lt;name2&gt;      ...
    ...          ...</code></pre>

<p>Separate <code>name</code> and <code>target</code> by whitespace. A name is a
relative or fully- qualified domain name. A target can be one of these:</p>

<ul>

<li>another domain name, meaning to rename to that name;</li>
<li>an IP, meaning to change to this IP;</li>
<li>nothing or undef, meaning to delete this name.</li>

</ul>

<p>This mirrors the basic functions of the script. To add some extra candy,
the target parameter has two other possibilities which have proven very useful
in my environment.  A target can also be:</p>

<ul>

<li>a C net, given as a triple of IP buckets (like "10.20.40");</li>
<li>a net segment identifier ("v1", "v2", and so on, in my example).</li>

</ul>

<p>In both cases, the script will give the name a free IP (if possible) from
either the C net or the net segment specified by its identifier.  I'll return
to this idea soon.</p>

<p>To pull all of the various possibilities together, here is a list of sample
input lines, each representing one of the mentioned possibilities for the
target:</p>

<pre><code>          pcthe                10.20.90.53     -- new ip
          pcthe.my.dom.ain     10.20.90.53     -- new ip full qualified
          pcthe                10.20.90        -- search free ip in range
          pcthe                @v8             -- search free ip in net segment v8
          pcthe                pcthe2          -- rename host
          pcthe                pcthe.oth.dom   -- rename host full qualified
          pcthe                                -- delete host (with -r option)</code></pre>

<p>Pass this data to the script through either an input file or STDIN[3].</p>

<h4><code>init()</code></h4>

<p>Now to the code. At startup, <code>wdns.pl</code> pulls in the list of primary
zones from the given DNS server, both forward (names as lookup keys) and
reverse (IPs as lookup keys) zones. This is handy, because it will use this
list again and again.</p>

<h4><code>mv_ip()</code></h4>

<p>The main worker routine is the sub <code>mv_ip</code>.  (Don't think too
much about the name; it's from the time when the only function of the script
was to change the IP of a given name). For any given name/target pair, it does
the following: First it tries to find a FQDN for the name.  If it finds a host
for the given name, it uses the FQDN as a basis to construct the name part of
the targeted record. If it cannot find a name, it assumes that it should
create an entirely new record. If the options permit (<code>-c</code>), it
constructs one.</p>

<p>Then it inspects the target. Depending on its type, the
program prepares to assign a new IP to the name, rename an existing A record
while retaining the IP, search for a free IP in a certain range, or just
delete existing records.  When everything settles, the actual changes take
place, using <code>dnscmd</code> to delete and add A and PTR records as
appropriate. (There is no <code>UpdateRecord</code> function in
<code>dnscmd</code>, so updating is in fact a combination of delete and
create). </p>

<p>That's it! The rest of the code is lower-level functions that help to
achieve this.</p>

<h4><code>create_*</code> and <code>delete_*</code></h4>

<p>The four subs <code>create_A</code>, <code>create_PTR</code>,
<code>delete_A</code>, and <code>delete_PTR</code> are wrapper functions
around the respective invocations of <code>dnscmd</code>.  An additional issue
of interest is that Windows DNS will delete a PTR record once you delete the
corresponding A record, so you don't have to do so explicitly.</p>

<h4><code>get_rev_zone()</code> and <code>get_fwd_zone()</code></h4>

<p>One of the major issues when manipulating DNS resource records is picking
the right zone to do the change in. If you have just one forward and one
reverse zone, this is simple.  However, if you are maintaining a lot of zones
with domains and nested subdomains, while other subdomains of the same parent
have their own zones, this might be tedious.</p>

<p><code>wdns.pl</code> can offload this task for you. The subs
<code>get_rev_zone</code> and <code>get_fwd_zone</code> use the initially
retrieved list of primary zones from your server. They take an IP or a fully
qualified domain name respectively, and split it into the node part and the
zone part. So the IP 10.20.40.5 might split into 10.20.40 and 5 (if the proper
zone of this IP is 40.20.10.in-addr.arpa) or 10 and 20.40.5 (if
10.in-addr.arpa happens to be the enclosing zone), depending on your zone
settings. The same applies for domain names.  Other routines use this
information to add or delete resource records in their appropriate zones.</p>

<h4>IP Lookup Functions</h4>

<p>There is a set of subs I called "IP lookup functions". They all help to
find a free IP in an appropriate range. Depending on the target specification,
they will search a certain C net or a whole net segment of unused address. This
searching breaks down to finding the appropriate zone, the appropriate node
("subdomain"), and then listing the already existing leaf nodes in this range.
Once it has the list of used nodes, it starts scanning for gaps or unused
nodes off the end of the list. </p>

<csperl file="grab" domain="on" record="b/996" template="b/article_sidebar.view">

<p>An additional feature of these routines is that they honor certain reservations in
the ranges, either through fixed directives ("leave the first 50 addresses
free at the beginning of each net segment") or through inspecting dedicated
TXT records on the DNS server that contain the <code>RESERVED</code> keyword.
(The actual format of these records is
<code>RESERVED:&lt;range-spec&gt;:&lt;free text&gt;</code>, where
<code>range-spec</code> is a colon-separated list of IPs or IP ranges. An
example is <code>RESERVED:1,3,5,10-20,34:IPs reserved for the VPN
switches</code>). This helps avoid re-using reserved IPs accidentally through
the automatic script, and also helps avoid messing things up when time is short.</p>

<p>In the case of these TXT records, I used <code>dnscmd</code> to retrieve
them, not <code>nslookup</code>, which would have been equally possible.</p>

<h3>A Word About the Net Segments</h3>

<p>If your IPs reside in a segmented network, which is likely to be the case
for most sites, make sure that your hosts have addresses for the segments to
which they attach.  For this script I have chosen a poor man's approach to
represent the segments just by the list of their respective C nets in the
script itself (see the hash <code>%netsegs</code> in the "Config section").
There might be a more clever way to do this. If you are going to run the
script in your environment, edit this hash to reflect your network
topology.</p>

<p>The <code>dns_lookup</code> sub looks up the current DNS entries. It runs
the extern command <code>nslookup</code> and parses its output. If you need
more sophisticated DNS lookups (and <code>nslookup</code>'s options just won't
do), you might want to resort to <code>dig</code> (which has a Windows
version) or <a href="http://search.cpan.org/dist/Net-DNS">Net::DNS</a> (which
runs on Windows in any case). This simple way of doing it was just enough for
my needs.</p>

<h4>Footnotes</h4>

<ol>

<li>In the Windows world, server processes are usually referred to as
"services"; I tend to mix this term with "server" every now and then.</li>

<li>"Show me your functions, and I will be confused. Show me your data, and
your functions will be obvious", to re-coin a famous quote from Frederick
Brooks' <em>The Mythical Man-month</em>.</li>

<li>Depending on your Windows command shell, you might have to tinker a bit to
get the STDIN input to work as desired. Cygwin's bash works like a breeze and
takes Ctrl-Z&lt;RET&gt; as the EOF sequence.</li>

</ol>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-738" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/17/symtables.html" rel="bookmark">Symbol Table Manipulation</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Phil Crow</span> on <abbr class="published" title="2005-03-17T00:00:00-08:00">March 17, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>Having almost achieved the state of perfect laziness, one of my favorite
modules is <a
href="http://search.cpan.org/perldoc?Class::DBI::mysql">Class::DBI::mysql</a>.
It makes MySQL database tables seem like classes, and their rows like objects.
This completely relieves me from using SQL in most cases. This article explains
how <code>Class::DBI::mysql</code> carries out its magic. Instead of delving
into the complexities of <code>Class::DBI::mysql</code>, I will use a simpler
case study: <a
href="http://search.cpan.org/perldoc?Class::Colon">Class::Colon</a>.</p>

<h3>Introduction</h3>

<p>One of my favorite modules from CPAN is <code>Class::DBI::mysql</code>.
With it, I can almost forget I'm working with a database. Here's an
example:</p>

<pre><code>#!/usr/bin/perl
use strict; use warnings;

package Users;

use base 'Class::DBI::mysql';

Users-&gt;set_db('Main', 'dbi:mysql:rt3', 'rt_user', 'rt_pass');
Users-&gt;set_up_table('Users');

package main;

my @column_names = qw( Name RealName );
print "@column_names\n";
print "-" x 30 . "\n";

my $user_iter = Users-&gt;retrieve_all();

while (my $row = $user_iter-&gt;next) {
    print $row-&gt;Name, " ", $row-&gt;RealName, "\n";
}</code></pre>

<p>Except for the MySQL connection information, no trace of SQL or databases
remains.</p>

<p>My purpose here is not really to introduce you to this beautiful module.
Instead, I'll explain how to build fa&ccedil;ades like this. To do so, I'll work
through another, simpler CPAN module called <code>Class::Colon</code>. It turns
colon-delimited files into classes and their lines into objects. Here's an
example from a checkbook application.  This program computes the balance of an
account on a user-supplied date or the end of time if the user doesn't supply
one.</p>

<pre><code>#!/usr/bin/perl
use strict; use warnings;

use Getopt::Std;
use Date;
use Class::Colon Trans =&gt; [ qw(
    status type date=Date amount desc category memo
) ];

our $opt_d;
getopt('d');
my $date       = Date-&gt;new($opt_d) if $opt_d;

my $account    = shift or die "usage: $0 [-d date] account_file\n";
my $trans_list = Trans-&gt;READ_FILE($account);
my $balance    = 0;

foreach my $trans (@$trans_list) {
    if (not defined $date or $date &gt;= $trans-&gt;date) {
        $balance += $trans-&gt;amount;
    }
}

print "balance = $balance\n";</code></pre>

<p>In the use statement for <code>Class::Colon</code>, I told it the name of
the class to build (<code>Trans</code>), followed by a list of fields in the
order they appear in the file. The date field is really an object itself, so I
used <code>=Date</code> after the field name. This told
<code>Class::Colon</code> that a class named <code>Date</code> will handle the
date field. If the <code>Date</code> class constructor were not named
<code>new</code>, I would have written
<code>date=Date=<em>constructor_name</em></code>.  My <code>Date</code> class is primitive
at best, it only provides comparisons like greater than.  It only does that for
dates in one format. I won't embarrass myself further by showing it.</p>

<p>After shifting in the name of the account file, the code calls
<code>READ_FILE</code> through <code>Trans</code>, which
<code>Class::Colon</code> defined. This returns a list of <code>Trans</code>
objects. The fields in these objects are the ones given in the
<code>Class::Colon</code> use statement. They are easy to access through their
named subroutines.</p>

<p>The rest of the program loops through the transactions list checking dates.
If the user didn't give a date, or the current transaction happened before the
user's date, the program adds that amount to the total. Finally, it reports the
balance.</p>

<p>Though the example shows only the lookup access, you can easily change
values. All of the accessors retrieve and store. Calling
<code>WRITE_FILE</code> puts the updated records back onto the disk.</p>

<p>Other methods help with colon-delimited records. Some let you work with
handles instead of file names. Others help you parse and produce strings so
that you can drive your own input and output. See the <code>Class::Colon</code>
perldoc for details. (No, colon is not the only delimiter.)</p>

<h3>Let the Games Begin</h3>

<p>Both <code>Class::DBI::mysql</code> and <code>Class::Colon</code> build
classes at run time which look like any other classes. How do they do this?
They manipulate symbol tables directly. To see what this means, I want to start
small. Suppose I have a variable name like:</p>

<pre><code>my $extremely_long_variable_indicator_string;</code></pre>

<p>That's not something I want to type often.  I could make an alias in
two steps like this:</p>

<pre><code>our $elvis;</code></pre>

<p>First, I declare an identifier with a better name. I must make it global. If
strict is on, I should use <code>our</code> to do this (though there are other
older ways that also work). Lexical variables (the ones declared with my) don't
live in symbol tables, so the tricks below won't work with them.</p>

<pre><code>*elvis = \$extremely_long_variable_indicator_string;</code></pre>

<p>Now I can point <code>$elvis</code> to the longer version. The key is the
<code>*</code> sigil. It refers to the symbol table entry for
<code>elvis</code> (the name without any sigils). This line stores a reference
to <code>$extremely_long_variable_indicator_string</code> in the symbol table
under <code>$elvis</code>, but it doesn't affect other entries like
<code>@elvis</code> or <code>%elvis</code>. Now, both scalars point to the same
data, so <code>$elvis</code> is a genuine alias for the longer name. It is not
just a copy.</p>

<p>Unless you work with mean-spirited colleagues, or are into self-destructive
behavior, you probably don't need an alias just to gain a shorter name. However,
the technique works in other situations you might actually encounter. In
particular, it is the basis for the API simplification provided by
<code>Class::Colon</code>.</p>

<p>To understand what <code>Class::Colon</code> does, remember that the
subroutine is a primitive type in Perl. You can store subs just as you do
variables. For instance, I could store a subroutine reference like this (the
sigil for subs is <code>&amp;</code>):</p>

<pre><code>my $abbr;
$abbr = \&amp;some_long_sub_name;</code></pre>

<p>and use it to call the subroutine:</p>

<pre><code>my @answer = $abbr-&gt;();</code></pre>

<p>Here, I have made a new scalar variable, <code>$abbr</code>, which holds a
reference to the subroutine. This is not quite the same as directly
manipulating the symbol table, but you can do that too:</p>

<pre><code>*alias     = \&amp;some_long_sub_name;
my @retval = alias();</code></pre>

<p>Instead of storing a reference to the subroutine in a variable, this code
stores the subroutine in the symbol table itself.  This means that subsequent
code can access the subroutine as if it had declared the subroutine with its
new name itself.  Adjusting the symbol table is not really easier to read or
write than storing a reference, but, in modules like <code>Class::Colon</code>,
symbol table changes are the essential step to simplifying the caller's
API.</p>













<h3>Classes from Sheer Magic</h3>

<p>The previous example demonstrated how to make symbol table entries whenever
you want.  These can save typing and/or make things more readable. The standard
module <a href="http://search.cpan.org/perldoc?English">English</a> uses this
technique to give meaningful English names to the standard punctuation
variables (like <code>$_</code>).  You want more, though. You want to build
classes out of thin air during run time.</p>

<p>The key to fabricating classes is to realize that a class is just a package
and a package is really just a symbol table (more or less). That, and the fact
that symbol tables autovivify, is all you need to carry off hugely helpful
deceptions like <code>Class::DBI::mysql</code>.</p>

<h4>What <code>use</code> really does</h4>

<p>This subsection explains how to pass data during a <code>use</code>
statement. If you already understand the <code>import</code> subroutine, feel
free to skip to the next section.</p>

<p>When you use a module in Perl, you can provide information for that module
to use during loading. While <code>Class::DBI::mysql</code> waits for you to
call routines before setting up classes, <code>Class::Colon</code> does it
during loading by implementing an import method.</p>

<p> Whenever someone <code>use</code>s your module, Perl calls its
<code>import</code> method (if it has one). <code>import</code> receives the
name of the class the caller used, plus all of the arguments provided by the
caller.</p>

<p>In the checkbook example above, the caller used <code>Class::Colon</code>
with this statement:</p>

<pre><code>use Class::Colon Trans =&gt; [ qw(
    status type date=Date amount desc category memo
) ];</code></pre>

<p>The <code>import</code> method of the <code>Class::Colon</code> package
receives the following as a result:</p>

<ol>

<li>The string <code>Class::Colon</code>.</li>

<li>A list with two elements. First, the string <code>Trans</code>.  Second, a
reference to the array which lists the fields.</li>

</ol>

<p>The top of the <code>import</code> routine stores these as shown below.</p>

<h4>Inserting into non-existent symbol tables</h4>

<p>The main magic of <code>Class::Colon</code> happens in the
<code>import</code> routine. Here's how that looks:</p>

<pre><code>sub import {
    my $class = shift;
    my %fakes = @_;

    foreach my $fake (keys %fakes) {
        no strict;
        *{"$fake\::NEW"}     = sub { return bless {}, shift; };

        foreach my $proxy_method qw(
                read_file  read_handle  objectify delim
                write_file write_handle stringify
        ) {
            my $proxy_name   = $fake  . "::" . uc $proxy_method;
            my $real_name    = $class . "::" .    $proxy_method;
            *{"$proxy_name"} = \&amp;{"$real_name"};
        }

        my @attributes;
        foreach my $col (@{$fakes{$fake}}) {
            my ($name, $type, $constructor)  = split /=/, $col;
            *{"$fake\::$name"} = _make_accessor($name, $type, $constructor);
            push @attributes, $name;
        }
        $simulated_classes{$fake} = {ATTRS =&gt; \@attributes, DELIM =&gt; ':'};
    }
}</code></pre>

<p>After shifting the arguments into meaningful variable names, the main loop
walks through each requested class (the list of fakes). Inside the loop it
disables <code>strict</code>, because the necessary uses of so many symbolic
references would upset it.</p>

<p>There are four steps in the fabrication of each class:</p>

<ol>

<li>Make the constructor</li>

<li>Make the class methods</li>

<li>Make the accessor methods</li>

<li>Store the attribute names in order</li>

</ol>

<p>The constructor is about as simple as possible and the same for every
fabricated class. It returns a hash reference blessed into the requested class.
The cool thing is that you can insert code into a symbol table that doesn't
exist in advance.  This constructor will be <code>NEW</code>.  (By convention,
<code>Class::Colon</code> uses uppercase names for its methods to avoid name
collisions with the user's fields).</p>

<p>This code requires a little bit of careful quoting. Saying
<code>*{"$fake\::NEW"}</code> tells Perl to make an entry in the new package's
symbol table under <code>NEW</code>. The backslash suppresses variable
interpolation. While <code>$fake</code> needs interpolation, interpolating
<code>$fake::NEW</code> would just yield <code>undef</code>, because this is
its first definition here.</p>

<p>Perl has already done the hard part by the time it stores the constructor.
It has brought the package into existence. Now it's just a matter of making
some aliases.</p>

<p>For each provided method, the code makes an entry in the symbol table of the
fabricated class. Those entries point to the methods of the
<code>Class::Colon</code> package, which serve as permanent shared delegates
for all fabricated classes.</p>

<p>Similarly, it builds an accessor for each attribute supplied by the caller
in the <code>use</code> statement. These routines require a bit of
customization to look up the proper attribute name and to deal with object
construction. Hence, there is a small routine called
<code>_make_accessor</code> which returns the proper closure for each
accessor.</p>

<p>Finally, it makes an entry for the new class in the master list of simulated
classes. This allows easy lookup by name when calling class methods through the
fabricated names. Note that there is nothing in the <code>import</code> routine
that limits the caller to one invocation.  Further <code>use</code> statements
can bring additional classes to life.  Alternatively, the caller can request
several new classes with a single <code>use</code> statement by including
multiple hash keys.</p>

<p>In the standard case, <code>_make_accessor</code> works like this:</p>

<pre><code>sub _make_accessor {
    my $attribute   = shift;
    return sub {
        my $self            = shift;
        my $new_val         = shift;
        $self-&gt;{$attribute} = $new_val if defined $new_val;
        return $self-&gt;{$attribute};
    };
}</code></pre>

<p>The actual routine is a bit more complex, so it can handle construction of
attributes which are objects. Note that the value of <code>$attribute</code>,
which is in scope when the closure is created, will be kept with the sub and
used whenever it is called. The actual code is a fairly standard Perl dual-use
accessor. It assigns a new value to the attribute if the caller has passed it
in.  It always returns the value of the attribute.</p>

<h4>What <code>Class::Colon</code> provides</h4>

<p>Just for sake of completeness, here is how <code>Class::Colon</code> turns a
string into a set of objects. Note the heavy use of methods through their
previously-entered symbol table names.</p>

<pre><code>sub objectify {
    my $class    = shift;
    my $string   = shift;
    my $config   = $simulated_classes{$class};
    my $col_list = $config-&gt;{ATTRS};

    my $new_object = $class-&gt;NEW();
    my @cols       = split /$config-&gt;{DELIM}/, $string;
    foreach my $i (0 .. @cols - 1) {
        my $method = $col_list-&gt;[$i];
        $new_object-&gt;$method($cols[$i]);
    }
    return $new_object;
}</code></pre>

<csperl file="grab" domain="on" record="b/936" template="b/article_sidebar.view">

<p>All fabricated classes share this method (and the other class methods of
<code>Class::Colon</code>).</p>

<p>Recall that <code>NEW</code> returns a blessed hash reference with nothing
in it. In <code>objectify</code>, the loop fills in the attributes by calling
their accessors. This ensures the proper construction of any object attributes.
Callers access <code>objectify</code> indirectly when they call
<code>READ_FILE</code> and its cousins. They can also use it directly through
its <code>OBJECTIFY</code> alias.</p>

<h3>Summary</h3>

<p>By making entries into symbol tables, you can create aliases for data that is
hard to name. Further, you can create new symbol tables simply by referring to
them. This allows you to build classes on the fly. Modules like
<code>Class::DBI::mysql</code> and <code>Class::Colon</code> do this to provide
classes representing tabular data.</p>

<p>There are other uses of these techniques. For example, <a
href="http://search.cpan.org/perldoc?Memoize">Memoize</a> wraps an original
function with a cache scheme, storing the wrapped version in place of the
original in the caller's own symbol table. For functions which return the same
result whenever the arguments are the same, this can save time. <a
href="http://search.cpan.org/perldoc?Exporter">Exporter</a> does even more
sophisticated work to pollute the caller's symbol table with symbols from a
used package. At heart, these schemes are similar to the one shown above. By
carefully performing symbol table manipulations in modules, you can often
greatly simplify an API, making client code easier to read, write, and
maintain.</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-744" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/p6pdigest/20050307.html" rel="bookmark">This Fortnight in Perl 6, Feb. 23 - March 7, 2005</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Matt Fowles</span> on <abbr class="published" title="2005-03-10T00:00:00-08:00">March 10, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p>All~</p>

<p>Welcome to yet another fortnight summary, once again brought to you by
chocolate chips. This does have the distinction of being the first summary
written on a Mac, so if I break into random swear words, just bear with me.</p>

<h3>Off-list Development</h3>

<p>In more related news, someone pointed out to me that development goes on off-list on places like IRC. I briefly contemplated quitting my job and tracking
such things full time, but then I decided that it would be better to accept
brief submissions for the summary. Thus I will be adding a fourth section to
the summaries based on contributions. If you would like to make a contribution,
email me with a brief summary. Please include the name by which you would like
me to attribute you (though sadly the process I use will likely to mangle any
Unicode characters). Please make all links full. I will shorten them.
Thanks!</p>

<h3>Perl 6 Language</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/b4e54da6dbda6a06/b0456cc980e83394#b0456cc980e83394"><code>not()</code></a></h4>

<p>It turns out that <code>not()</code> (with no arguments) made Perl 5 core
dump for a while, and it took us five years to figure that out. In Perl 6 it
will be a list op. Calling it with no arguments will return a null list or an
undef depending on context.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/dc72f01f5027f048/48bdbca40022b21c#48bdbca40022b21c">Junctions
and Threading</a></h4>

<p>I had hoped that last week someone would have addressed the concerns about
threading. I was disappointed in this. A new crop of concerns surfaced and died down fairly
quickly (as the chief proponent, Damian, was away).</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/9b872c9ed83288e0/0ebbcd80853adf38#0ebbcd80853adf38">Serializing
to Various Languages</a></h4>

<p>Somehow the discussion of junctions morphed into a discussion of sets, which
morphed back into junctions, which morphed into a discussion of serialization
to different languages. Interesting stuff, but I wouldn't hold my breath for
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/738187afa60b9f0b/f2f3a2da72c3046c#f2f3a2da72c3046c">Performance
Analysis and Benchmarks</a></h4>

<p>Adam Preble posted an offer to develop some benchmarks for Perl 6.
Unfortunately, I think he posted it to Google Groups. Also, he probably should
have posted it to p6c or p6i as the language folk tend to wave their hands and
say "magic occurs but correctness is preserved" when it comes to
optimization.</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<!-- sidebar ends -->

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/a6529a02c9846a0d/732df42c2d9be456#732df42c2d9be456">Send
+ More = Junctions</a></h4>

<p>Autrijus posted an example using junctions, instead of parents, to solve the
classic</p>

<blockquote><p>SEND MORE + ===== MONEY</p></blockquote>

<p>problem. Markus Laire asked for a clarification, and Rod Adams pointed out
that he felt that it would not work as it did not capture the interdependence
of the "e"s. This lead to the question of how to write Prolog-like code
(including unification and backtracking) in Perl 6. No one offered answers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/88aefa68ad27f426/71027b15d05582b0#71027b15d05582b0">Pairs
as lvalues</a></h4>

<p>Ingo Blechschmidt wondered what the behavior of pairs as lvalues would be.
The answer is that you will receive an error for attempting to modify a
constant.</p>

<h3><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/cacd7e002c890924/fe2cfeb1b88ee1a2#fe2cfeb1b88ee1a2">Perl
6</a></h3>

<p>Roberto Bisotto wanted to know where he could download Perl 6 to start
playing with it. We embarrassedly told him that a full implementation was not
yet available, but Pugs was gaining ground quickly.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/be23b9d50b6559cc/4903cb1bd620edda#4903cb1bd620edda">Hash
Keys</a></h4>

<p>Autrijus wanted to know if hash keys were still just strings or if they
could be more. The answer is that by default they are strings, but you can
declare them as having a different <code> shape </code>. This led to a
discussion of hashing techniques such as the <code>.bits</code>,
<code>.canonicalize</code>, or <code>.hash</code> methods.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/9921c45f21ab8a3e/499d9f24e128dbac#499d9f24e128dbac">Dynamically-Scoped Dynamic Scopes</a></h4>

<p>Dave Whipp wanted to make "dynamically-scoped dynamic scopes". My head hurt,
but apparently Larry's didn't. He replied, "Piece of cake, the syntax [and
implementation] are left as an exercise for the would-be module author."</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/be231afa0b134b41/e1f0673c86848f17#e1f0673c86848f17">Parameters
to Rules</a></h4>

<p>Rod Adams asked how he could specify arguments to rules so they could be
more function-like. Larry explained that there were several syntaxes, each of
which can coerce its arguments in slightly different ways. He then mused that
perhaps there were too many. I agree.  There are too many.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/6e72e481cee3393d/0066c3b36488fd26#0066c3b36488fd26">Compile
Time Signature Checking</a></h4>

<p>Ahbijit Mahabal wondered how type checking will work for cases where it is
not easy to determine the types at compile time. The answer: checking will be
deferred to run time. In the end it seems that Perl 6 will blur the line between
run time and compile time heavily. Perhaps it will provide nifty support for
staged programming. Meta-Perl 6 here we come.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/13ac45228fd4409f/56f3ea297b42a06c#56f3ea297b42a06c"><code>%*CONFIG</code>
and <code>%?CONFIG</code></a></h4>

<p>Brian Ingerson asked about the <code>CONFIG</code> hash and what sort of
secondary sigil it would have. Larry explained that <code>$?CONFIG</code> holds
the config for the machine compiling the program and <code>$*CONFIG</code>
holds the config for the machine running the program. Then he made some noise
about parsing, compiling, and running all on different machines. Then he
suggested that this way led to drug induced madness.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/2d48d854b9cbe1a8/040055e6a076a77e#040055e6a076a77e">Sigils
and Structural Subtypes</a></h4>

<p>Thomas Sandla&szlig; proposed using sigils to provide a structural type
system as opposed to its class/signature-based one and its constraint-based
one.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/086a99985beac390/3beae7ddd32a0cd6#3beae7ddd32a0cd6">Optional
Binding</a></h4>

<p>Luke Palmer wondered how optional arguments and slurpy ones would interact.
Brent and Larry explained that they would snap up whatever arguments they
could, but you can always beat them back by piping in your slurpy stuff with
<code> ==&gt; </code>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/d8ab55b87c4c5066/d1881a598c201c32#d1881a598c201c32">Types,
Classes, and Junctions</a></h4>

<p>Thomas Sandla&szlig; wants to know how the type system and the class system
interrelate. He drew a happy tree of A, B, and its junctions. Really it
confused me, and I agree with him that I don't understand the value of the one
junction in the context of types.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.language/browse_thread/thread/bb118c7350c76657/b7a518c68403bf90#b7a518c68403bf90">Code
Indentation</a></h4>

<p>Wolverian does not like any of the ways he can indent his long function
declaration when it uses traits. He wants to allow a comma in them to solve
this dilemma. Larry and others suggested a few alternatives.  This led to a
discussion of module loading and header/module files. Larry admitted that he
would not mind if Perl 6 developed Ada-like module files.</p>

<h3>Perl 6 Compiler</h3>

<h4>Pugs Releases and patches</h4>

<p>Autrijus released Pugs 6.0.9 and 6.0.10 with help from many people.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/110bfecca8f61260/926318dc6a8bfba5#926318dc6a8bfba5">6.0.9</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/6160392a79acfb39/7925028a26e8e036#7925028a26e8e036">6.0.10</a></li>

</ul>

<h4>
Various Pugs Patches
</h4>

<p>Luke Palmer added more <code>qq</code> delimiters and fixed a unary
<code>-</code> bug. Yuval Kogman posted a fix that made anonymous blocks both
parse and run. Stevan Little un-TODOed a bunch of tests that started working;
he went on to add some new tests that do not yet pass. I suspect that he is
just providing more for him to un-TODO later. Yuval Kogman submitted several
patches including array interpolation, a <code>CATCH {}</code> test, a test for
an assignment bug, and a fix for a conditional of expected. Garrett Rooney
cleaned up <em>given.t</em>, added a test for <code>%hash.kv</code>, one for
declaring variables in a loop, and another for <code>$?LINE</code> and
<code>$?FILE</code>.</p>

<ul>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/720e7ebc94d50179/cff970abd6a62365#cff970abd6a62365"><code>qq</code>
patch</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/4a35b0c20cde300c/d191b263b71fdb88#d191b263b71fdb88">unary
minus</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/afe78094645bca28/30667665e1970717#30667665e1970717">anon
blocks</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/95c0da602e738624/a0640651e3e524ba#a0640651e3e524ba">un-TODO</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/576d3cb0b3409cae/a6c2c99db32d599f#a6c2c99db32d599f">more
tests</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/44f942004e0b4c39/36fed91745b2e290#36fed91745b2e290">array
interpolation</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/2d52d88c5f57a19f/8f7d4e923f476114#8f7d4e923f476114"><code>CATCH</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/b67fc9faa71887c5/8ec50febb0032f65#8ec50febb0032f65">more
un-TODO</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/a54605f6d983aa28/5b89ee84bbff0601#5b89ee84bbff0601">assignment
bug</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/4abb0e1a8714014f/adc8edf7725e98ea#adc8edf7725e98ea"><code>given</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/39aa5f75b45e3e82/8d5ab10e8280682c#8d5ab10e8280682c">conditional</a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/2c467a0a78656fab/72d1ea55ef640d1d#72d1ea55ef640d1d">more
<code>given</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/e3e095cffa35fe54/fa72d9e3826e2c07#fa72d9e3826e2c07"><code>%hash.kv</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/980075a4d19b7cc3/398067b4f8988f1f#398067b4f8988f1f"><code>loop</code></a></li>

<li><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/24d9f6696db9081e/1e37970e1d99368a#1e37970e1d99368a"><code>$?FILE</code></a></li>

</ul>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/854e1c954eee0aff/5d80e1f9dffd78b0#5d80e1f9dffd78b0">Where
to Post Things? </a></h4>

<p>Abhijit Mahabal wondered if p6c was the correct place to post questions
about Pugs and bugs in Pugs. Patrick and Autrijus agreed that p6c was indeed
the correct place for most initial questions.  Things will escalate to p6l only
when the Apocalypses|Exegeses|Synopses are not clear.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/e2a279655e5f0700/055c8989dba2dfb3#055c8989dba2dfb3">Argument
Binding Problems</a></h4>

<p>Abhijit Mahabal found and analyzed a bug in Pugs argument binding. There is
no solution yet.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/d6b0ceec8702a2c2/251aae525ef31ee3#251aae525ef31ee3">No
More Numeric Postfix Operators</a></h4>

<p>Due to the space-eating postfix dot, Larry declared that there would be no
numeric postfix operators. A great cry went out as if there had been a huge
disturbance in the force (or not).</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/ebf76575a5b27f58/93ba223afa857539#93ba223afa857539"><code>&amp;?SUB</code>
and Pointy Subs</a></h4>

<p>Garrett Rooney was having trouble using the &amp;?SUB variable in pointy
subs. That is because they don't use it. &amp;?SUB is only for full-fledged
subs. That way you can call &amp;?SUB from within a for loop in a sub and get
the nice recursive behavior you likely want.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/6faead387ba8d754/c19a5c1095d1dbd7#c19a5c1095d1dbd7">When
is <code>$_</code> Set</a></h4>

<p>Autrijus asked Larry for clarification of which circumstances set
<code>$_</code>.  Larry explained that <code>-&gt;</code> topicalizes its first
argument but full subs undefine it until something else sets it, while methods
bind it to their first invocant.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/310f00f3c793ebbc/aaf8af577ca231b8#aaf8af577ca231b8">Parens
on Method Calls</a></h4>

<p>Luke Palmer was having trouble getting <code>for %hash.keys { ... }</code>
to parse correctly. Larry replied that it is problematic if methods parse in
the same manner as subs. Fortunately, the parens are mandatory when there are
arguments in addition to invocants.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/88745bd19ee2408b/5c0b81012cd1c823#5c0b81012cd1c823"><code>@x
= @a == @x = @a[]</code></a></h4>

<p>Autrijus wanted to verify that</p>

<pre><code>my @x = @a;
my @x = @a[];
my @x[] = @a;</code></pre>

<p>were all the same. Larry confirmed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/2cca457566ec6e31/532ba4fc2b7ba60b#532ba4fc2b7ba60b">Misleading
Compiler Messages</a></h4>

<p>Terrence Brannon noticed a very confusing error message from Pugs.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler?gvc=2">Integration
Testing</a></h4>

<p>Darren Duncan has offered to start the ball rolling with Perl 6 integration
testing. He will translate a few modules he has written to Perl 6 so that they
can act as more holistic tests for Pugs and Perl 6. There is an interesting
conversation about CPAN and Perl 6 involved too.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.compiler/browse_thread/thread/cdb15361abe82075/caf5e64af3e9c337#caf5e64af3e9c337">Refs
in Scalar Context</a></h4>

<p>Stevan Little found a bug involving refs in scalar context.</p>

<h3>Parrot</h3>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/a218dc2b78cea569/7a4f18bec9be251a#7a4f18bec9be251a"><code>Parrot_get_runtime_prefix</code></a></h4>

<p>William Coleda found a bug in <code>Parrot_get_runtime_prefix</code>. Leo
admitted that it was a mistake.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/bf141f7bdf5b2bc9/1bc07cf6370561c5#1bc07cf6370561c5">Z
Machine</a></h4>

<p>Leo put up his tiny Z machine for adoption. Steve Peters offered to adopt
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/881e826e6bff40ad/7620ef482c7fb884#7620ef482c7fb884">MinGW
Build</a></h4>

<p>Michal Jurosz posted a link to his guide to <a
href="http://wiki.kn.vutbr.cz/mj/index.cgi?Build%20Parrot%20with%20MinGW">building
Parrot with MinGW</a>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/9ea5d132cb6a328b/6694c85f337d21b6#6694c85f337d21b6">Splitting
VTABLE into Interfaces</a></h4>

<p>Leo and Sam posted their thoughts about splitting VTABLEs.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/6a01356f6d07c89f/468a7048d6e6d20f#468a7048d6e6d20f">Checking
an Attribute's Existence</a></h4>

<p>Cory Spencer wants to check for the existence of an attribute, or at the
very least catch the exception thrown when an attribute is not found. Leo told
him that it was on the list of things to do.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/7478b503bb00cace/3ce522b99f512582#3ce522b99f512582">Calling
C routines</a></h4>

<p>Vlad Florentino wanted to know if he could call C library routines from
Parrot. The answer is NCI. Look at the <a
href="http://search.cpan.org/~ltoetsch/parrot-0.1.2/runtime/parrot/library/SDL.imc">Parrot
SDL bindings</a> as an example.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/a25f9e51f5e893d5/c8dbea9600f28198#c8dbea9600f28198">heredoc
for PIR</a></h4>

<p>Bernhard Schmalhofer asked about adding heredoc support to PIR. This led to
Melvin ranting that PIR is not a language for people to write.  PIR's goal was
to be to be an intermediate language targeted by compilers and was not supposed
to have human niceties like heredoc. Of course, for PIR to reach that state, we
need a high level language that actually targets it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/33d379077b32a52a/dce84b845fefd8c5#dce84b845fefd8c5">PPC
Linux troubles</a></h4>

<p>Once more chromatic and Leo worked to try to fix Parrot for PPC Linux.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/0785edb412d947b8/11a46c29f113b2ae#11a46c29f113b2ae">Automatic
Verification of Parrot Assembly</a></h4>

<p>Steve Coleman wants to develop a research project to verify assembly for
security purposes, thus he had some questions about Parrot Assembly. Melvin
happily provided some answers.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/f81a7fdd8efff573/3280f958d81855a9#3280f958d81855a9">Tail
Call Improvements</a></h4>

<p>Bob Rogers supplied a patch that improved the <code>.tail_call</code>
support in IMCC. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/1df03d9a27a03666/006aa1f97a89246e#006aa1f97a89246e">Strings
Support</a></h4>

<p>Leo announced that he has merged Dan's string patch into the current CVS
head. Thanks go to Will Coleda for doing all the heavy lifting. String content
in assemblers now assume the iso-8859-1 charset, unless you specify
otherwise.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/9639fe75600596b9/f35ecbe1eb110be2#f35ecbe1eb110be2">Where
Are Thou, Dan? </a></h4>

<p>Edward Peschko wondered where Dan was. Will Coleda provided the answer.  He
is MIA.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/b0e33017a867b530/ac6f56d4c1260f28#ac6f56d4c1260f28">String
Encoding Bug</a></h4>


<p>Bernhard Schmalhofer found a bug with string encoding in PBC files. Leo
fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/72895abfd4ba1867/cda0ac964ff089b0#cda0ac964ff089b0">Parrot
0.1.2 "Pheonix", or, Counting is Fun</a></h4>

<p>Leo proudly announced the release of Parrot 0.1.2. Thanks to everyone for
all your hard work.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/88068795b1388146/c4828a3fdaf21fa9#c4828a3fdaf21fa9">Test
Suite Cleanup</a></h4>

<p>Bernhard Schmalhofer provided a large patch which cleans up some of the test
suite. Leo gave him the go ahead to apply it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/3fd73e761f551ac8/a0623ecb52992ed5#a0623ecb52992ed5">Dynclasses
Cleanup Wanted</a></h4>

<p>Leo posted a plea for a cleanup to dynclasses.  There are no takers yet.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/861fca0f3baafaec/d6fd0922b5567ecc#d6fd0922b5567ecc">Parrot
Installer</a></h4>

<p>Olivier Thauvin wants to make a Parrot RPM for Mandrake. Leo and Will
gave him pointers on where to start.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/c04f3a326b0d745e/df79bca00f4bab84#df79bca00f4bab84">Warnocked
documentation patch</a></h4>

<p>Matt Diephouse wondered about the status of a patch he sent in. There is
still no response. ::nudge::</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/6b9951a30622e444/c1bc9e1b53e14a76#c1bc9e1b53e14a76">Mac
OS X Build Problem</a></h4>

<p>Will Coleda found an Mac OS X build problem. Leo slapped himself on the
forehead and fixed it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/58d3f7458f4f9ae4/8da4b3d7e23dd9a0#8da4b3d7e23dd9a0">Strip
the Strip</a></h4>

<p>Jarkko Hietaniemi posted a patch fixing a Tru64 build problem. Leo applied
it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/3e814abbed111af7/518a9a1cc4b377d4#518a9a1cc4b377d4">Gpm
Linkage</a></h4>

<p>Ron Blaschke supplied a patch fixing gpm linkage. Leo applied it.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/ecc6045018cb93db/92135acf907f8161#92135acf907f8161">Failing
Tests on Win32</a></h4>

<p>Ron Blaschke posted a list of failing Win32 tests. He then mentioned that he
was going to fix the missing export symbols problem.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/7ee7a26748bb49d6/50830061f07ca34c#50830061f07ca34c">Objects
and VTABLE Changes</a></h4>

<p>Leo posted a summary of his proposed changes and how they effect MMD and
objects.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/5f5642087dc2df24/588dcba2b2ac0743#588dcba2b2ac0743">Rogue
0xA0 Characters</a></h4>

<p>Jarkko Hietaniemi found some random 0xA0 characters in Parrot header files.
He removed them and Leo applied the patch.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/4fc77cdafef72824/d2e0eb269256fc08#d2e0eb269256fc08">Parrot
Config</a></h4>

<p>Adrian Lambeck wondered how he could query Parrot config. Will pointed him
to <em>library/config.imc</em>.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/4b2cc5857c50a76c/75f2848b7d755eb3#75f2848b7d755eb3">Tinderbox</a></h4>

<p>Leo put out a request to revive the tinderboxen. Steve Peters asked if it
would be useful to build it into Perl's current smoke report.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/ee4eb100a7c0f6c0/d6dabae0afd70060#d6dabae0afd70060">Mac
OS X Test Failure</a></h4>

<p>Leo found and fixed a problem with dynclasses tests on Mac OS X.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/e6f47902d1c0e9c4/dc06de8aef8cef4c#dc06de8aef8cef4c">Flatten
Return Values</a></h4>

<p>Bob Rogers wants to flatten a variable number of return values, just as he
can flatten a variable number of arguments. Leo felt that it was a reasonable
request.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/ddfa91a387b9273d/738c963e4b33f57d#738c963e4b33f57d">Major
Changes</a></h4>

<p>Leo proposed a set of core changes that should take parrot to 0.2 and
beyond. Roger Browne and Melvin Smith provided comments.</p>

<h4><a
href="http://groups-beta.google.com/group/perl.perl6.internals/browse_thread/thread/f3e4cb739062468c/e07908135bbc2c48#e07908135bbc2c48"><em>ncurses_life.imc</em>
error</a></h4>

<p>Uwe Voelker had a problem with <em>ncurses_life</em>. chromatic sent him a
patch to try and see if it fixed it.</p>

<h3>The Usual Footer</h3>

<p>Posting via the Google Groups interface does not work.</p>

<p>To post to any of these mailing lists please subscribe by sending email to
<a
href="mailto:perl6-internals-subscribe@perl.org">perl6-internals-subscribe@perl.org</a>,
<a
href="mailto:perl6-language-subscribe@perl.org">perl6-language-subscribe@perl.org</a>,
or <a
href="mailto:perl6-compiler-subscribe@perl.org">perl6-compiler-subscribe@perl.org</a>.
If you find these summaries useful or enjoyable, please consider contributing
to the Perl Foundation to help support the development of Perl. You might also
like to send feedback to <a
href="mailto:ubermatt@gmail.com">ubermatt@gmail.com</a>.</p>

<ul>

<li><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></li>
<li><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></li>
<li><a href="http://planet.parrotcode.org/">Parrot Blog aggregator</a></li>

</ul>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-736" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2005/03/03/pugs_interview.html" rel="bookmark">A Plan for Pugs</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.modernperlbooks.com/">chromatic</a></span> on <abbr class="published" title="2005-03-03T00:00:00-08:00">March  3, 2005 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->
<p><em><a href="http://www.autrijus.org/">Autrijus Tang</a> is a talented Perl
hacker, a <a href="http://search.cpan.org/~autrijus/">dedicated CPAN
contributor</a>, and a truly smart man.  His announcement of <a
href="http://use.perl.org/~autrijus/journal/22965">starting an implementation
of Perl 6 in Haskell</a> on February 1, 2005 might have seemed like a joke from
almost anyone else.  A month later, his little experiment runs more code and
has attracted a community larger than anyone could have predicted.  Perl.com
recently caught up with Autrijus on #Perl6 to discuss his new project: <a
href="http://www.pugscode.org/">Pugs</a>.</em></p>

<p><strong>chromatic:</strong>  I've followed your journal from the beginning, but it didn't start
from the start.  Where did you come up with this crazy idea?</p>

<p><strong>Autrijus:</strong> Ok. The story is that I hacked <a
href="http://svk.elixus.org/">SVK</a> for many months with <a
href="http://search.cpan.org/~clkao/">clkao</a>.  SVK worked, except it is not
very flexible. There is a VCS named <a
href="http://abridgegame.org/darcs/">darcs</a>, which is much more flexible,
but is specced using quantum physics language and written in a scary language
called <a href="http://www.haskell.org/">Haskell</a>.  So, I spent one month
doing nothing but learning Haskell, so I could understand darcs. Which worked well;
I convinced a crazy client (who paid me to develop <a
href="http://search.cpan.org/perldoc?Parse::AFP">Parse::AFP</a>) that Perl 5 is
doomed because it has no COW (which, surprisingly, it now has), and to fund me to
develop an alternate library using Haskell.</p>

<p>(I mean "Perl 5 is doomed for that task", not "Perl 5 is doomed in
general".)</p>

<p><strong>chromatic:</strong>  Copy-on-Write?</p>

<p><strong>Autrijus:</strong> Yeah.</p>

<p><strong>chromatic:</strong>  So that's a "sort-of has".</p>

<p><strong>Autrijus:</strong> Yeah. As in, <a href="http://search.cpan.org/~abergman/">sky</a> suddenly worked on it and
claims it mostly works.  Haven't checked the code, though.</p>

<p><strong>chromatic:</strong>  It's been in the works for years.  Or "doesn't works"
perhaps.</p>

<p><strong>Autrijus:</strong> But I digress. Using Haskell to develop
<em>OpenAFP.hs</em> led to programs that eat constant 2MB memory, scale
linearly, and are generally 2OOM faster than my Perl library.</p>

<p>Oh, and the code size is 1/10.</p>

<p><strong>chromatic:</strong>  Okay, so you picked up Haskell to look at darcs to borrow ideas from
for svk, then you convinced a client to pay you to write in Haskell and you
started to like it.  What type of program was this?  It sounds like it had a
bit of parsing.</p>

<p><strong>Autrijus:</strong> AFP is IBM's PDF-like format, born 7 years
before PDF.  It's unlike PDF in that it's all binary, very bitpacked, and is
generally intolerant of errors.  There was no free library that parses or
munges AFP.</p>

<p><strong>chromatic:</strong>  Darcs really impressed you then.</p>

<p><strong>Autrijus:</strong> The algorithm did. The day-to-day slowness and
fragility for anything beyond mid-sized projects did not. But darcs is
improving. But yeah, I was impressed by the conciseness.</p>

<p><strong>chromatic:</strong>  Is that the implementation of darcs you consider slow or the use of
Haskell?</p>

<p><strong>Autrijus:</strong> The implementation.  It basically caches no info
and recalculates all unnecessary information.  Can't be fast that way.</p>

<p><strong>chromatic:</strong>  Hm, it seems like memoization is something you can add to a
functional program for free, almost.</p>

<p><strong>Autrijus:</strong> Yeah, and there are people working on that.</p>

<p><strong>chromatic:</strong>  But not you, which is good for us Perl people.</p>

<p><strong>Autrijus:</strong> Not me. Sorry.</p>

<p>Anyway. So, I ordered a bunch of books online including <a
href="http://www.cis.upenn.edu/~bcpierce/tapl/index.html">TaPL</a> and <a
href="http://www.cis.upenn.edu/~bcpierce/attapl/index.html">ATTaPL</a> so I could
learn more about mysterious things like Category Theory and Type Inference and
Curry-Howard Correspondence.</p>

<p><strong>chromatic:</strong>  How far did you get?</p>

<p><strong>Autrijus:</strong> I think I have a pretty solid idea of the basics
now, thanks to my math-minded brother Bestian, but TaPL is a very
information-rich book.</p>

<p><strong>chromatic:</strong>  Me, I'm happy just to recognize Haskell Curry's name.</p>

<p><strong>Autrijus:</strong> I read the first two chapters at a relaxed pace. 
By the end of second chapter it starts to implement languages for real
and usually by that time, the profs using TaPL as textbook will tell the
students to pick a toy language to implement.</p>

<p><strong>chromatic:</strong>  I haven't seen you pop up much in Perl 6 land though.  You seemed
amazingly productive in the Perl 5 world.  Where'd Perl 6 come
in?</p>

<p><strong>Autrijus:</strong> As an exercise.  I started using Perl 6 as the
exercise. I think that answers the first question.</p>

<p>Oh. p6 land.</p>

<p><strong>chromatic:</strong>  More of a playground than a full land, but we have a big pit full
of colorful plastic balls.</p>

<p><strong>Autrijus:</strong> Yeah, I was not in p6l, p6i or p6c.  However, the
weekly summary really helped.  Well, because I keep hitting the limit of
p5.</p>

<p><strong>chromatic:</strong>  It seems like an odd fit, putting a language with a good static
type system to use with a language with a loose, mostly-optional type system
though.</p>

<p><strong>Autrijus:</strong> Most of more useful modules under my name,
(including the ones Ingy and I inherited from Damian) were forced to be done
in klugy ways because the p5 runtime is a mess.</p>

<p><strong>chromatic:</strong>  You should see Attributes::Scary.  Total sympathy
here.</p>

<p><strong>Autrijus:</strong> <a
href="http://search.cpan.org/perldoc?Template::Extract">Template::Extract</a>
uses <code>(?{})</code> as a nondet engine; <a
href="http://search.cpan.org/perldoc?PAR">PAR</a> comes with its own
<em>perlmain.c</em>; let me not mention source filtering.  All these techniques
are unmaintainable unless with large dosage of caffeine.</p>

<p><strong>chromatic:</strong>  Yeah, I fixed some of the startup warnings in <a
href="http://search.cpan.org/perldoc?B::Generate">B::Generate</a> a couple of
weeks ago...</p>

<p><strong>Autrijus:</strong> Cool. Yeah, B::Generate is abstracted klugery
and may pave a way for Pugs to produce Perl 5 code.</p>

<p><strong>chromatic:</strong>  Parrot has the chance to make some of these things a lot nicer.  I'm
looking forward to that.  Yet you took off down another road.</p>

<p><strong>Autrijus:</strong> Actually, I think Pugs and Parrot will meet in
the middle.  Where Pugs AST meets Parrot AST and the compiler is written in
Perl 6 that can then be run on Parrot.</p>

<p><strong>chromatic:</strong> I thought Pugs would get rewritten in C for
Parrot?</p>

<p><strong>Autrijus:</strong> No, in Perl 6.</p>

<p><strong>chromatic:</strong>  Can <a href="http://www.haskell.org/ghc/">GHC</a> retarget a
different AST then?</p>

<p><strong>Autrijus:</strong> It can, but that's not the easier plan.</p>

<p><strong>chromatic:</strong>  It's easy for me.  I don't plan to do it.</p>

<p><strong>Autrijus:</strong> The easier plan is simply for Pugs to have a
<em>Compile.hs</em> that emits Parrot AST.  Which, I'm happy to discover
yesterday, is painless to write.  (<a
href="http://search.cpan.org/~ingy/">Ingy</a> and I did a KwidAST-&gt;HtmlAST
compiler in an hour, together with parser and AST.)</p>

<p><strong>chromatic:</strong>  Kwid and HTML, the markup languages?</p>

<p><strong>Autrijus:</strong> Yeah.</p>

<p>Ok. So back to p6. P5's limit is apparent and not easily fixable</p>

<p><strong>chromatic:</strong>  It sounds like you wanted something more, and soon.</p>

<p><strong>Autrijus:</strong> Parrot is fine except every time I build it, it
fails.</p>

<p><strong>chromatic:</strong>  Try running Linux PPC sometime.</p>

<p><strong>Autrijus:</strong> Freebsd may not be a good platform for Parrot, I
gathered.  Or my CVS luck is really bad. But I'm talking about several
months ago.</p>

<p><strong>chromatic:</strong>  4.x or 5.x?</p>

<p><strong>Autrijus:</strong> 5.x.</p>

<p><strong>chromatic:</strong>  Ahh, perhaps it was <a
href="http://icu.sourceforge.net/">ICU</a>.</p>

<p><strong>Autrijus:</strong> Two out of three times is.  I think.</p>

<p><strong>chromatic:</strong>  I guess it's too late to interest you in a Ponie then.</p>

<p><strong>Autrijus:</strong> I was very interested in <a
href="http://www.poniecode.org/">Ponie</a>.  I volunteered to Sky about doing
svn and src org and stuff, but svn was not kind for Ponie.</p>

<p><strong>obra:</strong>Well, that was before svn 1.0</p>

<p><strong>Autrijus:</strong> Right. Now it all works just fine, except
<em>libsvn_wc</em>, but we have svk now, and I learned that Sky has been
addicted to svk.</p>

<p>But anyway. And the beginning stage of Ponie is XS hackery which is by far
not my forte. I've read <a href="http://www.manning.com/jenness/">Lathos'
book</a>, so I can do XS hackery when forced to but not on a volunteer basis.
Oh no.</p>

<p><strong>chromatic:</strong>  That's a special kind of pain.  It's like doing magic tricks,
blindfolded, when you have to say, "Watch me push and pop a rabbit out of this
stack.  By the way, don't make a reference to him yet...."</p>

<p><strong>Autrijus:</strong> So, on February 1, when I had too much
caffeine and couldn't sleep, I didn't imagine that Pugs would be anything near a
complete implementation of Perl 6.  I was just interested in modeling junctions
but things quickly went out of control.  And some other nifty things like
subroutine signatures.</p>

<p><strong>chromatic:</strong>  There's a fuzzy connection in the back of my head about Haskell's
inferencing and pattern matching being somewhat similar.</p>

<p><strong>Autrijus:</strong>  Sure. Haskell has very robust inferencing,
pattern matching, and sexy types.  Which I'm trying to inflict on <a
href="http://www.luqui.org/">luqui</a> to improve Perl 6's design.</p>

<p><strong>chromatic:</strong>  As long as they do the right thing with regard to roles, go
ahead.</p>

<p><strong>Autrijus:</strong> They do. :)</p>

<p><strong>chromatic:</strong>  This was an academic exercise though?</p>

<p><strong>Autrijus:</strong> Yeah. It stayed as an academic exercise I think for
two days.</p>

<p><strong>chromatic:</strong>  "Hey, this Perl 6 idea is interesting.  I wonder how it works in
practice?  I bet I could do it in Haskell!"</p>

<p><strong>Autrijus:</strong> Yup.  Using it as nothing more than a toy
language to experiment with, iitially targeting a reduced set of Perl 6 that
is purely functional.  But by day three, I found that doing this is much easier
than I thought.</p>

<p><strong>chromatic:</strong>  Did you say "highly reduced"?</p>

<p><strong>Autrijus:</strong> Yeah.  Term is "featherweight".</p>

<p><strong>chromatic:</strong>  What makes it easier?</p>

<p><strong>Autrijus:</strong> <a
href="http://www.cs.uu.nl/~daan/parsec.html">Parsec</a> and <a
href="http://www.nomaware.com/monads/html/contmonad.html">ContT</a>.  Parsec is
like Perl 6 rules.</p>

<p><strong>chromatic:</strong>  Parsec's the most popular Haskell parsing library,
right?</p>

<p><strong>Autrijus:</strong> Well, Parsec and <a href="http://www.haskell.org/happy/">Happy</a>.  Happy is more traditional; you write in a yacc-like grammar thing and it generates a parser in Haskell for you. Parsec is pure Haskell.  You just write Haskell code that defines a parser.  The term is "parser combinator".</p>

<p><strong>chromatic:</strong>  Haskell is its own mini-language there.</p>  

<p><strong>Autrijus:</strong> It's a popular approach, yes.  When you see
"blah combinator library", think "blah mini-language".</p>


<p><strong>chromatic:</strong>  I looked at the parser.  It's surprisingly short.</p>

<p><strong>Autrijus:</strong> And yet quite complete.  Very maintainable,
too.</p>

<p><strong>chromatic:</strong>  Now I've also read the Perl 5 parser, in the sense that I picked
out language constructs that I recognized by name.  Is it a combination
parser/lexer, or how does that work?  That's the tricky bit of Perl 5, in that
lexing depends on the tokens seen and lots of context.</p>

<p><strong>Autrijus:</strong> Yup. It does lexing and parsing in one pass,
with infinite lookahead and backtracking.  Each lexeme can define a new parser
that works on the next lexeme.</p>

<p><strong>chromatic:</strong> Does that limit what it can do?  Is that why it's purely functional
Perl 6 so far?</p>

<p><strong>Autrijus:</strong> The purely functional Perl 6 plan stops at day 3.
We are now fully IO.  Started with <code>say()</code>, and mutable variables,
and <code>return()</code>, and <code>&amp;?CALLER_CONTINUATION</code>.  So
there's nothing functional about the Perl 6 that Pugs targets now :).</p>

<p><strong>chromatic:</strong> Does Haskell support continuations and all of those funky
things?</p>

<p><strong>Autrijus:</strong> Yes. And you can pick and match the funky things
you want for a scope of your code.  "In this lexical scope I want
continuations"; dynamic scope, really.  "In that scope I want a logger."  "In that scope I want a pad."</p>

<p><strong>chromatic:</strong> Performance penalty?</p>

<p><strong>Autrijus:</strong> Each comes with its own penalty, but is
generally small.  GHC, again, compiles to very fast C code.</p>

<p><strong>chromatic:</strong> Can you instrument scopes at runtime too?</p>

<p><strong>Autrijus:</strong> Sure.  <code>&amp;?CALLER::SUB</code> works.  And
<code>$OUTER::var</code>.</p>

<p><strong>chromatic:</strong> Are you compiling it to native code now?  I remember that being a
suggestion a few days ago.</p>

<p><strong>Autrijus:</strong> Pugs itself is compiled to native code; it is
still evaluating Perl 6 AST, though.</p>

<p><strong>chromatic:</strong> It's like Perl 5 in that sense then.</p>

<p><strong>Autrijus:</strong> Yes, it's exactly like Perl 5. Have you read <a
href="http://svn.perl.org/perl6/pugs/trunk/docs/01Overview.html">PA01</a>?</p>

<p><strong>chromatic:</strong> I have.</p>

<p><strong>Autrijus:</strong> Cool.  So yeah, it's like Perl 5 now.  The
difference is B::* is trivial to write in Pugs</p>

<p><strong>chromatic:</strong> Except maintainable.</p>

<p><strong>Autrijus:</strong> And yeah, there's the maintainable bit. Pugs is
&lt;4k lines of code.  I think porting Pugs to Perl 6 will take about the same
number of lines, too.</p>

<p><strong>chromatic:</strong> You already have one module, too.</p>

<p><strong>Autrijus:</strong> Yup.  And it's your favorite module.</p>

<p><strong>chromatic:</strong> I've started a few attempts to write <a
href="http://search.cpan.org/perldoc?Test::Builder">Test::Builder</a> in
Parrot, but I'm missing a few pieces.  How far along are classes and objects in
Pugs?</p>

<p><strong>Autrijus:</strong> They don't exist.  6.2.x will do that, though.
But the short term task is to get all the todo_() cleaned.  which will give us
an interpreter that really agrees with all synopses.  At least in the places
we have implementation of, that is.</p>

<p><strong>chromatic:</strong> I see in the dailies that you are producing boatloads of runnable
Perl 6 tests.</p>

<p><strong>Autrijus:</strong> Yup, thanks to #Perl6.  I seldom write tests now
:) The helpful committers do that for me.</p>

<p><strong>chromatic:</strong> How do you know your code works then?</p>

<p><strong>Autrijus:</strong> I just look at newest todo_ and start working
on it.</p>

<p><strong>chromatic:</strong> Oh, they write tests for those before you implement
them?</p>

<p><strong>Autrijus:</strong> Yup.  It's all test-first.</p>

<p><strong>chromatic:</strong> Okay, I'll let you continue then.</p>

<p><strong>Autrijus:</strong> Ha.  So yeah, the cooperation has been wonderful.
Camelfolks write tests and libraries, and lambdafolks makes those tests pass.  If a
camelfolk wants a particular test to pass sooner, then that person can learn
from lambdafolk :). Things are easy to fix, and because of the coverage there's
little chance of breaking things.  If lambdafolks want to implement new
things that may or may not agree with synopses or p5 norm, then they learn from
camelfolks.</p>

<p><strong>chromatic:</strong> Have you started giving Haskell tutorials?  I know Larry and
Patrick have started to pick up some of it.  I'm pretty sure Luke and Damian
have already explored it (or something from the same family
tree).</p>

<p><strong>Autrijus:</strong> I think I've read a paper from Damian that says
he taught Haskell in monash.  It's before the monadic revolution though.</p>

<p><strong>chromatic:</strong> If not Haskell, certainly something from the ML family.</p>

<p><strong>Autrijus:</strong> Right.  So, I've been pointing people to <a
href="http://www.isi.edu/~hdaume/htut/">YAHT</a> and #Haskell.</p>

<p><strong>chromatic:</strong> It sounds like you're attracting people from both sides of the
fence then.</p>

<p><strong>Autrijus:</strong> It indeed is. I get svn/svk patches and darcs
patches.</p>

<p><strong>chromatic:</strong> Is there a lot of overlapping interest?  Where does it come
from?</p>

<p><strong>Autrijus:</strong> Well, ever since the monadic revolution of '98
Haskell people have started to do real world apps.</p>

<p><strong>chromatic:</strong> Now that they can do IO, for example.</p>

<p><strong>Autrijus:</strong> Yeah. It's been only 7 years ago.  And recently
Haskell world has its native version control system; a Perl-review like
magazine, cpan/makemaker-like infrastructure, etc.  So it's growing fast.</p>

<p><strong>chromatic:</strong> There's still a lot of attraction there for real world
applications, of which Pugs is one?</p>

<p><strong>Autrijus:</strong> Pugs is a practical project in that working on
it has a chance of solving real problems, and is very fun to boot.  And although
p5 got no respect, in general p6 is very slick.  So the mental barrier is lower
for lambdafolks to join, I think.</p>

<p><strong>chromatic:</strong> The lambdafolks like what they see in Perl 6?</p>

<p><strong>Autrijus:</strong> Yup.  I quoted Abigail on #Haskell a while
ago.</p>

<p><strong>chromatic:</strong> I saw something earlier about access to libraries and such.  Do you
have a plan for the XS-alternative?</p>

<p><strong>Autrijus:</strong> Yeah, Ingy is working on it <em>ext/Kwid/</em>
eventually inline Haskell code.  And with luck, inline other kinds of code as
well through Haskelldirect (the Haskell equiv of Inline).</p>

<!-- sidebar begins -->
 <csperl file="grab" domain="on" record="b/1424" template="b/article_sidebar.view">
<!-- sidebar ends -->

<p><strong>chromatic:</strong> Is this within Pugs or Perl 6 atop Pugs?</p>

<p><strong>Autrijus:</strong> It's within Pugs. The Parrot side had not been
well-discussed.</p>

<p><strong>chromatic:</strong> Yeah, the Parrot AST needs more documentation.</p>

<p>You're devoting a lot of time to it.  Obra mentioned that you've
cleared most of your paying projects out of the way for the time being.  What's
the eventual end?</p>

<p><strong>Autrijus:</strong> And whither then? I cannot say :). As you
mentioned, I've diverted most of my paying projects away so I should have at
least 6 months for Pugs.</p>

<p><strong>chromatic:</strong> How about in the next month?</p>

<p><strong>Autrijus:</strong> This month should see robust semantics for basic
operations, the beginning of classes and objects, and many real modules
hooks to Haskell-side libraries.</p>

<p><strong>chromatic:</strong> I'll do T::B then.</p>

<p><strong>Autrijus:</strong> Oh and Pugs hands out committer bit liberally so
if you want to do T::B, I'll make you a committer :). You can start now
actually.  Just write imaginary Perl 6 code, and we'll figure out how to make
it run.  Most of the <em>examples/*</em> started that way.</p>

<p><strong>chromatic:</strong> Ah, I'll take a look.</p>

<p><strong>Autrijus:</strong> Oh. Right. I was quoting Abigail.</p>

<p> "Programming in Perl 5 is like exploring a large medieval castle,
surrounded by a dark, mysterious forest, with something new and unexpected
around each corner. There are dragons to be conquered, maidens to be rescued,
and holy grails to be quested for. Lots of fun."</p>

<p>"Perl 6 looks like a Louis-XVI castle and garden to me. Straight, symmetric,
and bright. There are wigs to be powdered, minuets to be danced, all quite
boring.".</p>

<p>I, for one, am happy for Perl to move from the dark age to the age of
enlightenment.  I think many camelfolks and lambdafolks share the same
sentiment :).</p>

<p><em>chromatic is the author of <a href="http://onyxneon.com/books/modern_perl/">Modern Perl</a>. In his spare time, he has been working on <a href="https://trendshare.org/how-to-invest/">helping novices understand stocks and investing</a>.</em></p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2005/02/">&laquo; February 2005</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2005/04/">April 2005 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
