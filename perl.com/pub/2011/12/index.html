<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: December 2011 Archives</title>


    <link rel="prev" href="/pub/2011/09/" title="September 2011" />
    <link rel="next" href="/pub/2012/02/" title="February 2012" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">December 2011 Archives</h1>





                            
                            <div id="entry-1974" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2011/12/building-telephony-applications-with-perl-and-twiml.html" rel="bookmark">Building Telephony Applications with Perl and TwiML</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://perlcode.org/">Scott Wiersdorf</a></span> on <abbr class="published" title="2011-12-12T06:00:01-08:00">December 12, 2011  6:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>Perl makes writing Twilio telephony applications simple and enjoyable. My
previous article, <a href="/pub/2011/09/automating-telephony-with-perl-and-twilio.html">Automating Telephony with Perl and
Twilio</a>
showed how to use
<a href="http://search.cpan.org/perldoc?WWW::Twilio::API">WWW::Twilio::API</a> to make a
phone survey using Twilio's text-to-speech synthesizer as well as send an SMS
message to a phone number of your choice.</p>

<p>This article builds an easy phone menu application using Twilio's
<a href="http://www.twilio.com/docs/api/twiml/">TwiML</a> application language,
<a href="http://search.cpan.org/perldoc?WWW::Twilio::TwiML">WWW::Twilio::TwiML</a>, and
<a href="http://mojolicio.us/">Mojolicious</a>.</p>

<h2><strong>Installation and Twilio account creation</strong></h2>

<p>To begin, install WWW::Twilio::TwiML and Mojolicious using your <a href="http://www.cpan.org/modules/INSTALL.html">favorite
method</a> (see the previous article for
more ideas). You'll need a <a href="http://www.twilio.com/">Twilio</a> account (it's free
to create an account, plus Twilio gives new users US $30 for calls--plenty for
several weeks of testing). The previous article covers installation and getting
setup with a Twilio account in more detail.  With WWW::Twilio::TwiML and
Mojolicious installed and a Twilio account active, it's a great time to get a
little more familiar with Twilio's Dashboard.</p>

<h2><strong>Twilio Dashboard</strong></h2>

<p>The <a href="https://www.twilio.com/user/account">Twilio Dashboard</a> is where to find
your Twilio sandbox information. The sandbox section of the dashboard is
located below the fold of the dashboard page:</p>

<p><img src="/pub/2011/12/12/dashboard.png" alt="Twilio Dashboard" title="" /></p>

<p>You should see the sandbox number and pin. You can set our inbound voice and
inbound SMS handler URLs there (I'll explain those soon.) First, a primer on
how Twilio works.</p>

<h2><strong>TwiML in the Twilio flow</strong></h2>

<p>Twilio's basic flow goes something like:</p>

<p><figure>
<img src="/pub/2011/12/12/twilio-inbound-full.png" alt="Handling an inbound call to Twilio" title="" />
<figcaption>(This diagram is not an official Twilio diagram; it merely describes the author's mental model of how Twilio works and may differ wildly from Twilio's actual implementation.)</figcaption>
</figure></p>

<ol>
<li><p>The caller dials (or sends an SMS to) "555-867-5309" on their phone--this is your Twilio sandbox or purchased number. Twilio's inbound call dispatcher receives the call or text.</p></li>
<li><p>Once the connection is made, the dispatcher makes an HTTP <code>GET</code> or <code>POST</code> to
the Voice or SMS URL specified given for this number. Remember the Voice URL in
the Sandbox App of the Twilio Dashboard shown above? That's the one. For
purchased Twilio numbers, you set the voice and SMS URLs under the "Numbers"
tab in the Dashboard.</p></li>
<li><p>The Voice or SMS URL specified in the Sandbox App responds to the Twilio
request with a <em>TwiML document</em>. Twilio's TwiML parser reads this document,
then executes the "verbs" specified in the TwiML document. For example, if the
TwiML document contained a <code>&lt;Say&gt;</code> verb, Twilio's
text-to-speech synthesizer would "read" the text to the caller. If the document
specified a <code>&lt;Dial&gt;</code> verb and number, Twilio would dial the
number and connect the caller to it. <code>&lt;Redirect&gt;</code> verbs tell
Twilio to fetch another TwiML document.</p></li>
</ol>

<p>You may recall an example in the previous article which used Twilio's
<a href="http://labs.twilio.com/twimlets/voicemail">voicemail TwiML handler</a> to conduct
a brief phone survey. While you can sometimes manipulate third-party TwiML
applications to do what you want, TwiML is so simple to use that you'll find
it's often easier to write your own.</p>

<h2><strong>TwiML basics</strong></h2>

<p>TwiML is a subset of XML. Here is a TwiML document that when read by Twilio's
parser, will say to the caller, "Foosball at 10 o'clock!" using the
text-to-speech synthesizer:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
  &lt;Say voice="man"&gt;Foosball at 10 o&amp;apos;clock!&lt;/Say&gt;
&lt;/Response&gt;
</code></pre>

<p>Some TwiML verbs are nestable:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
  &lt;Gather action="/menu.cgi" numDigits="1" method="GET"&gt;
    &lt;Say voice="man"&gt;
      Ping pong at high noon!
      Hit 1 if you&amp;apos;re with me.
      Hit 2 if you&amp;apos;re a loser.
    &lt;/Say&gt;
  &lt;/Gather&gt;

  &lt;Say&gt;You must make a choice!&lt;/Say&gt;
&lt;/Response&gt;
</code></pre>

<p>The <code>&lt;Gather&gt;</code> verb tells Twilio to start gathering key
presses. Meanwhile, Twilio will hand off the contents of the
<code>&lt;Say&gt;</code> verb to the text-to-speech handler. Nesting the
<code>&lt;Say&gt;</code> inside of the <code>&lt;Gather&gt;</code> lets the
caller push a key anytime during the <code>&lt;Say&gt;</code> verb to interrupt
it and process your choice. The final <code>&lt;Say&gt;</code> element only
executes if the <code>&lt;Gather&gt;</code> fails (e.g., the caller doesn't
press a key).</p>

<p>Twilio's excellent documentation details <a href="http://www.twilio.com/docs/api/twiml/">all of the available TwiML
verbs</a>. Armed with a little knowledge,
you're dangerouly close to making something useful.</p>

<h2><strong>Simple phone menu</strong></h2>

<p>You've been asked to build a phone menu system for a young urban professional
and his family. The application should accept an incoming call, prompt the
caller with a numeric menu, and connect the caller with the number of their
choice.</p>

<p>No problem. Start with a simple static TwiML document called <em>menu.xml</em>:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
  &lt;Gather method="GET" action="/menu_handler" numDigits="1"&gt;
    &lt;Say&gt;Press 1 for Ryan&lt;/Say&gt;
    &lt;Say&gt;Press 2 for Liz&lt;/Say&gt;
    &lt;Say&gt;Press 3 for Jason&lt;/Say&gt;
    &lt;Say&gt;Press 4 for Erin&lt;/Say&gt;
    &lt;Say&gt;Press 5 for Rachel&lt;/Say&gt;
    &lt;Say&gt;Press 6 for Gilligan&lt;/Say&gt;
    &lt;Say&gt;Press 7 for Potsie&lt;/Say&gt;
  &lt;/Gather&gt;
&lt;/Response&gt;
</code></pre>

<p>You can put this file on the web and update the URL in the "Voice URL" field of
the Sandbox section of the Dashboard. Anyone who dials the sandbox number, will
hear a Twilio's text-to-speech voice reading the menu options. Anybody remember
the "S.A.M." speech synthesizer from the mid 80's (Commodore 64 or Atari 800)?
You've come a long way, baby!</p>

<p>While this static TwiML file would work, it does mean you'll have two files to
update when a phone number changes. Fix that by consolidating the
<code>/menu</code> and <code>/menu_handler</code> "routes" (the Mojolicious
word for URL handlers) into a single program to generate TwiML dynamically.</p>

<h2><strong>WWW::Twilio::TwiML, briefly</strong></h2>

<p>WWW::Twilio::TwiML is a special-purpose XML generator and supports several
programming styles. For example, the following two code snippets create this
TwiML document:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
    &lt;Say voice="man"&gt;Kilroy was here&lt;/Say&gt;
&lt;/Response&gt;
</code></pre>

<p>Snippet number 1:</p>

<pre><code>my $say = WWW::Twilio::TwiML-&gt;new();
$say−&gt;name('Say');
$say−&gt;content("Kilroy was here");
$say−&gt;attributes({voice =&gt; "man"});

my $resp = WWW::Twilio::TwiML-&gt;new();
$resp−&gt;name('Response');
$resp−&gt;content($say);

my $tw = WWW::Twilio::TwiML-&gt;new();
$tw−&gt;content($resp);
print $tw−&gt;to_string;
</code></pre>

<p>And snippet number 2:</p>

<pre><code>my $tw = WWW::Twilio::TwiML-&gt;new();
$tw−&gt;Response−&gt;Say({voice =&gt; "man"}, "Kilroy was here");
print $tw−&gt;to_string;
</code></pre>

<p>The second snippet uses a technique called "method chaining"; if you've used
the jQuery module for Javascript, you may already know how powerful chaining
object methods can be in certain contexts. <code>WWW::Twilio::TwiML</code> makes chaining
possible because each TwiML verb method is a constructor of another
<code>WWW::Twilio::TwiML</code> object.</p>

<p>When you chain TwiML objects like this:</p>

<pre><code>$tw-&gt;Response-&gt;Say("Eat at Joe&amp;apos;");
</code></pre>

<p>The <code>Response</code> object is created as a child of the top
<code>$tw</code> object. The <code>Say</code> object is created as the child of
the <code>Response</code> object. When the <code>$tw</code> object's
<code>to_string</code> method is invoked, like this:</p>

<pre><code>print $tw-&gt;to_string;
</code></pre>

<p><code>WWW:Twilio::TwiML</code> crawls down <code>$tw</code>'s list of children,
recursively invoking <code>to_string</code> until the last child. The whole
process creates this output:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
    &lt;Say&gt;Eat at Joe&amp;apos;&lt;/Say&gt;
&lt;/Response&gt;
</code></pre>

<p>It's may look a little foreign, but it makes for concise and readable TwiML.</p>

<h2><strong>Getting your mojo on</strong></h2>

<p>Now that you have a feel for creating TwiML documents, you need a way to serve
them from the web.</p>

<p><a href="http://mojolicio.us/">Mojolicious</a> is an easy-to-use web application
framework. Just a few lines and you have a sweet little web app to serve TwiML.
Feel free to read a little of the Mojolicious documentation. This author highly
recommends going through the
<a href="http://mojolicio.us/perldoc/Mojolicious/Lite">Mojolicious::Lite</a> documentation
first: almost everything you learn in Mojolicious::Lite also applies to the
larger Mojolicious application framework.</p>

<p>To write just enough Mojolicious to do what you've already done with the static
TwiML document, you need only two modules for this entire application. (Neither
has any dependencies--you're welcome.) Keep in mind that <code>Mojolicious::Lite</code>
enables 'warnings' and 'strict' by default: no sloppy programming allowed!</p>

<p>This application implements a Mojolicious handler for the <code>/menu</code>
route which is only called when the application receives an HTTP <code>GET</code> to the
<code>/menu</code> URI.</p>

<pre><code>#!/usr/bin/env perl

use Mojolicious::Lite;
use WWW::Twilio::TwiML;

get '/menu' =&gt; sub {
    my $self = shift;

    $self-&gt;render(format =&gt; 'xml',
                  text   =&gt; &lt;&lt;'_TWIML_');
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
  &lt;Gather method="GET" action="/menu_handler" numDigits="1"&gt;
    &lt;Say&gt;Press 1 for Ryan&lt;/Say&gt;
    &lt;Say&gt;Press 2 for Liz&lt;/Say&gt;
    &lt;Say&gt;Press 3 for Jason&lt;/Say&gt;
    &lt;Say&gt;Press 4 for Erin&lt;/Say&gt;
    &lt;Say&gt;Press 5 for Rachel&lt;/Say&gt;
    &lt;Say&gt;Press 6 for Gilligan&lt;/Say&gt;
    &lt;Say&gt;Press 7 for Potsie&lt;/Say&gt;
  &lt;/Gather&gt;
&lt;/Response&gt;
_TWIML_
};

app-&gt;start;
</code></pre>

<p>That's all it takes for a Mojolicious application (source <a href="/pub/2011/12/12/menu_static">here</a>).
Mojolicious packs a full stack HTTP 1.1 web server, making tests easy. In one
shell, start your Mojolicious program as a daemon (use Ctrl-c to stop when
finished):</p>

<pre><code>$ perl menu_part daemon
[Mon Nov 14 21:41:34 2011] [info] Server listening (http://*:3000)
Server available at http://127.0.0.1:3000.
</code></pre>

<p>In another shell, pretend you're Twilio's application server and fetch the
TwiML:</p>

<pre><code>$ curl http://localhost:3000/menu
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;Response&gt;
  &lt;Gather method="GET" action="/menu_handler" numDigits="1"&gt;
    &lt;Say&gt;Press 1 for Ryan&lt;/Say&gt;
    &lt;Say&gt;Press 2 for Liz&lt;/Say&gt;
    &lt;Say&gt;Press 3 for Jason&lt;/Say&gt;
    &lt;Say&gt;Press 4 for Erin&lt;/Say&gt;
    &lt;Say&gt;Press 5 for Rachel&lt;/Say&gt;
    &lt;Say&gt;Press 6 for Gilligan&lt;/Say&gt;
    &lt;Say&gt;Press 7 for Potsie&lt;/Say&gt;
  &lt;/Gather&gt;
&lt;/Response&gt;
</code></pre>

<p>Is this progress? This is same TwiML as in <em>menu.xml</em>, but now it's
created with Mojolicious. At this point you can upload your app to a publicly
accessible server, and, assuming Mojolicious is also installed there, you can
start your application. Then go to the Twilio Dashboard and replace the
existing Voice URL with:</p>

<pre><code>http://your.server.org:3000/menu
</code></pre>

<h3>Important note about Mojolicious and HTTP GET</h3>

<p>Mojolicious's <code>get</code> method only responds to HTTP <code>GET</code> method
requests. Make sure that when you set the Voice URL in the Twilio Dashboard,
you also change the HTTP method to <code>GET</code>. Alternatively, you could use
Mojolicious's <code>post</code> method, which only responds to HTTP <code>POST</code>, or
the <code>any</code> method, which accepts both <code>GET</code> and <code>POST</code> (as well as
<code>PUT</code> and <code>DELETE</code>), but making Twilio use HTTP <code>GET</code> seems more appropriate.</p>

<h2><strong>Putting it all together</strong></h2>

<p>Now it's time to improve the program because it still serves static TwiML.  It
also needs a programmatic way tell Twilio what to do when the caller presses a
key.</p>

<p>Start over and make a hash for the phone menu. This could be put into a
separate file--and probably should be--but it wouldn't be a proper tutorial
without <em>something</em> left as an exercise.</p>

<pre><code>#!/usr/bin/env perl

use Mojolicious::Lite;
use WWW::Twilio::TwiML;

my %list = ( 1 =&gt; { name =&gt; 'Ryan',
                    number =&gt; '+19165557720' },
             2 =&gt; { name =&gt; 'Liz',
                    number =&gt; '+19165551211' },
             3 =&gt; { name =&gt; 'Jason',
                    number =&gt; '+19285550122' },
             4 =&gt; { name =&gt; 'Erin',
                    number =&gt; '+19285551729' },
             5 =&gt; { name =&gt; 'Rachel',
                    number =&gt; '+18015553992' },
             6 =&gt; { name =&gt; 'Gilligan',
                    recording =&gt; 'http://www.televisiontunes.com/'
                              .     'themesongs/Gilligans%20Island.mp3' },
             7 =&gt; { name =&gt; 'Potsie',
                    recording =&gt; 'http://www.televisiontunes.com/'
                              .     'themesongs/Happy%20Days%20-%20Season%202.mp3' },
           );

get '/menu' =&gt; sub {
    my $self = shift;
</code></pre>

<p>This should looks mostly familiar so far. Now create <code>$msg</code> which
holds all of the text you want Twilio to "Say" to the caller:</p>

<pre><code>    my $msg = join '. ',
      map { "Press $_ for $list{$_}-&gt;{name}" }
        sort keys %list;
</code></pre>

<p>It's time to build the TwiML document, and this could use some error handling
in case the caller doesn't press a key. Finally, print everything via
Mojolicious's <code>render()</code> method:</p>

<pre><code>    my $tw   = WWW::Twilio::TwiML-&gt;new();
    my $resp = $tw-&gt;Response;
    $resp-&gt;Gather({action    =&gt; $self-&gt;url_for('/menu_handler'),
                   method    =&gt; 'GET',
                   numDigits =&gt; 1})
         -&gt;Say({voice =&gt; 'woman'}, $msg);

    $resp-&gt;Say("You need to make a choice or hang up.");
    $resp-&gt;Redirect("/menu");

    $self-&gt;render(format =&gt; 'xml',
                  text   =&gt; $tw-&gt;to_string);
};
</code></pre>

<p>Remember to start Mojolicious's event loop; this code should always go at the
end of your application, as it never returns:</p>

<pre><code>app-&gt;start;
</code></pre>

<p>(Source <a href="/pub/2011/12/12/menu_part">here</a>). If declarative-style programming is new to you,
don't fret: under the hood, Mojolicious simply creates a map for itself that
says "when I receive an HTTP <code>GET</code> for '/menu', I should execute this
subroutine". The <code>app-&gt;start</code> routine begins a loop that waits
for said request, then handles it as you've defined (declared) it.</p>

<h2><strong>The menu handler route</strong></h2>

<p>Most of the hard work is done now. As specified in the <code>Gather</code>'s
<code>action</code> attribute above, when the caller presses a key, Twilio will
perform an HTTP <code>GET</code> on <code>/menu_handler</code>. Add one more Mojolicious
route:</p>

<pre><code>get '/menu_handler' =&gt; sub {
    my $self   = shift;
    my $choice = $self-&gt;param('Digits') || 0;

    my $tw     = WWW::Twilio::TwiML-&gt;new();
    my $resp   = $tw-&gt;Response;

    unless( exists $list{$choice} ) {
        $resp-&gt;Say({voice =&gt; 'woman'},
                   "Sorry, that's not a valid option.");

        $resp-&gt;Redirect({method =&gt; 'GET'}, "/menu");

        $self-&gt;render(format =&gt; 'xml',
                      text   =&gt; $tw-&gt;to_string);
        return;
    }
</code></pre>

<p>Twilio always passes a <code>Digits</code> parameter to URLs it fetches as a
result of a <code>Gather</code> action (see <a href="http://www.twilio.com/docs/api/twiml/gather">Twilio's Gather verb
documentation</a>);
<code>Digits</code> contains the digit or digits pressed by the caller. HTTP
<code>GET</code> (and <code>POST</code>) parameters are available to Mojolicious through the
<code>param()</code> method.</p>

<p>The code then checks to see if the option the caller has selected exists. If it
doesn't, it generates a TwiML response to tell Twilio to <code>Say</code> to
the caller "Sorry, that's not a valid option." then sends a redirect back to
the main menu.</p>

<p>It's polite to let the caller know what's going on, so add a status message:</p>

<pre><code>$resp-&gt;Say({voice =&gt; 'woman'},
           "I'll try connecting you now.");
</code></pre>

<p>Remember that all this code does is <em>build</em> the TwiML response object; only
when the complete, stringified TwiML object is sent to Twilio's application
server does the document have any effect on the application flow.</p>

<p>The next step is to look up the caller's choice in the <code>%list</code> hash.
If the caller's selection had a phone number associated with it, create a
<code>Dial</code>, <code>Play</code>, or <code>Say</code> TwiML object,
depending on whether <code>%list</code> specifies a number to call, a URL to an
audio file to fetch and play, or neither (respectively):</p>

<pre><code>    if( $list{$choice}-&gt;{number} ) {
        $resp-&gt;Dial($list{$choice}-&gt;{number});
    }

    elsif( $list{$choice}-&gt;{recording} ) {
        $resp-&gt;Play($list{$choice}-&gt;{recording});
    }

    else {
        $resp-&gt;Say({voice =&gt; 'woman'},
                   "Sorry, that option isn't working.");
        $resp-&gt;Redirect({method =&gt; 'GET'}, "/menu");
    }
</code></pre>

<p>Finally, invoke Mojolicious's <code>render()</code> method to create an XML
<em>Content-type</em> header and send the stringified TwiML object to
<code>stdout</code> (which Twilio's application server will read):</p>

<pre><code>    $self-&gt;render(format =&gt; 'xml',
                  text   =&gt; $tw-&gt;to_string);
};
</code></pre>

<p><a href="/pub/2011/12/12/menu">Here is the full source</a> for your enjoyment. If you've already set
Twilio's Voice URL in uour Sandbox, nothing further needs to be done on
Twilio's side. Just upload the new application to the web server and start it
(Mojolicious supports a variety of <a href="http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#DEPLOYMENT">deployment
options</a>
including Morbo, CGI, FastCGI, or Plack).</p>

<p>You've made a simple phone menu here, but you've only learned a few of
<a href="http://www.twilio.com/docs/api/twiml/">Twilio's TwiML verbs</a>. With
<a href="http://search.cpan.org/perldoc?WWW::Twilio::API">WWW::Twilio::API</a>,
<a href="http://search.cpan.org/perldoc?WWW::Twilio::TwiML">WWW::Twilio::TwiML</a>, and
<a href="http://mojolicio.us">Mojolicious</a> you can also create conference rooms, make
voice recordings, send and receive SMS messages, reject calls from unwanted
numbers, and do other useful actions in just a few lines of code.</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2011/09/">&laquo; September 2011</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2012/02/">February 2012 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
