<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: May 2003 Archives</title>


    <link rel="prev" href="/pub/2003/04/" title="April 2003" />
    <link rel="next" href="/pub/2003/06/" title="June 2003" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">May 2003 Archives</h1>





                            
                            <div id="entry-1124" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/29/treasures.html" rel="bookmark">Hidden Treasures of the Perl Core</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Casey West</span> on <abbr class="published" title="2003-05-29T00:00:00-08:00">May 29, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>The Perl Core comes with a lot of little modules to help you get thejob done.
Many of these modules are not well-known.  Even some of the well-known modules
have some nice features that are often overlooked.  In this article, we'll dive
into many of these hidden treasures of the Perl Core.</p>
<h3><a name="blib"><code>blib</code></a></h3>
<p>This module allows you to use <code>MakeMaker</code>s to-be-installed version of a package.  Most
of the distributions on the CPAN conform to <code>MakeMaker</code>s building techniques.  If
you are writing a Perl module that has a build system, then there would be a good chance
<code>MakeMaker</code> is involved.  Testing on the command line is common; I know
I find myself doing it often.  This is one of the places that <code>blib</code> comes in handy.
When running my test suite (you all have test suites, right?) on the command
line, I'm able to execute individual tests easily.</p>
<pre><code>
  perl -Mblib t/deepmagic.t</code></pre>
<p>If you are building someone elses module and find yourself debugging a testing
failure, then <code>blib</code> could be used the same way.</p>

<h3><a name="diagnostics"><code>diagnostics</code></a></h3>
<p><em>PC Load Letter, what the frell does that mean?!</em>  --  Micheal Bolton</p>
<p>When pushed hard enough, the Perl interpreter can spew out hundreds of 
error messages.  Some of them can be quite cryptic.  Running the following code
snippet under the <code>warnings</code> pragma yields the warning <em>Unterminated &lt;&gt;
operator at program.perl line 11</em>.</p>
<pre><code>
  $i &lt;&lt;&lt; $j;</code></pre>
<p>Thankfully, <code>diagnostics</code> is an easy way to get a better explanation from Perl.
Since we're all running our important programs under the <code>strict</code> and <code>warnings</code>
pragmas, it's easy to add <code>diagnostics</code> to the mix.</p>
<pre><code>
  use strict;
  use warnings;
  use diagnostics;</code></pre>
<p>The previous code snippet now yields the following warning:</p>
<pre><code>
  Unterminated &lt;&gt; operator at -e line 1 (#1)
    (F) The lexer saw a left-angle bracket in a place where it was expecting
    a term, so it's looking for the corresponding right-angle bracket, and
    not finding it.  Chances are you left some needed parentheses out
    earlier in the line, and you really meant a &quot;less than&quot;.</code></pre>
<pre><code>
  Uncaught exception from user code:
        Unterminated &lt;&gt; operator at program.perl line 11.</code></pre>
<p>Use of the <code>diagnostics</code> pragma should be kept to development only (where it's
truly useful).</p>

<h3><a name="benchmark"><code>Benchmark</code></a></h3>
<p>It can be difficult to benchmark code.  When trying to optimise a program or routine,
you want to try several approaches and see which comes out faster.  That's what the
<code>Benchmark</code> module is for.  This way, you don't have to calculate start and stop
times yourself, and in general you can do high-level profiling quickly.  Here is an
example that tries to determine which is faster, literal hash slices or retrieving
hash values one at a time.</p>
<pre><code>
  use Benchmark;</code></pre>
<pre><code>
  sub literal_slice {
    my %family = (
      Daughter =&gt; 'Evilina',
      Father =&gt; 'Casey',
      Mother =&gt; 'Chastity',
    );
    my ($mom, $dad) = @family{qw[Mother Father]};
  }</code></pre>
<pre><code>
  sub one_at_a_time {
    my %family = (
      Daughter =&gt; 'Evelina',
      Father =&gt; 'Casey',
      Mother =&gt; 'Chastity',
    );
    my $mom = $family{Mother};
    my $dad = $family{Father};
  }</code></pre>
<pre><code>
  timethese(
    5_000_000 =&gt; {
      slice       =&gt; \&amp;literal_slice,
      one_at_time =&gt; \&amp;one_at_a_time,
    },
  );</code></pre>
<p>On the hardware I have at work, a dual G4 PowerMac, the answer seems obvious.  Being
cute and clever doesn't hurt us too badly.  Here is the output.</p>
<pre><code>
  Benchmark: timing 5000000 iterations of one_at_time, slice...
  one_at_time: 53 wallclock secs (53.63 usr +  0.00 sys = 53.63 CPU) 
         @ 93231.40/s (n=5000000)
        slice: 56 wallclock secs (56.72 usr +  0.00 sys = 56.72 CPU) 
         @ 88152.33/s (n=5000000)</code></pre>

<h3><a name="cgi::pretty"><code>CGI::Pretty</code></a></h3>
<p>Many of you know you can use Perl to write your HTML, in fact, this trick is often
used in CGI programs.  If you have used the <code>CGI</code> module to create HTML, then it would be obvious
that the output is not intended for humans to parse.  The ``browser only'' nature of
the output makes debugging nearly impossible.</p>
<pre><code>
  use CGI qw[:standard];</code></pre>
<pre><code>
  print header,
    start_html( 'HTML from Perl' ),
    h2('Writiing HTML using Perl' ),
    hr,
    p( 'Writing HTML with Perl is simple with the CGI module.' ),
    end_html;</code></pre>
<p>The previous program produces the following incomprehensible output.</p>
<pre><code>
  Content-Type: text/html; charset=ISO-8859-1
  
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
  &lt;!DOCTYPE html
          PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
           &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt</a>;
  &lt;html xmlns=&quot;<a href="http://www.w3.org/1999/xhtml&quot">http://www.w3.org/1999/xhtml&quot</a>; lang=&quot;en-US&quot;&gt;
  &lt;head&gt;&lt;title&gt;HTML from Perl&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;Writing 
  HTML using Perl&lt;/h2&gt;&lt;hr /&gt;&lt;p&gt;Writing HTML with Perl is simple with the 
  CGI module.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
  
<p>By changing the first line to <code>use CGI::Pretty qw[:standard];</code>, our output is now manageable.</p>
<pre><code>
  Content-Type: text/html; charset=ISO-8859-1
  
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
  &lt;!DOCTYPE html
          PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
           &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt</a>;
  &lt;html xmlns=&quot;<a href="http://www.w3.org/1999/xhtml&quot">http://www.w3.org/1999/xhtml&quot</a>; lang=&quot;en-US&quot;&gt;
  &lt;head&gt;&lt;title&gt;HTML from Perl&lt;/title&gt;
  &lt;/head&gt;&lt;body&gt;
  &lt;h2&gt;
          Writing HTML using Perl
  &lt;/h2&gt;
  &lt;hr&gt;&lt;p&gt;
          Writing HTML with Perl is simple with the CGI module.
  &lt;/p&gt;
  &lt;/body&gt;&lt;/html&gt;</code></pre>
<p>While not as attractive as I'd like, there are lots of customizations to be made, all
outlined in the <code>CGI::Pretty</code> documentation.</p>

<h3><a name="class::isa"><code>Class::ISA</code></a></h3>
<p>The world of class inheritance is a complex and twisting maze.  This module provides
some functions to help us navigate the maze.  The most common need is for the
function <code>super_path()</code>.  When dealing with complex OO hierarchies, <code>super_path()</code>
can help us know which classes we're inheriting from (it isn't always obvious), and
find method declarations.</p>
<p>I have a little project that requires <code>Class::DBI</code>, so I ran <code>super_path()</code> on one
of the classes to determine how Perl would search the inheritance tree for a method.</p>
<pre><code>
  perl -MJobSearch -MClass::ISA -le'print for 
      Class::ISA::super_path( &quot;JobSearch::Job&quot; )'</code></pre>
<p>The following list of classes is in the order Perl would search to find a method.</p>
<pre><code>
  JobSearch::Object
  Class::DBI::mysql
  Class::DBI
  Class::DBI::__::Base
  Class::Data::Inheritable
  Class::Accessor
  Ima::DBI
  Class::WhiteHole
  DBI
  Exporter
  DynaLoader</code></pre>
<p>Now if I have a question about a method implementation, or where methods are coming from,
I have a nice list to look through.  <code>Class::ISA</code> intentionally leaves out the current
class (in this case <code>JobSearch::Job</code>), and <code>UNIVERSAL</code>.</p>
<p>Here is a little trick that allows me to find out which classes <em>may</em> implement the
<code>mk_accessors</code> method.</p>
<pre><code>
  perl -MJobSearch -MClass::ISA -le \
    'for (Class::ISA::super_path( &quot;JobSearch::Job&quot; )) { 
	    print if $_-&gt;can(&quot;mk_accessors&quot;) }'</code></pre>
<p>Because of inheritance, all of the classes listed can invoke <code>mk_accessors</code>, but not all
of them actually define <code>mk_accessors</code>.  It still manages to narrow the list.</p>
<p><code>Class::ISA</code> was introduced to the Perl Core in release <strong>5.8.0</strong>.  If you're using an
older Perl, you can download it from the CPAN.</p>

<h3><a name="cwd"><code>Cwd</code></a></h3>
<p>This module makes it simple to find the current working directory.  There is
no need to go to the shell, as so many of us do.  Instead, use <code>Cwd</code>.</p>
<pre><code>
  use Cwd;
  my $path = cwd;</code></pre>

<h3><a name="env"><code>Env</code></a></h3>
<p>Perl provides access to environment variables via the global <code>%ENV</code> hash.  For
many applications, this is fine.  Other times it can get in the way.  Enter the
<code>Env</code> module.  By default, this module will create global scalars for all
the variables in your environment.</p>
<pre><code>
  use Env;
  print &quot;$USER uses $SHELL&quot;;</code></pre>
<p>Some variables are of better use as a list.  You can alter the behavior of
<code>Env</code> by specifying an import list.</p>
<pre><code>
  use Env qw[@PATH $USER];
  print &quot;$USER's  path is @PATH&quot;;</code></pre>
<p>Yet another module to save time and energy when writing programs.</p>

<h3><a name="file::path"><code>File::Path</code></a></h3>
<p>This module has a useful function called <code>mkpath</code>.  With <code>mkpath</code> you
can create more than one level of directory at a time.  In some cases, this
could reduce a recursive function or a loop construct to a simple function
call.</p>
<pre><code>
  use File::Path;
  mkpath &quot;/usr/local/apache/htdocs/articles/2003&quot;;</code></pre>
<p>Since <code>mkpath</code> will create any directory it needs to in order to finally
create the <code>2003</code> directory, a tremendous amount of code is no longer needed.</p>

<h3><a name="file::spec::functions"><code>File::Spec::Functions</code></a></h3>
<p>This module implements a sane and useful interface over the <code>File::Spec</code>
module.  <code>File::Spec</code> must be used by calling class methods, while
<code>File::Spec::Functions</code> turns those methods into functions.  There are
many functions that are all useful (and fully documented in
<code>File::Spec::Unix</code>).  Here are a few examples.</p>
<pre><code>
  use File::Spec::Functions qw[splitpath canonpath splitdir abs2rel];</code></pre>
<pre><code>
  # split a path into logical pieces
  my ($volume, $dir_path, $file) = splitpath( $path );
  
  # clean up directory path
  $dir_path = canonpath $dir_path;</code></pre>
<pre><code>
  # split the directories into a list
  my @dirs = splitdir $dir_path;</code></pre>
<pre><code>
  # turn the full path into a relative path
  my $rel_path = abs2rel $path;</code></pre>
<p>As you can see, there are plenty of ways to save yourself coding time by
using <code>File::Spec::Functions</code>.  Don't forget, these functions are portable
because they use different symantecs behind the senses for the operating
system Perl is running on.</p>

<h3><a name="file::temp"><code>File::Temp</code></a></h3>
<p>If you need a temporary file, then use <code>File::Temp</code>.  This module will find a
temporary directory that is suitable for the operating system Perl is
running on and open a temporary file in that location.  This is yet another
example of the Perl Core saving you time.</p>
<pre><code>
  use File::Temp;
  my $fh = tempfile;
  
  print $fh &quot;temp data&quot;;</code></pre>
<p>This will open a temporary file for you and return the filehandle for you
to write to.  When your program exits, the temporary file will be deleted.</p>

<h3><a name="findbin"><code>FindBin</code></a></h3>
<p><code>FindBin</code> has a small but useful purpose: to find the original directory
of the Perl script being run.  When a program is invoked, it can be hard to
determine this directory.  If a program is calling <code>chdir</code>, then it can be even
more difficult.  <code>FindBin</code> makes it easy.</p>
<pre><code>
  use FindBin;
  my $program_dir = $FindBin::Bin;</code></pre>

<h3><a name="shell"><code>Shell</code></a></h3>
<p><code>Shell</code> takes the ugliness of dealing with the command line and wraps it
up in pretty functions.  The effect here is prettier programs.  Here is
a simple demonstration.</p>
<pre><code>
  use Shell qw[ls du];
  use File::Spec::Functions qw[rel2abs];</code></pre>
<pre><code>
  chomp( my @files = ls );
  foreach ( @files ) {
        print du &quot;-sk&quot;, rel2abs $_;
  }</code></pre>

<h3><a name="time::localtime"><code>Time::localtime</code></a></h3>
<p>This module allows <code>localtime</code> to return an object.  The object gives you
by-name access to the individual elements returned by <code>localtime</code> in list
context.  This doesn't save us much coding time, but is can save us a trip
to the documentation.</p>
<pre><code>
  use Time::localtime;
  my $time = localtime;
  print $time-&gt;year += 1900;</code></pre>
<p>There is a similar module called <code>Time::gmtime</code>, which provides the same
functionality for the <code>gmtime</code> function.</p>

<h3><a name="universal"><code>UNIVERSAL</code></a></h3>
<p>The <code>UNIVERSAL</code> module is handy.  Two of its most common functions,
<code>isa</code> and <code>can</code> are almost always used in OO programming as methods.
<code>isa</code> is used to determine what class an object belongs to, and <code>can</code>
will tell us whether an object supports a method.  This is useful for testing.
For example.</p>
<pre><code>
  use Time::localtime;
  my $time = localtime;</code></pre>
<pre><code>
  if ( $time-&gt;isa( 'Time::localtime' ) ) {
    print &quot;We have a Time::localtime object&quot;;
  }
  
  if ( $time-&gt;can( &quot;year&quot; ) ) {
    print &quot;We can get the year from our object&quot;;
  }</code></pre>
<p>Another less-known function in <code>UNIVERSAL</code> is <code>VERSION</code>.  I often need to know
the version of an installed module and I find myself writing a one-liner like:</p>
<pre><code>
  perl -MTest::More -le'print $Test::More::VERSION'</code></pre>
<p>That's just not as pretty as this.</p>
<pre><code>
  perl -MTest::More -le'print Test::More-&gt;VERSION'</code></pre>

<h3><a name="conclusion">Conclusion</a></h3>
<p>The Perl Core has many hidden wonders, and I've just laid out a few
here.  Trolling the Core for interesting functions and modules has saved me a
lot of work over the years.  If you would like to look further, then browse the
<code>perlmodlib</code> manpage for a list of the core modules.  Whether your interest is
CGI, I18N, Locale, or Math, you can find something there that saves a few hours
of work.</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1132" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/p6pdigest/20030525.html" rel="bookmark">This week on Perl 6, week ending 2003-05-25</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-05-25T00:00:00-08:00">May 25, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Welcome back to another Perl 6 summary in which Piers comes back from
watching a load of pretty girls dancing 'round a huge Maypole in
Wellow (it's 60 feet high, the tallest permanent Maypole in England,
there's been on on the site since at least 1856. One does wonder if
the Lord of the Manor who put the first one up was compensating for
something). It's not my favourite English traditional event (you'd
have to go a long way to beat the Whitby Penny Hedge for weirdness or
the Brockworth Hill cheese-rolling for complete and utter reckless
insanity (it was called off this year because the people who usually
provide cover in case of accidents are in Algeria helping deal with
the aftermath of the earthquake there; St John's Ambulance didn't feel
up to the rigours of dealing with the kind of injuries that occur when
too many people chase a Double Gloucester cheese down a 1 in 2
slope.)) but it made for a lovely afternoon.</p>
<p>Which is why, instead of having this written by mid afternoon on a
Monday, I'll be lucky if I have it finished before Tuesday. Ah... the
trials of a summary writer.</p>
<p>So, we'll start with perl6-internals because that's what we always do.</p>

<h2><a name="imcc_variable_names">IMCC variable names</a></h2>
<p>Will Coleda discovered that IMCC didn't allow him to have a variable
name that happened to be the same as an op, which isn't what the spec
says and which could lead to interesting problems where IMCC source
code suddenly becomes invalid when someone adds a new op to the
language. Will sent a patch to fix the docs. Leo T&ouml;tsch didn't
apply the patch, choosing to fix the problem instead. Yay Leo.</p>
<p><a href="http://groups.google.com/groups?threadm=537B8B7B-89BA-11D7-9730-000393D54AA0%40coleda.com">http://groups.google.com/groups</a></p>

<h2><a name="vtables_get_macroized">Vtables get macroized</a></h2>
<p>Leo T&ouml;tsch finished checking a series of patches which switch
the Parrot source code over from accessing vtable innards directly to
accessing them via macros, thus making it easier to monkey with vtable
internals without having to change a million and one different source
files.</p>
<p><a href="http://groups.google.com/groups?threadm=3EC9E8F6.5060604%40toetsch.at">http://groups.google.com/groups</a></p>

<h2><a name="the_timely_destruction_thread">The timely destruction thread</a></h2>
<p>After last week's discussion of timely destruction, the debate
continued this week. Dan announced his design for dealing with the
issue. PMCs now get a flag marking them as requiring timely
destruction and there's a new op to trigger a DOD run if and only if
there are any flagged PMCs in memory. The idea is that compilers for
languages that care about timely destruction would insert the
<code>lazysweep</code> op into their generated code in the appropriate
places. Mr. Zellyn Hunter (hey, that's what he asked to be called, who
am I to argue?) suggested a different name for Dan's proposed flag and
offered the following joke which I repeat here in its entirety because
it's funny (because it's *true*).</p>
<p>Q: How many Parrot programmers does it take to screw in a lightbulb?</p>
<p>A: Just one, as long as it's Leo T&ouml;tsch. He will probably also
rewire your entire electrical system slightly, saving you about 3% in
power consumption during the evenings and on weekends.</p>
<p>Leo denied the truth of this as lightbulbs are hardware and he doesn't
do hardware.</p>
<p>Meanwhile, back at the thread...</p>
<p>Guess what? People didn't like the solution. I think this is a classic
problem of GC. Everyone agrees that real Garbage Collection is a good
idea, but they also want it to work by magic and take no time at
all. Sadly, whilst Leo is good, even he can't change the laws of
physics. My suggestion: if you're currently writing Perl code that
relies on magic to close a filehandle the instant it goes out of scope
then Don't Do That, close it yourself. That way, when you come to
switch things over to Perl 6 you can do <code>use GC scope_end =&gt; undef</code> (or something) and get blistering performance and real GC.</p>
<p><a href="http://groups.google.com/groups?threadm=a05210606baf02ca665bf%40%5B63.120.19.221%5D">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=ygck7cga844.fsf%40babylonia.flatirons.org">http://groups.google.com/groups</a></p>

<h2><a name="pasm_code_analysis">PASM code analysis</a></h2>
<p>Clinton A Pierce has rewritten BASIC's expression evaluator and is
reintegrating it with the runtime. This has left a lot of 'junk code'
that never actually gets executed, and Clint wanted to know if there
was a way of tracking down (and removing) the unreachable code. Leo
implied that the answer is 'run it under IMCC' which apparently does
dead code detection. This didn't quite work for Clint as IMCC threw an
error when it tried to run some BASIC generated PASM (at least, it
does when run in dead code detection mode...) Leo wasn't able to help
directly with tracking down the issue, but did provide some pointers
for conversion of the BASIC compiler so that it targets IMCC's PIR
language instead of simple Parrot assembly. This prompted a list of
questions from Clint about IMCC and Luke Palmer provided a some good
answers.</p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030520123952.0264ffc0%40mail.geeksalad.org">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030524200109.02784f70%40mail.geeksalad.org">http://groups.google.com/groups</a></p>

<h2><a name="perl_6_essentials">Perl 6 Essentials</a></h2>
<p>Sean O'Rourke noticed the new Perl 6 book in O'Reilly's catalogue and
wondered where Leo found the time to become an author as well as a
coding machine. Dan popped up to note that the plan is to have the
book available in time for OSCON and YAPC::Europe. (Be there or be
somewhere else). Randal Schwartz mentioned that he'd been a tech
reviewer for the book and had found it 'quite an interesting read'.</p>
<p><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.44.0305220910440.21504-100000%40fingers.ucsd.edu">http://groups.google.com/groups</a></p>
<p><a href="http://www.oreilly.com/catalog/perl6es/">http://www.oreilly.com/catalog/perl6es/</a> -- Americans can't spell
catalogue</p>

<h2><a name="a_new_pmc_layout">A New PMC Layout</a></h2>
<p>Leo T&ouml;tsch posted a proposed new layout for PMCs now that PMC
access has been hidden behind macros and asked for comments on his
proposed new scheme for the new PMC layout. Dan commented on this, and
between them he and Leo appear to have hashed out a way forward. Leo
kicked out a patch using the new PMC scheme, with a second version not
long after.</p>
<p><a href="http://groups.google.com/groups?threadm=3ECD2715.5060502%40toetsch.at">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=3ECE1A35.9060505%40toetsch.at">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=3ECF439A.2080005%40toetsch.at">http://groups.google.com/groups</a></p>

<hr />
<h1><a name="meanwhile_in_perl6language">Meanwhile in perl6-language</a></h1>
<p>Things have started to pick up a little after the virtual silence of
the past few weeks.</p>

<h2><a name="perl_6_tutorial">Perl 6 Tutorial?</a></h2>
<p>Dulcimer wondered if anyone was working on a simple introductory
tutorial for Perl 6 yet. He thought that writing one might help get
him up to speed, especially if people on the list critiqued it as he
wrote it. Michael Lazzaro pointed to the documentation list
<em><a href="mailto:perl6-documentation@perl.org">perl6-documentation@perl.org</a></em> which is apparently rather quiet at
the moment. Dave Whipp wasn't sure that the time was right to write a
tutorial yet as we don't yet know enough about the final language
(Personally I think anyone attempting to write a Perl 6 tutorial
before the object system gets designed/documented is going to end up
having to do some fairly dramatic rewriting at some point).</p>
<p>Anyhoo, this led to a string of suggestions trying to sum up the
Spirit of Perl 6, one of which managed to be a spoiler for Buffy the
Vampire Slayer...</p>
<p>Simon Cozens also nodded towards the forthcoming <em>Perl 6 Essentials</em>
which may be just what Dulcimer is after.</p>
<p><a href="http://groups.google.com/groups?threadm=20030520154630.49642.qmail%40web41208.mail.yahoo.com">http://groups.google.com/groups</a></p>

<h2><a name="coroutines">Coroutines</a></h2>
<p>Discussion of Coroutines in Perl 6 was the thread that ate the list
this week. John Macdonald, had a few observations about using
coroutines and suggestions for the best semantics for them in Perl
6. There seems to be a split between those who want the caller to know
it's calling a coroutine and those who want the coroutine to be
invisible to the caller. Halfway along the thread, Damian wrote up a
proposal which he hoped would make everyone happy. It didn't succeed,
but it was at least a step forward as the proposal got batted back and
forth a few times, leading to another proposal which got batted back
and forth a few more times and which received far more acclaim.</p>
<p>Damian's proposals introduced a new <code>coro</code> declarator for coroutines,
which Piers Cawley thought wasn't really necessary, and there was some
discussion about whether 'coroutineness' was something that could be
applied to all sorts of different Code based things, in which case
using new declarators could lead to ugliness (coro, comethod, coblock,
corule...) or if there was only really one thing. The jury is out on
this.</p>
<p>There was also discussion of possibly unifying coroutine and threading
syntax, which some people thought was cool and which others disliked
intensely (nothing new there then).</p>
<p>There was also discussion of what a coroutine is, and why you would
want to use them. Damian gave a good explanation of some of
this. Actually, Damian gave some really good philosophy in this thread
about why he likes Perl.</p>
<p>Elsewhere in the thread, some fool called Piers Cawley attempted to
introduce a discussion of multimethods and failed dismally to change
the subject line. Bad Piers.</p>
<p><a href="http://groups.google.com/groups?threadm=20030521230151.B2457%40algate.perlwolf.com">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=3ECD6E9A.2070805%40conway.org">http://groups.google.com/groups</a> -- Damian's proposal</p>
<p><a href="http://groups.google.com/groups?threadm=3ECDDCAC.3060704%40conway.org">http://groups.google.com/groups</a> -- Damian's second proposal</p>
<p><a href="http://groups.google.com/groups?threadm=3ECEAF8D.3040708%40conway.org">http://groups.google.com/groups</a> -- Damian addresses the ``Why
coroutines?'' question</p>
<p><a href="http://groups.google.com/groups?threadm=3ECFFF1B.9040508%40conway.org">http://groups.google.com/groups</a> -- Damian on why people like Perl</p>

<h2><a name="warnock's_dilemma">Warnock's Dilemma</a></h2>
<p>The eponymous Bryan C. Warnock (note to any Wired Jargonwatch editors
who may be watching, that's <em>Bryan</em>, not 'Brian') popped up to set
the record straight about his dilemma. Delightfully, by the end of the
week, nobody had replied to him.</p>
<p><a href="http://groups.google.com/groups?threadm=1053739327.2138.102.camel%40wakko">http://groups.google.com/groups</a></p>

<h1><a name="acknowledgements,_announcements_and_apologies">Acknowledgements, Announcements and Apologies</a></h1>
<p>Thanks once again are due to all the good people on the Perl 6
lists. Apologies will probably be due to the organizers of YAPC North
America as I still haven't started writing the talks I'm supposed to
be giving.</p>
<p>If you've appreciated this summary, please consider one or more of the
following options:</p>
<ul>
<li>
Send money to the Perl Foundation at
<a href="http://donate.perl-foundation.org/">http://donate.perl-foundation.org/</a> and help support the ongoing
development of Perl.</li>

<li>
Get involved in the Perl 6 process. The mailing lists are open  to
all. <a href="http://dev.perl.org/perl6/">http://dev.perl.org/perl6/</a> and <a href="http://www.parrotcode.org/">http://www.parrotcode.org/</a>
are good starting points with links to the appropriate mailing lists.</li>

<li>
Send feedback, flames, money, photographic and writing commissions, or
a description of this week's deliberate mistake to
<em><a href="mailto:p6summarizer@bofh.org.uk">p6summarizer@bofh.org.uk</a></em>. I'll be awarding points, and points mean
prizes.</li>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1122" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/22/testing.html" rel="bookmark">Testing mod_perl 2.0</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Geoffrey Young</span> on <abbr class="published" title="2003-05-22T00:00:00-08:00">May 22, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->
<p></p>
<p><a href="/pub/a/2003/04/17/filters.html">Last time</a>, 
we looked at writing a simple Apache output filter -
<code>Apache::Clean</code> - 
using the mod_perl 2.0 API.  How did I know that the filter
I presented really worked?
I wrote a test suite for it, one that exercised
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz">the code</a>
against a live Apache server
using the <code>Apache-Test</code> testing framework.
</p>

<p>
Writing a series of tests that executes against a live 
Apache server has become much simpler since the advent of
<code>Apache-Test</code>.  Although <code>Apache-Test</code>,
as part of the 
<a href="http://httpd.apache.org/test/">Apache HTTP Test Project</a>,
is generic enough to
be used with virtually any version of Apache (with or without 
mod_perl enabled), it comes bundled with mod_perl 2.0, making
it the tool of choice for writing tests for your
mod_perl 2.0 modules.
</p>

<csperl file="grab" domain="on" record="sc/1139" field="html">

<h3>Testing, Testing, 1, 2, 3</h3>

<p>
There are many advantages to writing tests.
For instance, maintaining the test suite as I coded <code>Apache::Clean</code>
allowed me to test each functional unit as I implemented it,
which made development easier.  The individual tests
also allowed me to be fairly certain that the module would
behave as expected once distributed.  As an added bonus,
tests offer additional end-user documentation in the form of 
test scripts, supporting libraries and configuration files,
available to anyone who wants to snoop around the distribution
a bit.  All in all, having a test suite increases the value of your
code exponentially, while at the same time making your life
easier.
</p>



<p>
Of course, these benefits come from having <i>any</i>
testing environment, and are not limited to just <code>Apache-Test</code>.
The particular advantage that <code>Apache-Test</code>
brings to the table is the ease at which it puts a whole,
pristine, and isolated Apache server at your disposal, 
allowing you to test and exercise
your code in a live environment with a minimum 
of effort.  No more <code>Apache::FakeRequest</code>, no
more <code>httpd.conf</code> configurations strewn across
development environments or corrupted with proof-of-concept
handlers that keep you busy following non-bugs for half a day. 
No more mess, no more tears.
</p>

<p>
If you have ever used tools like <code>Test.pm</code>
or <code>Test::More</code> as the basis for testing your modules, then
you already know most of what using <code>Apache-Test</code>
is going to look like.  In fact, <code>Apache-Test</code>
uses <code>Test.pm</code> under the hood, so the layout
and syntax are similar.  If you have never written
a test before, (and shame on you)then
<a href="/pub/a/2001/12/04/testing.html">An 
Introduction to Testing</a> provides a nice
overview of testing with Perl.  For the most part, though, 
<code>Apache-Test</code>
is really simple enough that you should be able to follow
along here without any trouble or previous knowledge.
</p>

<p>
Leveraging the <code>Apache-Test</code> framework requires
only a few steps - generating the test harness, configuring
Apache to your specific needs, and writing the tests - 
each of which is relatively straightforward.
</p>

<h3>Generating the Test Harness</h3>

<p>
The first step to using <code>Apache-Test</code>
is to tweak the <code>Makefile.PL</code> for your
module.  If you don't yet have a <code>Makefile.PL</code>,
or are not familiar with how to generate one, then don't worry - all that is required is a simple call to
<code>h2xs</code>, which provides us with a standard
platform both for distributing our module and
deploying the <code>Apache-Test</code> infrastructure.
</p>

<pre>
  <code>
$ <b>h2xs -AXPn Apache::Clean</b>
Defaulting to backward compatibility with perl 5.9.0
If you intend this module to be compatible with earlier perl versions, then please
specify a minimum perl version with the -b option.

Writing Apache/Clean/Clean.pm
Writing Apache/Clean/Makefile.PL
Writing Apache/Clean/README
Writing Apache/Clean/t/1.t
Writing Apache/Clean/Changes
Writing Apache/Clean/MANIFEST
  </code>
</pre>

<p>
<code>h2xs</code> generates the necessary structure
for our module, namely the <code>Clean.pm</code> template
and the <code>Makefile.PL</code>, as well as the 
<code>t/</code> subdirectory where our tests and supporting
files will eventually live.  You can take some extra
steps and shuffle the distribution around a bit (such
as removing <code>t/1.t</code> and putting everything
into <code>Apache-Clean/</code> instead of
<code>Apache/Clean/</code>) but it is not required.
Once you have the module layout sorted out and
have replaced the generated <code>Clean.pm</code> stub with
<a href="/pub/a/2003/04/17/filters.html">the
actual <code>Clean.pm</code> filter</a> from before,
it's time to start preparing the basic test harness.
</p>

<p>
To begin, we need to modify the <code>Makefile.PL</code> significantly.
The end result should look something like:</p>

<pre>
  <code>
#!perl

use 5.008;

use Apache2 ();
use ModPerl::MM ();
use Apache::TestMM qw(test clean);
use Apache::TestRunPerl ();

# configure tests based on incoming arguments
Apache::TestMM::filter_args();

# provide the test harness
Apache::TestRunPerl-&gt;generate_script();

# now, write out the Makefile
ModPerl::MM::WriteMakefile(
  NAME      =&gt; 'Apache::Clean',
  VERSION   =&gt; '2.0',
  PREREQ_PM =&gt; { HTML::Clean      =&gt; 0.8,
                 mod_perl         =&gt; 1.9909, },
);
  </code>
</pre>

<csperl file="grab" domain="on" record="b/832" template="b/article_sidebar.view">

<p>
Let's take a moment to analyze our nonstandard <code>Makefile.PL</code>.  We begin by importing
a few new mod_perl 2.0 libraries.  The first
is <code>Apache2.pm</code>.  In order to peacefully
co-exist with mod_perl 1.0 installations, mod_perl 2.0
gives you the option of installing mod_perl relative
to <code>Apache2/</code> in your <code>@INC</code>,
as to avoid collisions with 1.0 modules of the same name.
For instance,
the mod_perl 2.0 <code>Apache::Filter</code> we used
to write our output filter interface
would be installed as <code>Apache2/Apache/Filter.pm</code>.
Of course, ordinary calls that <code>require()</code> or
<code>use()</code> <code>Apache::Filter</code> in mod_perl 2.0 code
would fail to find
the correct version (if one was found at all), since
it was installed in a nonstandard place.
<code>Apache2.pm</code> extends <code>@INC</code> to
include any (existing) <code>Apache2/</code> directories
so that <code>use()</code> and related statements work as intended.
In our case, we need to <code>use() Apache2</code> in
order to ensure that, no matter how the end-user configured
his mod_perl 2.0 installation, we can find the rest of the 
libraries we need.
</p>

<p>
Secure in the knowledge that our <code>Makefile.PL</code>
will be able to find all our other mod_perl 2.0
packages (wherever they live), we can proceed.
<code>ModPerl::MM</code> provides the <code>WriteMakefile()</code>
function, which is similar to the <code>ExtUtils::MakeMaker</code>
function of the same name and takes the same options.
The reason that you will want to use the
<code>WriteMakefile()</code> from <code>ModPerl::MM</code> is that,
through means highly magical, all of your 
mod_perl-specific needs are satisfied.
For instance, your module will be installed relative to 
<code>Apache/</code> or <code>Apache2/</code>, depending
on how mod_perl itself is installed.  Other nice features
are automatic inclusion of mod_perl's <code>typemap</code>
and the header files required for XS-based modules, as well as magical
cross-platform compatibility for Win32 compilation, which has been 
troublesome in the past.  
</p>

<p>
Keep in mind that neither <code>Apache2.pm</code> nor
<code>ModPerl::MM</code> are required in order to use
<code>Apache-Test</code> -
both are packages specific to mod_perl 2.0 and any
handlers you may write for this version (as will be touched
on later, <code>Apache-Test</code> can be used for
mod_perl 1.0 based modules as well, or even
Apache 1.3 or 2.0 modules independent of mod_perl,
for that matter).  The next package, <code>Apache::TestMM</code>,
is where the real interface for <code>Apache-Test</code>
begins.
</p>

<p>
<code>Apache::TestMM</code>, contains
the functions we will need to configure the test harness.
The first thing we do is import the <code>test()</code>
and <code>clean()</code> functions, which generate their respective 
<code>Makefile</code> targets so that we can run 
(and re-run) our tests.
After that, we call the <code>filter_args()</code> function.  This allows
us to configure various parts of our tests on the command line
using different options, which will be discussed later.
</p>

<p>
The final part of our configuration uses the
<code>generate_script()</code> method 
from the <code>Apache::TestRunPerl</code> class, which writes
out the script responsible
for running our tests, <code>t/TEST</code>.  
It is <code>t/TEST</code> that will be invoked 
when a user issues <code>make test</code>, although
the script can be called directly as well.
While <code>t/TEST</code> can end up containing lots of
information, if you crack it open, then you would see that the
engine that really drives the test suite is rather simple.
</p>

<pre>
  <code>
use Apache::TestRunPerl ();
Apache::TestRunPerl-&gt;new-&gt;run(@ARGV);
  </code>
</pre>

<p>
Believe it or not, the single call to <code>run()</code> does all
intricate work of starting, configuring, and stopping Apache, 
as well as running the individual tests we (still) have
yet to define.
</p>

<p>
Despite the long explanations, the net result of our activity
thus far has been a few modifications to a typical
<code>Makefile.PL</code> so that
it reflects the needs of both our mod_perl 2.0 module and
our forthcoming use of the <code>Apache-Test</code> infrastructure.
Next, we need to configure Apache for the tests
specific to the functionality in our handler.
</p>

<h3>Configuring Apache</h3>

<p>
Ordinarily, there are many
things you need to stuff into <code>httpd.conf</code>
in order to get the server responding to requests, only
some of which are related to the content the
server will provide.
The <code>Apache-Test</code> framework provides a minimal
Apache configuration, such as default <code>DocumentRoot</code>,
<code>ErrorLog</code>, <code>Listen</code>, and other settings
required for normal operation of the server.  In fact, with no
intervention on your part, <code>Apache-Test</code>
provides a configuration that enables you to successfully request 
<code>/index.html</code> from the server.  Chances are,
though, that you will need something above a basic
configuration in order to test your module appropriately.
</p>

<p>
To add additional settings to the defaults, we create
the file <code>t/conf/extra.conf.in</code>, adding
any required directories along the way.  If 
<code>Apache-Test</code> sees <code>extra.conf.in</code>, then
it would pull the file into its default configuration
using an <code>Include</code> directive (after some
manipulations we will discuss shortly).  This provides
a nice way of adding only the configuration data you
require for your tests, and saves you from the need to
worry about the mundane aspects of running the server.
</p>

<p>
One of the first aspects of <code>Apache::Clean</code>
we should test is whether it can clean up a simple,
static HTML file.  So, we begin our <code>extra.conf.in</code>
with the following:
</p>

<pre>
  <code>
PerlSwitches -w

Alias /level @DocumentRoot@
&lt;Location /level&gt;
  PerlOutputFilterHandler Apache::Clean
  PerlSetVar CleanLevel 2
&lt;/Location&gt;
  </code>
</pre>

<p>
This activates our output filter for requests to
<code>/level</code>.  Note the introduction of a new
directive, <code>PerlSwitches</code>, which allows you to pass
command line switches to the embedded perl interpreter.
Here, we use it to enable warnings, similar to the
way that <code>PerlWarn</code> worked in mod_perl 1.0.
<code>PerlSwitches</code> can actually take
any perl command line switch, which makes it a fairly
useful and flexible tool.  For example, we could use the <code>-I</code>
switch to extend <code>@INC</code> in place of
adding <code>use lib</code> statements to a
<code>startup.pl</code>, or use <code>-T</code>
to enable taint mode in place of the former
<code>PerlTaintMode</code> directive, which
is not part of mod_perl 2.0.
</p>

<p>
Next, we come to the familiar <code>Alias</code>
directive, albeit with a twist.
As previously mentioned, <code>Apache-Test</code>
configures several defaults, including <code>DocumentRoot</code>
and <code>ServerRoot</code>.
One of the nice features of <code>Apache-Test</code>
is that it keeps track of its defaults for you and provides
some helpful variable expansions.  In my particular case,
the <code>@DocumentRoot@</code> variable in the
<code>Alias</code> directive is replaced
with the value of the default <code>DocumentRoot</code>
that <code>Apache-Test</code> calculated for my build.
The real configuration ends up looking like
</p>

<pre>
  <code>
Alias /level /src/perl.com/Apache-Clean-2.0/t/htdocs
  </code>
</pre>

<p>
when the tests are run.  This is handy, especially
when you take into consideration that your tests may
run on different platforms.
</p>

<p>
The rest of the configuration closely resembles our example
from last time - using the 
<code>PerlOutputFilterHandler</code> to specify 
<code>Apache::Clean</code> as our output filter, and
<code>PerlSetVar</code> to specify the specific 
<code>HTML::Clean</code> level.  The only thing missing 
before we have prepared our module enough to run our
first test is some testable content in <code>DocumentRoot</code>.
</p>

<p>
As you can see from the <code>@DocumentRoot@</code>
expansion in the previous example, <code>DocumentRoot</code>
resolves to <code><i>ServerRoot</i>/t/htdocs/</code>,
so that is one place where we can put any documents we are
interested in retrieving for our tests.  So, we create
<code>t/htdocs/index.html</code> and place some
useful content in it.
</p>

<pre>
  <code>
&lt;i    &gt;&lt;strong&gt;&amp;quot;This is a test&amp;quot;&lt;/strong&gt;&lt;/i   &gt;
  </code>
</pre>

<p>
Our <code>index.html</code> contains a number of
different elements that <code>HTML::Clean</code> can tidy,
making it useful for testing various configurations of <code>Apache::Clean</code>.
</p>

<p>
Now we have all the Apache configuration that is required:
some custom configuration directives in <code>t/conf/extra.conf.in</code>
and some useful content in <code>t/htdocs/index.html</code>.  All that
is left to do is write the tests.
</p>













<h3>Writing the Tests</h3>

<p>
The Apache configuration we have created thus far
provides a way to test 
<code>Apache::Clean</code> through 
<code>/level/index.html</code>.  The result of this
request should be that the default
Apache content handler serves up <code>index.html</code>,
applying our <code>PerlOutputFilterHandler</code> to
the file before it is sent over the wire.  Given the
configured <code>PerlSetVar CleanLevel 2</code> we would expect
the end results of the request to be
</p>

<pre>
  <code>
&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
  </code>
</pre>

<p>
where tags are shortened and whitespace removed but the
<code>&amp;quot;</code> entity is left untouched.  Well,
maybe this is not what <i>you</i> would have expected, but
cracking open the code for <code>HTML::Clean</code>
reveals that <code>level(2)</code> includes the
<code>whitespace</code> and <code>shortertags</code>
options, but not the <code>entities</code> option.  This
brings us to the larger issue of test design and the
possibility that flawed expectations can mask true bugs -
when a test fails, is the bug in the test or in the code? - 
but that is a discussion for another time.
</p>

<p>
Given our configuration and expected results, we can craft
a test that requests <code>/level/index.html</code>, 
isolates the content from the server response, then tests the content
against our expectations.  The file <code>t/01level.t</code>
shown here does exactly that.
</p>

<pre>
  <code>
use strict;
use warnings FATAL =&gt; 'all';

use Apache::Test qw(plan ok have_lwp);
use Apache::TestRequest qw(GET);
use Apache::TestUtil qw(t_cmp);

plan tests =&gt; 1, have_lwp;

my $response = GET '/level/index.html';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;!);
  </code>
</pre>

<p>
<code>t/01level.t</code> illustrates a few of the things 
that will be common to most of the tests you will write. 
First, we do some bookkeeping and plan the number of 
tests that will be attempted using the <code>plan()</code>
function from <code>Apache::Test</code> - in our case just one.
The final, optional argument to <code>plan()</code>
uses the <code>have_lwp()</code> function to check
for the availability of the modules from
the <code>libwww-perl</code> distribution.  If 
<code>have_lwp()</code> returns true, then we know we can 
take advantage of the <code>LWP</code> shortcuts <code>Apache::TestRequest</code>
provides.  If
<code>have_lwp()</code> returns false, then no tests are
planned and the entire test is skipped at runtime.
</p>

<p>
After planning our test, we use the shortcut function 
<code>GET()</code> from <code>Apache::TestRequest</code>
to issue a request to <code>/level/index.html</code>.
<code>GET()</code> returns an <code>HTTP::Response</code>
object, so if you are familiar with the <code>LWP</code> 
suite of modules you should feel right at home with 
what follows.  Using the object in <code>$response</code> we
isolate the server response using the <code>content()</code>
method and compare it against our expected string.  The 
comparison uses a call to <code>ok()</code>, which will
report success if the two strings are equivalent.
</p>

<p>
 Keep in mind that
even though this example explicitly imported 
the <code>plan()</code>, <code>ok()</code>,
<code>have_lwp()</code>, and <code>GET()</code>
functions into our test script, that was just to
illustrate the origins of the different parts of the
test - each of these functions, along with just about all
the others you may want, are exported by default.  So,
the typical test script will usually just call
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;
  </code>
</pre>

<p>
and go from there.
</p>

<p>
That is all there is to writing the test.  In its
simplest form, using <code>Apache-Test</code> involves
pretty much the same steps as when 
writing tests using other Perl testing tools: <code>plan()</code>
the number of tests in the script, do some stuff,
and call <code>ok()</code> for each test you <code>plan()</code>.
<code>Apache-Test</code> and its utility classes merely offer
shortcuts that make writing tests against a 
running Apache server idiomatic.
</p>

<h3>Running the Tests</h3>

<p>
With all the preparation behind us - generating and
customizing the <code>Makefile.PL</code>, configuring
Apache with <code>extra.conf.in</code>, writing
<code>index.html</code> and <code>01level.t</code> -
we have all the pieces in place and can (finally) run our test.
</p>

<p>
There are a few different ways we can run the
tests in a distribution, but all require that we go
through the standard build steps first.
</p>

<pre>
  <code>
$ <b>perl Makefile.PL -apxs /usr/local/apache2/bin/apxs</b>
Checking if your kit is complete ...
Looks good
Writing Makefile for Apache::Clean

$ <b>make</b>
cp Clean.pm blib/lib/Apache2/Apache/Clean.pm
Manifying blib/man3/Apache::Clean.3
  </code>
</pre>

<p>
<code>Makefile.PL</code> starts the process by generating the
<code>t/TEST</code> script via the call to
<code>Apache::TestRunPerl-&gt;generate_script()</code>.
The additional argument we pass, <code>-apxs</code>, is
trapped by <code>Apache::TestMM::filter_args()</code>
and is used to specify the Apache installation we want to 
test our code against.  Here, I use <code>-apxs</code> to
specify the location of the <code>apxs</code> binary
in my local Apache DSO installation - for
static builds you will want to use <code>-httpd</code> to
point to the <code>httpd</code> binary instead.  By the
time <code>Makefile.PL</code> exits,
we have our test harness and know where our server lives.
</p>

<p>
Running <code>make</code> creates our build directory,
<code>blib/</code>, and installs <code>Clean.pm</code>
locally so we can use it in our tests.  Note that 
<code>ModPerl::MM</code> installed <code>Clean.pm</code>
relative to <code>Apache2</code>, magically following
the path of my current mod_perl 2.0 installation.
</p>

<p>
At this point, we can run our tests.  Issuing
<code>make test</code> will run all the tests in 
<code>t/</code>, as you might expect.  However, 
we can run our tests individually as well, which is particularly
useful when debugging.  To run a specific test we call
<code>t/TEST</code> directly and give it the name of the
test we are interested in.
</p>

<pre>
  <code>
$ <b>t/TEST t/01level.t</b>
*** setting ulimit to allow core files
ulimit -c unlimited; t/TEST 't/01level.t'
/usr/local/apache2/bin/httpd  -d /src/perl.com/Apache-Clean-2.0/t 
    -f /src/perl.com/Apache-Clean-2.0/t/conf/httpd.conf 
	-DAPACHE2 -DPERL_USEITHREADS
using Apache/2.1.0-dev (prefork MPM)

waiting for server to start: ..
waiting for server to start: ok (waited 1 secs)
server localhost:8529 started
01level....ok                                                                
All tests successful.
Files=1, Tests=1,  4 wallclock secs ( 3.15 cusr +  0.13 csys =  3.28 CPU)
*** server localhost:8529 shutdown
  </code>
</pre>

<p>
As you can see, the server was started, our test was run,
the server was shutdown, and a report was generated - all with
what is really minimal work on our part.  Major kudos to the
<code>Apache-Test</code> developers for making the
development of live tests as easy as they are.
</p>

<h3>Beyond the Basics</h3>

<p>
What we have talked about so
far is just the basics, and the framework is full of a number
of different options designed to make writing and debugging tests
easier.  One of these is the <code>Apache::TestUtil</code> package,
which provides a number of utility functions you can use in your 
tests.  Probably the most helpful of these is <code>t_cmp()</code>,
a simple equality testing function that also provides 
additional information when you run tests in verbose mode.
For instance, after adding <code>use Apache::TestUtil;</code>
to our <code>01level.t</code> test, we can alter the call
to <code>ok()</code> to look like
</p>

<pre>
  <code>
ok t_cmp(q!&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;!, $content);
  </code>
</pre>

<p>
and the result would include expected and received
notices (in addition to standard verbose output)
</p>

<pre>
  <code>
$ <b>t/TEST t/01level.t -v</b>
[lines snipped]
01level....1..1
# Running under perl version 5.009 for linux
# Current time local: Mon May  5 11:04:09 2003
# Current time GMT:   Mon May  5 15:04:09 2003
# Using Test.pm version 1.24
# expected: &lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
# received: &lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
ok 1
ok
All tests successful.
  </code>
</pre>

<p>
which is particularly helpful when debugging problems
reported by end users of your code.  See the 
<code>Apache::TestUtil</code> manpage for a long
list of helper functions, as well as the <code>README</code>
in the <code>Apache-Test</code> distribution for
additional command line options over and above
<code>-v</code>.
</p>

<p>
Of course, <code>01level.t</code> only tests one
aspect of our <code>Clean.pm</code> output filter, 
and there is much more functionality in the filter that
we might want verify.  So, let's take a quick look at some 
of the other tests that accompany the <code>Apache::Clean</code>
distribution.
</p>

<p> 
One of the features of <code>Apache::Clean</code> is that
it automatically declines processing non-HTML documents.
The logic for this was defined in just a few lines at
the start of our filter.
</p>

<pre>
  <code>
# we only process HTML documents
unless ($r-&gt;content_type =~ m!text/html!i) {
  $log-&gt;info('skipping request to ', $r-&gt;uri, ' (not an HTML document)');

  return Apache::DECLINED;
}
  </code>
</pre>

<p> 
A good test for this code would be verifying that content from a plain-text
document does indeed pass through our filter unaltered, even
if it has HTML tags that <code>HTML::Clean</code> would
ordinary manipulate. 
Our test suite includes a file <code>t/htdocs/index.txt</code>
whose content is identical to the <code>index.html</code> file
we created earlier.  Remembering that we already have an 
Apache configuration for <code>/level</code> that inserts
our filter into the request cycle, we can use a request for
<code>/level/index.txt</code> to test the decline logic.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;

plan tests =&gt; 1, have_lwp;

my $response = GET '/level/index.txt';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;i&gt;&lt;strong&gt;&amp;quot;This is a test&amp;quot;&lt;/strong&gt;&lt;/i&gt;!);
  </code>
</pre>

<p>
It may be obvious, but if you think about what we are 
really testing here it is not that the content is
unaltered - that is just what we use to measure
the success of our test.  The real test is against the criterion
that determines whether the filter acts on the content.
If we wanted to be really thorough, then we could add
</p>

<pre>
  <code>
AddDefaultCharset On
  </code>
</pre>

<p>
to our <code>extra.conf.in</code> to test the <code>Content-Type</code>
logic against headers that look like <code>text/html; charset=iso-8859-1</code>
instead of just <code>text/html</code>.  I actually have had
more than one person comment that using a regular expression for testing the
<code>Content-Type</code> is excessive - adding the
<code>AddDefaultCharset On</code> directive shows that
the regex logic can handle more runtime environments than a simple
<code>$r-&gt;content_type eq 'text/html'</code> check.  Oh,
the bugs you will find, fix, and defend when 
you start writing tests.
</p>













<h3>More and More Tests</h3>

<p> 
What other aspects of the filter can we put to the test?
If you recall from our discussion of output filters last
time, one of the responsibilities of filters that alter
content is to remove the generated <code>Content-Length</code>
header from the server response.  The relevant code for this
in our filter was as follows.
</p>

<pre>
  <code>
# output filters that alter content are responsible for removing
# the Content-Length header, but we only need to do this once.
$r-&gt;headers_out-&gt;unset('Content-Length');
  </code>
</pre>

<p>
Here is the test for this bit of logic, which checks that the
<code>Content-Length</code> header is indeed present for plain documents,
but removed by our filter for HTML documents.  Again, we will
be using the existing <code>/level</code> URI to request
both <code>index.txt</code> and <code>index.html</code>.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;

plan tests =&gt; 2, have_lwp;

my $response = GET '/level/index.txt';
ok ($response-&gt;content_length == 58);

$response = GET '/level/index.html';
ok (! $response-&gt;content_length);
  </code>
</pre>

<p>
Note the use of the <code>content_length()</code>
method on our <code>HTTP::Response</code> object to retrieve
the <code>Content-Length</code> of the server response.  Remember
that you have all the methods from that class to choose from
in your tests.
</p>

<p>
The final test we will take a look at is
the example we used previous time to illustrate our filter
does indeed co-exist with both mod_include and mod_cgi.
As it turns out, the example was taken right from the
test suite (always a good place from which to 
draw examples).  Here is the <code>extra.conf.in</code>
snippet.
</p>

<pre>
  <code>
Alias /cgi-bin @ServerRoot@/cgi-bin
&lt;Location /cgi-bin&gt;
  SetHandler cgi-script

  SetOutputFilter INCLUDES
  PerlOutputFilterHandler Apache::Clean

  PerlSetVar CleanOption shortertags
  PerlAddVar CleanOption whitespace
  Options +ExecCGI +Includes
&lt;/Location&gt;
  </code>
</pre>
 
<p>
The nature of our test requires that both mod_include
and a suitable CGI platform (either mod_cgi or mod_cgid)
be available to Apache -
without both of these, our tests are doomed to failure,
so we need a way to test whether these modules are available
to the server before planning the individual tests.
Also required are some CGI scripts, the location 
of which is specified by expanding <code>@ServerRoot@</code>.
To include these scripts, we could 
just create a <code>t/cgi-bin/</code> directory and
place the relevant files in it.  However, 
any CGI scripts we create would probably
include a platform-specific shebang line like
<code>#!/usr/bin/perl</code>.  A better solution is to
generate the scripts on-the-fly, specifying a shebang
line that matches the version of Perl we are using
to build and test the module.
</p>

<p>
Despite the extra work required,
the test script used for this test is only
a bit more complex than others we have seen so far.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;
use Apache::TestUtil qw(t_write_perl_script);

use File::Spec::Functions qw(catfile);

plan tests =&gt; 4, (have_lwp &amp;&amp; 
                  have_cgi &amp;&amp;
                  have_module('include'));

my @lines = &lt;DATA&gt;;
t_write_perl_script(catfile(qw(cgi-bin plain.cgi)), @lines[0,2]);
t_write_perl_script(catfile(qw(cgi-bin include.cgi)), @lines[1,2]);

my $response = GET '/cgi-bin/plain.cgi';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;strong&gt;/cgi-bin/plain.cgi&lt;/strong&gt;!);
ok ($response-&gt;content_type =~ m!text/plain!);

$response = GET '/cgi-bin/include.cgi';
chomp($content = $response-&gt;content);

ok ($content eq q!&lt;b&gt;/cgi-bin/include.cgi&lt;/b&gt;!);
ok ($response-&gt;content_type =~ m!text/html!);

__END__
print &quot;Content-Type: text/plain\n\n&quot;;
print &quot;Content-Type: text/html\n\n&quot;;
print '&lt;strong&gt;&lt;!--#echo var=&quot;DOCUMENT_URI&quot; --&gt;&lt;/strong&gt;';
  </code>
</pre>

<p>
The first thing to note is that we have joined the familiar
call to <code>have_lwp()</code> with additional calls
to <code>have_cgi()</code> and <code>have_module()</code>.
The <code>Apache::Test</code> package comes with a number
of handy shortcuts for querying the server for
information.  <code>have_cgi()</code> returns true
if either mod_cgi or mod_cgid are installed.
<code>have_module()</code> is more generic and can
be used to test for either Apache C modules or Perl modules - 
for instance, <code>have_module('Template')</code> could
be used to check whether the 
<a href="http://template-toolkit.org/"><code>Template Toolkit</code></a>
is installed.
</p>

<p>
For generation of the CGI scripts, we use the <code>t_write_perl_script()</code>
function from the <code>Apache::TestUtil</code> package.
<code>t_write_perl_script()</code> takes two arguments, the
first of which is the name of the file to generate, relative to the
<code>t/</code> directory in the distribution.  If the
file includes a path, any necessary directories are automatically
created.  In the interests of portability, we use
<code>catfile()</code> from the <code>File::Spec::Functions</code>
package to join the file with the directory.  In general,
you will want to keep <code>File::Spec</code> and its
associated classes in mind when writing your tests - you never
know when somebody is going to try and run them on 
Win32 or VMS.  The second argument to <code>t_write_perl_script()</code>
is a list of lines to append to the file after the (calculated) 
shebang line. 
</p>

<p>
Although <code>t_write_perl_script()</code> cleans up any 
generated files and directories when the test completes, if we were to 
intercept <code>include.cgi</code> before removal
it would look similar to something we would have written
ourselves.
</p>

<pre>
  <code>
#!/src/bleedperl/bin/perl
# WARNING: this file is generated, do not edit
# 01: /src/bleedperl/lib/site_perl/5.9.0/i686-linux-thread-multi/
      Apache/TestUtil.pm:129
# 02: 06mod_cgi.t:18
print &quot;Content-Type: text/html\n\n&quot;;
print '&lt;strong&gt;&lt;!--#echo var=&quot;DOCUMENT_URI&quot; --&gt;&lt;/strong&gt;';
  </code>
</pre>

<p>
As you probably have guessed by now, just as we 
ran tests against scripts in the (generated) 
<code>t/cgi-bin/</code> directory, we can add other directories
to <code>t/</code> for other kinds of tests.
For instance, we can create <code>t/perl-bin/</code>
to hold standard <code>ModPerl::Registry</code> scripts
(remember, you don't need to generate a shebang
line for those).
We can even create <code>t/My/</code> to hold a custom
<code>My::ContentGenerator</code> handler, which can be used just
like any other Perl module during Apache's runtime.
All in all, you can simulate practically any
production environment imaginable.
</p>

<h3>But Wait, There's More!</h3>

<p>
The tests presented here should be enough to get
you started writing tests for your own modules, but
they are only part of the story.  If you are interested
in seeing some of the other tests written to support this article, the
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz"><code>Apache::Clean</code>
distribution</a> is full
of all kinds of different tests and test approaches, including some
that integrate custom handlers as well as one that tests
the POD syntax for the module.  In fact, you will find 26 different
tests in 12 test files there, free for the taking.
</p>

<p>
Stuck using mod_perl 1.0?  One of the best things about <code>Apache-Test</code>
is that it is flexible and intelligent enough to be
used for mod_perl 1.0 handlers as well.
In fact, the <a href="http://search.cpan.org/~stas/Apache-Test-1.01/">recent
release</a> of <code>Apache-Test</code> as a CPAN module
outside of the mod_perl 2.0 distribution makes it even
easier for all mod_perl developers to take advantage of
the framework.  For the most part, the instructions in
this article should be enough to get you going writing
tests for 1.0-based modules - the only changes specific to
1.0 modules rest in the <code>Makefile.PL</code>.  I took
the time to whip up
a version of <code>Apache::Clean</code> for mod_perl 1.0 that
parallels the functionality in these articles,
which you can find
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz">next to</a>
the 2.0 version.  The 1.0 distribution runs against
the exact same <code>*.t</code> files (where applicable)
and includes a sample 1.0 <code>Makefile.PL</code>.
</p>

<p>
Personally, I don't know how I ever got along without 
<code>Apache-Test</code>, and I'm sure that once you start using
it you will feel the same.  Secretly, I'm hoping that 
<code>Apache-Test</code> becomes so popular that end-users
start wrapping their bug reports up in little, self-contained,
<code>Apache-Test</code>-based tarballs so anyone
can reproduce the problem.
</p>

<h3>More Information</h3>

<p>
This article was derived from Recipe 7.7 in the 
<a href="http://www.modperlcookbook.org/"><i>mod_perl Developer's Cookbook</i></a>, 
adjusted to accommodate both mod_perl 2.0 and changes in the overall 
<code>Apache-Test</code> interface that have happened
since publication.  Despite these differences, the recipe 
is useful for its additional descriptions and coverage
of features not discussed here.  You can read Recipe 7.7, as well
as <a href="http://www.modperlcookbook.org/chapters/ch07.pdf">the rest
of Chapter 7</a> from the book's <a href="http://www.modperlcookbook.org/">website</a>.
Also, in addition to the
<a href="http://search.cpan.org/~stas/Apache-Test-1.01/lib/Apache/Test.pm"><code>Apache-Test</code></a>
manpage and 
<a href="http://search.cpan.org/src/STAS/Apache-Test-1.01/README"><code>README</code></a>
there is also the <code>Apache-Test</code> tutorial on
the <a href="http://perl.apache.org/docs/general/testing/testing.html">mod_perl
Project website</a>, all of which are valuable sources of information.
</p>

<h3>Thanks</h3>

<p>
The <code>Apache-Test</code> project is the result of the tireless efforts of many, many
developers - far too many to name individually here.  However, there has has been a recent 
surge of activity as <code>Apache-Test</code> made its way to CPAN, especially in making
it more platform aware and solving a few back compatibility problems with the old
<code>Apache::test</code> that ships with mod_perl 1.0.  Special thanks are due 
to Stas Bekman, David Wheeler, and Randy Kobes for helping to polish
<code>Apache-Test</code> on Win32 and Mac OS X without requiring
major changes to the API.
</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1130" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/p6pdigest/20030518.html" rel="bookmark">This week on Perl 6, week ending 2003-05-18</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-05-18T00:00:00-08:00">May 18, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Welcome back to another Perl 6 summary, this week without any 'comic'
introductions.</p>
<p>So, without further ado we press straight on to the happenings in
perl6-internals.</p>

<h4><a name="makefile_issues">Makefile issues</a></h4>
<p>Bruce Gray sent in a patch to tweak Parrot's Makefile to ensure that
IMCC could be built before doing either <code>make test</code> or <code>make static</code>. The various executables in the Parrot distribution now link
against <em>libparrot.a</em> instead of just linking a bunch of .o
files. Steve Fink liked the idea, and made a few other suggestions
(building IMCC by default, having make test run the IMCC
tests...). The patch was later applied by Bruce after Steve Fink gave
him committer superpowers.</p>
<p><a href="http://groups.google.com/groups?threadm=rt-22175-57406.9.99998850728801%40bugs6.perl.org">http://groups.google.com/groups</a></p>

<h4><a name="even_more_on_stack_walking">Even more on stack walking</a></h4>
<p>The discussion of garbage collection and timely destruction came up
again. Essentially, we want to have our cake and eat it too.</p>
<p>Here's some background. Consider the following piece of code:</p>
<pre><code>
    sub iterate_over_file {
        my($filename, $code) = @_;
        open my $fh, '&lt;', $filename or die;
        &amp;$code($_) for &lt;$fh&gt;;
    }</code></pre>
<p>Unless I'm going mad, this should be legal code in both Perl 5 and
Perl 6. Now, consider what what happens when execution leaves the
<code>iterate_over_file</code> function. In Perl 5 the file handle in <code>$fh</code> has
its reference count decremented and, because there are no remaining
references, the file is closed and the filehandle is destroyed. In a
Perl 6 with no 'special case' garbage collection added, nothing
happens. <code>$fh</code> only gets closed when a Dead Object Detection (DOD)
run is triggered, which need not happen for a while, potentially
leading to resource leaks or locking issues or other unforseen
consequences.</p>
<p>One way around this is for classes whose objects need timely
destruction to tell Perl that there are some of its objects floating
about so that Perl can trigger a DOD run at the end of every scope
until there are no more such objects floating around. But that could
be expensive (as Luke Palmer demonstrated with a neat piece of
pathological code). Luke suggested a scheme where variables would have
a needsDOD property (or some such thing) and a DOD would be triggered
at the end of any scope that contained such a variable. Benjamin
Goldberg offered a suggestion for a hybrid reference counting/full GC
scheme.</p>
<p>Garrett Goebel pointed out that the details of how Perl 6 implements
this are really irrelevant at the moment; Dan has said there will be a
way to trigger a DOD run at any time, which means that Parrot should
support whatever scheme the Perl 6 implementers come up with.</p>
<p><a href="http://groups.google.com/groups?threadm=3EBEF3BD.3632A178%40hotpop.com">http://groups.google.com/groups</a></p>

<h4><a name="basic_gets_fancy">BASIC gets fancy</a></h4>
<p>Clinton A. Pierce announced that the compiled version of BASIC under
<em>languages/BASIC/compiler</em> now supports the QuickBASIC style
<code>COLOR</code>, <code>LOCATE</code> and <code>CLS</code> statements. These additions prompted
Leon Brocard to post a colour version of <em>mandel.bas</em> which generates
a colour representation of the Mandelbrot set.</p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030512230521.01f84850%40mail.geeksalad.org">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=rt-22208-57633.7.23205098397514%40bugs6.perl.org">http://groups.google.com/groups</a></p>

<h4><a name="more_sub/method_call_stuff">More sub/method call stuff</a></h4>
<p>Dan announced that now we know what the calling conventions will be,
we should look at how we should make calls to parrot functions. He
outlined a continuation passing style approach which looks like it
should have all the right magic.</p>
<p>Hmm... I just tried to write a short description of continuation
passing style and ended up duplicating most of Dan's post, but not so
well written, you're better off reading that.</p>
<p>The general response to this was positive (once people had got over
boggling at the idea of data encapsulation in an 'assembler').</p>
<p>There was also some discussion of how continuations, tied variables
and hypotheticals would interact (answer: We don't know yet, but it
looks interesting...)</p>
<p><a href="http://groups.google.com/groups?threadm=a05210601bae57ebf12d3%40%5B63.120.19.221%5D">http://groups.google.com/groups</a></p>

<h4><a name="indexing_registers_or_something">Indexing registers or something</a></h4>
<p>Klaas-Jan Stol wondered about adding some way of doing register based
indirect addressing (as Dan called it), which would allow for
iterating over a set of registers in a loop (amongst other
things). Dan suggested a couple of ways of doing it, but wanted a
usage case for compiler-generated code before he went implementing
anything. Klaas-Jan suggested a Lua construct that's analogous to the
Perlish <code>($a, $b, $c) = (f(), g(), h())</code> as an example of where such
code would come in handy. Luke Palmer suggested a way of implementing
that in code that wouldn't need the indirect register addressing, and
noted that if indirect register addressing were implemented then IMCC
would probably get very confused indeed.</p>
<p><a href="http://groups.google.com/groups?threadm=BAY1-DAV25lMazUSxvj0000e636%40hotmail.com">http://groups.google.com/groups</a></p>

<h4><a name="socket_io">Socket IO</a></h4>
<p>Andrew The has been working on getting Socket IO working in Parrot,
implementing a thin layer over the BSD socket functions and he had a
few questions about the official way to do some things. Leo
T&ouml;tsch answered some questions, and suggested that Andrew liaise
with J&uuml;rgen B&ouml;mmels, who is working on Parrot's IO layer.</p>
<p><a href="http://groups.google.com/groups?threadm=1052872713.3ec19009892a1%40webmail.burntash.com">http://groups.google.com/groups</a></p>

<h4><a name="using_vtable_macros">Using vtable macros</a></h4>
<p>Leo T&ouml;tsch offered a couple of scripts to convert a Parrot
distribution to use the new <code>VTABLE_*</code> vtable macros (it's done as a
script because some many people have their own collection of patches
in place, so a simple CVS commit doesn't catch all the vtable
accesses).</p>
<p><a href="http://groups.google.com/groups?threadm=3EC352B0.8080006%40toetsch.at">http://groups.google.com/groups</a></p>

<h4><a name="disable_unused_vtable_entries">Disable unused vtable entries</a></h4>
<p>Leo T&ouml;tsch proposed disabling all vtable methods that are either
unused or not covered by opcodes. He reckons that this should make
changes to the class hierarchy and vtable layout much
simpler. Warnock's Dilemma currently applies.</p>
<p><a href="http://groups.google.com/groups?threadm=3EC39199.5070905%40toetsch.at">http://groups.google.com/groups</a></p>

<h4><a name="string>number_problems">String-&gt;number problems</a></h4>
<p>Clint Pierce noticed that</p>
<pre><code>
    set S1, &quot;Not really a number 2&quot;
    set N0, S1
    print N0
    end</code></pre>
<p>gets its string to number conversion wrong and outputs 2.00000 rather
than the expected 0.00000. Luke Palmer patched it, but Benjamin
Goldberg pointed out a few problems to do with string encodings.</p>
<p><a href="http://groups.google.com/groups?threadm=rt-22214-57652.13.0801104798861%40bugs6.perl.org">http://groups.google.com/groups</a></p>

<h4><a name="fixes_to_parrot::test">Fixes to Parrot::Test</a></h4>
<p>Bruce Gray tracked down and fixed some problems with <code>make test</code>
seeing fake test failures, which turned out to arise from two
interacting bugs in Parrot::Test</p>
<p><a href="http://groups.google.com/groups?threadm=rt-22225-57764.12.9895807940461%40bugs6.perl.org">http://groups.google.com/groups</a></p>

<h4><a name="switched_run_core">Switched run core</a></h4>
<p>Leo T&ouml;tsch supplied a patch to add a switched prederefed run
core to Parrot's menu of run core options. It's slightly faster than
the plain prederefed run core, and Leo thinks it should be the default
run core when the computed got and JIT cores are unavailable. Bruce
Gray caught a problem with an embedded newline which broke a couple of
the tinderboxes. As far as I know the patch has not yet been applied
to the CVS distribution.</p>
<p><a href="http://groups.google.com/groups?threadm=3EC759EF.7020006%40toetsch.at">http://groups.google.com/groups</a></p>

<h4><a name="meanwhile_in_perl6language">Meanwhile in perl6-language</a></h4>
<p>The language list was quiet this week, with a grand total of 20
messages...</p>

<h4><a name="contexts">Contexts</a></h4>
<p>Steve Fink had some questions about function signatures and how they
interacted with pairs. The upshot of his question was the reminder
that if you want to pass a literal pair into a function you need to
remember to put it in parentheses <code>func(1, (a =&gt; 7))</code> or it will be
interpreted as a named parameter, which will throw an error if there
isn't an appropriately named parameter or a slurpy hash param.</p>
<p><a href="http://groups.google.com/groups?threadm=20030513162804.GN2717%40foxglove">http://groups.google.com/groups</a></p>

<h4><a name="the_object_sigil">The object sigil</a></h4>
<p>Luke Palmer wants a sigil to explicitly disambiguate between a
container and the thing contained (short circuiting any language level
delegation) and proposed <code>&amp;</code> as the appropriate sigil. I'm not
entirely sure that you need anything more than <code>\</code> and some carefully
deployed parentheses. I also appear to have missed something as there
seemed to be an assumption that in code like this</p>
<pre><code>
    for 1..Inf -&gt; $x { ... }</code></pre>
<p>then <code>$x</code> wouldn't be a simple scalar, but an iterator, allowing you
to write <code>$x.next</code> in the body of the loop, which I have to confess
is news to me.</p>
<p><a href="http://groups.google.com/groups?threadm=87el2ylzig.fsf%40simoncozens-2.dsl.easynet.co.uk">http://groups.google.com/groups</a></p>


<h3><a name="acknowledgements,_announcements_and_apologies">Acknowledgements, Announcements and Apologies</a></h3>
<p>Thanks to everyone for everything. Particular thanks to whoever
chose both my talks for YAPC this year; I really should get around to
writing them soon. And fixing the massive bug in the module that one
of the talks is all about...</p>
<p>If you've appreciated this summary, please consider one or more of the
following options:</p>
<ul>
<li>
Send money to the Perl Foundation at
<a href="http://donate.perl-foundation.org/">http://donate.perl-foundation.org/</a> and help support the ongoing
development of Perl.</li>

<li>
Get involved in the Perl 6 process. The mailing lists are open  to
all. <a href="http://dev.perl.org/perl6/">http://dev.perl.org/perl6/</a> and <a href="http://www.parrotcode.org/">http://www.parrotcode.org/</a>
are good starting points with links to the appropriate mailing lists.</li>

<li>
Send feedback, flames, money, photographic and writing commissions, or
a weekend for two at Le Manoir Aux Quat' Saisons to
<em><a href="mailto:p6summarizer@bofh.org.uk">p6summarizer@bofh.org.uk</a></em>.</li>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1120" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/14/kwiki.html" rel="bookmark">CGI::Kwiki</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Brian Ingerson</span> on <abbr class="published" title="2003-05-13T00:00:00-08:00">May 13, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p></p>
<p>This article is about a new Perl module called CGI::Kwiki. With this
module you can create a <strong>Wiki Web site</strong> in less than a minute. Now that's
quick. Or more appropriately, ``That's Kwik!''</p>
<p>If you've not heard of a Wiki, it's a Web site that allows you to add and
edit pages directly from your browser. Generally, every page on the site
has a link or button that will let you edit the page that you are
reading. When you edit a page, the raw contents of that page come up in
a text edit area in your browser. You can make any changes you want.
When you hit the <em>SAVE</em> button, the changes become live.</p>
<p>To create a new page, you just create a link on the current page to a
page that didn't exist before. Then when you follow the new link, you
are allowed to edit the new page.</p>
<p>Knowledge of HTML is not a prerequisite for using a Wiki. It's not even
a requisite, because the raw Wiki contents that you edit are not
presented as HTML. Wikis use a much more natural markup, that
resembles the messages posted in Usenet news groups. An example can
speak for itself:</p>
<pre><code>
    == A Page Header for a Sample Wiki Page ==

    Here's list of some WikiFormattingCodes:
    * Lines that begin '* ' form a bulleted list
    * Asterisks might be used to mean *bold* text
    * Links like <a href="http://www.perl.com">http://www.perl.com</a> work automatically</code></pre>
<p>The only markup that should require further explanation is the text
<code>WikiFormattingCodes</code>. Capitalized words that are mushed together form
a link to another page on the Wiki site.</p>
<p>A Wiki is simply a Web site that is easy for ordinary people to edit. So
where did the Wiki idea come from and why is it important?</p>

<h3><a name="ward's wiki wisdom">Ward's Wiki Wisdom</a></h3>
<p>I've only been dabbling in the world of Wiki for less than a year.
Rather than answer that question myself, I decided to ask the inventor
of the Wiki. Now by pure coincidence, Ward Cunningham lives but a few
miles from my house and well with in my telephone area code. I decided
to drop him a line, and find out his innermost feelings on his creation:</p>
<p><em>Brian</em>: Yes, hello. May I speak to Mr. Ward Cunningham?</p>
<p><em>Ward</em>: Who is this?</p>
<p><em>Brian</em>: This is Brian Ingerson from Perl.com. I have a few questions.</p>
<p><em>Ward</em>: Perl?! That's not me! <strong>Wall</strong> is to blame. Call him.</p>
<p><em>Brian</em>: No. Wait. It's about the Wiki.</p>
<p><em>Ward</em>: Ah, yes. The Wiki. Well let's get to business.</p>
<p><em>Brian</em>: Why did you invent the Wiki?</p>
<p><em>Ward</em>: Wiki had a predecessor that was a hyper-card stack. I wrote it
to explore hypertext. I wanted to try recording something that was
ragged, something that wouldn't fit into columns. I had this pet theory
that programming ideas were spread by people working together. I set out
to chart the flow of ideas through my company (then Tektronix). This
turned out to be more fun than I ever would have imagined.</p>
<p>When we were really trying to capture a programmer's experience in
software patterns, I remembered that stack and set out to do it over
with the technology of the moment, the World Wide Web. This was
1994. I wrote Wiki to support and enlarge the community writing
software patterns.</p>
<p><em>Brian</em>: What do you see as Wiki's most-positive contribution to the world?</p>
<p><em>Ward</em>: Back in 1994, the Web was a pretty wonderful place, with lots of
people putting up stuff just because they thought someone else would
find it interesting or useful. Wiki preserves that feeling in a place
that has become too much of a shopping mall. It reminds people that
sometimes to work together you have to trust each other more than you
have any reason to.</p>
<p><em>Brian</em>: Are you concerned that there are so many different Wiki
implementations?</p>
<p><em>Ward</em>: I was concerned once. I wish everyone used my markup instead of
inventing their own. But that didn't happen. Now I realize that the
implementations have done more to spread the idea than I ever could with
my one version. That is the way it is with really simple things.</p>
<p><em>Brian</em>: What programming language is your Wiki written in?</p>
<p><em>Ward</em>: Um, ... Perl.</p>
<p><em>Brian</em>: Tell me about that.</p>
<p><strong>click</strong></p>


<h3><a name="wikis wikis everywhere">Wikis Wikis Everywhere</a></h3>
<p>Just in case you didn't visualize the tongue entering and exiting my
cheek, Ward does not have anything against Perl. To the contrary, he does
almost all his open-source development with it, including his Wiki
software. Try visiting his Wiki site, <a href="http://c2.com/cgi/wiki">http://c2.com/cgi/wiki</a>, for an
excellent introduction to Wiki.</p>
<p>As was pointed out, there are many many implementations that have sprung
forth since the Wiki was invented, and many of those were written in
Perl. That's because a Wiki is fairly easy to implement and everyone
seems to want to do it slightly differently.</p>
<p>Most of these implementations are just simple CGI scripts at heart.
Even though they may have gathered dozens of special features over the
years, they are really just ad hoc programs that are not
particularly modularized or designed for extensibility.</p>
<p>One notable exception is the CGI::Wiki module by Kate ``Kake'' Pugh. This
relatively new CPAN distribution is designed to be a <strong>Wiki framework</strong>.
The various bits of functionality are encapsulated into class modules
that can be extended by end users. As far as I know, this project is the
first attempt in Perl to modularize the Wiki concept. It's about time!</p>
<p>The <em>second attempt</em> is a completely different module called CGI::Kwiki;
the subject of this article. When I evaluated CGI::Wiki, I found it a
little too <em>heavy</em> for my needs. It had about a dozen prerequisite
modules and required an SQL database. CGI::Kwiki by comparison requires
no extra modules besides those that come with Perl, and stores its Web
pages as plain text files.</p>
<p>I find this preferable, because I can install a new Kwiki in seconds
(literally) and I have the full arsenal of Unix commands at my disposal
for manipulating the content. In fact, the default search facility for
CGI::Kwiki is just a method call that invokes the Unix command <code>grep</code>.</p>
<p>Another compelling aspect of CGI::Kwiki is that every last bit of it is
extensible, and extending it is trivial. About the only thing you can't
easily change is the fact that it is written in Perl.</p>
<p>Because of this, I have probably set up more than a dozen Kwiki
sites in the past month, and customized each one according to my
needs. In this article, I'll show you how to do the same thing.</p>


<h3><a name="the kwikest way to start">The Kwikest Way to Start</a></h3>
<p>So just how easy is it to install a Kwiki? Well, that depends on how many
of the basics you already have in place. You need a Web server and
Perl, of course. You also need to have the CGI::Kwiki module installed
from CPAN. That's about it.</p>
<p>For the sake of a specific example, let's say that you are running the
Apache Web server (version 1.3.x) and that
<code>/home/johnny/public_html/cgi-bin/</code> is a CGI-enabled directory. With
that setup in place, you can issue the following commands to create a
new Kwiki:</p>
<pre><code>
    cd /home/johnny/public_html/cgi-bin/
    mkdir my-kwiki
    cd my-kwiki
    kwiki-install</code></pre>
<p>Done! Your Kwiki is installed and ready for action. You should be able to
point your Web browser at:</p>
<pre><code>
    <a href="http://your-domain/~johnny/cgi-bin/my-kwiki/index.cgi">http://your-domain/~johnny/cgi-bin/my-kwiki/index.cgi</a></code></pre>
<p>and begin your wiki adventure.</p>
<p>At this point, if you do an <code>ls</code> command inside the <code>my-kwiki</code>
directory, then you should see two files (<code>index.cgi</code> and <code>config.yaml</code>).
<code>index.cgi</code> is just a point of execution for the CGI::Kwiki class
modules, and config.yaml is little more than a list of which class
modules are being used. You should also see a directory called
<code>database</code>, where all your Kwiki pages are stored as individual plain
text files.</p>
<p>These files will become important later as we explore how to customize Kwiki
to your personal needs or whims.</p>
<p>If you are having trouble configuring Apache for CGI, then here is the basic
<code>httpd.conf</code> section that I use for my personal Kwikis:</p>
<pre><code>
    Alias /kwiki/ /home/ingy/kwiki/
    &lt;Directory /home/ingy/kwiki/&gt;
        Order allow,deny
        Allow from all
        Options ExecCGI FollowSymLinks Indexes
        AddHandler cgi-script .cgi
        DirectoryIndex index.cgi
    &lt;/Directory&gt;</code></pre>
<p>This allows me to connect with this URL:</p>
<pre><code>
    <a href="http://localhost/kwiki/">http://localhost/kwiki/</a></code></pre>


<h3><a name="using your kwiki">Using Your Kwiki</a></h3>
<p>When you first visit your newly installed Kwiki, you'll notice that
there are a number of default pages already installed. Most notably is
the one called HomePage, because that's the one you'll see first. This
page requests that you change it as soon as possible. Go ahead and give
it a try. Click the <code>EDIT</code> button.</p>
<p>You should see the text of HomePage laid out in Kwiki format inside an
editable text area. Make some changes and click the <code>SAVE</code> button. The first
thing you'll probably want to know is exactly how all the little Kwiki markup
characters work.</p>
<h4><a name="kwikiformattingrules">KwikiFormattingRules</a></h4>
<p>CGI::Kwiki has a set of default formatting rules that reflect my favorites
from other Wikis. Some are from WardsWiki, some from MoinMoin, some from
UseMod. All of them are customizable. More on that shortly. For now, let's go
over the basics.</p>
<p>The first thing to learn is how to create a link. A link to another page on
the site is made by squishing two or more words together in CamelCase. If the
page doesn't exist yet, then that's OK. Clicking on it will allow you to create the
new page from scratch. This is how Wikis grow.</p>
<p>You can also create an external link by simply starting some text with
<code>http:</code>. Like <a href="http://c2.com/cgi/wiki">http://c2.com/cgi/wiki</a>, the original Wiki Web site. Sometimes you
want an internal link that isn't CamelCase. Just put the link text inside
square brackets. If you want the link to be external, then add the <code>http:</code>
component inside the brackets:</p>
<pre><code>
    [check_this_out]
    [check this out <a href="http://checked.out">http://checked.out</a>]</code></pre>
<p>The second most-common formatting rule I use is preformatted text. This is
used for things like Perl code examples. Text that is preformatted is
automatically immune to futher Wiki processing. To mark text as preformatted
you just indent it. This is similar to the approach that POD takes:</p>
<pre><code>
        sub backwards_string {
            return join '', reverse split '', shift;
        }</code></pre>
<p>One of the FormattingRules that I personally like is the ability to create
HTML tables. You do it like this (if you're a bowler):</p>
<pre><code>
    | Player | 1   | 2   | 3   |
    | Marv   | 8-1 | X   | 9-/ |
    | Sally  | X   | X   | 8-1 |
    | Ingy   | 5-2 | 6-0 | 7-0 |
    | Big Al | 0-1 | 5-\ | X   |</code></pre>
<p>(The people I bowl with usually get tired after three frames)</p>
<p>Tables are made by separating cells with vertical bar (or pipe) characters.
Many times I need to put multiline text inside the cells. Kwiki accomplishes
this by allowing a Here-Document style syntax:</p>
<pre><code>
    | yaml | perl | python |
    | &lt;&lt;end_yaml | &lt;&lt;end_perl | {'foo':'bar','bar':[42]} |
    ---
    foo: bar
    bar:
      - 42
    end_yaml
    {
      foo =&gt; 'bar',
      bar =&gt;
        [ 42 ]
    }
    end_perl</code></pre>
<p>Kwiki has a fairly rich set of default formatting rules. You'll find
an exhaustive list of all the rules right inside your new Kwiki. The
page is called KwikiFormattingRules. To find this page (and every
other page on your Kwiki) click the RecentChanges link at the top of
the current page.</p>













<h3><a name="kustomizingkwiki">KustomizingKwiki</a></h3>
<p>To those of you familiar with the Wiki world, this has all been fairly
pedestrian stuff so far. Here's where I think that things get
interesting. As I stated before, every last part of the Kwiki software
is changable, customizable and extensible. Best of all, it's easy to do.</p>
<p>CGI::Kwiki is made up of more than a dozen class modules. Each class is
responsible for a specific piece of the overall Kwiki behavior. To
change something about a particular class, you just subclass it with a
module of your own.</p>
<p>Some of the more important CGI::Kwiki classes are:</p>
<ul>
<li><strong><a name="item_CGI%3A%3AKwiki%3A%3AFormatter">CGI::Kwiki::Formatter</a></strong>

<p>This is the most-common class to extend. It's
where all the formatting rules are codified.
</p>
</li>
<li><strong><a name="item_CGI%3A%3AKwiki%3A%3ADatabase">CGI::Kwiki::Database</a></strong>

<p>This class loads and stores the Kwiki pages.
</p>
</li>
<li><strong><a name="item_CGI%3A%3AKwiki%3A%3ATemplate">CGI::Kwiki::Template</a></strong>

<p>Defines the HTML that gives the look and feel
to your Kwiki.
</p>
</li>
<li><strong><a name="item_CGI%3A%3AKwiki%3A%3ADriver">CGI::Kwiki::Driver</a></strong>

<p>Controls the entire CGI process.
</p>
</li>
<li><strong><a name="item_CGI%3A%3AKwiki%3A%3AConfig">CGI::Kwiki::Config</a></strong>

<p>An abstraction for reading the config file
parameters.
</p>
</li>
</ul>
<p>Kwiki knows what classes to use by looking in it's config file. So if you want
to subclass something, then the first thing you would do is change the <code>config.yaml</code>
entry to point to your new class. Let's start with a easy one.</p>
<h4><a name="a kwik and dirty tweak">A Kwik and Dirty Tweak</a></h4>
<p>Kwiki will turn a word or phrase inside <code>*</code>asterisks<code>*</code> to bold text.
This is similar to the way you might do it in text e-mail. But WardsWiki
uses <code>'''</code>triple quotes<code>'''</code> for bolding. Let's change your Kwiki to do
it like Ward does.</p>
<p>First, create a file called <code>MyFormatter.pm</code>. You can put it right inside your
Kwiki installation directory, and Kwiki will find it. The contents of the file
should look like this:</p>
<pre><code>
    package MyFormatter;
    use base 'CGI::Kwiki::Formatter';

    sub bold {
        my ($self, $text) = @_;
        $text =~ s#'''(.*?)'''#&lt;b&gt;$1&lt;/b&gt;#g;
        return $text;
    }

    1;</code></pre>
<p>Now, change the <code>config.yaml</code> file to use this line:</p>
<pre><code>
    formatter_class: MyFormatter</code></pre>
<p>The Kwiki formatting engine will now call your subroutine with
pieces of text that are eligible to contain bold formatting.
Sections of text that are already preformatted code will not be
passed to your <code>bold()</code> method. And as you can see, <code>MyFormatter</code> is
a subclass of <a href="#item_CGI%3A%3AKwiki%3A%3AFormatter"><code>CGI::Kwiki::Formatter</code></a> so all the other formatting
behaviors remain intact.</p>
<h4><a name="kwiki's formatting engine">Kwiki's Formatting Engine</a></h4>
<p>Let's look under the hood at CGI::Kwiki's hotrod formatting engine.
You'll need to be familiar with it to do any serious formatting changes.
Conceptually, it's rather simple. It works like this.</p>
<ul>
<li>
The text starts out as one big string.</li>

<li>
There is a list of formatting routines that are applied in a
certain order.</li>

<li>
The string is passed to the first formatting routine. This routine may
change the original text. It may also break the text into a number of
substrings. It then return the strings it has created and manipulated.</li>

<li>
Each of the substrings is run through the next formatting
routine in line.</li>

<li>
Sometimes, a formatting routine will want to make sure that no further
routines touch a particular substring. It can do this by returning a
hard reference to that string.</li>

<li>
After all the substrings have been passed through every routine, they
are joined back together to form one long string.</li>
</ul>
<p>The specific routines and their order of execution is determined by
another method called <code>process_order()</code>. The <code>process_order</code> method just
returns a list of method names in the order they should be called. The
default <code>process_order</code> method is:</p>
<pre><code>
    sub process_order {
        return qw(
            function
            table code header_1 header_2 header_3 
            escape_html
            lists comment horizontal_line
            paragraph 
            named_http_link no_http_link http_link
            no_wiki_link wiki_link force_wiki_link
            bold italic underscore
        );
    }</code></pre>
<p>The best way to get a good feel for how to do things is to look over the
CGI::Kwiki::Formatter module itself.</p>
<h4><a name="kontentkontrol">KontentKontrol</a></h4>
<p>The biggest fear that many people have of setting up a Wiki site is that
someone will come along and destroy all their pages. This happens from
time to time, but in general people just don't do it. It's really not
that cool of a trick to pull off. Someone could even write a program to
destroy a Wiki, but if they were that smart, hopefully they'd be mature
enough not to do it.</p>
<p>As of this writing, CGI::Kwiki doesn't do anything to protect your data.
But remember, it's just code. Let's now extend your code to do a simple
backup, everytime a page is written.</p>
<p>Possibly the simplest way to back up files on Unix is to use RCS. Let's make
the Kwiki perform an RCS checkin every time it saves a page.</p>
<p>This time we need to extend the database class. Change the config file like
so:</p>
<pre><code>
    database_class: MyDatabase</code></pre>
<p>Then write a file called MyDatabase.pm that looks like:</p>
<pre><code>
    package MyDatabase;
    use base 'CGI::Kwiki::Database';

    sub store {
        my $self = shift;
        my ($file) = @_;
        $self-&gt;SUPER::store(@_);
        system(qq{ci -q -l -m&quot;saved&quot; database/$file backup/$file,v});
    }



    1;</code></pre>
<p><em>Note</em>: Be sure to add a backup directory that the CGI program
can write to:</p>
<pre><code>
    mkdir backup
    chmod 777 backup</code></pre>
<p>In this case the <code>store</code> method calls its parent method to handle this
actual database store. But then it invokes an extra rcs command to
backup the changes to the file.</p>
<p>Hopefully these examples will give you an idea of how to go about making
other types of modifications to CGI::Kwiki. If you make a whole set of
cohesive and generally useful extensions, then please consider putting them on
CPAN as module distribution.</p>

<h3><a name="a kwiki in every pot">A Kwiki in Every Pot</a></h3>
<p>The classic use for a Wiki site is to provide a multi-user forum for
some topic of interest. In this context, Wiki is a great collaboration
tool. People can add new ideas, and revise old ones. The Wiki serves as
both an archive and a news site. Most Wikis provide a search mechanism
and a RecentChanges facility.</p>
<p>But I think this only scratches the surface of Wiki usage
possibilities. Since a Kwiki is so easy to create, I now find myself
doing it all the time. It's almost like I'm creating a new wiki for
every little thing I set out to do. Here's a few examples:</p>
<ul>
<li><strong><a name="item_Personal_Planning">Personal Planning</a></strong>

<p>I have a personal wiki for keeping track of my projects.
I keep it on my laptop.</p></li>

<li><strong><a name="item_Module_Development">Module Development</a></strong>

<p>Every Perl module I write these days has its own
Kwiki in the directory. I use them mainly for creating Test::FIT
testing tables. (See Test::FIT on CPAN). But I can also use it for
project notes and documentation. Since I can extend the Kwiki, I can
make it export the pages to POD if I want.
</p>
</li>
<li><strong><a name="item_Autobiowiki">Autobiowiki</a></strong>

<p>I am seriously considering writing the stories of my
life in a Wiki. If I can get others to to the same, then the Wikis could
be linked using Ward's SisterSite mechanism. This would create one
big story. (See <a href="http://c2.com/cgi/wiki?AboutSisterSites">http://c2.com/cgi/wiki</a>)
</p>
</li>
<li><strong><a name="item_Project_Collaboration">Project Collaboration</a></strong>

<p>For my bigger projects I like to create a user
community based around a Wiki. Using Test::FIT I can actually get my
users to write failing tests for my projects. And they can help write
documentation, report bugs, share recipes, etc. (See <a href="http://fit.freepan.org">http://fit.freepan.org</a>
and <a href="http://yaml.freepan.org">http://yaml.freepan.org</a>)
</p>
</li>
</ul>

<h3><a name="conclusion">Conclusion</a></h3>
<p>One final point of interest; this entire article was written in a Wiki format.
I needed to submit it to my editor in POD format, which he in turn formatted
into the HTML you are reading now. I accomplished this by simply using an
extension of CGI::Kwiki::Formatter that produces POD instead of HTML!</p>
<p><em>NOTE</em>: The raw content of this article along with the formatter program can
be found at <a href="http://www.freepan.org/ingy/articles/kwiki/">http://www.freepan.org/ingy/articles/kwiki/</a></p>

<p><i>Editor's note: <a href="http://www.kwiki.org/">http://www.kwiki.org</a> has been 
                created as the official kwiki home page.</i></p>
<h3><a name="about the author">About the Author</a></h3>
<p>Brian Ingerson has been programming for more than 20 years, and hacking
Perl for five of those. He is dedicated to improving the overall quality of
scripting languages including Perl, Python and Ruby. He currently hails
from Portland, Ore.; the very location of this year's O'Reilly Open
Source Convention. How convenient!</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1128" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/p6pdigest/20030511.html" rel="bookmark">This week on Perl 6, week ending 2003-05-11</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-05-11T00:00:00-08:00">May 11, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>PEPPERPOT 1: Ooh look! It's another Perl 6 summary!</p>
<p>PEPPERPOT 2: Well I never did! What's in it this week?</p>
<p>PP 1: Ooh, I don't know. Shall we have a look?</p>
<p>PP 2: Ooh yes.</p>
<p>Following a convoluted animation sequence involving surreality,
fig leaves, classical statuary, and a cardboard cutout of an orange
Leon Brocard, the camera pulls back to reveal a large bearded man, sat
in a leather chair with a huge Apple PowerBook on his lap. PIERS looks
from the screen to the camera and says</p>
<p>PIERS: I never wanted to be a summary writer. I wanted to be a
lumberjack, leaping from tree to tree as they float down the mighty
rivers of Briti... Ah... *ahem*.</p>
<p>PIERS comes to a stammering stop as he realises that quoting Python is
<em>so</em> 20 years ago and that this year all the cool London.pm kids are
quoting <em>Buffy the Vampire Slayer</em> instead.</p>
<p>Anyhoo.</p>
<p>As you may have gathered from the above introduction, it's been fairly
quiet this week. However, design, development and discussion
continues. As usual we'll start with perl6-internals.</p>

<h4><a name="long_option_processing">Long option Processing</a></h4>
<p>Towards the end of April, Luke Palmer had posted a patch implementing
a long option processing subsystem for Parrot. After wondering if
<code>getopt_long</code> was a standard function (it isn't), Steve Fink applied
the patch.</p>
<p><a href="http://groups.google.com/groups?threadm=ygcd6j7f063.fsf%40babylonia.flatirons.org">http://groups.google.com/groups</a></p>

<h4><a name="excessive_memory_usage">Excessive memory usage?</a></h4>
<p>Leo T&ouml;tsch responded to Peter Gibbs' question of the week before
about Parrot's apparently excessive memory use for a simple
program. Leo and Peter batted the issue back and forth a few times
in the process of tracking down the source of the problem. I think
they got to the root of the problem, but I'm not sure if they've
worked out a fix just yet.</p>
<p><a href="http://groups.google.com/groups?threadm=a4jtbvodfn04q0cj8qpprfr3m5pbp681sa%404ax.com">http://groups.google.com/groups</a></p>

<h4><a name="nci_and_handling_of_generic_buffers_of_stuff">NCI and handling of generic buffers of stuff</a></h4>
<p>Last week Clinton A. Pierce had wondered about allocating blocks of
'generic' memory within Parrot for use as targets for native functions
(in his case for calling Win32 functions). Piers Cawley wondered if it
wouldn't be possible to implement a scratch buffer PMC to manage such
blocks of memory. Dan pointed out that this was exactly what the
'unmanagedstruct' PMC type was intended for, but Clint wasn't sure
that this did quite what he wanted and asked for more advice.</p>
<p>Later in the week Clint announced that he'd got UnManagedStruct PMCs
doing some useful work, including allocating arbitrarily sized buffers
from parrot assembly. People were impressed (In fact, Dan went so far
as to call Clint his hero in his 'Squawks of the Parrot'
weblog). However, Leo T&ouml;tsch pointed out that a good deal of the
work that Clint had done on UnManagedStruct probably belonged on
ManagedStruct instead. Apparently Clint (and Dan) hadn't noticed that
ManagedStruct existed. Hopefully now he's had it pointed out to him,
things will become a little more logical.</p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030502162515.01faee68%40mail.geeksalad.org">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030505154331.02608008%40mail.geeksalad.org">http://groups.google.com/groups</a></p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000186.html">http://www.sidhe.org/~dan/blog/archives/000186.html</a></p>

<h4><a name="calling_convention_changes">Calling convention changes</a></h4>
<p>After Dan's last set of changes to the Parrot calling conventions,
Brent Dax wondered why we still had a user stack now that it was no
longer being used for argument passing. Klaas-Jan Stol reckoned it was
still useful and it would make targetting Parrot easier. Luke Palmer
wondered if the user stack wouldn't make it harder to implement an
exception system.</p>
<p>Interestingly, Dan seems to be toying with having Parrot use
Continuation Passing Style function calls at some point in the
future. Who knows, maybe the next final calling conventions will
mandate CPS (I confess, I rather like the idea myself...)</p>
<p><a href="http://groups.google.com/groups?threadm=001b01c3129d%2416fbec00%246501a8c0%40deepblue">http://groups.google.com/groups</a></p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000187.html">http://www.sidhe.org/~dan/blog/archives/000187.html</a></p>

<h4><a name="building_parrot_on_windows">Building Parrot on windows</a></h4>
<p>Getting Parrot working well in a Win32 environment seems to have been
a Parrot theme over the last few weeks. This week Cal Henderson popped
up with some problems getting things to link. The problem was tracked
down quite quickly, and Cal ended up offering to do regular windows
builds for the tinderbox system, though it looks like that's not yet
as easy as it could be. Apparently the standard Win32 make targets
don't quite build enough. I'm sure someone's working on fixing this;
getting Win32 into the tinderbox will be really handy.</p>
<p><a href="http://groups.google.com/groups?threadm=20030505000930.A2FB736C1B4%40neuron.neuron1.com">http://groups.google.com/groups</a></p>

<h4><a name="imcc_vs._parrot_assembler">IMCC vs. Parrot assembler</a></h4>
<p>Zellyn Hunter wondered about how to choose between IMCC and the native
parrot assembler. (Zellyn also presented me with a dilemma about which
personal pronoun to use, which I solved by going and looking at his website.
Unless 'Leah' turns out to be a chap's name I think I'm safe). He also
asked about the state of the documentation within CVS, and wondered
which documents were still valid and which (if any) had been caught
out by the march of development, suggesting a small meta document with
information on the validity of the various docs (which begs the
question of how one knows that the metadoc is up to date.)</p>
<p>The answer to the first question was ``Well, it depends'', with the
rider that, unless you enjoyed doing your own register allocation,
IMCC looked like the saner choice. Jerome Quelin pointed out that the
Ook! compiler targets PASM, which seems to be in agreement with the
whole sane/unsane thing.</p>
<p><a href="http://groups.google.com/groups?threadm=200305042151.08781.zellyn%40zellyn.com">http://groups.google.com/groups</a></p>

<h4><a name="more_on_stack_walking">More on stack walking</a></h4>
<p>David Robins read Dan's blog entry about stack walking and had a few
questions about the details. He wanted to know what was done about
false positives (ie, how do you <em>know</em> that something that looks like
a pointer <em>is</em> a pointer), and what was done about object
destruction. Dan replied that, in one of the Parrot GC system's few
conservative choices, Parrot GC took the view that if something in the
system stack looks like a pointer then it's safest to assume that it
is a pointer and proceed on that basis. He also noted that, if a
language required a specific order of object destruction then it was
down to the language to handle that.</p>
<p>The usual spectre of timely closure of IO handles was raised again --
Perl 5 guarantees that objects get destroyed (and therefore handles
get closed) as soon as an object goes out of scope. This is somewhat
harder to guarantee in a system that doesn't use reference counting
for garbage collection. Graham Barr commented that ``Anyone who depends
on GC for the closing of file handles asks for all they get.'', which
is certainly one way of approaching the issue, but it does rather fly
in the face of the Perl 5 Way.</p>
<p><a href="http://groups.google.com/groups?threadm=Pine.LNX.4.44.0305051420580.29147-100000%40davidrobins.net">http://groups.google.com/groups</a></p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000174.html">http://www.sidhe.org/~dan/blog/archives/000174.html</a> -- Dan explains
stack walking</p>

<h4><a name="pio_work">PIO work</a></h4>
<p>J&uuml;rgen B&ouml;mmels continued his sterling work on the Parrot
IO system (PIO), fixing up the problems with buffering and double
frees etc that were mentioned last week.</p>

<h4><a name="sysinfo_op"><code>sysinfo</code> op</a></h4>
<p>Dan added a <code>sysinfo</code> op which allows a running program to at least
get some information about the machine it's running on. Things are
apparently somewhat spotty for various architectures that Dan didn't
have immediate access to, but there's a framework in place now and
patches are welcome.</p>
<p><a href="http://groups.google.com/groups?threadm=a05210600bae4339e14ef%40%5B63.120.19.221%5D">http://groups.google.com/groups</a></p>


<h3><a name="meanwhile_in_perl6language">Meanwhile in perl6-language</a></h3>
<p>The language list was again busier than the internals list this week,
but only just. Maybe we're all waiting with bated breath for the next
exegesis. Or maybe everyone's exhausted. It can't last though.</p>

<h4><a name="bool_type"><code>bool</code> Type</a></h4>
<p>Discussion of the hypothetical/non-existent <code>bool</code> type continued. I
tried really hard to care.</p>

<h4><a name="coroutine_calling_convention">Coroutine calling convention</a></h4>
<p>As Luke Palmer continued to argue that Coroutines were a
useless/dangerous bit of syntactic sugar and we'd be better using
explicit iterator objects. Meanwhile, others discussed the various
options for calling semantics in the case where Coroutines continued
to look like coroutines instead of iterators. Damian Conway proposed
another form of Coroutine calling convention. Damian proposed that
<code>yield</code> return the 'new' arguments with which you 'resumed' the
coroutine. This gives the programmer the option to handle different
arguments however she likes. Piers Cawley liked the idea and posted a
few snippets of code for implementing these semantics using
continuations. He also suggested that it might be handy to be able to
declare 'Blocklike' subroutines that were 'return transparent'. I
think the continuations scared people off because there has been no
comment, even on the Blocklike subs idea.</p>
<p><a href="http://groups.google.com/groups?threadm=ygcvfwtici9.fsf%40babylonia.flatirons.org">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=3EB65E4A.1000504%40conway.org">http://groups.google.com/groups</a> -- Damian's proposal</p>

<h4><a name="include_macro">Include macro</a></h4>
<p>Uri Guttman, may his name be forever mispronounced, responded to last
week's summary (instead of the original thread, <em>bad</em> Uri!) by
pointing out that the simple minded include macro referred to in that
summary was inefficient and proposed an optimization. This turned into
a discussion of whether file reads should be 'slurpy' by default
(Michael Lazzaro thought they should be, almost everyone else disagreed
with him).</p>
<p>Then Damian popped up with his proposed Grand Unification
of HERE docs, POD, and general file slurping, which looks very cool,
but unfortunately, the unary <code>&lt;&lt;</code> operator that Damian proposes
to hang all this off seems to clash with Larry's proposed use of <code>&lt;&lt;list of words&gt;&gt;</code> as a replacement for
<code>qw/.../</code>. The idea was well received, and people started casting
around for a sensible operator and adding other neat ideas to go with
it. Damian won the 'evil, evil, evil' prize when, after <code>&lt;&lt;&lt;</code> had
been proposed as the file slurp operator, he came up with the idea of
vectorizing it, which would lead to such delights as</p>
<pre>
    my($stdout, $stderr) = &gt;&gt;&lt;&lt;&lt;&lt;&lt; open 'grep foo * |';</pre>
<p>Or, for the avoidance of headaches:</p>
<pre>
    my($stdout, $stderr) = &gt;&gt; &lt;&lt;&lt; &lt;&lt; open 'grep foo * |';</pre>
<p>(I hate to think how one would write that in a POD C&lt;...&gt;
escape).</p>
<p>This then turned into a discussion of whether <code>&lt;&lt;...&gt;&gt;</code> made
sense as a replacement for <code>qw&lt;...&gt;</code>, especially given the
perceived utility of Damian's proposal.</p>
<p>Towards the end of the thread, Michael Lazzaro withdrew his contention
that slurpy reads should be the default.</p>
<p><a href="http://groups.google.com/groups?threadm=x765opwbzh.fsf%40mail.sysarch.com">http://groups.google.com/groups</a></p>
<p><a href="http://groups.google.com/groups?threadm=3EB89C0F.4050607%40conway.org">http://groups.google.com/groups</a> -- Conway's Unified Here Theory</p>


<h3><a name="acknowledgements,_announcements_and_apologies">Acknowledgements, Announcements and Apologies</a></h3>
<p>The camera pulls back from observing a computer screen on which the
words ``The camera pulls back from...'' are being typed and swings
around to focus on the typist who looks up from the screen and
addresses the camera.</p>
<p>PIERS: And so, by some extraordinary coincidence, fate, it seemed,
had decided that you, my readers, should keep your appointment with
the end of this summary. But what of the new technologies that had
been spoken of?</p>
<p>AUDIENCE: Where *BLEEP*?</p>
<p>PIERS: In an empty house?</p>
<p>AUDIENCE: When *BLEEP*?</p>
<p>PIERS: In the middle of the night?</p>
<p>AUDIENCE: Best time!</p>
<p>PIERS: What diabolical plan had been shaped by Damian and Larry's
crazed imaginations? What indeed? From what had gone before it was
clear that this was going to be...</p>
<p>AUDIENCE: a picnic?</p>
<p>PIERS: no picnic.</p>
<p>AUDIENCE: Awwwww!</p>
<p>The lights dim, the screen fades to white and the following words
scroll up the screens of browsers the world over:</p>
<p>If you've appreciated this summary, please consider one or more of the
following options:</p>
<ul>
<li>
Send money to the Perl Foundation at
<a href="http://donate.perl-foundation.org/">http://donate.perl-foundation.org/</a> and help support the ongoing
development of Perl.</li>

<li>
Get involved in the Perl 6 process. The mailing lists are open  to
all. <a href="http://dev.perl.org/perl6/">http://dev.perl.org/perl6/</a> and <a href="http://www.parrotcode.org/">http://www.parrotcode.org/</a>
are good starting points with links to the appropriate mailing lists.</li>

<li>
Send feedback, flames, money, photographic and writing commissions, or
a better framing device than terrible pastiches of Monty Python and
the Rocky Horror Show to <em><a href="mailto:p6summarizer@bofh.org.uk">p6summarizer@bofh.org.uk</a></em>. People
suggesting an MST3K version of this summary can jolly well do it
themselves.</li>
</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1126" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/p6pdigest/20030507.html" rel="bookmark">This week on Perl 6, week ending 2003-05-04</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-05-07T00:00:00-08:00">May  7, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Welcome my friends, to the show that never ends. Yes, another week,
another Perl 6 Summary, chock full of condensed goodness, Leo
T&ouml;tsch admiration and a smattering information about the design
and development of Perl 6 and its target virtual machine, Parrot.</p>
<p>A quiet week this week. Even the hotbed of discussion that is
perl6-language saw fewer than 100 messages. However, in accordance
with tradition, I'll start with perl6-internals, which saw all of 47
messages this week, none of them from Leon Brocard.</p>


<h4><a name="external_data_interfaces_draft_pdd">External Data Interfaces draft PDD</a></h4>
<p>Discussion of the External Data Interfaces PDD continues. Hopefully
we'll see the first 'real' version soon.</p>


<h4><a name="pmc_keys">PMC Keys</a></h4>
<p>Alberto Sim&otilde;es asked for a good description of PMC Keys. No
answer yet.</p>
<p><a href="http://groups.google.com/groups?threadm=20030428074514.GA17784%40alfarrabio.di.uminho.pt">http://groups.google.com/groups</a></p>


<h4><a name="long_option_processing">Long option processing</a></h4>
<p>Luke Palmer sent a patch to do long option parsing. Again, Warnock's
Dilemma applies.</p>
<p><a href="http://groups.google.com/groups?threadm=ygcd6j7f063.fsf%40babylonia.flatirons.org">http://groups.google.com/groups</a></p>


<h4><a name="problem_with_readline">Problem with <code>readline</code></a></h4>
<p>Will Coleda announced that he was dusting off his TCL project and
found that it threw lots of bus errors. He tracked the problem down
down to the <code>readline</code> op. Benjamin Goldberg realised that what was
happening was that a filedescriptor was being used as a pointer to a
FILE datastructure. Which is never going to be good. (This would never
happen in a language with typed values. Well, it might, but the error
would be caught before the bus error). No fix yet.</p>
<p><a href="http://groups.google.com/groups?threadm=200304281725.h3SHPRGm021591%40ms-smtp-01.nyroc.rr.com">http://groups.google.com/groups</a></p>


<h4><a name="read_buffering_in_pio">Read buffering in PIO</a></h4>
<p>Possibly prompted by Leon Brocard's nudge the week before, Dan
Sugalski took another look at J&uuml;rgen B&ouml;mmels' rejected
patch to add read buffering to the Parrot IO subsystem. Apparently
there's a problem with a double free introduced by the patch. After
some discussion (including a contribution from Melvin Smith, PIO's
original author) of how to address the issue, J&uuml;rgen submitted
another patch.</p>
<p><a href="http://groups.google.com/groups?threadm=a05210602bad4913f7884%40%5B192.168.0.78%5D">http://groups.google.com/groups</a></p>


<h4><a name="excessive_memory_usage">Excessive memory usage?</a></h4>
<p>Peter Gibbs 'showed off' a short piece of PASM code that managed to
use some 60Mb of memory and to allocate 1.5 million headers. He
thought this a little excessive. No comment yet.</p>
<p><a href="http://groups.google.com/groups?threadm=019b01c30fee%2428781fa0%240b01010a%40emkel.co.za">http://groups.google.com/groups</a></p>


<h4><a name="extending_pop">Extending <code>pop</code></a></h4>
<p>Klaas-Jan Stol wondered if it would be useful to have a variant of pop
which could pop multiple items off the runtime stack. Dan thought it
as a good idea and added a bunch more useful tricks involving stack
marks and things, and asked for volunteers to implement it. Nobody has
explicitly stepped up to that particular plate...</p>
<p><a href="http://groups.google.com/groups?threadm=BAY1-DAV30oC6POYFSr000007f3%40hotmail.com">http://groups.google.com/groups</a></p>


<h4><a name="clint_pierce_shows_off_his_'mad_nci_skeelz'">Clint Pierce shows off his 'mad NCI skeelz'</a></h4>
<p>Clinton A Pierce has been playing with NCI on Win32 and has now got
his Parrot BASIC calling Win32 functions natively. ``Mua-hahahaha'', as
he so eloquently put it. He's now looking for a generic way to
allocate a generic memory area in PASM for use as the target of a
function, which should allow him to make even more Win32 calls
without having to write an adaptor library in C first.</p>
<p><a href="http://groups.google.com/groups?threadm=5.1.0.14.2.20030502162515.01faee68%40mail.geeksalad.org">http://groups.google.com/groups</a></p>


<h4><a name="dan_changes_the_calling_conventions_again.">Dan changes the calling conventions again.</a></h4>
<p>Dan released the final set of calling conventions again. He thinks he
won't have to do this again. Again. The changes are all in PDD03
(<em>docs/pdds/pdd03_calling_conventions.pod</em> in the CVS version of the
Parrot distribution). The big change is that we no longer use the
stack at all for passing parameters, we use an overflow array
instead. The smaller change is that the PDD has been clarified
somewhat.</p>
<p><a href="http://groups.google.com/groups?threadm=a05210607bad87b962773%40%5B192.168.0.78%5D">http://groups.google.com/groups</a></p>
<p>And that about wraps it up for the internals mailing list. However,
Dan has been publishing some handy stuff in a new ``What the heck is
...?'' series on his 'Squawks of the Parrot' website.</p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000174.html">http://www.sidhe.org/~dan/blog/archives/000174.html</a> - Walking the stack</p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000178.html">http://www.sidhe.org/~dan/blog/archives/000178.html</a> - Coroutines</p>


<h4><a name="meanwhile,_over_in_perl6language">Meanwhile, over in perl6-language</a></h4>
<p>There was lots more about types. And some new stuff too...</p>


<h4><a name="i_thought_there_was_no_bool_type">``I thought there was no <code>bool</code> type?''</a></h4>
<p>Towards the end of last week, Smylers queried the 'bool' entries in
the latest draft of Michael Lazzaro's Type Conversion Matrix. The
thing is, Larry has said that there won't be boolean type. Smylers was
not the first person to make this comment, he probably won't be the
last. The stock response is along the lines of ``There's no <code>bool</code>
type, but there is <code>bool</code> context.''  but according to Synopsis 6,
this appears not to be the case anymore.</p>
<p>Then it all got a bit weird. Nobody <em>quite</em> asked ``What is truth
anyway?'' but it was touch and go for a while as people discussed what
the value of a <code>bool</code> would be in a numeric context. (I had a good
deal of sympathy for the view that there should be some kind of
warning...). We eventually ended up in a discussion of multistate
logic (which, it seems to me is a candidate for 'something you
implement in a module' status.), who knows where we'll end up this
week.</p>
<p><a href="http://groups.google.com/groups?threadm=20030428134439.30090.qmail%40web41202.mail.yahoo.com">http://groups.google.com/groups</a></p>


<h4><a name="headers">Headers</a></h4>
<p>Paul Hodges wondered if it would be possible to write something in
Perl 6 that worked in a similar way to the C Preprocessor's
<code>#include</code> directive, allowing him to push a common set of <code>use</code>
statements and other compile time declarations into a header file,
which could then be shared by multiple bits of code. Various people
suggested more or less tricky options, but Marco Baringer won the
'simplest thing that could possibly work' prize from your summarizer
with:</p>
<pre><code>
    macro include ($file) {
      join '', &lt;open $file&gt;;
    }</code></pre>
<p>which does the job very straightforwardly.</p>
<p><a href="http://groups.google.com/groups?threadm=20030428140401.36286.qmail%40web41210.mail.yahoo.com">http://groups.google.com/groups</a></p>


<h4><a name="type_conversion_matrix_(take_3)">Type Conversion Matrix (Take 3)</a></h4>
<p>Michael Lazzaro posted his third attempt at a type conversion
matrix. This triggered some discussion on the difference between
primitive (int, float, etc) and 'full' types (Int, Float). Michael
worried that some of the discussions were bloating primitives leading
him to wonder what would be the point of using them if that
happened.</p>
<p>It's apparent from the discussions here that the distinction between
storage and value types enables a good deal of magic, but that scares
people too.</p>
<p><a href="http://groups.google.com/groups?threadm=FADEC562-799F-11D7-8131-00050245244A%40cognitivity.com">http://groups.google.com/groups</a></p>


<h4><a name="property_inheritance">Property Inheritance</a></h4>
<p>David Wheeler popped up with something of a head scratcher. He wanted
to know whether, when a method is overridden in a subclass, the
overridden method inherits the traits (he said properties, but he meant
traits I think) of its SUPER method. Luke Palmer thought it probably
depends on the trait, but his guess was that traits would be
inherited. Which led David to wonder if that meant you could override
traits in a child class.</p>
<p><a href="http://groups.google.com/groups?threadm=06ECDFEE-7B78-11D7-8FA3-0003931A964A%40wheeler.net">http://groups.google.com/groups</a></p>


<h4><a name="oooverhead">OO-overhead</a></h4>
<p>For some reason, a discussion on structuring OO code in Perl 5 has
been running in perl6-language for a while. It's handy for spotting
issues, but not exactly on topic. It is to be hoped that Perl 6 will
lose a lot of Perl 5's function and method call overhead though.</p>


<h4><a name="chaining_postconditionals">Chaining postconditionals</a></h4>
<p>Michael Lazzaro asked for the rationale behind disallowing stuff like:</p>
<pre><code>
    return if &lt;expr&gt; for &lt;list&gt;</code></pre>
<p>Short answer: Because Larry said so.</p>
<p>Supporting evidence (from the thread that developed anyway):</p>
<pre><code>
    foo $_ if baz for @list unless quux.next() while 1;</code></pre>
<p>or:</p>
<pre><code>
    if $X {...} if $Y</code></pre>
<p><a href="http://groups.google.com/groups?threadm=AB133842-7C0F-11D7-8120-00050245244A%40cognitivity.com">http://groups.google.com/groups</a></p>


<h4><a name="coroutine_calling_convention">Coroutine calling convention</a></h4>
<p>Luke Palmer kicked off some discussion of the various coroutine
calling conventions that Dan had discussed on his Squawks of the
Parrot website. Luke though that coroutines should return iterator
objects instead of the yielded value. Which would mean they weren't
actually coroutines...</p>
<p><a href="http://groups.google.com/groups?threadm=ygc4r4d5wcx.fsf%40babylonia.flatirons.org">http://groups.google.com/groups</a></p>
<p><a href="http://www.sidhe.org/~dan/blog/archives/000178.html">http://www.sidhe.org/~dan/blog/archives/000178.html</a> - Dan talks Coroutines</p>


<hr />
<h3><a name="acknowledgements,_announcements_and_apologies">Acknowledgements, Announcements and Apologies</a></h3>
<p>So, another summary draws to a close on a glorious May
afternoon. Here's to the next one. Thanks to those people who sent the
proof I asked for in the last summary. No thanks to the gits who
outnumbered them by sending spam to the same address.</p>
<p>If you've appreciated this summary, please consider one or more of the
following options:</p>
<ul>
<li>
Send money to the Perl Foundation at
<a href="http://donate.perl-foundation.org/">http://donate.perl-foundation.org/</a> and help support the ongoing
development of Perl.</li>


<li>
Get involved in the Perl 6 process. The mailing lists are open  to
all. <a href="http://dev.perl.org/perl6/">http://dev.perl.org/perl6/</a> and <a href="http://www.parrotcode.org/">http://www.parrotcode.org/</a>
are good starting points with links to the appropriate mailing lists.</li>


<li>
Send feedback, flames, money, photographic and writing commissions, or
a year's supply of Ben &amp; Jerry's to <em><a href="mailto:p6summarizer@bofh.org.uk">p6summarizer@bofh.org.uk</a></em></li>

</ul>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1118" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/05/06/conferences.html" rel="bookmark">2003 Perl Conferences</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2003-05-06T00:00:00-08:00">May  6, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>
The season of Perl conferences is almost upon us! In fact, the first of
the YAPCs for this year is in less than a week. So I thought this
would be a good time to give a tour of the various conferences and see
what's going on at each.
</p>

<h3>YAPC::Israel</h3>

<p>
The first of the conferences, starting on Sunday, May 11, is <a href="http://www.perl.org.il/YAPC/2003">YAPC::Israel</a>. If you were
planning to attend this, then please note that that's one day earlier than
originally announced. It'll be at Haifa University, at the <a
href="http://www.cri.haifa.ac.il/">Caesarea Rothschild
Institute</a>.</p>

<p>
What's going on? Well, there'll be a variety of <a href="http://www.perl.org.il/YAPC/2003/presentations.html">presentations</a>
in Hebrew and in English: Reuven Lerner will be teaching the five things 
every Perl programmer should know; Yevgeny Menaker, author of
"Programming Perl in the .NET Environment," will be talking about .NET; and there's a strong X Windows
 theme to the conference, with a Tk tutorial from Ido Trivizki,  Ran
 Eliam presenting a new UI toolkit, and Mikhael Goikhman talking about
 X11 window managers and Perl.
 </p>

 <p>
The usual collection of <a href="http://www.perl.org.il/YAPC/2003/schedule.html#light">lightning
talks</a> will take place, and special guest <a href="http://perl.plover.com"> Mark-Jason Dominus</a> will be presenting
a set of lightning talks all by himself. Mark is also keynoting with a
retrospective of the <a href="http://perl.plover.com/qotw/">Quiz Of The
Week</a>. After the conference, Mark will be giving three one-day
<a href="http://www.pti.co.il/mjd.html">training courses</a>. (Not
included in the conference.)
</p>

<p>
All this and more for 150 Shekels. Can't be bad.
</p>

<h3>YAPC::Canada</h3>

<p>
Hot on the heels of the Israel conference will be the <a href="http://www.yapc.ca/">Canadian YAPC</a>, on May 15-16.
This will be 85 Canadian Dollars and includes dinner, a barbeque and
CD-ROM proceedings.
</p>

<p>YAPC::Canada will be keynoted by <a href="http://www.yapc.ca/keynote.html">Dick Hardt</a> of <a href="http://www.activestate.com/">ActiveState</a> - Dick will be
talking about the history of Perl on Windows.</p>

<p>
There'll be both free and professional tutorials at this YAPC, with
<a href="http://www.psdt.com/news/yapc-canada.html">Peter Scott</a>
giving tuition on object-oriented Perl. The two free tutorials are Mick
Villeneuve's "Yet Another Perl Tutorial" for first-time Perl
programmers, and Steve Jenkins' "Introduction to Regular Expressions."
</p>

<p>
The presentations will be divided into a beginner and an advanced
stream; highlights include talks on the Perl debugger, <a href="http://www.class-dbi.com/">Class::DBI</a>, event loops, extreme
testing, and Perl date and time handling.
</p>

<h3>Perl Whirl</h3>

<p>
In June, some of us lucky individuals will be talking about
Perl on a ship in the waters around Hawaii for the 2003 <a href="http://www.geekcruises.com/home/pw3_home.html">Perl Whirl</a>.
There'll be a strong Perl 6 theme, with four half-day courses on Perl 6.
Randal Schwartz will be presenting his packages, objects, references and
modules tutorial to complement the new <a href="http://www.oreilly.com/catalog/lrnperlorm">sequel to Learning
Perl</a>. MJD will be there, too, giving his famous <a href="http://perl.plover.com/yak/flags/">Red Flags</a> tutorial, and a
half-day tutorial on iterators and generators.
</p>
<p>
There'll be other talks, of course, although the program isn't yet finalized. I shall attend, talking about how you can use
Perl 6 right now - in a manner of speaking. ... And, of course, there'll
be Hawaii, the Wizards' Cocktail Party, and much more.
</p>

<h3>YAPC::NA</h3>

<p>
In mid-June comes the main <a href="http://www.yapc.org/America/">Yet
Another Perl Conference</a>. This year, it's at Boca Raton, Fla., from June 16-18. The cost is $85.
</p>
<p>
Tutorials include Damian Conway's "Everyday Perl" and Tim
Maher's "Minimal Perl," Randal's PROM tutorial again, and Abigail's
half-day regex tutorial. Larry and Damian will present a two-hour slot
on Perl 6 on the final day.
</p>
<p>
Other short talks that caught my eye were Helen Cook talking about
video manipulation; <a href="http://www.oreillynet.com/pub/au/129">Schuyler Erle</a> on
geocaching; and two talks from Piers Cawley, on refactoring and the
<a href="http://www-106.ibm.com/developerworks/linux/library/l-pixie.html">Pixie</a>
object persistence framework.</p>

<h3>OSCon/TPC 7</h3>

<p>
And then in July, where we have the main event, <a href="http://conferences.oreillynet.com/os2003/perl/">The Perl
Conference</a>, on the theme of "Embracing and Extending Proprietary Software."
</p>

<p>
Again, Perl 6 will figure extensively, with talks from Damian on "What's New in Perl 6," the new <code>Perl6::Rules</code> module, Dan Sugalski
and Leon Brocard on Parrot, and Allison Randal explaining the Perl 6
design philosophy.
</p>

<p>
For those of us still using Perl 5, I would recommend Ask Bjoern
Hansen and Robert Spier's explanation of <a href="http://conferences.oreillynet.com/cs/os2003/view/e_sess/4252">the
perl.org single-signon process</a>, Andy Wardley talking about <a href="http://conferences.oreillynet.com/cs/os2003/view/e_sess/4028">what's
new in Template Toolkit 3</a>, and the unmissable <a href="http://conferences.oreillynet.com/cs/os2003/view/e_sess/4191">random
talk by MJD</a>.
</p>

<p>
Of course, there's more than just Perl things going on at OSCon - you
can drop into sessions on Apache, MySQL and PostGreSQL, Python and
Ruby, the XML track and the eclectic "Emerging Topics" track. There's
also be keynotes from Weta Digital on animating the "Lord of the Rings"
movies, Mitch Kapor on his open-source desktop applications project, and
George Dyson on "Von Neumann's Universe."
</p>

<p>
It's all happening at the Portland Mariott, from July 7-11. Make sure you're there.
</p>

<h3>YAPC::Europe</h3>

<p>
Less than two weeks after TPC comes the final event of the conference
season, the <a href="http://yapc.mongueurs.net/">European YAPC</a>, at the CNAM
Conservatoire in Paris. 
</p>

<p>
Details of speakers are not yet confirmed, but we know it'll be July 23-25, and it'll be vast quantities of fun.
</p>

<h3>And finally ...</h3>

<p>
In case you're overwhelmed by the amount of conferences on this year,
I maintain an at-a-glance calendar at <a href="http://www.icalx.com/html/PerlConf/year.php?cal=Perl32Conferences">iCal
Exchange</a>; if you're a user of Apple's iCal, you can subscribe to the
Perl Conferences calendar at 
http://www.icalx.com/public/PerlConf/Perl32Conferences.ics
</p>

<p>
I hope to see you at one or more of the above!
</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2003/04/">&laquo; April 2003</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2003/06/">June 2003 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
