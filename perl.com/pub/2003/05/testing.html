<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.02" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
    
    <link rel="prev bookmark" href="/pub/2003/05/20030518.html" title="This week on Perl 6, week ending 2003-05-18" />
    <link rel="next bookmark" href="/pub/2003/05/20030525.html" title="This week on Perl 6, week ending 2003-05-25" />
    
    
    <title>Testing mod_perl 2.0 - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <div id="top_advert"> 
<!-- Put any landscape advert in here -->
<a href="http://www.perlfoundation.org/" target="_new">
<img src="/i/tpf_banner.png" width="468" height="60" /></a>
        </div> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description"></div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1122" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">Testing mod_perl 2.0</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Geoffrey Young</span> on <abbr class="published" title="2003-05-22T00:00:00-08:00">May 22, 2003 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->
<p></p>
<p><a href="/pub/a/2003/04/17/filters.html">Last time</a>, 
we looked at writing a simple Apache output filter -
<code>Apache::Clean</code> - 
using the mod_perl 2.0 API.  How did I know that the filter
I presented really worked?
I wrote a test suite for it, one that exercised
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz">the code</a>
against a live Apache server
using the <code>Apache-Test</code> testing framework.
</p>

<p>
Writing a series of tests that executes against a live 
Apache server has become much simpler since the advent of
<code>Apache-Test</code>.  Although <code>Apache-Test</code>,
as part of the 
<a href="http://httpd.apache.org/test/">Apache HTTP Test Project</a>,
is generic enough to
be used with virtually any version of Apache (with or without 
mod_perl enabled), it comes bundled with mod_perl 2.0, making
it the tool of choice for writing tests for your
mod_perl 2.0 modules.
</p>

<csperl file="grab" domain="on" record="sc/1139" field="html">

<h3>Testing, Testing, 1, 2, 3</h3>

<p>
There are many advantages to writing tests.
For instance, maintaining the test suite as I coded <code>Apache::Clean</code>
allowed me to test each functional unit as I implemented it,
which made development easier.  The individual tests
also allowed me to be fairly certain that the module would
behave as expected once distributed.  As an added bonus,
tests offer additional end-user documentation in the form of 
test scripts, supporting libraries and configuration files,
available to anyone who wants to snoop around the distribution
a bit.  All in all, having a test suite increases the value of your
code exponentially, while at the same time making your life
easier.
</p>



<p>
Of course, these benefits come from having <i>any</i>
testing environment, and are not limited to just <code>Apache-Test</code>.
The particular advantage that <code>Apache-Test</code>
brings to the table is the ease at which it puts a whole,
pristine, and isolated Apache server at your disposal, 
allowing you to test and exercise
your code in a live environment with a minimum 
of effort.  No more <code>Apache::FakeRequest</code>, no
more <code>httpd.conf</code> configurations strewn across
development environments or corrupted with proof-of-concept
handlers that keep you busy following non-bugs for half a day. 
No more mess, no more tears.
</p>

<p>
If you have ever used tools like <code>Test.pm</code>
or <code>Test::More</code> as the basis for testing your modules, then
you already know most of what using <code>Apache-Test</code>
is going to look like.  In fact, <code>Apache-Test</code>
uses <code>Test.pm</code> under the hood, so the layout
and syntax are similar.  If you have never written
a test before, (and shame on you)then
<a href="/pub/a/2001/12/04/testing.html">An 
Introduction to Testing</a> provides a nice
overview of testing with Perl.  For the most part, though, 
<code>Apache-Test</code>
is really simple enough that you should be able to follow
along here without any trouble or previous knowledge.
</p>

<p>
Leveraging the <code>Apache-Test</code> framework requires
only a few steps - generating the test harness, configuring
Apache to your specific needs, and writing the tests - 
each of which is relatively straightforward.
</p>

<h3>Generating the Test Harness</h3>

<p>
The first step to using <code>Apache-Test</code>
is to tweak the <code>Makefile.PL</code> for your
module.  If you don't yet have a <code>Makefile.PL</code>,
or are not familiar with how to generate one, then don't worry - all that is required is a simple call to
<code>h2xs</code>, which provides us with a standard
platform both for distributing our module and
deploying the <code>Apache-Test</code> infrastructure.
</p>

<pre>
  <code>
$ <b>h2xs -AXPn Apache::Clean</b>
Defaulting to backward compatibility with perl 5.9.0
If you intend this module to be compatible with earlier perl versions, then please
specify a minimum perl version with the -b option.

Writing Apache/Clean/Clean.pm
Writing Apache/Clean/Makefile.PL
Writing Apache/Clean/README
Writing Apache/Clean/t/1.t
Writing Apache/Clean/Changes
Writing Apache/Clean/MANIFEST
  </code>
</pre>

<p>
<code>h2xs</code> generates the necessary structure
for our module, namely the <code>Clean.pm</code> template
and the <code>Makefile.PL</code>, as well as the 
<code>t/</code> subdirectory where our tests and supporting
files will eventually live.  You can take some extra
steps and shuffle the distribution around a bit (such
as removing <code>t/1.t</code> and putting everything
into <code>Apache-Clean/</code> instead of
<code>Apache/Clean/</code>) but it is not required.
Once you have the module layout sorted out and
have replaced the generated <code>Clean.pm</code> stub with
<a href="/pub/a/2003/04/17/filters.html">the
actual <code>Clean.pm</code> filter</a> from before,
it's time to start preparing the basic test harness.
</p>

<p>
To begin, we need to modify the <code>Makefile.PL</code> significantly.
The end result should look something like:</p>

<pre>
  <code>
#!perl

use 5.008;

use Apache2 ();
use ModPerl::MM ();
use Apache::TestMM qw(test clean);
use Apache::TestRunPerl ();

# configure tests based on incoming arguments
Apache::TestMM::filter_args();

# provide the test harness
Apache::TestRunPerl-&gt;generate_script();

# now, write out the Makefile
ModPerl::MM::WriteMakefile(
  NAME      =&gt; 'Apache::Clean',
  VERSION   =&gt; '2.0',
  PREREQ_PM =&gt; { HTML::Clean      =&gt; 0.8,
                 mod_perl         =&gt; 1.9909, },
);
  </code>
</pre>

<csperl file="grab" domain="on" record="b/832" template="b/article_sidebar.view">

<p>
Let's take a moment to analyze our nonstandard <code>Makefile.PL</code>.  We begin by importing
a few new mod_perl 2.0 libraries.  The first
is <code>Apache2.pm</code>.  In order to peacefully
co-exist with mod_perl 1.0 installations, mod_perl 2.0
gives you the option of installing mod_perl relative
to <code>Apache2/</code> in your <code>@INC</code>,
as to avoid collisions with 1.0 modules of the same name.
For instance,
the mod_perl 2.0 <code>Apache::Filter</code> we used
to write our output filter interface
would be installed as <code>Apache2/Apache/Filter.pm</code>.
Of course, ordinary calls that <code>require()</code> or
<code>use()</code> <code>Apache::Filter</code> in mod_perl 2.0 code
would fail to find
the correct version (if one was found at all), since
it was installed in a nonstandard place.
<code>Apache2.pm</code> extends <code>@INC</code> to
include any (existing) <code>Apache2/</code> directories
so that <code>use()</code> and related statements work as intended.
In our case, we need to <code>use() Apache2</code> in
order to ensure that, no matter how the end-user configured
his mod_perl 2.0 installation, we can find the rest of the 
libraries we need.
</p>

<p>
Secure in the knowledge that our <code>Makefile.PL</code>
will be able to find all our other mod_perl 2.0
packages (wherever they live), we can proceed.
<code>ModPerl::MM</code> provides the <code>WriteMakefile()</code>
function, which is similar to the <code>ExtUtils::MakeMaker</code>
function of the same name and takes the same options.
The reason that you will want to use the
<code>WriteMakefile()</code> from <code>ModPerl::MM</code> is that,
through means highly magical, all of your 
mod_perl-specific needs are satisfied.
For instance, your module will be installed relative to 
<code>Apache/</code> or <code>Apache2/</code>, depending
on how mod_perl itself is installed.  Other nice features
are automatic inclusion of mod_perl's <code>typemap</code>
and the header files required for XS-based modules, as well as magical
cross-platform compatibility for Win32 compilation, which has been 
troublesome in the past.  
</p>

<p>
Keep in mind that neither <code>Apache2.pm</code> nor
<code>ModPerl::MM</code> are required in order to use
<code>Apache-Test</code> -
both are packages specific to mod_perl 2.0 and any
handlers you may write for this version (as will be touched
on later, <code>Apache-Test</code> can be used for
mod_perl 1.0 based modules as well, or even
Apache 1.3 or 2.0 modules independent of mod_perl,
for that matter).  The next package, <code>Apache::TestMM</code>,
is where the real interface for <code>Apache-Test</code>
begins.
</p>

<p>
<code>Apache::TestMM</code>, contains
the functions we will need to configure the test harness.
The first thing we do is import the <code>test()</code>
and <code>clean()</code> functions, which generate their respective 
<code>Makefile</code> targets so that we can run 
(and re-run) our tests.
After that, we call the <code>filter_args()</code> function.  This allows
us to configure various parts of our tests on the command line
using different options, which will be discussed later.
</p>

<p>
The final part of our configuration uses the
<code>generate_script()</code> method 
from the <code>Apache::TestRunPerl</code> class, which writes
out the script responsible
for running our tests, <code>t/TEST</code>.  
It is <code>t/TEST</code> that will be invoked 
when a user issues <code>make test</code>, although
the script can be called directly as well.
While <code>t/TEST</code> can end up containing lots of
information, if you crack it open, then you would see that the
engine that really drives the test suite is rather simple.
</p>

<pre>
  <code>
use Apache::TestRunPerl ();
Apache::TestRunPerl-&gt;new-&gt;run(@ARGV);
  </code>
</pre>

<p>
Believe it or not, the single call to <code>run()</code> does all
intricate work of starting, configuring, and stopping Apache, 
as well as running the individual tests we (still) have
yet to define.
</p>

<p>
Despite the long explanations, the net result of our activity
thus far has been a few modifications to a typical
<code>Makefile.PL</code> so that
it reflects the needs of both our mod_perl 2.0 module and
our forthcoming use of the <code>Apache-Test</code> infrastructure.
Next, we need to configure Apache for the tests
specific to the functionality in our handler.
</p>

<h3>Configuring Apache</h3>

<p>
Ordinarily, there are many
things you need to stuff into <code>httpd.conf</code>
in order to get the server responding to requests, only
some of which are related to the content the
server will provide.
The <code>Apache-Test</code> framework provides a minimal
Apache configuration, such as default <code>DocumentRoot</code>,
<code>ErrorLog</code>, <code>Listen</code>, and other settings
required for normal operation of the server.  In fact, with no
intervention on your part, <code>Apache-Test</code>
provides a configuration that enables you to successfully request 
<code>/index.html</code> from the server.  Chances are,
though, that you will need something above a basic
configuration in order to test your module appropriately.
</p>

<p>
To add additional settings to the defaults, we create
the file <code>t/conf/extra.conf.in</code>, adding
any required directories along the way.  If 
<code>Apache-Test</code> sees <code>extra.conf.in</code>, then
it would pull the file into its default configuration
using an <code>Include</code> directive (after some
manipulations we will discuss shortly).  This provides
a nice way of adding only the configuration data you
require for your tests, and saves you from the need to
worry about the mundane aspects of running the server.
</p>

<p>
One of the first aspects of <code>Apache::Clean</code>
we should test is whether it can clean up a simple,
static HTML file.  So, we begin our <code>extra.conf.in</code>
with the following:
</p>

<pre>
  <code>
PerlSwitches -w

Alias /level @DocumentRoot@
&lt;Location /level&gt;
  PerlOutputFilterHandler Apache::Clean
  PerlSetVar CleanLevel 2
&lt;/Location&gt;
  </code>
</pre>

<p>
This activates our output filter for requests to
<code>/level</code>.  Note the introduction of a new
directive, <code>PerlSwitches</code>, which allows you to pass
command line switches to the embedded perl interpreter.
Here, we use it to enable warnings, similar to the
way that <code>PerlWarn</code> worked in mod_perl 1.0.
<code>PerlSwitches</code> can actually take
any perl command line switch, which makes it a fairly
useful and flexible tool.  For example, we could use the <code>-I</code>
switch to extend <code>@INC</code> in place of
adding <code>use lib</code> statements to a
<code>startup.pl</code>, or use <code>-T</code>
to enable taint mode in place of the former
<code>PerlTaintMode</code> directive, which
is not part of mod_perl 2.0.
</p>

<p>
Next, we come to the familiar <code>Alias</code>
directive, albeit with a twist.
As previously mentioned, <code>Apache-Test</code>
configures several defaults, including <code>DocumentRoot</code>
and <code>ServerRoot</code>.
One of the nice features of <code>Apache-Test</code>
is that it keeps track of its defaults for you and provides
some helpful variable expansions.  In my particular case,
the <code>@DocumentRoot@</code> variable in the
<code>Alias</code> directive is replaced
with the value of the default <code>DocumentRoot</code>
that <code>Apache-Test</code> calculated for my build.
The real configuration ends up looking like
</p>

<pre>
  <code>
Alias /level /src/perl.com/Apache-Clean-2.0/t/htdocs
  </code>
</pre>

<p>
when the tests are run.  This is handy, especially
when you take into consideration that your tests may
run on different platforms.
</p>

<p>
The rest of the configuration closely resembles our example
from last time - using the 
<code>PerlOutputFilterHandler</code> to specify 
<code>Apache::Clean</code> as our output filter, and
<code>PerlSetVar</code> to specify the specific 
<code>HTML::Clean</code> level.  The only thing missing 
before we have prepared our module enough to run our
first test is some testable content in <code>DocumentRoot</code>.
</p>

<p>
As you can see from the <code>@DocumentRoot@</code>
expansion in the previous example, <code>DocumentRoot</code>
resolves to <code><i>ServerRoot</i>/t/htdocs/</code>,
so that is one place where we can put any documents we are
interested in retrieving for our tests.  So, we create
<code>t/htdocs/index.html</code> and place some
useful content in it.
</p>

<pre>
  <code>
&lt;i    &gt;&lt;strong&gt;&amp;quot;This is a test&amp;quot;&lt;/strong&gt;&lt;/i   &gt;
  </code>
</pre>

<p>
Our <code>index.html</code> contains a number of
different elements that <code>HTML::Clean</code> can tidy,
making it useful for testing various configurations of <code>Apache::Clean</code>.
</p>

<p>
Now we have all the Apache configuration that is required:
some custom configuration directives in <code>t/conf/extra.conf.in</code>
and some useful content in <code>t/htdocs/index.html</code>.  All that
is left to do is write the tests.
</p>













<h3>Writing the Tests</h3>

<p>
The Apache configuration we have created thus far
provides a way to test 
<code>Apache::Clean</code> through 
<code>/level/index.html</code>.  The result of this
request should be that the default
Apache content handler serves up <code>index.html</code>,
applying our <code>PerlOutputFilterHandler</code> to
the file before it is sent over the wire.  Given the
configured <code>PerlSetVar CleanLevel 2</code> we would expect
the end results of the request to be
</p>

<pre>
  <code>
&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
  </code>
</pre>

<p>
where tags are shortened and whitespace removed but the
<code>&amp;quot;</code> entity is left untouched.  Well,
maybe this is not what <i>you</i> would have expected, but
cracking open the code for <code>HTML::Clean</code>
reveals that <code>level(2)</code> includes the
<code>whitespace</code> and <code>shortertags</code>
options, but not the <code>entities</code> option.  This
brings us to the larger issue of test design and the
possibility that flawed expectations can mask true bugs -
when a test fails, is the bug in the test or in the code? - 
but that is a discussion for another time.
</p>

<p>
Given our configuration and expected results, we can craft
a test that requests <code>/level/index.html</code>, 
isolates the content from the server response, then tests the content
against our expectations.  The file <code>t/01level.t</code>
shown here does exactly that.
</p>

<pre>
  <code>
use strict;
use warnings FATAL =&gt; 'all';

use Apache::Test qw(plan ok have_lwp);
use Apache::TestRequest qw(GET);
use Apache::TestUtil qw(t_cmp);

plan tests =&gt; 1, have_lwp;

my $response = GET '/level/index.html';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;!);
  </code>
</pre>

<p>
<code>t/01level.t</code> illustrates a few of the things 
that will be common to most of the tests you will write. 
First, we do some bookkeeping and plan the number of 
tests that will be attempted using the <code>plan()</code>
function from <code>Apache::Test</code> - in our case just one.
The final, optional argument to <code>plan()</code>
uses the <code>have_lwp()</code> function to check
for the availability of the modules from
the <code>libwww-perl</code> distribution.  If 
<code>have_lwp()</code> returns true, then we know we can 
take advantage of the <code>LWP</code> shortcuts <code>Apache::TestRequest</code>
provides.  If
<code>have_lwp()</code> returns false, then no tests are
planned and the entire test is skipped at runtime.
</p>

<p>
After planning our test, we use the shortcut function 
<code>GET()</code> from <code>Apache::TestRequest</code>
to issue a request to <code>/level/index.html</code>.
<code>GET()</code> returns an <code>HTTP::Response</code>
object, so if you are familiar with the <code>LWP</code> 
suite of modules you should feel right at home with 
what follows.  Using the object in <code>$response</code> we
isolate the server response using the <code>content()</code>
method and compare it against our expected string.  The 
comparison uses a call to <code>ok()</code>, which will
report success if the two strings are equivalent.
</p>

<p>
 Keep in mind that
even though this example explicitly imported 
the <code>plan()</code>, <code>ok()</code>,
<code>have_lwp()</code>, and <code>GET()</code>
functions into our test script, that was just to
illustrate the origins of the different parts of the
test - each of these functions, along with just about all
the others you may want, are exported by default.  So,
the typical test script will usually just call
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;
  </code>
</pre>

<p>
and go from there.
</p>

<p>
That is all there is to writing the test.  In its
simplest form, using <code>Apache-Test</code> involves
pretty much the same steps as when 
writing tests using other Perl testing tools: <code>plan()</code>
the number of tests in the script, do some stuff,
and call <code>ok()</code> for each test you <code>plan()</code>.
<code>Apache-Test</code> and its utility classes merely offer
shortcuts that make writing tests against a 
running Apache server idiomatic.
</p>

<h3>Running the Tests</h3>

<p>
With all the preparation behind us - generating and
customizing the <code>Makefile.PL</code>, configuring
Apache with <code>extra.conf.in</code>, writing
<code>index.html</code> and <code>01level.t</code> -
we have all the pieces in place and can (finally) run our test.
</p>

<p>
There are a few different ways we can run the
tests in a distribution, but all require that we go
through the standard build steps first.
</p>

<pre>
  <code>
$ <b>perl Makefile.PL -apxs /usr/local/apache2/bin/apxs</b>
Checking if your kit is complete ...
Looks good
Writing Makefile for Apache::Clean

$ <b>make</b>
cp Clean.pm blib/lib/Apache2/Apache/Clean.pm
Manifying blib/man3/Apache::Clean.3
  </code>
</pre>

<p>
<code>Makefile.PL</code> starts the process by generating the
<code>t/TEST</code> script via the call to
<code>Apache::TestRunPerl-&gt;generate_script()</code>.
The additional argument we pass, <code>-apxs</code>, is
trapped by <code>Apache::TestMM::filter_args()</code>
and is used to specify the Apache installation we want to 
test our code against.  Here, I use <code>-apxs</code> to
specify the location of the <code>apxs</code> binary
in my local Apache DSO installation - for
static builds you will want to use <code>-httpd</code> to
point to the <code>httpd</code> binary instead.  By the
time <code>Makefile.PL</code> exits,
we have our test harness and know where our server lives.
</p>

<p>
Running <code>make</code> creates our build directory,
<code>blib/</code>, and installs <code>Clean.pm</code>
locally so we can use it in our tests.  Note that 
<code>ModPerl::MM</code> installed <code>Clean.pm</code>
relative to <code>Apache2</code>, magically following
the path of my current mod_perl 2.0 installation.
</p>

<p>
At this point, we can run our tests.  Issuing
<code>make test</code> will run all the tests in 
<code>t/</code>, as you might expect.  However, 
we can run our tests individually as well, which is particularly
useful when debugging.  To run a specific test we call
<code>t/TEST</code> directly and give it the name of the
test we are interested in.
</p>

<pre>
  <code>
$ <b>t/TEST t/01level.t</b>
*** setting ulimit to allow core files
ulimit -c unlimited; t/TEST 't/01level.t'
/usr/local/apache2/bin/httpd  -d /src/perl.com/Apache-Clean-2.0/t 
    -f /src/perl.com/Apache-Clean-2.0/t/conf/httpd.conf 
	-DAPACHE2 -DPERL_USEITHREADS
using Apache/2.1.0-dev (prefork MPM)

waiting for server to start: ..
waiting for server to start: ok (waited 1 secs)
server localhost:8529 started
01level....ok                                                                
All tests successful.
Files=1, Tests=1,  4 wallclock secs ( 3.15 cusr +  0.13 csys =  3.28 CPU)
*** server localhost:8529 shutdown
  </code>
</pre>

<p>
As you can see, the server was started, our test was run,
the server was shutdown, and a report was generated - all with
what is really minimal work on our part.  Major kudos to the
<code>Apache-Test</code> developers for making the
development of live tests as easy as they are.
</p>

<h3>Beyond the Basics</h3>

<p>
What we have talked about so
far is just the basics, and the framework is full of a number
of different options designed to make writing and debugging tests
easier.  One of these is the <code>Apache::TestUtil</code> package,
which provides a number of utility functions you can use in your 
tests.  Probably the most helpful of these is <code>t_cmp()</code>,
a simple equality testing function that also provides 
additional information when you run tests in verbose mode.
For instance, after adding <code>use Apache::TestUtil;</code>
to our <code>01level.t</code> test, we can alter the call
to <code>ok()</code> to look like
</p>

<pre>
  <code>
ok t_cmp(q!&lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;!, $content);
  </code>
</pre>

<p>
and the result would include expected and received
notices (in addition to standard verbose output)
</p>

<pre>
  <code>
$ <b>t/TEST t/01level.t -v</b>
[lines snipped]
01level....1..1
# Running under perl version 5.009 for linux
# Current time local: Mon May  5 11:04:09 2003
# Current time GMT:   Mon May  5 15:04:09 2003
# Using Test.pm version 1.24
# expected: &lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
# received: &lt;i&gt;&lt;b&gt;&amp;quot;This is a test&amp;quot;&lt;/b&gt;&lt;/i&gt;
ok 1
ok
All tests successful.
  </code>
</pre>

<p>
which is particularly helpful when debugging problems
reported by end users of your code.  See the 
<code>Apache::TestUtil</code> manpage for a long
list of helper functions, as well as the <code>README</code>
in the <code>Apache-Test</code> distribution for
additional command line options over and above
<code>-v</code>.
</p>

<p>
Of course, <code>01level.t</code> only tests one
aspect of our <code>Clean.pm</code> output filter, 
and there is much more functionality in the filter that
we might want verify.  So, let's take a quick look at some 
of the other tests that accompany the <code>Apache::Clean</code>
distribution.
</p>

<p> 
One of the features of <code>Apache::Clean</code> is that
it automatically declines processing non-HTML documents.
The logic for this was defined in just a few lines at
the start of our filter.
</p>

<pre>
  <code>
# we only process HTML documents
unless ($r-&gt;content_type =~ m!text/html!i) {
  $log-&gt;info('skipping request to ', $r-&gt;uri, ' (not an HTML document)');

  return Apache::DECLINED;
}
  </code>
</pre>

<p> 
A good test for this code would be verifying that content from a plain-text
document does indeed pass through our filter unaltered, even
if it has HTML tags that <code>HTML::Clean</code> would
ordinary manipulate. 
Our test suite includes a file <code>t/htdocs/index.txt</code>
whose content is identical to the <code>index.html</code> file
we created earlier.  Remembering that we already have an 
Apache configuration for <code>/level</code> that inserts
our filter into the request cycle, we can use a request for
<code>/level/index.txt</code> to test the decline logic.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;

plan tests =&gt; 1, have_lwp;

my $response = GET '/level/index.txt';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;i&gt;&lt;strong&gt;&amp;quot;This is a test&amp;quot;&lt;/strong&gt;&lt;/i&gt;!);
  </code>
</pre>

<p>
It may be obvious, but if you think about what we are 
really testing here it is not that the content is
unaltered - that is just what we use to measure
the success of our test.  The real test is against the criterion
that determines whether the filter acts on the content.
If we wanted to be really thorough, then we could add
</p>

<pre>
  <code>
AddDefaultCharset On
  </code>
</pre>

<p>
to our <code>extra.conf.in</code> to test the <code>Content-Type</code>
logic against headers that look like <code>text/html; charset=iso-8859-1</code>
instead of just <code>text/html</code>.  I actually have had
more than one person comment that using a regular expression for testing the
<code>Content-Type</code> is excessive - adding the
<code>AddDefaultCharset On</code> directive shows that
the regex logic can handle more runtime environments than a simple
<code>$r-&gt;content_type eq 'text/html'</code> check.  Oh,
the bugs you will find, fix, and defend when 
you start writing tests.
</p>













<h3>More and More Tests</h3>

<p> 
What other aspects of the filter can we put to the test?
If you recall from our discussion of output filters last
time, one of the responsibilities of filters that alter
content is to remove the generated <code>Content-Length</code>
header from the server response.  The relevant code for this
in our filter was as follows.
</p>

<pre>
  <code>
# output filters that alter content are responsible for removing
# the Content-Length header, but we only need to do this once.
$r-&gt;headers_out-&gt;unset('Content-Length');
  </code>
</pre>

<p>
Here is the test for this bit of logic, which checks that the
<code>Content-Length</code> header is indeed present for plain documents,
but removed by our filter for HTML documents.  Again, we will
be using the existing <code>/level</code> URI to request
both <code>index.txt</code> and <code>index.html</code>.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;

plan tests =&gt; 2, have_lwp;

my $response = GET '/level/index.txt';
ok ($response-&gt;content_length == 58);

$response = GET '/level/index.html';
ok (! $response-&gt;content_length);
  </code>
</pre>

<p>
Note the use of the <code>content_length()</code>
method on our <code>HTTP::Response</code> object to retrieve
the <code>Content-Length</code> of the server response.  Remember
that you have all the methods from that class to choose from
in your tests.
</p>

<p>
The final test we will take a look at is
the example we used previous time to illustrate our filter
does indeed co-exist with both mod_include and mod_cgi.
As it turns out, the example was taken right from the
test suite (always a good place from which to 
draw examples).  Here is the <code>extra.conf.in</code>
snippet.
</p>

<pre>
  <code>
Alias /cgi-bin @ServerRoot@/cgi-bin
&lt;Location /cgi-bin&gt;
  SetHandler cgi-script

  SetOutputFilter INCLUDES
  PerlOutputFilterHandler Apache::Clean

  PerlSetVar CleanOption shortertags
  PerlAddVar CleanOption whitespace
  Options +ExecCGI +Includes
&lt;/Location&gt;
  </code>
</pre>
 
<p>
The nature of our test requires that both mod_include
and a suitable CGI platform (either mod_cgi or mod_cgid)
be available to Apache -
without both of these, our tests are doomed to failure,
so we need a way to test whether these modules are available
to the server before planning the individual tests.
Also required are some CGI scripts, the location 
of which is specified by expanding <code>@ServerRoot@</code>.
To include these scripts, we could 
just create a <code>t/cgi-bin/</code> directory and
place the relevant files in it.  However, 
any CGI scripts we create would probably
include a platform-specific shebang line like
<code>#!/usr/bin/perl</code>.  A better solution is to
generate the scripts on-the-fly, specifying a shebang
line that matches the version of Perl we are using
to build and test the module.
</p>

<p>
Despite the extra work required,
the test script used for this test is only
a bit more complex than others we have seen so far.
</p>

<pre>
  <code>
use Apache::Test;
use Apache::TestRequest;
use Apache::TestUtil qw(t_write_perl_script);

use File::Spec::Functions qw(catfile);

plan tests =&gt; 4, (have_lwp &amp;&amp; 
                  have_cgi &amp;&amp;
                  have_module('include'));

my @lines = &lt;DATA&gt;;
t_write_perl_script(catfile(qw(cgi-bin plain.cgi)), @lines[0,2]);
t_write_perl_script(catfile(qw(cgi-bin include.cgi)), @lines[1,2]);

my $response = GET '/cgi-bin/plain.cgi';
chomp(my $content = $response-&gt;content);

ok ($content eq q!&lt;strong&gt;/cgi-bin/plain.cgi&lt;/strong&gt;!);
ok ($response-&gt;content_type =~ m!text/plain!);

$response = GET '/cgi-bin/include.cgi';
chomp($content = $response-&gt;content);

ok ($content eq q!&lt;b&gt;/cgi-bin/include.cgi&lt;/b&gt;!);
ok ($response-&gt;content_type =~ m!text/html!);

__END__
print &quot;Content-Type: text/plain\n\n&quot;;
print &quot;Content-Type: text/html\n\n&quot;;
print '&lt;strong&gt;&lt;!--#echo var=&quot;DOCUMENT_URI&quot; --&gt;&lt;/strong&gt;';
  </code>
</pre>

<p>
The first thing to note is that we have joined the familiar
call to <code>have_lwp()</code> with additional calls
to <code>have_cgi()</code> and <code>have_module()</code>.
The <code>Apache::Test</code> package comes with a number
of handy shortcuts for querying the server for
information.  <code>have_cgi()</code> returns true
if either mod_cgi or mod_cgid are installed.
<code>have_module()</code> is more generic and can
be used to test for either Apache C modules or Perl modules - 
for instance, <code>have_module('Template')</code> could
be used to check whether the 
<a href="http://template-toolkit.org/"><code>Template Toolkit</code></a>
is installed.
</p>

<p>
For generation of the CGI scripts, we use the <code>t_write_perl_script()</code>
function from the <code>Apache::TestUtil</code> package.
<code>t_write_perl_script()</code> takes two arguments, the
first of which is the name of the file to generate, relative to the
<code>t/</code> directory in the distribution.  If the
file includes a path, any necessary directories are automatically
created.  In the interests of portability, we use
<code>catfile()</code> from the <code>File::Spec::Functions</code>
package to join the file with the directory.  In general,
you will want to keep <code>File::Spec</code> and its
associated classes in mind when writing your tests - you never
know when somebody is going to try and run them on 
Win32 or VMS.  The second argument to <code>t_write_perl_script()</code>
is a list of lines to append to the file after the (calculated) 
shebang line. 
</p>

<p>
Although <code>t_write_perl_script()</code> cleans up any 
generated files and directories when the test completes, if we were to 
intercept <code>include.cgi</code> before removal
it would look similar to something we would have written
ourselves.
</p>

<pre>
  <code>
#!/src/bleedperl/bin/perl
# WARNING: this file is generated, do not edit
# 01: /src/bleedperl/lib/site_perl/5.9.0/i686-linux-thread-multi/
      Apache/TestUtil.pm:129
# 02: 06mod_cgi.t:18
print &quot;Content-Type: text/html\n\n&quot;;
print '&lt;strong&gt;&lt;!--#echo var=&quot;DOCUMENT_URI&quot; --&gt;&lt;/strong&gt;';
  </code>
</pre>

<p>
As you probably have guessed by now, just as we 
ran tests against scripts in the (generated) 
<code>t/cgi-bin/</code> directory, we can add other directories
to <code>t/</code> for other kinds of tests.
For instance, we can create <code>t/perl-bin/</code>
to hold standard <code>ModPerl::Registry</code> scripts
(remember, you don't need to generate a shebang
line for those).
We can even create <code>t/My/</code> to hold a custom
<code>My::ContentGenerator</code> handler, which can be used just
like any other Perl module during Apache's runtime.
All in all, you can simulate practically any
production environment imaginable.
</p>

<h3>But Wait, There's More!</h3>

<p>
The tests presented here should be enough to get
you started writing tests for your own modules, but
they are only part of the story.  If you are interested
in seeing some of the other tests written to support this article, the
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz"><code>Apache::Clean</code>
distribution</a> is full
of all kinds of different tests and test approaches, including some
that integrate custom handlers as well as one that tests
the POD syntax for the module.  In fact, you will find 26 different
tests in 12 test files there, free for the taking.
</p>

<p>
Stuck using mod_perl 1.0?  One of the best things about <code>Apache-Test</code>
is that it is flexible and intelligent enough to be
used for mod_perl 1.0 handlers as well.
In fact, the <a href="http://search.cpan.org/~stas/Apache-Test-1.01/">recent
release</a> of <code>Apache-Test</code> as a CPAN module
outside of the mod_perl 2.0 distribution makes it even
easier for all mod_perl developers to take advantage of
the framework.  For the most part, the instructions in
this article should be enough to get you going writing
tests for 1.0-based modules - the only changes specific to
1.0 modules rest in the <code>Makefile.PL</code>.  I took
the time to whip up
a version of <code>Apache::Clean</code> for mod_perl 1.0 that
parallels the functionality in these articles,
which you can find
<a href="http://www.modperlcookbook.org/~geoff/perl.com/Apache-Clean-2.0.tar.gz">next to</a>
the 2.0 version.  The 1.0 distribution runs against
the exact same <code>*.t</code> files (where applicable)
and includes a sample 1.0 <code>Makefile.PL</code>.
</p>

<p>
Personally, I don't know how I ever got along without 
<code>Apache-Test</code>, and I'm sure that once you start using
it you will feel the same.  Secretly, I'm hoping that 
<code>Apache-Test</code> becomes so popular that end-users
start wrapping their bug reports up in little, self-contained,
<code>Apache-Test</code>-based tarballs so anyone
can reproduce the problem.
</p>

<h3>More Information</h3>

<p>
This article was derived from Recipe 7.7 in the 
<a href="http://www.modperlcookbook.org/"><i>mod_perl Developer's Cookbook</i></a>, 
adjusted to accommodate both mod_perl 2.0 and changes in the overall 
<code>Apache-Test</code> interface that have happened
since publication.  Despite these differences, the recipe 
is useful for its additional descriptions and coverage
of features not discussed here.  You can read Recipe 7.7, as well
as <a href="http://www.modperlcookbook.org/chapters/ch07.pdf">the rest
of Chapter 7</a> from the book's <a href="http://www.modperlcookbook.org/">website</a>.
Also, in addition to the
<a href="http://search.cpan.org/~stas/Apache-Test-1.01/lib/Apache/Test.pm"><code>Apache-Test</code></a>
manpage and 
<a href="http://search.cpan.org/src/STAS/Apache-Test-1.01/README"><code>README</code></a>
there is also the <code>Apache-Test</code> tutorial on
the <a href="http://perl.apache.org/docs/general/testing/testing.html">mod_perl
Project website</a>, all of which are valuable sources of information.
</p>

<h3>Thanks</h3>

<p>
The <code>Apache-Test</code> project is the result of the tireless efforts of many, many
developers - far too many to name individually here.  However, there has has been a recent 
surge of activity as <code>Apache-Test</code> made its way to CPAN, especially in making
it more platform aware and solving a few back compatibility problems with the old
<code>Apache::test</code> that ships with mod_perl 1.0.  Special thanks are due 
to Stas Bekman, David Wheeler, and Randy Kobes for helping to polish
<code>Apache-Test</code> on Win32 and Mac OS X without requiring
major changes to the API.
</p>

                                    </div>


                                </div>
                                <div class="asset-footer">

    
                                    <div class="entry-categories">
                                        <h4>Categories<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="/pub/mod-perl/" rel="tag">mod_perl</a></li>
                                        </ul>
                                    </div>
    


                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2010/07/">July 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.02" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
