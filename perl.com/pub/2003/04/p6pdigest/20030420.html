<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/2003/04/p6pdigest/20030420.html">
<dc:title>This week on Perl 6, week ending 2003-04-20</dc:title>
<dc:description> You know how it is, you go away for a lovely weekend folk festival in Wales, you have a really good, relaxed time, singing yourself hoarse and generally forgetting all about technology before coming home to email from the...</dc:description>
<dc:creator>Piers Cawley</dc:creator>
<dc:date>2003-04-20T00:00:00-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    
    <link rel="prev bookmark" href="/pub/2003/04/17/filters.html" title="Filters in Apache 2.0" />
    <link rel="next bookmark" href="/pub/2003/04/22/pool.html" title="POOL" />
    
    
    <title>This week on Perl 6, week ending 2003-04-20 - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1114" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">This week on Perl 6, week ending 2003-04-20</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-04-20T00:00:00-08:00">April 20, 2003 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        <!-- sidebar begins --><!-- don't move sidebars --><!-- sidebar ends --><p>You know how it is,you go away for a lovely weekend folk festival in Wales,you have a really good,relaxed time,singing yourself hoarse and generally forgetting all about technology before coming home to email from the perl.com editor asking if he could have the summary about half an hour ago,and then you skim through the lists and find nearly 300 messages unread?You do?I thought it was just me.So,having utterly failed (by virtue of being elsewhere) to get a summary written by Monday,I'm currently shooting for 'getting it written'.Welcome to this week's Perl 6 summary; all the fun of the Perl 6 lists with none of the tedious 'reading every message'.</p><p>Let's see if I can't ease myself back into the Perl 6 vibe by summarizing the still rather quiet perl6&#45;internals list first...</p><h4><a name="Building_Parrot_on_Win32">Building Parrot on Win32</a></h4><p>Steve Fink has been busy committing (in the CVS rather than the culpability sense) Mattia Barbon's patches to get Parrot building happily in a Win32 environment.If you have such an environment,now would probably be a good time to grab the latest Parrot from CVS and see if it builds for you.I'm sure the list would be grateful to hear of your experience,good or bad.</p><h4><a name="PMC_documentation">PMC documentation</a></h4><p>After seemingly weeks in the wilderness with very little feedback,Alberto Sim&#245;es finally got some comments on (and thanks for) his latest PMC doc patches from Steve Fink and Brent Dax.The docs haven't made it into the distribution yet though,but it can only be a matter of time.</p><p><a href='http://groups.google.com/groups?threadm=20030414083708.GA1510@alfarrabio.di.uminho.pt'>http://groups.google.com/groups</a></p><h4><a name="Is_PMC_size_fixed?">Is PMC size fixed?</a></h4><p>Mattia Barbon wanted to know if it would eventually become possible to create PMCs with additional data members.Dan says not; PMCs are allocated from arenas which apparently means they need to be the same size (variable sized PMCs would mean adding complexity to the garbage collector,which is already complicated enough thanks very much...)</p><p><a href='http://groups.google.com/groups?threadm=Mahogany&#45;0.64.2&#45;628&#45;20030415&#45;212901.00@rbnet.it'>http://groups.google.com/groups</a></p><h4><a name="Dan_Does_Design_Decisions">Dan Does Design Decisions</a></h4><p>Dan announced a few design decisions:</p><ul><li>It's time to start assigning permanent opcode numbers to some of the opcodes.</li><li>There's some new stack ops,<code>halfpop[insp]</code>.</li><li>We now have <code>can</code> and <code>does</code> ops.</li><li>Dan explained that <code>can</code> and <code>does</code> were there to support fast interface polymorphism.</li></ul><p><a href='http://groups.google.com/groups?threadm=a0521060abac206fe31be@%5B63.120.19.221%5D'>http://groups.google.com/groups</a> -- permanent opcode numbers</p><p><a href='http://groups.google.com/groups?threadm=a05210609bac203bc6e40@%5B63.120.19.221%5D'>http://groups.google.com/groups</a> -- halfpop</p><p><a href='http://groups.google.com/groups?threadm=a0521060bbac22af49f56@%5B63.120.19.221%5D'>http://groups.google.com/groups</a> -- can/does</p><p><a href='http://groups.google.com/groups?threadm=a05210609bac4968b906b@%5B63.120.19.221%5D'>http://groups.google.com/groups</a> -- Interfaces/Classes</p><h4><a name="Short-lived_memory_allocation">Short-lived memory allocation</a></h4><p>Luke Palmer wondered what the Right Way was to allocate dynamic memory that wouldn't be needed beyond a function invocation.The answer,of course,was 'use Parrot memory management and let Garbage Collection work its shiny magic'.Toward the end of the thread Dan let on that Parrots Garbage Collector is 'always going to be walking the system stack' so there was no need to worry about anchoring the newly allocated buffer to the root set for the duration of the function invocation,which seems to be a new commitment.Both Dan and Steve Fink observed that the memory documentation could use updating to clarify best practice for everyone.Volunteers?</p><p><a href='http://groups.google.com/groups?threadm=ygc65pffcoo.fsf@babylonia.flatirons.org'>http://groups.google.com/groups</a></p><h4><a name="How_deep_is_clone?">How deep is <code>clone</code>?</a></h4><p>Alberto Sim&#245;es asked how deeply the <code>clone</code> operator worked.According to Leopold T&#246;tsch it's a deep,recursive clone,which he noted makes for interesting times when dealing with self referencing structures (Dan reckoned that it shouldn't be too bad if you take advantage of the GC system's graph traversal smarts...).Luke Palmer wondered why the default was a deep copy as,he claimed,deep copies were seldom needed.He wondered how to make a shallow copy.Leo suggested extending clone with an extra parameter to specify deep or shallow copying.Dan said that it is the way it is because he said so,and that one would make a shallow copy with assign.</p><p><a href='http://groups.google.com/groups?threadm=20030416112524.GA9757@alfarrabio.di.uminho.pt'>http://groups.google.com/groups</a></p><h4><a name="Shared_memory">Shared memory</a></h4><p>David Robins wondered whether Parrot's memory allocation system would cope with sharing memory between processes and found some messages in the archive that seemed to imply that 'it will cope eventually'.He wondered <i>how</i> it would cope.Warnock's Dilemma applies...</p><p><a href='http://groups.google.com/groups?threadm=Pine.LNX.4.44.0304170912260.19245&#45;100000@davidrobins.net'>http://groups.google.com/groups</a></p><h4><a name="A_New_GC_approach?">A New GC approach?</a></h4><p>Kurt Stephens announced that he had a partially written 'conservative,non&#45;copying &#34;treadmill&#34;' GC system that could work in real time without stopping the world.He wondered if it could be useful for Parrot.No comments so far...</p><p><a href='http://groups.google.com/groups?threadm=3E9F3F20.306@kurtstephens.com'>http://groups.google.com/groups</a></p><p><a href='http://kurtstephens.com/research/index.html'>http://kurtstephens.com/research/index.html</a></p><h4><a name="IMC_and_variable_number_of_arguments">IMC and variable number of arguments</a></h4><p>K Stol wondered how to handle a variable number of function arguments in IMC code.Dan remarked that it was covered by the Parrot calling conventions (presumably IMC code doesn't do the dfull Parrot calling conventions though).Leo T&#246;tsch suggested making sure that the last thing pushed onto the argument stack was the number of arguments,and Will Coleda suggested passing a single PMC like a PerlArray...</p><p><a href='http://groups.google.com/groups?threadm=BAY1&#45;DAV58yhJBbdbuN0000d25d@hotmail.com'>http://groups.google.com/groups</a></p><h3><a name="Meanwhile,_over_in_perl6-language">Meanwhile,over in perl6-language</a></h3><p>If I were asked to summarize this week's traffic on perl6&#45;language with one word,that word would be 'Types'.It turns out that thinking about types,and how they should behave in Perl 6,is hard.I don't envy Damian the writing of the next Exegesis,that's for sure.</p><p>Instead of presenting the threads in roughly chronological order this week I'm going to deal with the none type related threads first and then attempt to sketch the current issues with types without quite so much reference to individual threads.Cover me,I'm going in...</p><h4><a name="Currying_questions">Currying questions</a></h4><p>Last week,Ralph Mellor had asked whether currying assumptions could be overridden when the curried function was called and Luke Palmer had said he didn't think so.This week Damian answered with a rather more authoritative &#34;No,they can't be overridden,just make a call to the original function.&#34;.Ralph had also wondered if there would be a way to specify whether currying assumptions were made by binding or by copying a value (currently,they get bound,just like they do when you call a function normally (I wonder what happens when the function prototype specifies <code>is copy</code>)).Damian said that,if you wanted to make an assumption based on a copy then you needed to explicitly make that copy.</p><p><a href='http://groups.google.com/groups?threadm=3E968850.2000604@self&#45;reference.com'>http://groups.google.com/groups</a> -- Ralph's original questions</p><h4><a name="Are_all_list_constructors_iterators?">Are all list constructors iterators?</a></h4><p>'Marek Ph.' admired the shiny goodness that is lazy evaluation and wondered if <i>all</i> list constructors were actually iterators.He wanted to know if that meant that</p><pre><code>    @a = 1 .. Inf;    splice @a, 5, 2;</code></pre><p>would yield</p><pre><code>    @a == (1 .. 4, 7 .. Inf)</code></pre><p>He also asked if the <code>x</code> operator would generate an iterator too.Luke Palmer thought the answer to both questions was &#34;Yes&#34;.</p><p><a href='http://groups.google.com/groups?threadm=200304140800.04087.philipp.marek@bmlv.gv.at'>http://groups.google.com/groups</a></p><h4><a name="..._but_foo('bar')">...but foo('bar')</a></h4><p>St&#233;phane Payrard spotted a possible ambiguity in Perl 6's grammar.He wanted to know if</p><pre><code>    ... but foo('bar')</code></pre><p>set the property 'foo' to the value 'bar',or did it create a property with the name being the value returned by a function call of <code>foo('bar')</code>.He wondered what the syntax would be to get the 'other' meaning.Luke Palmer thought the first part was that the property 'foo' would get set to 'bar' (so do I,unless the thing implementing the property has some special semantics).He suggested that to force the call to the function to get a property name one would do one of:</p><pre><code>    ... but $(foo('bar'))</code></pre><p>or</p><pre><code>    ... but &#38;foo.('bar')</code></pre><p>I prefer the second of those two.</p><p><a href='http://groups.google.com/groups?threadm=20030414194736.GF2610@stefp.dyndns.org'>http://groups.google.com/groups</a></p><h4><a name="Perl_6_parser_questions">Perl 6 parser questions</a></h4><p>Right at the end of last week,Austin Hastings asked a bunch of questions about the behaviour of the Perl 6 parser.He wondered,for instance,if,in the future,he'd be able to (usefully) say:</p><pre><code>    #!/usr/bin/perl6.1    use Perl6::Grammar v6.0.0.2;</code></pre><p>Larry answered this question (&#34;I don't see why not&#34;) and all of Austin's other questions on this topic.Apparently the Perl 6 Parser will be documented 'whenever Apocalypse 18 comes out'.</p><p><a href='http://groups.google.com/groups?threadm=20030413195322.44208.qmail@web12306.mail.yahoo.com'>http://groups.google.com/groups</a></p><h4><a name="Initializations_outside_of_control_flow">Initializations outside of control flow</a></h4><p>Mark J.Reed asked about elegant ways of initializing shared variables.He wanted something a little neater than the blunderbuss of a <code>BEGIN</code> block.Larry obliged with one of his 'thinking aloud' posts which,while not giving us a final answer does give us a few signposts.It's looking like we'll have traits along the lines of:</p><pre><code>    state $where is begin($value);    state $where is check($value);    state $where is  init($value);    state $where is first($value);</code></pre><p>Where the traits work analogously to <code>BEGIN</code>,<code>CHECK</code>,<code>INIT</code> and <code>FIRST</code>.</p><p><a href='http://groups.google.com/groups?threadm=20030415143435.GD7176@charm.turner.com'>http://groups.google.com/groups</a></p><p><a href='http://groups.google.com/groups?threadm=20030415181942.GA11245@wall.org'>http://groups.google.com/groups</a></p><h4><a name="The_new_returns_keyword">The new <code>returns</code> keyword</a></h4><p>David Storrs was a little worried about the possible clash between the new <code>returns</code> keyword &#45;&#45; introduced in Apocalypse 6 &#45;&#45; and <code>return</code>.Michael Lazzaro pointed out that the 'possible clash' was almost certainly deliberate,after all:</p><pre><code>    sub foo returns Bar {...}</code></pre><p>reads rather well.David had used the example <code>my $spot returns Dog</code>,which does look rather ugly,but Michael pointed out,in the case of a variable declaration,it made more sense to use <code>my $spot of Dog</code> or even <code>my Dog $spot</code>.Michael commented that this choice of syntax meant the programmer was able to pick the most readable phrase for a given situation.</p><p><a href='http://groups.google.com/groups?threadm=CCE85CBE&#45;6F72&#45;11D7&#45;A307&#45;00050245244A@cognitivity.com'>http://groups.google.com/groups</a></p><h4><a name="A17_early_discussion:_Perl_6_threading_proposal">A17 early discussion: Perl 6 threading proposal</a></h4><p>Austin Hastings posted what would once have been called an RFC about Perl 6's threading model.No comments so far.</p><p><a href='http://groups.google.com/groups?threadm=20030415182938.6630.qmail@web12306.mail.yahoo.com'>http://groups.google.com/groups</a></p><h4><a name="wrap_from_Synopsis_6"><code>wrap</code> from Synopsis 6</a></h4><p>David Storrs wondered if the new <code>.wrap</code> method,which returns a unique id identifying the particular 'wrapper' could have an associated warning if the resulting id wasn't stored somewhere.Adam D.Lopresto and Austin Hastings weren't keen...</p><p><a href='http://groups.google.com/groups?threadm=20030416074404.A72173@megazone.bigpanda.com'>http://groups.google.com/groups</a></p><h4><a name="The_difference_between_-_$arg_{...}&gt;_and_sub_($arg)_{...}">The difference between <code>-</code> $arg {...}&gt; and <code>sub ($arg) {...}</code></a></h4><p>David Storrs asked for a 'micro&#45;Exegesis' on the difference between <code>-</code> $foo {...}&#62; and <code>sub ($foo) {...}</code> since they both seemed to generate anonymous subroutines.There were an awful lot of responses to this.Essentially the difference is that a 'pointy block' (my coinage I think) is just a block that has a signature.The main difference is what happens to a <code>return</code>.</p><p>In a block or a pointy block,a <code>return</code> returns from the subroutine that lexically contains that block,not simply from the block itself.If you want to leave a block prematurely without returning from its enclosing subroutine,you would use the <code>leave</code> keyword.</p><p>This distinction between a Block and a Sub allows for some rather neat (Smalltalkish) idioms</p><pre><code>    multi iterate_over_file( String $path: Block &#38;block ) {        my $fh = open File: '&#60;', $path or            fail &#34;Couldn't open $path: $!&#34;;        while &#60;$fh&#62; {            &#38;block($_);        }    }    sub find_user ($user_name) {        iterate_over_file &#34;/etc/passwd&#34; &#45;&#62; $line {            return $line but true if /^$user_name/;        }        return undef;    }</code></pre><p>This is a somewhat contrived example,but I think it's useful as an illustration.If a Block were exactly the same as a sub,then the <code>return</code> in <code>find_user</code> would return to the middle of the <code>while</code> loop in <code>iterate_over_file</code> and <code>iterate_over_file</code> would only return after it had gone through every line in the password file,which would mean that <code>find_user</code> would always return undef.However,a return from inside a block returns from the subroutine <i>containing</i> the block so <code>find_user</code> behaves as expected and we get to write powerful control structures without having to resort to macros.I do wonder if the it would be possible for a function like <code>iterate_over_file</code> to <code>CATCH</code> the block's Return exception though...</p><p><a href='http://groups.google.com/groups?threadm=20030416074937.B72173@megazone.bigpanda.com'>http://groups.google.com/groups</a></p><h4><a name="Compulsorily_named_parameters?">Compulsorily named parameters?</a></h4><p>The debate over declaring non optional named parameters continued as Damian joining in.The current consensus appears to be that the various optional/named/slurpy shorthands introduced in Apocalypse 6 should stay pretty much as they are,but that it should be possible to declare more complex parameter requirements using sensibly named traits.John Siracusa still wants a more 'powerful' shorthand,but there doesn't seem to be anyone taking his side on that.</p><p><a href='http://groups.google.com/groups?threadm=3E99F811.30603@conway.org'>http://groups.google.com/groups</a></p><h4><a name="Multimethod_invocants">Multimethod invocants</a></h4><p>Multimethods still appear to be causing some confusion,mostly to do with how they are called and dispatched,and which method parameters participate in the dispatch.There's a largish contingent (and I probably my count myself a member of that contingent,spot the bias) who would like to be able to write:</p><pre><code>    multi infix:@ (Number $x, Number $y) { new Point: $x, $y }    class point {        ...        multi make_rectangle ( Point $p ) {            new Rectangle: $_, $p;        }        multi make_rectangle ( Number $x, Number $y ) {            .make_rectangle( $x @ $y );        }    }</code></pre><p>Which isn't allowed.Instead you would have to write:</p><pre><code>    multi make_rectangle ( Point $p, Point $q ) {        new Rectangle: $p, $q;    }    multi make_rectangle ( Point $p, Number $x, Number $y ) {        make_rectangle ($p, $x @ $y);    }</code></pre><p>And you also have to be wary of</p><pre><code>    my Point $p;    ...    $p.make_rectangle($x @ $y);</code></pre><p>which would first try to dispatch to Point's <code>make_rectangle</code> 'unimethod',only attempting to dispatch via a multimethod if there is no such method.Personally,I think there's room for a spoonful or two of syntactic sugar to allow for the 'method variant' style of declaration as well as the full on generic multimethod style (which would,of course,underpin the more restricted method variant style).However,if it doesn't exist out of the box I expect someone (me?) will write a set of macros to make things work.</p><p>In the message referenced,Damian explains the current state of the multimethod art...</p><p><a href='http://groups.google.com/groups?threadm=3E99FEA8.2090009@conway.org'>http://groups.google.com/groups</a></p><h3><a name="Types...">Types...</a></h3><p>Well,that's 100 or so messages accounted for.Which leaves another 173 messages remaining all of which concern types.The problem as I see it is that different people seem to understand different things from the word type,and there's a lot of people talking at cross purposes as well as a fair amount of axe grinding going on.</p><p>Now,I could just punt and write something like &#34;Everyone except Leon Brocard talked for ages about types.Here are the links to those threads&#34; which would at least has the virtue of getting the god awful running joke out of the way,but that would smack of cheating.So,what I'm going to do is to only cheat slightly.At the bottom of this section you'll find links to all the threads that discussed types this week.However,before that I'll try give you a (biased) overview of the issues involved and the areas of confusion.</p><h4><a name="An_illustrative_quotation_from_Lewis_Carroll">An illustrative quotation from Lewis Carroll</a></h4><blockquote><p>&#34;The name of the song is called 'Haddocks' Eyes.'&#34; [said the White Knight.]</p><p>&#34;Oh,that's the name of the song,is it?&#34; Alice said,trying to feel interested.</p><p>&#34;No,you don't understand,&#34; the Knight said,looking a little vexed.&#34;That's what the name is called.The name really is 'The Aged,Aged Man.'&#34;</p><p>&#34;Then I ought to have said 'That's what the song is called'?&#34; Alice corrected herself.</p><p>&#34;No you oughtn't: that's another thing.The song is called 'Ways and Means' but that's only what it's <i>called</i>,you know!&#34;</p><p>&#34;Well,what is the song then?&#34; said Alice,who was by this time completely bewildered.</p><p>&#34;I was coming to that,&#34; the Knight said.&#34;The song really is 'A&#45;sitting On a Gate': and the tune's my own invention.&#34;</p><p>-- From Alice Through The Looking Glass,by Lewis Carroll</p></blockquote><h4><a name="Two_types_of_type">Two types of type</a></h4><p>Perl 6 draws an important distinction between 'variable type' and 'value type'.A variable is a binding between a name and a container.The variable type is the type of the container associated with the variable's name.A variable's 'value type' is the expected type of the value stored in the variable's container.As far as I can tell,Perl is weirder than the average programming language in this respect in that it allows the programmer to specify both sorts of type.In C for instance,a value doesn't know its own type,it's just an area of memory that is interpreted according to the type of the variable that it is accessed via (or according to the type it is cast into).Meanwhile,in lisp like languages,'variables' are simply keys in a symbol table,and the values in that symbol table are untyped pointers to values which know their own type.</p><p>Perl 6's symbol tables are rather more like Lisp symbol tables than C's,with the added wrinkle that the symbol table values are rather more sophisticated containers than simple generic pointers.This complexity arises for a couple of reasons:</p><dl><dt><a name="Tied_variables.">Tied variables.</a></dt><dd>Instead of storing a variable's value in one of the core container types (Array,Hash,Scalar),it can be useful to use a custom container type to allow for 'magical' behaviour:<pre><code>    my $FTSE is ShareIndex('FTSE');    print &#34;$FTSE&#34;;    # FTSE 100 Index: 3916.70 (+27.50/+0.7%) at 2003042216:40</code></pre>	</dd><dt><a name="Context">Context</a></dt><dd>Context is really important to Perl.If you look at an array variable in a numeric context,then you get the number of items in the array; in list context,a list of all the items in the array; in a scalar context,a pointer to the array.This context dependent behaviour is best handled by the container object,possibly with the assistance of the contained object,but not always.</dd></dl><p>Scalars turn out to be one of the more remarkable types of Perl containers.At their simplest they can be thought of as a container which can hold at most one 'atomic' thing.Perl 5 scalars have three(?) slots for Number,String and Reference values (On IRC,Dan tells me that Perl 6 scalars will probably have slots for String,Float,Integer,Boolean and Reference values).These different 'scalar value types' can,with certain restrictions be treated without regard to their 'actual' type: A Number in a string context will give a sensible string representation,a string in a number context will give an appropriate numeric value,but not every possible scalar value type can be sensibly viewed as any other type; if you try and use a number in a reference context,you're going to get an error for instance.For added fun,it's perfectly possible for a scalar variable to contain both a Number value and a String value (In Perl 5,<a href='TODO'>Scalar::Util</a> provides a nice interface to this preexisting capability.On IRC,Dan suggests that the Perl 6ish way of doing this will probably be <code>my $i = 4 but &#34;Bibble!&#34;;</code>).</p><h4><a name="What_are_value_type_declarations_for?">What are value type declarations for?</a></h4><p>Some people see value type declarations as being important for programmer safety.They want to see a situation where:</p><pre><code>    my Number $foo = some_function_returning_a_string();</code></pre><p>or</p><pre><code>    sub a_func (Number $param) { ... }    a_func(&#34;A string&#34;);</code></pre><p>will throw exceptions,preferably at compile time.</p><p>Others want to see those same code fragments coerce any values assigned to them into the appropriate types (possibly with a warning) and see value type declarations simply as a way of letting the compiler do automatic optimization of code (if you have declared that a given variable will only contain,say,a number,you can (at least) get rid of a layer of indirection in accessing that value).</p><p>Others don't really care one way or the other about whether or not to coerce,they just want to use value types in setting up multimethods.</p><p>Still others don't really like the idea of declaring types at all,but do see value in ML like type inference for programmer safety reasons...</p><p>Others want to let the programmer choose,and worry about how to implement something which will let that happen.I'm a 'let the programmer choose,and the compiler optimize what it can' kind of guy.</p><h4><a name="Are_types_the_same_as_objects?">Are types the same as objects?</a></h4><p>If types are the same as objects,do they all inherit from a common base class?If they do,what does the hierarchy look like?What about interfaces?Do they need to be explicitly declared or can they be inferred.If they can be inferred,what about the problem of:</p><pre><code>    class Tree {        method feed {...}        method grow {...}        method bark {...}        ...    }    interface Canine {        method feed {...}        method grow {...}        method bark {...}    }    class Borzoi {        method feed {...}        method grow {...}        method bark {...}    }    ...    multi treat($vet, Canine $critter ) {...}        treat($some_vet, Tree.new); # Should this fail?</code></pre><p>Arrghh!!!Make the hurting stop!</p><p>However,I don't care what Dan says,I want every type to have an associated class,and I want them all to inherit from some sort of common base class (at least conceptually,and,if I'm prepared to take the performance hit and jump through the hoops,actually.Sometimes you need to override Scalar's behaviour (or whatever)) but I don't think the inheritance trees that have been bandied about so far even come close to expressing the semantics we need.Expect a longish post to Perl 6 language on this at some point.Probably with (more or less) pseudo code.</p><h4><a name="Another_distinction_to_think_about">Another distinction to think about</a></h4><p>OO theory talks about value objects and reference objects.(I'm using 'object' here to try and get come conceptual distance from 'value type').Here's an abstract example of what I mean</p><pre><code>    my $a = new ValueObject: value =&#62; 10;    my $b = $a;    $b.set_value(20);        print &#34;$a $b&#34;; # 10 20    my $c = new ReferenceObject: value =&#62; 10;    my $d = $c;    $c.set_value(20)    print &#34;$c $d&#34;; # 20 20</code></pre><h4><a name="Just_when_you_thought_you_understood_value_types...">Just when you thought you understood value types...</a></h4><p>Along come compound value types to mess with your head.Assuming a strict interpretation of value type declarations (assigning the the 'wrong' type to a variable throws an error),consider the following:</p><pre><code>    my @a of Int = (1, 2, 3);    my @b = @a;    my @c of Str;</code></pre><p>What happens to each of the following?If it's an error does it happen at runtime or compile time?</p><pre><code>    @c = @a;    @c = @b;    push @a, &#34;String&#34;;    push @b, &#34;String&#34;;</code></pre><p>Are you sure about those?Now,what happens if you start with:</p><pre><code>    my @a of Int = (1 .. Inf);    my @b = @a;    my @c of Str;</code></pre><p>And there's more thorny problems where they came from.</p><h4><a name="Those_thread_links">Those thread links</a></h4><p><a href='http://groups.google.com/groups?threadm=200304140058.h3E0wlpa001034@bruce.csse.monash.edu.au'>http://groups.google.com/groups</a> -- Types of literals</p><p><a href='http://groups.google.com/groups?threadm=20030411204244.GG561@wall.org'>http://groups.google.com/groups</a> -- Do we really need the dual type system</p><p><a href='http://groups.google.com/groups?threadm=200304142143.11432.afaus@corp.vlex.com'>http://groups.google.com/groups</a> -- User defined hierarchical types</p><p><a href='http://groups.google.com/groups?threadm=a05210606bac48f32d796@%5B63.120.19.221%5D'>http://groups.google.com/groups</a> -- Mind the difference between value types and reference types</p><p><a href='http://groups.google.com/groups?threadm=ygcof343oc6.fsf@babylonia.flatirons.org'>http://groups.google.com/groups</a> -- Static typing with Interfaces</p><p><a href='http://groups.google.com/groups?threadm=001D81EE&#45;71D1&#45;11D7&#45;BA15&#45;00050245244A@cognitivity.com'>http://groups.google.com/groups</a> -- Michael Lazzaro's superb summary of how containers and values interact.Not sure it's the whole story though...</p><h3><a name="Acknowledgements,_Announcements_and_Apologies">Acknowledgements,Announcements and Apologies</a></h3><p>Sorry it's late.I blame the perl6&#45;language people.It has nothing whatsoever to do with weekend spent in Wales and a Bank Holiday Monday spent at an Easter egg hunt and barbecue at my aunt's.</p><p>This has been one of the harder Perl 6 summaries to write,mostly because the language list has been dealing with a complicated subject and finding lots of interesting corners and ambiguities.Many thanks to Michael Lazzaro for his careful summation of his understanding of how things work which certainly clarified my thinking,to St&#233;phane Payrard for his sanity check of the types summary and to Dan Sugalski for a few answers on IRC about Scalar behaviour.</p><p>If you've appreciated this summary,please consider one or more of the following options:</p><ul><li>Send money to the Perl Foundation at <a href='http://donate.perl&#45;foundation.org/'>http://donate.perl&#45;foundation.org/</a> and help support the ongoing development of Perl.</li><li>Get involved in the Perl 6 process.The mailing lists are open to all.<a href='http://dev.perl.org/perl6/'>http://dev.perl.org/perl6/</a> and <a href='http://www.parrotcode.org/'>http://www.parrotcode.org/</a> are good starting points with links to the appropriate mailing lists.</li><li>Send feedback,flames,money,photographic and writing commissions,or a full set of Bertrand Harris Bronson's <i>The Traditional Tunes of the Child Ballads</i> to <a href='mailto:p6summarizer@bofh.org.uk'>p6summarizer@bofh.org.uk</a></li></ul>
                                    </div>


                                </div>
                                <div class="asset-footer">


                                    <div class="entry-tags">
                                        <h4>Tags<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?IncludeBlogs=2&amp;tag=perl%206%20internals%20parrot&amp;limit=20';return false;" rel="tag">perl 6 internals parrot</a></li>
                                        </ul>
                                    </div>

                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
