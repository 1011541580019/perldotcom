<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: December 2003 Archives</title>


    <link rel="prev" href="/pub/2003/11/" title="November 2003" />
    <link rel="next" href="/pub/2004/01/" title="January 2004" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">December 2003 Archives</h1>





                            
                            <div id="entry-1232" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/12/18/bryar.html" rel="bookmark">Blosxoms, Bryars and Blikis</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2003-12-18T00:00:00-08:00">December 18, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>Recently we heard from Kake Pugh about the <a href="/pub/a/2003/10/31/openguides.html">OpenGuides
project</a>, a wiki-based collaborative city guide system; previously,
we heard from Brian Ingerson about his Kwiki wiki implementation.
Guides, wikis, blogs ... the new fashion in software engineering at
the moment is the use of software to help organize, document, and
facilitate collaboration -- the social software movement is gaining
momentum, and Perl is one of the best languages for it.</p>

<p>In this article we'll look not just at some of the existing
social software tools in Perl (focusing, naturally, on my own Bryar
blog toolkit), but we'll look at some ways to break, bend, and embed
them in other tasks.</p>

<h3><a name="Basic_Blogging_with_Blosxom" id="Basic_Blogging_with_Blosxom"
>Basic Blogging with Blosxom</a></h3>


<p>When I finally decided that the world would benefit from hearing my
internal monologue, I naturally looked around for nice, simple
blogging programs.  Blogs are, essentially, simple things, and so I
didn't want all-singing, all-dancing web-based
database-backed content management systems.  I knew that if I were
going to blog, it would have to be easy for me to do so, and
there's nothing easier than firing up a text editor in the next
available terminal window and doodling my thoughts into it.</p>

<p>
Thankfully, <a href="http://www.raelity.org/">Rael Dornfest</a> has
the same sort of laziness as I, and created <a href="http://www.blosxom.com/">Blosxom</a>, a very simple blogging
tool, which simply reads a bunch of files from the file system, finds
the most recent and relevant, packages them up together, and sends
them at a browser. That was how I saw blogging.
</p>


    <p>Getting Blosxom up and running is, in keeping with the whole
    theme of Blosxom, quite simple. You need to download the <a href="http://www.blosxom.com/downloads/blosxom.zip">blosxom zip
    file</a>, unpack it, drop the <code>blosxom.cgi</code> file in
    your web server's cgi-bin directory, and then edit the first few
    lines of it to tell it the name of your blog and where the entries
    will live, and you're done.</p>

    <p>
       Posting into the blog is just a matter of creating a file
      called <code>something.txt</code> in the blog directory. It
      doesn't even matter what the <code>something</code> is. All that
      matters is the first line of the file, which becomes the title,
      and the rest, which becomes the story in raw HTML:
    </p>
    <pre>
<code>
First post!

&lt;p&gt; Today I set up a blosxom blog. It was really easy! &lt;/p&gt;
</code>
</pre>
    <p>
      You can then, if you like, <a href="http://www.blosxom.com/documentation/users/flavour.html">style
      your blog</a> with custom header and footer files, CSS, custom
      HTML for each blog post, and so on.
    </p>

<h3><a name="Enter_Bryar" id="Enter_Bryar">Enter Bryar</a></h3>

    <p>
      Of course, back when I started using Blosxom, things were not
      quite so easy, and templating required hacking the Blosxom CGI
      file itself, and things just didn't seem as neat as I wanted
      them to be. I liked Blosxom's simplicity, but didn't want to pay
      the price for it in terms of flexibility.
    </p>
    <p>
      At the same time, I was learning the wonders of the <a href="/pub/a/2001/01/tt2.html">Template
      Toolkit</a>, and thought that a well-designed blog should merely
      collect Post objects and send them to a user-defined template to
      do what it wants with them.
    </p>
    <p>
      So I started writing Bryar, which is designed to be a modular,
      extensible replacement for Blosxom. To make this happen, I
      needed to provide a default set of components that simply Does
      The Right Thing. Let's take a look at that default set before we
      go any further.
    </p>
    <p>
      When we install Bryar from CPAN, we're encouraged to run a
      command to set up a new blog:
    </p>
<pre>
<code>You probably want to run bryar-newblog in a likely home for
your blog once we've finished installing.</code>
    </pre>
    <p>
      The <code>bryar-newblog</code> command simply sets up a decent
      default set of templates, creates a first blog post, and drops
      in a <code>bryar.cgi</code> driver, similar to
      <code>blosxom</code>. At this point, we're ready to go.
    </p>
    <p>
      Bryar's default collection of modules consists of a
      <code>Bryar::DataSource::FlatFile</code>, which emulates
      Blosxom's use of text files in the file system as a database of
      blog posts; there are <code>Bryar::Frontend::CGI</code> and
      <code>Bryar::Frontend::mod_perl</code>, which describe how URL
      parameters are retrieved from the server translated into a
      request for documents, <code>Bryar::Document</code> which
      represents each post, and <code>Bryar::Collector</code> which
      ties it all together. With the benefit of hindsight, that should
      have been called a <code>Bryar::Controller</code>, since the
      whole thing can be described as a Model-View-Controller
      application. But more on that later!
    </p>
    <p>
      Since all of these things can be overridden, we need something to
      keep track of which classes we're using, and the
      <code>Bryar::Config</code> class does that, reading an optional
      configuration file but otherwise providing mostly sensible
      defaults.
    </p>
    <p>
In the rest of this article we're going to look at some interesting ways to override those classes, and build some
      more funky tools out of this social software framework.
    </p>

<h3><a name="Blogging_the_Past" id="Blogging_the_Past">Blogging the Past</a></h3>

    <p>
      Now it may surprise some people to find that I'm not really a
      programmer, although it may not come as a surprise to some of my
      colleagues.
    </p>
    <p>
      I was trained in modern and classical Japanese language and
      literature, with a side order of linguistics. Programming was a
      hobby that turned out to make a bit more cash than conjugating
      10th century verbs.
    </p>
    <p>
      But as I began thinking a bit about blogging, I found an old
      Japanese diary of a lady-in-waiting to the Emperor, called the
      "Pillow Book", by Sei Shonagon. It was something I'd read before
      and found quite interesting, but picking it up again in a blog
      context put it in a completely new light. It read just like a
      10th century LiveJournal.
    </p>
    <p>
      Here's a sample entry:
    </p>
    <blockquote>
<p>
Small children and babies should be fat. Provincial governors should
be fat too, and other people who have done well for themselves. If
they're too thin, it makes you think they're miserable.
</p>
</blockquote>
    <p>As well as thoughts, observations, tales of life at the court, the
    book contains a large number of random lists, which really made me
    think of LiveJournal polls and surveys. Here's another
      example:</p>
    <blockquote>
<b>Things I think are elegant</b>

<ul>
        <li>A white coat over a violet waistcoat </li>
        <li>Duck's eggs </li>
        <li>Sherbet ice, liana syrup, in a nice new silver bowl </li>
        <li>Rock crystal </li>
        <li>Wisteria </li>
        <li>Snow on plum blossoms </li>
        <li>A pretty little girl eating strawberries </li>
    </ul>
</blockquote>
    <p>
      I decided that it would be quite fun to translate the blog
      -- uh, book -- in a fairly modern, relaxed style, use fictitious
      but plausible dates for the entries, and run it as a real blog.
    </p>
    <p>
      Naturally, I wanted to do this with Bryar, but there was going
      to be a slight problem; Bryar takes its entry dates from the
      Unix timestamp of the file, and try as I might, I could not
      persuade Unix to recognize epoch times a thousand years before
      the epoch. I had to find another way of getting the times.
    </p>
    <p>
      But since Bryar is extensible, this is really easy -- I just
      write a new data source class that gets the entry timestamp
      from somewhere else. I simply created a subclass of
      <code>Bryar::DataSource::FlatFile</code> called
      <code>...FlatFile::Dated</code>, which takes its date from the
      first line, and title from the next line.
    </p>
    <p>
      Telling the Bryar blog to use the new data source was simply a
      matter of writing a little config file called <code>bryar.conf</code>:
    </p>
<pre><code>
source: Bryar::DataSource::FlatFile::Dated
name: Notes on a Pillow - Sei Shonagon's blog
baseurl: http://blog.simon-cozens.org/shonagon/bryar.cgi
</code></pre>
    <p>
      And the rest, of course, is just a simple matter of classical
      Japanese translation.
    </p>
<h3><a name="Blogging_the_House" id="Blogging_the_House">Blogging the House</a></h3>
    <p>
      But as well as a linguist, I'm also a geek, and I use Perl to
      control various things around the house -- the house network, the
      division of the phone bill, and so on. This is all driven by
      Template Toolkit and <a href="/pub/a/2002/11/27/classdbi.html"><code>Class::DBI</code></a>. </p>
    <p>
      It seemed useful, at the
      time, to add a blog into this great mass of centralized control,
      so we could pass phone messages around. Of course, in the end,
      it was easier to just put a big whiteboard in the lounge. XP's
      "the simplest thing that could possibly work" wins again.
    </p>
    <p>
      But it was fun, and it allowed me to use Bryar in a new
      way. This time, we're using the original data source, collector,
      and other modules, but we're plugging them into an existing
      templating system. We already have code to deal with the web
      server, handle the URL processing, and the output; we already
      have code to transform objects into HTML; all we need is to
      collect the recent documents and hand them on to the templates.
    </p>
    <p>
      I did this by adding a Bryar object to our template variables,
      and calling the <code>collect_current</code> method on the Bryar
      collector, using Richard Clamp's
      <code>Template::Plugin::Class</code> module. This gave a bunch
      of <code>Bryar::Documents</code>, which the template system could
      manipulate however it desired:
    </p>

<pre><code>[% INCLUDE header %]
[% PROCESS blogmacros %]

&lt;h2&gt; Recent blog postings&lt;/h2&gt;

[%
USE c = Class("Bryar::Collector");
FOR post = c.collect_current(blog);
    display_post(post);
END;
%]</code></pre>













<h3><a name="Everything's_a_wiki" id="Everything's_a_wiki">Everything's a Wiki</a></h3>
    <p>
      So much for blogs, for the time being. The other movement in
      social software at the moment is Ward Cunningham's wiki. A wiki
      has three important characteristics: a simple mark-up language,
      the ability for the viewer to modify the page, and the ability
      to create links from one wiki page to another.
    </p>
    <p>
      Despite initial predictions that they'd be unusable due to
      widespread graffiti, vandalism, and other kinds of kicking down
      the sandcastle, wikis have turned out to work quite well in
      practice, with sites like <a href="http://www.wikipedia.com/">Wikipedia</a> collecting a
      great store of information from contributors both regular and
      occasional.
    </p>
    <p>
      CPAN has a fair collection of wiki implementations, including
      Kwiki, <a href="http://search.cpan.org/perldoc?CGI::Wiki"><code>CGI::Wiki</code></a>,
      <a href="http://search.cpan.org/perldoc?Apache::MiniWiki"><code>Apache::MiniWiki</code></a>,
      and others. However, there may well be times when it makes sense
      to create a new implementation, particularly when the wiki is to
      be embedded in another application.
    </p>
    <p>
      What does it mean to embed a wiki? An example will demonstrate
      it best. Imagine a web-mail system like IMP or SquirrelMail. Now
      we want to add the ability to write a short note or annotation
      on a given message, so that it can be referred back to later. If
      I get a mail from my friend Al arranging to meet up for a drink
      at the pub, I'd want to annotate the mail with Al's mobile phone
      number, directions to the pub, and the fact that I need to take
      the book that I borrowed from him last month. Then, in an ideal
      world, the mail system would collect all the notes, work out the
      date and time of the meeting, and tell my calendaring software
      about it, but that's another story for a different time.
    </p>
    <p>
      The fact is that once we have these sticky notes for mail, we
      might want to use them to refer to other mail, group them
      together in fluid topics, and so on. For instance, if I
      mentioned in the annotation that this was an
      <code>AlMeeting</code>, I would expect that text to be magically
      marked up as a link to all the other <code>AlMeeting</code>
      mails. Here we've got the three elements of a wiki -- annotation
      editing, a simple markup language, and the ability to link.
    </p>
    <p>
      While the editing is a simple matter of linking your CGI
      parameters with your database, something that should be second
      nature to those who want to <a href="/pub/a/2003/07/15/nocode.html">avoid
      writing code</a>, the other two components take a little bit of
      work. Thankfully, chromatic has written a handy module, <a href="http://search.cpan.org/~chromatic/Text-WikiFormat-0.71/lib/Text/WikiFormat.pm"><code>Text::WikiFormat</code></a>.
    </p>
    <p>
      With <code>WikiFormat</code>, you can pass a text string marked
      up in wiki format to <code>Text::WikiFormat::format</code>, and
      it will return you HTML:
    </p>
    <pre><code>
print Text::WikiFormat::format(&lt;&lt;EOF);
= A Test Post =

I found this '''very''' interesting WikiLink recently.

EOF

__DATA__
&lt;h1&gt;A Test Post&lt;/h1&gt;

&lt;p&gt; &lt;br /&gt;
I found this &lt;strong&gt;very&lt;/strong&gt; interesting 
&lt;a href=&quot;WikiLink&quot;&gt;WikiLink&lt;/a&gt; recently. &lt;br /&gt;
  &lt;/p&gt;
</code></pre>
    <p>
      This gives us the simple markup, but it doesn't do much about
      the linkability; for an embedded wiki, we're going to need finer-grained control over how the links are constructed. For
      instance, we might want to pass the link name to a particular
      URL with a particular CGI parameter. Thankfully,
      <code>Text::WikiFormat</code> supports two optional parameters
      in addition to the text to be formatted: the first is a hash
      reference overriding how the wiki text is marked up to HTML, and
      the second is a hash reference of options, such as the URL
      prefix for links.
    </p> 
    <p>
      So, if we have an application that displays 
      a page given a parameter in the URL, we can just say: 
    </p> 
    <pre><code> 
Text::WikiFormat::format($text, {},  
        { prefix => "http://www.myhost.int/wiki?page=" }); 
</code></pre> 
    <p> 
      And there we have it, an instant wiki. 
    </p> 
    <p> 
      Of course, in the context of our webmail application, we may 
      have to do something more convoluted. For instance, we might 
      want a link to <code>SimonCozens</code> to resolve to all mail 
      from that person, if it can be understood as a person who sends 
      email, or to a similarly marked-up set of messages, like an 
      <code>AlMeeting</code>, if it can't. For this, we need  to
      introduce a bit of logic and decide how to form the link.  
    </p> 
    <p> 
      As we mentioned above, <code>Text::WikiFormat</code> allows us 
      to specify replacements for the way markup is translated to 
      HTML. <code>WikiFormat</code> uses a hash-ref internally to turn 
      wiki "tags" into HTML, and we can, in fact, put in a subroutine 
      reference for the <code>link</code> tag and have that emit the 
      appropriate HTML link. 
    </p> 
    <pre><code> 
sub markup { 
    my $text = shift; 
    Text::WikiFormat::format(shift, { link => \&amp;my_link });
} 

sub my_link {
    my $linkname = shift;
    my $name = $linkname;
    ($name=$linkname) =~ s/(?&lt;=[a-z])(?=[A-Z])/ /g;
    if (have_mail_from($name)) {
       # Valid correspondent, link to page of their mail
       my $id = correspondent_id($name);
       return qq{&lt;A HREF="/mail/search?correspondent=$id"&gt;}.$name.
              "&lt;/A&gt;";
    }
    # Not a correspondent, just a wiki page
    return qq{&lt;A HREF="/wiki?$linkname"&gt;}.$linkname.
           "&lt;/A&gt;";
}
</code></pre> 
    <p>
      What's going on here? First, we receive the link name in
      StudlyCaps every time <code>format</code> sees a link. We then
      convert it to a real name, by inserting a space in the gaps
      between a lowercase character and an uppercase one. Now we have
      a name like "Simon Cozens" that we can search our mailstore for,
      and if we find someone, we can return the URL to a page about
      their mail. Otherwise, we return a wiki page. We've used our
      webmail annotations to refer to either real people or to other 
      annotations, stealthily embedding a wiki in the application, with 
      minimal effort. 
    </p> 
    <h3><a name="Creating_the_Bliki" id="Creating_the_Bliki"
>Creating the Bliki</a></h3>
    <p> 
      With that example of how to create a custom wiki from an 
      existing application, let's return to Bryar and our blogging 
      software. 
    </p>
    <p>
      The concept of a bliki -- a cross between a wiki and a blog -- may
      seem like a bizarre one at first, but it's such a natural
      synergy that it's been independently invented by multiple
      people, including <a href="http://www.martinfowler.com/bliki/WhatIsaBliki.html">Martin Fowler</a> and <a href="http://www.rollerweblogger.org/page/roller/20020906">many others</a>.
    </p>
    <p>
      Depending on how you look at it, a bliki is either an ordinary
      wiki with a blog-style front-end showing the latest posts, or an
      ordinary blog with wiki-like markup and interconnections between
      the posts. The only difference between these views is how easy
      it is to edit the posts. We'll stick with the "ordinary blog"
      viewpoint, since editing posts over the Web is a boring and
      solved problem, and one not really related to the technology
      we're looking at today.
    </p>
    <p>
      How are we going to extend Bryar to become a bliki? It's obvious
      that <code>Text::WikiFormat</code> is going to be involved
      somewhere, and it would be helpful to use the
      <code>Bryar::DataSource::FlatFile</code> class too. First, we
      inherit from the <code>FlatFile</code> class, and override the
      <code>make_document</code> method, which is responsible for
      turning a filename into a <code>Bryar::Document</code>:
    </p>
<pre><code>
package Bryar::DataSource::FlatFile::Bliki;
use base 'Bryar::DataSource::FlatFile';
use strict;
use Text::WikiFormat;

sub make_document {
    my ($self, $filename) = @_;
}
</code></pre>
    <p>
      Here the format will be slightly different -- the filename (such
      as "<code>MyWikiPost.txt</code>") will be used to form both the
      title and the ID of the document, and the content of the
      document will be transformed via <code>WikiFormatter</code>
      wholesale.
    </p>
<pre><code>
sub make_document {
    my ($self, $file) = @_;
    return unless $file and open my $in, $file;
    my $when = (stat $file)[9];
    my $who = getpwuid((stat $file)[4]);
    $file =~ s/\.txt$//;

    my $dir = dirname($file);
    $dir =~ s{^\./?}{};
    my $category = $dir || "main";

    local $/;
    my $text = &lt;$in&gt;;
    
    return Bryar::Document->new(
        title    => $file,
        content  => Text::WikiFormat::format($text, {}, {prefix => "id_"}),
        epoch    => $when,
        author   => $who,
        id       => $file,
        category => $category,
    );
}
</code></pre>
    <p>
      We change the prefix for links to be a relative link of the form
      <code>id_PostName</code>, since this is how Bryar deals with
      references to other blog posts, by default. (Of course, we could
      change this by modifying the FrontEnd class, but this seems to
      work fine.)
    </p>
    <p>
      It took 30 lines of code to convert Bryar into a simple
      bliki, many of which were stolen from the superclass. Now let's look
      at something a bit different.
    </p>
    <h3>Everything's a Blog</h3>
    <p>
      I mentioned when introducing Bryar that it was based on the
      Model-View-Controller (MVC) pattern, although I didn't realize this
      while designing it. 
    </p>
    <p>
      The MVC pattern is described in <a href="http://c2.com/cgi-bin/wiki?ModelViewController">this
      entry</a> in Ward Cunningham's own wiki, as being made up of
      three parts:
    </p>
    <blockquote>
<ul>
        <li> A <strong>model</strong>, therefore is an object representing data 
            or even activity, e.g. a database table or even some plant-floor 
            production-machine process. </li>
        <li> A <strong>view</strong> is some form of visualization of the 
            state of the model. </li>
        <li> A <strong>controller</strong> offers facilities to change the 
            state of the model. </li>
    </ul>
</blockquote>
    <p>
      All kinds of things follow the MVC design. In Bryar, the model
      is the data source object; the view is the templating object;
      the controller is the Collector object. A web browser might be
      described as a controller that contains all its logic, a view
      which contains the user interface, and the pane of rendered HTML,
      and the model of the entire Worldwide Web.
    </p>
    <p>
      But some web-based applications follow Bryar's MVC approach
      particularly closely. Imagine, for instance, a company's product
      catalog on the Web. The catalog data will be stored in some
      kind of database, and will be presented via a templating system,
      with a controller that will decide which products to
      show. Isn't that exactly the same as reading some blog posts
      from a database (albeit potentially one that looks a lot like a
      filesystem), rendering them via templating system, with a
      controller deciding which posts to show?
    </p>
    <p>
      Indeed, many of the views you will want of the catalog data
      are exactly what you'd want from a blog: display the most
      recent products, display all products, search by product name
      or description, and a detailed display of a single product.
    </p>
    <p>
      We've seen it take 30 lines to turn a blog into a bliki. To
      turn a blog into a complete product catalog web site takes a
      subclass of the <code>Bryar::DataSource::DBI</code> class (to
      talk to the product database) and the
      <code>Bryar::Document</code> class (to take more details, a URL
      to a photo, and so on). The rest is a matter of templating, and
      that's a designer's job!
    </p>
    <h3>Social Software</h3>
    <p>
      I consider the emergence of interest in social software to be
      one of the most fascinating trends in software engineering this
      year. Two of the most powerful and popular aspects of this,
      wikis and blogs, are particularly well-suited for extension and
      embedding, and Perl is a particularly well-suited language for
      achieving this.
    </p>
    <p>
      Although part of the point of this article was to demonstrate
      Bryar, there were several other important points. First, that
      there are plenty of Perl implementations of both wikis and blogs
      that you can choose from; second, that Perl makes it really easy
      to create your own blog or wiki and customize to your own
      purposes, including embedding them in an existing application.
    </p>
    <p>
      But finally, the point was to encourage you to think about good
      design and the power of extensible applications; if you can
      create a tool that is both powerful and generalizable -- just
      like Perl itself -- it may end up doing wildly different things
      to what you initially intended!
    </p>
<!-- end doc -->




        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1236" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/12/p6pdigest/20031214.html" rel="bookmark">This week on Perl 6, week ending 2003-12-14</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">perl.com</span> on <abbr class="published" title="2003-12-14T00:00:00-08:00">December 14, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<h2>
<csfield name="title"></h2>
<csfield name="id_author" before="by " hrefaction="pub"><br />
<csfield name="date">
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>It looks like things are starting to slow down slightly as we run up to Christmas,
but the quality of discussion remains high.
We'll start with the usual trawl through perl6-internals.</p>

<h4><a name="Testing_for_null">
Testing for null</a></h4>

<p>Dan ruled on last week's discussion of testing for undef in Parrot.
We're getting a new <code>isnull</code> branch op along with a new Undef PMC.
Leo T&#246;tsch implemented it with his usual alacrity.</p>

<p><a href='http://groups.google.com/groups?selm=a06010209bbfa414ccf86@[10.0.1.2]'>http://groups.google.com/</a></p>

<h4><a name="How_many_comparison_ops_do_we_need_again?"
>How many comparison ops do we need again?</a></h4>

<p>One of the annoyances of writing something that's really going to be used is that you can't get away with the equivalent of outlining your proof on the blackboard,
waving your hands and saying &#34;The details are left as an exercise for the interested reader&#34;.
A case in point is Parrot's array of comparison branch operators.
For a while now we've been getting by with a sparsely populated array of such beasties.
This week saw people (well,
okay then,
Leo,
but he has the productivity of people) doing the detail work to get the full range implemented.</p>

<p><a href='http://groups.google.com/groups?selm=a06010208bbfa40078332@[10.0.1.2]'>http://groups.google.com/</a></p>

<h4><a name="Incorrect_scoping_of_constants_in_IMCC"
>Incorrect scoping of constants in IMCC</a></h4>

<p>Dan wasn't happy with the scoping of the <code>.const</code> directive in IMCC (essentially constants are sub/block scoped,
which makes them pretty much useless for the things constants are normally used for).
Melvin Smith made the fix.</p>

<p><a href='http://groups.google.com/groups?selm=a06010227bbfbec732329@[10.0.1.2]'>http://groups.google.com/</a></p>

<h4><a name="Objects_and_Namespaces"
>Objects and Namespaces</a></h4>

<p>Dan had mandated that the Parrot internal equivalent of the Perlish <code>Package::Name</code> should be <code>Package\0Name</code>.
Nobody (Dan included) liked the embedded nulls mandated in Dan's original spec.
After some discussion he posted a description of a new hierarchical namespace design.</p>

<p>Dan pointed out that the use of hierarchical namespaces would probably mean that the semantics (and syntax) of <code>find_global</code> would need to be adjusted.</p>

<p><a href='http://groups.google.com/groups?selm=a06010229bbfc0dac4e0a@[10.0.1.2]'>http://groups.google.com/</a></p>

<p><a href='http://groups.google.com/groups?selm=a0601020bbbfe5002d599@[10.0.1.2]'>http://groups.google.com/</a> -- The New Namespace</p>

<h4><a name="Dan_Sugalski,_IMCC_Bugfinder_General"
>Dan Sugalski,
IMCC Bugfinder General</a></h4>
<csperl file="grab" domain="on" record="b/940" template="b/article_sidebar.view">
<p>Dan's been writing more PIR code by hand,
and is discovering infelicities as he goes.</p>

<p><a href='http://groups.google.com/groups?selm=a06010207bbfd4f47dab9@[10.0.1.2]'>http://groups.google.com/</a></p>

<p><a href='http://groups.google.com/groups?selm=a06010208bbfd52feb9be@[10.0.1.2]'>http://groups.google.com/</a></p>

<h4><a name="Macros,_PIR_and_PASM"
>Macros,
PIR and PASM</a></h4>

<p>Following his bout of IMCC bug spotting,
Dan announced a decision about macros in PIR and PASM code.
Essentially,
Parrot's built in PIR and PASM parsers do not need to do macros as 'macro assemblers are for people,
not compilers'.
Because of this,
Dan would like to see any macro processing moved out of the core binary and into an external tool.
(Which can always be invoked via the hypothetical <em lang='und' xml:lang='und'>macro-parrot.pl</em>).
Melvin Smith suggested that it would probably be worth extracting the existing macro processor from imcc.l and moving it into a separate library.</p>

<p><a href='http://groups.google.com/groups?selm=Pine.LNX.4.58.0312121357440.2785@okcomputer.antiflux.org'>http://groups.google.com/</a></p>

<h3><a name="Meanwhile,_in_perl6-language"
>Meanwhile,
in perl6-language</a></h3>

<p>The language list continues to fascinate (and not in the 'car crash' way it has done on occasions in the past) with an ongoing conversation between Larry on the one hand (seemingly designing on the hoof and certainly doing a great deal of thinking aloud) and everyone else on the other hand getting clarification or extrapolating to the point where Larry has to step in and do a little bit more design.</p>

<p>I'm finding it hard to do a proper summary of what's going on because so much is changing (and because so much of what seems to be set in quick drying concrete now is so novel.)</p>

<p>Essentially the discussion revolves around Roles,
which are sort of like Java interfaces,
sort of like mixins and nothing like either.
In his 'Vocabulary' post,
Luke Palmer describes a Role as 'A collection of methods [and/or attributes] to be incorporated into a class sans inheritance [...].
Used with <code>does</code>'.
In this new world,
a property (<code>$bar but Red</code> etc) is a kind of degenerate role.</p>

<p>At the same time though,
we're getting other gems.
For instance,
Perl 6 is going to get something a little like <code>final</code>,
but instead of it being a declaration made in a type's implementation (&#34;This is the one,
the only Integer and you may not inherit from it or ever alter it!&#34;),
it will become a promise made by a type's user not to attempt to monkey with it come run time,
which should set the code generator free to use optimizations that aren't safe when everything's dynamic.</p>

<p>So,
if you're interested in how Perl 6's OO system is going to work,
now is the time to get involved in the language list.
If there's something you've always wanted to do or something about Perl's current OO that you love and want to retain,
it's time to speak up for it.
The odds are good that you'll be able to do what you want using the mechanisms being designed,
but you'll be kicking yourself later if it turns out you can't.</p>

<p>If you do join in,
you'll see references to the 'Traits Paper'.
This is where the original idea for what Larry's calling 'Roles' came from.
When you read it,
bear in mind that the authors of the paper use the term 'trait' for what we're calling a 'role' (We already have traits you see).</p>

<p><a href='http://www.cse.ogi.edu/~black/publications/TR_CSE_02-012.pdf'>http://www.cse.ogi.edu/~black/publications/TR_CSE_02-012.pdf</a> -- Traits paper</p>

<h4><a name="Iterating_through_two_arrays_at_once"
>Iterating through two arrays at once</a></h4>

<p>Joe Gottman asked for some clarification about which was more right,
Apocalypse 4 (<code>for @a ; @b -&#62; $a ; $b {...}</code>) or <i>Perl 6 Essentials</i> (<code>for zip @a,
@b -&#62; $a,
$b {...}</code>) when talking about Essentials&#62; iterating through two (or more) arrays at once.
The rule of thumb for this seems to be 'latest publication date wins' so <i>P6E</i> is the most correct.
He went on to wonder what happens when one array is shorter than the other (an undefined value is passed into the loop when the array runs out of values until the last array is exhausted).
He wondered what would happen if any of the arrays contained <code>undef</code>; how would the body of the loop be able to differentiate between a 'valid' undef and one created by the loop itself.</p>

<p>Larry pointed out that,
in Perl 6,
undef isn't necessarily unique and may well contain an unthrown exception with extra information hidden in a property.</p>

<p><a href='http://groups.google.com/groups?selm=011701c3bfa1$6e97fc40$42404a18@carolina.rr.com'>http://groups.google.com/</a></p>

<h4><a name="Vocabulary"
>Vocabulary</a></h4>

<p>If you're even vaguely interested in the workings of Perl 6's object system,
you need to read the referenced post.</p>

<p>Luke Palmer,
worrying about people using Object related vocabulary in subtly inconsistent ways,
posted a glossary explaining how OO terminology is used in a Perl 6 context.
Casey West wrapped it up in a POD,
which will,
I hope,
end up on dev.perl.org soon.</p>

<p>Of course,
there were a few corrections for subtleties,
a few rethinks of the design so far,
and general gratitude for at least having a baseline document that people could refer to.</p>

<p><a href='http://groups.google.com/groups?selm=20031212112302.GA27893@babylonia.flatirons.org'>http://groups.google.com/</a></p>

<p><a href='http://groups.google.com/groups?selm=20031212175822.GA80586@geeknest.com'>http://groups.google.com/</a> -- Casey's POD</p>

<h4><a name="Enums_and_bitenums"
>Enums and bitenums</a></h4>

<p>St&#233;phane Payrard wondered if Perl 6 would have enums and bitenums directly supported in the language (he pointed out that it wouldn't be hard to implement them using macros of course).
Larry speculated that enums might just end up being special cases of roles/subtypes.</p>

<p>Further down the thread,
Uri Guttman commented that Larry seemed to be working on a grand unification and wondered if string theory had any place in it.
(Actually,
it's been apparent for ages now that a great deal of the power that Larry's putting into Perl 6 arises from the unifications he's making,
but that's an article for my weblog I think).</p>

<p><a href='http://groups.google.com/groups?selm=20031211134806.GA3771@stefp.dyndns.org'>http://groups.google.com/</a></p>

<h3><a name="Acknowledgements,_Apologies,_Announcements">Acknowledgements,
Apologies,
Announcements</a></h3>

<p>For the duration of the panto season,
Leon Brocard will be appearing in the role of Pumpking in a Perl 5 Porters summary near you.</p>

<p>Still no link shortening.
I appear to have managed to subtly screw my Perl installation and now I can't get the link shortening module installed.
I shall try and make time to fix it this week.</p>

<p>Unless someone beats me to it (please someone,
beat me to it) I'm going to try and put together a 'state of play' post,
summarizing the current state of the Perl 6 Object system with a little more background in it than Luke Palmer's excellent 'Vocabulary' post.
All being well it'll be appearing in next week's summary.</p>

<p>If you find these summaries useful or enjoyable,
you might like to contribute to the Perl Foundation to help support the ongoing development of Perl.
I also welcome feedback at <a href='TODO'>p6summarizer@bofh.org.uk</a> or at my website.</p>

<p><a href='http://donate.perl-foundation.org/'>http://donate.perl-foundation.org/</a> -- The Perl Foundation</p>

<p><a href='http://www.bofh.org.uk:8080/'>http://www.bofh.org.uk:8080/</a> -- My website,
Just a Summary</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1234" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/12/p6pdigest/20031207.html" rel="bookmark">This week on Perl 6, week ending 2003-12-07</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Piers Cawley</span> on <abbr class="published" title="2003-12-07T00:00:00-08:00">December  7, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>Another week,
another late summary.
Luckily it's been a quiet week so I should get this written faster than usual.
As is traditional,
we start with perl6-internals</p>

<h4><a name="Parrot_build_system_tinkering"
>Parrot build system tinkering</a></h4>

<p>Andy Dougherty and other discussed extending the Parrot build system to allow for building parrot itself outside the main source directory (useful when Parrot's mounted read only via NFS for example.
It's not (quite) possible to do this just yet because of a couple of generated files in the IMCC tree.
Leo suggested only generating those when <code lang='und' xml:lang='und'>Configure.pl --maintainer</code> is run,
on the grounds that a maintainer shouldn't be building from a read only source.
Dan asked for a volunteer to fix things up.</p>

<p><a href='http://groups.google.com/groups?selm=Pine.SOL.4.53.0312010940540.18708@maxwell.phys.lafayette.edu'>http://groups.google.com/</a></p>

<h4><a name="Object_stuff"
>Object stuff</a></h4>

<p>I (and others I presume) got ready to do the &quot;Happy!
Happy!
Joy!
Joy!&quot; dance of delight; this was the week that Parrot finally got objects.
Or,
as Dan described them,
'objects-ish'.
Parrot now has single inheritance objects.
They're not the final word on the matter,
but it's definitely better than a poke in the eye with a sharp stick.</p>

<p>Dan went on to discuss what needs to be done with them before we're ready for Parrot 0.1 (Objects are one of the criteria for making a point release).</p>
<csperl file="grab" domain="on" record="b/940" template="b/article_sidebar.view">
<p>Dan then went rather quiet,
apparently because he got mugged by flu,
or something like it,
and spent the rest of the week wishing he were dead.</p>

<p>Meanwhile,
Leo lived up to his Patchmonster nickname by checking in a bunch of object related stuff.</p>

<p><a href='http://groups.google.com/groups?selm=a06010202bbf0fd3af8cc@[10.0.1.2]'>http://groups.google.com/</a> -- Rumblings</p>

<p><a href='http://groups.google.com/groups?selm=a06010216bbf259ac617f@[10.0.1.2]'>http://groups.google.com/</a> -- Announcement</p>

<p><a href='http://groups.google.com/groups?selm=a06010217bbf261e24e2a@[10.0.1.2]'>http://groups.google.com/</a> -- The way forward</p>

<p><a href='http://groups.google.com/groups?selm=a06010202bbf81f06483c@[10.0.1.2]'>http://groups.google.com/</a> -- Dan gets mugged by flu</p>

<p><a href='http://groups.google.com/groups?selm=3FD0AEE4.3000500@toetsch.at'>http://groups.google.com/</a> -- Leo's patches</p>

<h4><a name="Raising_exceptions"
>Raising exceptions</a></h4>

<p>Cory Spencer wondered about 'proper exception raising' and wondered what the state of play was,
and if there were any good examples.
Leo T&#246;tsch pointed him at <em lang='und' xml:lang='und'>t/pmc/exception.t</em></p>

<p><a href='http://groups.google.com/groups?selm=Pine.LNX.4.58.0312011749290.13872@okcomputer.antiflux.org'>http://groups.google.com/</a></p>

<h4><a name="Compilation_units_and_the_boundaries_of_IMCC"
>Compilation units and the boundaries of IMCC</a></h4>

<p>Pete Lomax had wondered about package/file local variables in IMCC.
At the moment IMCC variables can't be file or package scoped,
but Melvin Smith is working on it.
As he said this,
he asked for suggestions for other potential IMCC features.
Cory Spencer wanted to be able to write</p>

<pre lang='und' xml:lang='und'>   if _some_test() goto LABEL</pre>

<p>but that was vetoed by Dan (and Melvin) as being rather too high level for an intermediate language that's meant to be a compiler target.</p>

<p><a href='http://groups.google.com/groups?selm=OF0DEFCC58.E6152282-ON87256DF0.000EABD7-85256DF0.000F20CF@us.ibm.com'>http://groups.google.com/</a></p>

<h4><a name="String_manipulation"
>String manipulation</a></h4>

<p>Melvin Smith put forward a convincing argument that IMCC shouldn't concern itself with doing string interpolation as the expected behaviour is too 'high level language' dependent, but that Parrot should have a <code lang='und' xml:lang='und'>printf</code>/<code lang='und' xml:lang='und'>sprintf</code> equivalent, implemented in C for speed. Dan seemed to agree and reckoned it should be addressed as soon as objects were out of the way.</p>

<p><a href='http://groups.google.com/groups?selm=5.1.1.6.2.20031201221202.0486c298@pop.mindspring.com'>http://groups.google.com/</a></p>

<h4><a name="IMCC_pending_changes"
>IMCC pending changes</a></h4>

<p>Melvin Smith posted a list of pending IMCC changes, most of which were concerned with tightening up IMCC behaviour (making it both stricter nd more forgiving...). Discussion ensued.</p>

<p>A few days later, Melvin committed some of his changes.</p>

<p><a href='http://groups.google.com/groups?selm=5.1.1.6.2.20031127001200.03ab8e18@pop.mindspring.com'>http://groups.google.com/</a></p>

<p><a href='http://groups.google.com/groups?selm=5.1.1.6.2.20031205013711.02105c98@pop.mindspring.com'>http://groups.google.com/</a></p>

<h4><a name="PMC_Compiler_2nd_edition"
>PMC Compiler 2nd edition</a></h4>

<p>Leo applied a 'really long pending patch' which should simplify upcoming vtable changes. Melvin wondered if the time had come to replace the existing <em lang='und' xml:lang='und'>ops2c</em> and <em lang='und' xml:lang='und'>pmc2c</em> with the newer versions. Leo thought that <em lang='und' xml:lang='und'>pmc2c2</em> was definitely stable enough, but wasn't too sure about <em lang='und' xml:lang='und'>ops2c2</em>. Jonathan Worthington pointed out a Win32 bug that was quickly fixed.</p>

<p><a href='http://groups.google.com/groups?selm=3FCDB6A3.4010901@toetsch.at'>http://groups.google.com/</a></p>

<h4><a name="get_pmc_keyed()_in_PerlString"
><code lang='und' xml:lang='und'>get_pmc_keyed()</code> in PerlString</a></h4>

<p>Sterling Hughes noted that, in PHP it's valid to index a string as if it were an array. He wondered it would be possible to implement <code lang='und' xml:lang='und'>get_pmc_keyed()</code> on the PerlString vtable to allow for similar tricks with the standard string PMC. I'm confused as to what the decision was. I think Leo agreed that it was a good idea, but that it should probably be implemented in a new PMC for the time being...</p>

<p><a href='http://groups.google.com/groups?selm=20031202200415.GA6856@bumblebury.com'>http://groups.google.com/</a></p>

<h4><a name="Symbolic_vs._Named_variable_register_allocation"
>Symbolic vs. Named variable register allocation</a></h4>

<p>Pete Lomax stumbled over a bug in IMCC's register allocation. Melvin thinks the problem is that much of IMCC's flow analysis code doesn't yet know about the Parrot Calling Conventions and went to have a look to see if there was a quick fix available.</p>

<p><a href='http://groups.google.com/groups?selm=6mmrsvc93sqcctme5od66k30isn4j4ek4p@4ax.com'>http://groups.google.com/</a></p>

<h4><a name="Testing_for_null"
>Testing for null</a></h4>

<p>J&#252;rgen B&#246;mmels is working on having the Parrot IO system's <code lang='und' xml:lang='und'>open</code> return a PMCNULL on failure instead of an invalid IO-Object (sounds like a good idea to me). The catch is, there doesn't seem to be any way for the bytecode to detect that this has happened. There was some debate about whether what J&#252;rgen was doing was the right thing, or if we shouldn't introduce a new null.pmc, or some other possibility. The consensus in the end seemed to be that using PMCNULL was probably the way to go, but an appropriate test operator hadn't been finally decided upon (but <code lang='und' xml:lang='und'>if_null</code> and <code lang='und' xml:lang='und'>unless_null</code> are the front runners).</p>

<p><a href='http://groups.google.com/groups?selm=m2y8tu0xjg.fsf@helium.physik.uni-kl.de'>http://groups.google.com/</a></p>

<h4><a name="Determining_PMC_memory_addresses"
>Determining PMC memory addresses</a></h4>

<p>After last week's kerfuffle about the different types of equality Cory Spencer still needed a test for testing if two PMCs had the same address so he posted a patch to add an <code lang='und' xml:lang='und'>eq_addr</code> opcode. Melvin Smith still wasn't sure that the name was quite right though and asked for a description of why Cory needed it (he needs it for implementing a Lisp interpreter).</p>

<p><a href='http://groups.google.com/groups?selm=Pine.LNX.4.58.0312030915240.15127@okcomputer.antiflux.org'>http://groups.google.com/</a></p>

<h4><a name="Fixing_the_Makefile_dependencies"
>Fixing the Makefile dependencies</a></h4>

<p>Harry the Surnameless has gone through the makefiles in search of the broken dependencies that meant that parallel makes didn't work and posted a patch. However, he worries that the patch may well introduce other problems.</p>

<p><a href='http://groups.google.com/groups?selm=20031206200450.11483.qmail@onion.perl.org'>http://groups.google.com/</a></p>

<h3><a name="Meanwhile_in_perl6-language"
>Meanwhile in perl6-language</a></h3>

<p>The only game in town was the ongoing discussion of Properties, which morphed into a discussion of Larry's tantalizing role based OO formulation. People are generally impressed and excited by what Larry has so far revealed and, in the continuing absence of Apocalypse 12 are speculating like mad. It's fascinating, but it's also next to impossible to summarize beyond saying &quot;People talked excitedly about OO&quot;.</p>

<p>Oh yes, if you've not been following, <code>^op</code> (ie, the vector operators) has become <code> &gt;&gt;op&lt;&lt; </code> which is, if nothing else, a right swine to write in a POD C&lt;&gt; escape.</p>

<p><a href='http://groups.google.com/groups?selm=9C375DDD9B669243A2D78FCD607E894003E4FD25@bremo-jg'>http://groups.google.com/</a></p>

<p><a href='http://groups.google.com/groups?selm=9C375DDD9B669243A2D78FCD607E894003E4FD37@bremo-jg'>http://groups.google.com/</a></p>

<h3><a name="Acknowledgements,_Apologies,_Announcements"
>Acknowledgements, Apologies, Announcements</a></h3>

<p>Nope, still no link shortening.</p>

<p>Um... many apologies to Leon Brocard. Last week I stated that he'd become the new Pumpking for Perl 5.004 and would not be appearing as a running joke in these summaries until he relinquished the pumpkin. However, what I should have said is that he has become the new Pumpking for Perl 5.005_04 and will not be appearing as a running joke in these summaries until he relinquishes said pumpkin.</p>

<p>Any suggestions that last week's mistake was deliberate so I could continue the joke for one more week are utterly without foundation.</p>

<p>It was just an 'amusing' consequence of my stupidity, obviously.</p>

<p>If you find these summaries useful or enjoyable, please consider contributing to the Perl Foundation to help support the Perl 6 effort. I also welcome feedback at <csperl file="mailmunge" arg_email="p6summarizer@bofh.org.uk"> or at my website.</p>

<p><a href='http://donate.perl-foundation.org/'>http://donate.perl-foundation.org/</a> -- The Perl Foundation</p>

<p><a href='http://dev.perl.org/perl6/'>http://dev.perl.org/perl6/</a> -- Perl 6 Development site</p>

<p><a href='http://www.bofh.org.uk:8080/'>http://www.bofh.org.uk:8080/</a> -- My website, &quot;Just a Summary&quot;</p>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1230" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2003/12/05/slimp3.html" rel="bookmark">How Perl Powers the Squeezebox</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2003-12-05T00:00:00-08:00">December  5, 2003 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>
<a href="http://www.slimdevices.com/">Slim Devices</a> made their name
in 2001 with the SLIMP3, a networked MP3 and Internet radio player. The
SLIMP3 won a five-out-of-five mouse rating in <i>Macworld</i> magazine, and was featured in <i>GQ</i> magazine and on TechTV's <i>The Screen Savers</i>. This year,
they're trying to repeat the success with Squeezebox, an 802.11-enabled
version.
</p>
<p>
The interesting thing about the SLIMP3 and the Squeezebox from our point
of view, though, is that the server which drives the player is written
in Perl, and developers are allowed -- in fact, encouraged -- to hack on
it and make the devices do interesting things. A <a href="http://www.slimdevices.com/dev_overview.html">developer
community</a> has sprung up around the SLIMP3, and some <a href="http://www.slimdevices.com/dev_third_party.html">interesting
third-party hacks</a> have been produced.
</p>
<p>
We caught up with Dean Blackketter from Slim Devices, who took some time out
from moving Squeezeboxes to answer a few of our questions.
</p>

<hr />
<p>
<b>perl.com: What made you decide, first of all, to write the server
code in Perl?</b>
</p>
<p>
<b>
Dean</b>: Sean [Adams, Slim Devices founder] wrote the very first
version of the software in Perl because he 
was able to get it up and running quickly. When I first encountered 
Sean and SLIMP3, I was a little afraid of Perl, having been primarily a 
C and C++ programmer, mostly because when I tried to read it, I got
confused by idiomatic usage.
</p>
<p>
I first decided to rewrite the thing in C, but I couldn't really get 
started until I could read the existing code. So I bought a copy of 
<i>Learning Perl</i> and read it in two evenings. Halfway through the first chapter something clicked and I said, "That's so cool!" Then, about 
every 10 pages after I'd repeat, "That's so cool!" again, but a little 
louder.  By the end, I was sold. At 
that point I dug in and started making the software better. 
</p>

<p><b>What features of Perl were particularly helpful when you were
writing the SlimServer?</b></p>
<p>The greatest feature of Perl, for us, is that so many people know it.
Since our software is open source, we benefit from as many users as 
possible being able to read and improve our code base. Anybody who's 
thrown together a little Perl CGI or script is a potential contributor 
to our software.</p>

<p>
Second, the ability for us to offer our software on a wide array of 
platforms (Mac OS X, Windows 98/ME/NT/2000/XP, BSD, Linux, Solaris) and 
also be deployed on server appliances makes it possible for us to get 
our product running as broadly as possible. 
</p>
 
<p> 
Third, even though our product's primary feature is playing back audio, 
the bulk of the software really is processing text. Our built-in HTTP 
server, command-line interface, device-user interface, and even music 
meta-information is all text-based, and Perl is nearly the perfect 
language for this.
</p>

<p>
<b>What issues did you have to face when considering how to distribute a
Perl-based consumer application, and how did you approach them?</b></p>

<p>
Distributing a Perl application on the traditional Unix-like platforms 
(BSD, Solaris, Linux) is easy. Things got a bit harder on Mac OS X, 
since command-line solutions aren't acceptable to Mac users. 
Initially, I wrote a simple graphical application (in AppleScript!) 
that acted as a launcher for our server software, but this was really 
not good enough for Mac users. One of our Open Source contributors, 
Dave Nanian, came to the rescue and built us a System Preferences pane 
and installer application that work as they should on a Mac.
</p>

<p>
Windows is the hardest platform for us to support. Luckily we had 
another Open Source contributor, Sam Saffron, who decided that building a
shell application for the server software would be a great way to learn 
MFC, and he contributed a nice little app for this. Another 
contributor, Chris Eastwood, put together an installer for us. But it 
was the fine folks at <a href="http://www.activestate.com/">ActiveState</a>
 with their <a href="http://www.activestate.com/Products/Perl_Dev_Kit/">Perl Dev Kit</a> that really 
made it possible for us to release on Windows with their PerlApp (for 
making Perl-based .exe files) and PerlSvc (for making Perl-based 
Windows Services).
</p>

<p>
Even with all this help, Perl on Windows is different enough in subtle 
ways to make it a real pain to maintain. Maybe if we had more hardcore 
in-house Windows experience things would be easier, but it's a struggle. 
</p>

<p><b>For consumer devices like the SLIMP3, the manufacturer has a choice
between open and hackable, and "sealed box." You guys went for the hackable
approach, GPLing the code and setting up developers' forums. What was the
rationale behind that?</b></p>

<p>
When I got into this, the total of my Open Source experience was 
running a Linux server in my basement. Sean initially released the 
SLIMP3 software under the GPL, which made it possible for me to help 
out. I quickly realized that our customers have a lot of talent and 
energy that they are willing to contribute to make the product better. 
We're lucky to have a business model where we can make money on the 
hardware and give the software away. When our customers contribute, 
they make their own SLIMP3s (and now Squeezeboxes) more valuable to 
themselves and make the new units we sell to new customers more valuable as 
well. Everybody wins.
</p>

<p><b>How did you go about building a developer community behind the 
SlimServer project?</b></p>

<p>
I like to think that the community built itself. We provided a forum 
(our discussion lists) and Sean and I participate on a daily basis; 
acting on the requests, suggestions, bug reports, and patches that 
people post. We're spending more effort lately setting up our own list 
server and CVS system, as we had problems with our previous forums 
(Yahoo Groups and SourceForge, respectively), but these will give us a 
little more control of our virtual spaces. 
</p>

<p><b>How do you decide which developer extensions to keep as third-party 
projects and which to integrate?</b></p>

<p>
If a contribution will make the product better for a substantial                
portion of our customers and won't make the product worse for any of            
them, then, generally speaking, it's included.   Submitted features             
that make the software harder or less intuitive to use, require obscure         
or platform-specific software or hardware to be installed, generally             
don't make it in.  Contributions that are useful to a large fraction of         
our customers and don't diminish the product's ability to play back             
music, make it in.
</p>

<p>
I act as final arbiter and (hopefully) benevolent dictator, and the            
community has been really supportive of this.
</p>

<p><b>Finally, we notice that you've decided to donate 10 percent of your
profits to the EFF. What's the motivation behind this?</b></p>
<p>
Digital freedoms are important to the folks at Slim Devices, both 
personally and at a corporate level.  We've been frustrated by not 
being able to offer our customers the ability to play the music that 
they've bought due to digital rights management systems and onerous 
licensing fees for various patents.  The EFF shares our goal to free 
our customers' music.
</p>

<p>
The Squeezebox is available from <a href="http://www.slimdevices.com/">Slim Devices</a> and their resellers,
and the server code can be downloaded from their <a href="http://www.slimdevices.com/su_downloads.html">downloads site</a>. 
</p>




        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2003/11/">&laquo; November 2003</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2004/01/">January 2004 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
