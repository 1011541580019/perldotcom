<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: March 2002 Archives</title>


    <link rel="prev" href="/pub/2002/02/" title="February 2002" />
    <link rel="next" href="/pub/2002/04/" title="April 2002" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">March 2002 Archives</h1>





                            
                            <div id="entry-1274" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/26/cpanplus.html" rel="bookmark">CPAN PLUS</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Jos Boumans</span> on <abbr class="published" title="2002-03-26T00:00:00-08:00">March 26, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            
<p>Setting: A warm August day, somewhere in Amsterdam.  In the bar of Yet Another
Hotel.  A large number of people are gathered.  Judging by their attire, they're
not here for business -- or at least not the business of selling vacuum cleaners.
They notice the sun and appreciate it, but it is the shining light of their
laptops that captivates them.</p>

<p>A man with long dark hair stands up -- he appears to be the leader of this
unusal congregation.  He's wearing overalls and is barefoot.</p>
<p>He begins to speak of something called "see pants," which has
the potential to change the world of the laptop-people.  It would
alter the way free software is distributed.  It would receive a mark
of quality; it would be tested and reviewed.  And gosh darnit, it
would be good.</p>
<p>That man was Michael Schwern.  His idea was CPANTS, the "CPAN Testing
Service," and the occasion was YAPC::Europe 2001.
But CPANTS required work.  Each of us set off with our own little
part, trying to make the world a better place.</p>
<p>Being a novice to the Perl community and eager for a challenging
project to sink my teeth into, I offered to patch <code>CPAN.pm</code> so that
CPANTS could automatically build modules and test them.  I imagined
this would be a simple role.</p>
<p>I started looking through the sources of <code>CPAN.pm</code>.  Although in my
experience as a user, <code>CPAN.pm</code> had always worked as advertised,
as a developer I was confronted with its limitations: It was not
very modular, allowing few additions to its functionality; it had
a limited programming interface, being basically designed for
interactive use.</p>


<p>So there I stood, having made a commitment to ameliorate the
CPAN-interface and lacking the code base to do so, with two choices:
Complain or Fix.  Since complaining wouldn't give the desired
result, the only remaining option was to start anew.</p>
<p>Thus CPANPLUS was born.  Its objective is simple: do what
<code>CPAN.pm</code> does, but do it better. We'd start with a clean code
base designed to accommodate different types of use.  But at
the same time, this code should be a starting point, not the
end point.</p>
<p>So is CPANPLUS better?  That's for you to decide.  The project
began in October 2001, and late March 2002 marks the first
official release on CPAN, timed to accompany this article.</p>
<h4>Setting Up CPANPLUS</h4>
<p>Setting up CPANPLUS should be simple.  It is installed like any
other Perl module:
</p>
<pre><code>
    perl Makefile.PL
    make
    make test
    make install</code></pre>
<p>The setup of CPANPLUS happens with "perl Makefile.PL."  CPANPLUS
will attempt to do two things at this point:
</p><ul>
    <li> write an appropriate configuration for your system; and
    <li> probe for modules CPANPLUS would like to have, but which
      are not required.</ul>
<p>Currently, the configuration is not automatic, so you will be
prompted to answer some questions about your system, although
in many cases the default values are acceptable.
CPANPLUS will then fetch the index files for the first time
and ask you to choose your favorite CPAN mirrors. You can
pick from a list, or specify your own.</p>
<p>One question remains: Should we probe for missing modules?
It is recommended that you do so, because CPANPLUS is faster
and better with those modules installed.  It's up to you,
however: CPANPLUS does not require any noncore modules
to run.</p>

<p>Continue with <code>make</code> and <code>make test</code>.  All
tests should pass -- if they don't, something is wrong.  A list of tested
platforms is available at <a
href="http://cpanplus.sourceforge.net/faq.html">the CPANPLUS FAQ
site</a>. Finally, run "make install" and CPANPLUS will be installed on
your system!</p>

<h4>The Structure of CPANPLUS</h4>
<p>As you may have noticed if you've looked at the sources, CPANPLUS
is spread out over many modules.  This is because of heavy
subclassing: We believe that each specific task should have its
own space in the CPANPLUS library.  This modular build allows
for extensions to the library and many plugins.</p>
<p>There are two modules that are of particular interest to users
of CPANPLUS.  One is the user-interface <code>CPANPLUS::Shell</code>, and
the other is the programming-interface <code>CPANPLUS::Backend</code>.
Both modules will be explained in more depth later.
Two other modules allow you to alter the behavior of the
library at run time.  These are <code>CPANPLUS::Error</code>, which allows you
to manipulate error messages to and from CPANPLUS; and
<code>CPANPLUS::Configure</code>, which allows you to change the configuration
at runtime.  They're definately worth looking at if you are a developer
using CPANPLUS.</p>

<h3>The User's Interface: '<code>Shell</code>'</h3>

<p>In truth, it isn't fair to say that "Shell" is <i>the</i> user's
interface; CPANPLUS is designed to work with any number of shells.  In
fact, if you want to write your own shell, then that's possible.  At the
moment, only the default shell exists, but Jouke Visser is at work on a
<code>wxPerl</code> shell.</p>



  <p>You can specify which shell you wish to run in your configuration
    file.  The default is <code>CPANPLUS::Shell::Default</code>.
<p>There are two ways to invoke the shell.  One is the familiar
way:</p>
    <p><code>perl -MCPANPLUS -eshell</code></p>
<p>There is also an executable in your Perl bin directory:</p>
   <p><code> cpanp</code></p>

<p>The <code>-M</code> syntax also accepts a few flags that allow you
to install modules from the command line.  See the perldoc for
CPANPLUS for details.</p>

<p>Now let's look at using the default shell.</p>

<p>One of its features is that each command works with a single letter.
This could be called the "compact shell" as it is designed to be small,
but still provide all the basic commands you need.</p>
<p>Here is a short summary of the command options available, which
can also be seen by typing "h" or "?" at the shell prompt:</p>
<pre><code>
    a AUTHOR [ AUTHOR]    Search by author or authors
    m MODULE [ MODULE]    Search by module or modules
    i MODULE | NUMBER     Install a module by name or previous result
    d MODULE | NUMBER     Download a module to the current directory
    l MODULE [ MODULE]    Display detailed information about a module
    e DIR    [ DIR]       Add directories to your @INC
    f AUTHOR [ AUTHOR]    List all distributions by an author
    s OPTION VALUE        Set configuration options for this session
    p [ FILE]             Print the error stack (optionally to a file)
    h | ?                 Display help
    q                     Exit the shell</code></pre>
<p>Let's assume you want to see whether you can install a module in the
<code>Acme::</code> namespace.</p>
<p>First, you'd look for modules that match your criteria with a
module search:</p>
<p><code>    m ^acme::</code></p>
<p>As you can see, a search can take a regular expression.  It's a
feature of the default shell that all searches are
case-insensitive.</p>
<p>This search will return a result like this:</p><pre><code>
    0001  Acme::Bleach          1.12    DCONWAY
    0002  Acme::Buffy           undef   LBROCARD
    0003  Acme::Colour          0.16    LBROCARD
    0004  Acme::ComeFrom        0.05    AUTRIJUS
    0005  Acme::DWIM            1.05    DCONWAY</code></pre>
<p>The first number is simply the ID for this search, which can be
used as a shortcut for subsequent commands.  The next column is
the name of the module, followed by a version number. The last is
the CPAN id of the author.</p>
<p>Imagine you'd like to get more information about <code>Acme::Buffy</code>.
Simply type:</p>
   <pre><code> l Acme::Buffy</code></pre>
<p>Or, to save effort, the ID from the most recent search can be used:</p>
   <p><code> l 2</code></p>
<p>This will give results like this:</p>
<pre><code>
  Details for Acme::Buffy:
  Description               An encoding scheme for Buffy fans
  Development Stage         Released
  Interface Style           hybrid, object and function interfaces available
  Language Used             Perl-only, no compiler needed, should be platform independent
  Package                 Acme-Buffy-1.2.tar.gz
  Support Level             Developer
  Version                   undef</code></pre>
<p>If "Acme::Buffy" looks appealing, then you can install it:</p>
   <p><code>i 2</code></pre>
<p>That's all you need to install modules with CPANPLUS.</p>













<h3>The Programmer's Interface: '<code>Backend</code>'</h3>

<p>CPANPLUS shells are built upon the CPANPLUS::Backend module.
Backend provides generic functions for module management tasks.
It is suitable for creating not only shells, but also
autonomous programs.</p>

<p>Rather than describe in detail all the available methods, which
are documented in the CPANPLUS::Backend pod, I will give a few
bits of sample code to show what you can do with Backend.</p>

<pre><code>
    ### Install all modules in the POE:: namespace ###
    my $cb = new CPANPLUS::Backend;
    my $hr = $cb-&gt;search( type =&gt; 'module', list =&gt; [qw|^POE$ ^POE::.*|] );
    my $rv = $cb-&gt;install( modules =&gt; [ keys %$hr ] );</code></pre>

<p>The variable <code>$rv</code> is a hash reference where the keys are the
names of the modules and the values are exit states.  This allows
you to check how the installation went for each module.  You can
also get an error object from <code>Backend</code> with a complete history of
what CPANPLUS did while installing these modules.</p>
<pre><code>
    ### Fetch a certain version of LWP ###
    my $cb = new CPANPLUS::Backend;
    my $rv = $cb-&gt;fetch( modules =&gt; ['/G/GA/GAAS/libwww-perl-5.62.tar.gz'] );</code></pre>

<p>Once again, <code>$rv</code> is a hash reference, where the key is
the module you tried to fetch and the value is the location on your
disk where it was stored. Some people might not care for the
way searches are handled and would rather roll their own.  <code>Backend</code>
allows you to take matters into your own hands:</p>
<pre><code>
    ### Do your own thing ###
    my $cb = new CPANPLUS::Backend;
    my $mt = $cb-&gt;module_tree();</code></pre>

<p><code>$mt</code> now holds the complete module tree, which is the
same tree CPANPLUS uses internally.  For this hash reference, the keys
are the names of modules, and values are <code>CPANPLUS::Internals::Module</code>
objects.</p>

<pre><code>
    for my $name ( keys %$mt ) {
        if ($name =~ /^Acme/) {
            my $href = $mt-&gt;{$name}-&gt;modules();
            
            while ( my ($mod,$obj) = each %$href ) {
                print $obj-&gt;install()
                    ? &quot;$mod installed succesfully\n&quot;
                    : &quot;$mod installation failed!\n&quot;;
            }
        }
    }</code></pre>
<p>This traverses the module tree, looking for module names that match
the regular expression <code>'/^Acme/'</code> and installing all modules by the
same author.</p>

<p>Why would you want to do this?  We all have our reasons, and mine
is that the <code>Acme::</code> namespace is CPAN's bleeding edge
codebase.  Authors who have modules there must be trustworthy!</p>

<h3>Merits of the Interfaces</h3>

<p>In addition to the modules I've mentioned, there are plenty more:
CPANPLUS currently contains 17 modules. These modules are part of a
three-tiered approach.  Underneath everything sits
<code>Internals</code>, which performs the nitty-gritty work;
<code>Backend</code> rests on top of it; and finally
<code>Shell</code> provides a user interface.</p>

<p>The logic beyond the layered structure is that everyone wants
something different from CPANPLUS.  Some people just want a working
shell like <code>CPAN.pm</code> provided.  Others need a way to write
applications that manage Perl installations.  Still others dream of
more elaborate plugins, like CPANTS or an automatic bug ticketing with
RT -- something which is already planned.</p>

<p>The division allows us to stay flexible.  There is something for
everyone in CPANPLUS -- and if it's not there yet, it can probably be
built upon the existing codebase.</p>

<h3>Current and Future Developments</h3>

<p>CPANPLUS was just released, but we're not resting.  There's still a
lot of functionality we want to provide.  <p>It's high priority to
create backward compatibility with the current <code>CPAN.pm</code>
so CPANPLUS can eventually be released as <code>CPAN.pm</code>,
possibly taking over its place in the core Perl distribution.</p>

<p>Another development that was already mentioned is automatic bug
reporting, which would give authors of modules feedback on the
performance of their modules on varying platforms, under various
configurations. Of course, there's also CPANTS, the idea that sparked
the entire CPANPLUS project.  CPANTS is intended to provide automated
testing of CPAN modules to make certain they meet minimal
standards.</p>

<p>We have thoughts about integrating with known package managers like
<code>PPM</code>, <code>RPM</code> and <code>dpkg</code>.</p>

<p>We also plan to develop more shells, both for the command-line and
for the Windows and X environments.</p>

<p>Naturally, we don't want to stop there.  There are a million
possibilities with CPANPLUS, and hopefully they'll all be explored
and developed.</p>

<p>If you have a good idea, then mail us your suggestion;  or better yet,
join as a developer and contribute!</p>

<h4>Support and Contributing</h4>
<p>If you have questions or suggestions, or want to join up as a developer,
then send mail to:
    <a href="mailto:cpanplus-info@lists.sourceforge.net">cpanplus-info@lists.sourceforge.net</a>. This is the general mailing list.</p>

<p>Reports of bugs should be sent to: <a
href="mailto:cpanplus-bugs@lists.sourceforge.net">cpanplus-bugs@lists.sourceforge.net</a>
Some of the developers are also regulars on the IRC channel #CP on
magnet.</p>

<h3>Where to Get CPANPLUS</h3>

<p>There are two places where you can obtain CPANPLUS.  The first is,
of course, to check your local CPAN mirror (or look it up on <a
href="http://search.cpan.org/">search.cpan.org</a>).  The latest
stable release will always be there.</p>

<p>If you are interested in development versions, then look at
<a href="http://cpanplus.sourceforge.net/downdev.html">Sourceforge</a>.</p>
<h4>More Information</h4>
<p>In addition to the documents that come with CPANPLUS, information
is available on our <a href="http://cpanplus.sourceforge.net">Web site</a>.
All good things stem from there.</p>

<p>On a side note, I will be giving speeches and tutorials on CPANPLUS
at both <a
href="http://www.yapc.org/America/">YAPC::America::North</a> and <a
href="http://www.yapc.org/Europe">YAPC::Europe</a>, as well as <a
href="http://conferences.oreillynet.com/os2002/">TPC</a>.  Come by and
share your ideas!</p>

<h4>Credits</h4>
<p>Of course, I couldn't end without giving credit to the other developers.
Although I started CPANPLUS, it would never have become what it is now
without Joshua Boschert and Autrijus Tang.  Ann Barcomb wrote all the
documentation and Michael Schwern provided tests and just general
good ideas.  Thanks also goes to everyone who contributed with posts
to the development and bug mailing lists.</p>
<h4>Conclusion</h4>
<p>So here we are, eight months after that first magical gathering.  One
step closer to the goal.  And one step closer to Yet Another Venue.
And perhaps there, I'll be standing up, talking about new things, or
at least CPANPLUS.</p>
<p>Hopefully I'll be able to meet you there, in a circle of laptops, and
we'll continue to make our world a better place!</p>







        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1272" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/22/modperl.html" rel="bookmark">mod_perl in 30 minutes</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Stas Bekman</span> on <abbr class="published" title="2002-03-22T00:00:00-08:00">March 22, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            

<h3><a name="introduction">Introduction</a></h3>

<p>In the <a href="/pub/a/2002/02/26/whatismodperl.html">previous article</a>, I've shown 
quite amazing Web performance
reports from companies that have deployed mod_perl heavily.  You might
be surprised but you can quite easily get similarly amazing results if
you move your service to mod_perl as well. In fact, getting started
with mod_perl shouldn't take you more than 30 minutes -- the time it
takes to compile and configure the server on a decent machine and get
it running.</p>

<p>In this article I'll show step-by-step installation and configuration
scenarios, and chances are you will be able to run the basic
statically compiled mod_perl setup without reading any other
documents. Of course, you will want and need to read the documentation
later, but I think you will agree with me that it's ultimately cool to
be able to get your feet wet without knowing much about the new
technology up-front.</p>

<p>The mod_perl installation was tested on many mainstream Unix
platforms, so unless you have a nonstandard system, you
shouldn't have any problems building the basic mod_perl server.</p>
<p>If you are a Windows user, then the easiest way is to use the binary
package available from <a href="http://perl.apache.org/distributions.html.">http://perl.apache.org/distributions.html.</a> From
the same location, you can download the Linux RPM version and CVS
snapshots. However, I always recommend to build the mod_perl from
the source, and as you will see in a moment, it's an easy thing to do.</p>


<h3><a name="installing mod_perl is easy">Installing mod_perl Is Easy</a></h3>
<p>So let's start with the installation process. If you are an
experienced Unix user, then you need no explanation for the following
commands. Just copy and paste them and you will get the server
installed.</p>
<p>I'll use a <code>%</code> sign as the shell program's prompt.</p>
<pre>
  % cd /usr/src
  % lwp-download <a href="http://www.apache.org/dist/httpd/apache_1.3.20.tar.gz">http://www.apache.org/dist/httpd/apache_1.3.20.tar.gz</a>
  % lwp-download <a href="http://perl.apache.org/dist/mod_perl-1.26.tar.gz">http://perl.apache.org/dist/mod_perl-1.26.tar.gz</a>
  % tar -zvxf apache_1.3.20.tar.gz
  % tar -zvxf mod_perl-1.26.tar.gz
  % cd mod_perl-1.26
  % perl Makefile.PL APACHE_SRC=../apache_1.3.20/src \
    DO_HTTPD=1 USE_APACI=1 EVERYTHING=1
  % make &amp;&amp; make test &amp;&amp; make install
  % cd ../apache_1.3.20
  % make install</pre>
<p>That's all!</p>
<p>What's left is to add a few configuration lines to <em>httpd.conf</em>, an
Apache configuration file, start the server and enjoy mod_perl.</p>
<p>If you have stumbled upon a problem at any of the above steps, then don't
despair -- the next section will explain in detail each step.</p>


<h3><a name="installing mod_perl detailed">Installing mod_perl Detailed</a></h3>
<p>If you didn't have the courage to try the steps in the previous
section or you simply want to understand more before you try, then let's go
through the fine details of the installation process. If you have
successfully installed mod_perl following the short scenario in the
previous section, then you can skip this section and move on to the next
one.</p>
<p>Before we proceed, I should note that you have to become a <em>root</em>
user in order to install the files in a protected area. If you don't
have <em>root</em> access, then you can install all the files under your home
directory. We will talk about the nuances of this approach in
a future articles. I'll also assume that you have <em>perl</em> and <em>gcc</em>
or an equivalent C compiler installed.</p>
<p>I assume that all builds are being done in the <em>/home/stas/src</em>
directory.  So we go into this directory.</p>
<pre>
  % cd /home/stas/src</pre>
<p>Now we download the latest source distributions of Apache and
mod_perl. If you have the <code>LWP</code> module installed (also known as
<em>libwww</em> and available from CPAN), then you should have the
<code>lwp-download</code> utility that partly imitates your favorite browser by
allowing you to download files from the Internet. You can use any
other method to retrieve these files.  Just make sure that you save
both files in the <em>/home/stas/src</em> directory, as this will make it
easier for you to follow the example installation process. Of course,
you can install both packages anywhere on your file system.</p>
<pre>
  % lwp-download <a href="http://www.apache.org/dist/httpd/apache_1.3.20.tar.gz">http://www.apache.org/dist/httpd/apache_1.3.20.tar.gz</a>
  % lwp-download <a href="http://perl.apache.org/dist/mod_perl-1.26.tar.gz">http://perl.apache.org/dist/mod_perl-1.26.tar.gz</a></pre>
<p>You can make sure that you're downloading the latest stable versions
by visiting the following distribution directories:
<em><a href="http://www.apache.org/dist/httpd/">http://www.apache.org/dist/httpd/</a></em> and
<em><a href="http://perl.apache.org/dist/">http://perl.apache.org/dist/</a></em>. As you have guessed already, the
former URL is the main Apache distribution directory, the latter is
the same thing for mod_perl.</p>
<p>Untar both sources. You have to uncompress and untar the files.  In
addition to its main usage for tarring and untarring files, the GNU
<code>tar</code> utility is able to uncompress files compressed by the <code>gzip</code>
utility, when the <code>-z</code> option is used.</p>
<pre>
  % tar -zvxf apache_1.3.20.tar.gz
  % tar -zvxf mod_perl-1.26.tar.gz</pre>
<p>If you have a non-GNU <code>tar</code> utility, then chances are that it will be
unable to decompress, so you need to do it in two steps. First,
uncompress the packages with:</p>
<pre>
  % gzip -d apache_1.3.20.tar.gz
  % gzip -d mod_perl-1.26.tar.gz</pre>
<p>Then untar them with:</p>
<pre>
  % tar -xvf apache_1.3.20.tar
  % tar -xvf mod_perl-1.26.tar</pre>
<p>If you don't have <code>tar</code> or <code>gzip</code> utilities available, then install them or use their equivalents.</p>
<p>Now go into the mod_perl source distribution directory.</p>
<pre>
  % cd mod_perl-1.26</pre>
<p>The next step is to create the <em>Makefile</em>.</p>
<pre>
  % perl Makefile.PL APACHE_SRC=../apache_1.3.20/src \
    DO_HTTPD=1 USE_APACI=1 EVERYTHING=1</pre>
    
 <csperl file="grab" domain="on" record="b/832" template="b/article_sidebar2.view">   <p>mod_perl accepts a variety of parameters, in this scenario we are
going to use those that will allow you to do almost everything with
mod_perl. Once you learn more about mod_perl, you will be able to fine-tune the list of parameters passed to <em>Makefile.PL</em>.  In future
articles, I'll go through all the available options.</p>
<p><code>perl Makefile.PL ...</code> execution will check for prerequisites and
tell you which required software packages are missing from your
system. If you don't have some of the Perl packages installed, then you
will have to install these before you proceed. They all are available
from CPAN and can be easily downloaded and installed.</p>
<p>If you choose to install mod_perl with help of the <code>CPAN.pm</code> module,
then it will install all the missing modules for you. To do so, tell
<code>CPAN.pm</code> to install the <code>Bundle::Apache</code> bundle.</p>
<p>This step also executes the <code>./configure</code> script from Apache's source
distribution directory (absolutely transparently for you), which
prepares the Apache build configuration files. If you need to pass
parameters to Apache's <code>./configure</code> script, then pass them as
options to <code>perl Makefile.PL ...</code>. In future articles we will talk
about all the available options.</p>
<p>Now you should build the <em>httpd</em> executable by using the <code>make</code>
utility.</p>
<pre>
  % make</pre>
<p>This command prepares mod_perl extension files, installs them in the
Apache source tree and builds the <em>httpd</em> executable (the Web server
itself) by compiling all the required files. Upon completion of the
<code>make</code> process, you get returned to the mod_perl source distribution
directory.</p>
<p><code>make test</code> executes various mod_perl tests on the freshly built
<em>httpd</em> executable.</p>
<pre>
  % make test</pre>
<p>This command starts the server on a nonstandard port (8529) and tests
whether all parts of the built server function correctly. If something
goes wrong, then the process will report it to you.</p>
<p><code>make install</code> completes the installation process of mod_perl by
installing all the Perl files required for mod_perl to run and, of
course, the server documentation (man pages).</p>
<pre>
  % make install</pre>
<p>You can use the following commands concatenation style:</p>
<pre>
  % make &amp;&amp; make test &amp;&amp; make install</pre>
<p>It simplifies the installation, since you don't have to wait for each
command to complete before starting the next one. When installing
mod_perl for the first time, it's better to do it step by step.</p>
<p>If you choose the all-in-one approach, then you should know that if <code>make</code>
fails, then neither <code>make test</code> nor <code>make install</code> will be executed. If
<code>make test</code> fails, then <code>make install</code> will not be executed.</p>
<p>Finally, change to the Apache source distribution directory, run
make&nbsp;install to create the Apache directory tree and install Apache
header files (<em>*.h</em>), default configuration files (<em>*.conf</em>), the
<em>httpd</em> executable and a few other programs.</p>
<pre>
  % cd ../apache_1.3.20
  % make install</pre>
<p>Note that, as with a plain Apache installation, any configuration
files left from a previous installation won't be overwritten by this
process. You don't need to back up your previously working
configuration files before the installation.</p>
<p>When the <code>make install</code> process completes, it will tell you how to
start a freshly built Web server (the path to the <code>apachectl</code> utility
that is being used to control the server) and where the installed
configuration files are. Remember or, even better, write down both of
them, since you will need this information. On my machine
the two important paths are:</p>
<pre>
  /usr/local/apache/bin/apachectl
  /usr/local/apache/conf/httpd.conf</pre>
<p>So far, we have completed the building and installation of the mod_perl
enabled Apache. The next steps are to configure <em>httpd.conf</em>, write a
little test script, start the server and check that the test script is
working.</p>













<h3><a name="configuring and starting mod_perl server">Configuring and Starting mod_perl Server</a></h3>
<p>First things first; we want to make sure that our Apache was built correctly
and that we can serve plain HTML files with it. Why do that? To
minimize the number of possible trouble makers, if we find out that
mod_perl doesn't work. After you know that Apache can serve HTML
files, you don't have to worry about it anymore. And if something goes
wrong with mod_perl, you have eliminated the possibility that the
<em>httpd</em> binary or basic configurations are broken, you know that you are
allowed to bind to the port you have configured your server to listen
to, and that the browser you're testing with is just fine. Again, you
should follow these guidelines when installing mod_perl for the first
time.</p>
<p>Configure Apache as you always do. Set <code>Port</code>, <code>User</code>, <code>Group</code>,
<code>ErrorLog</code> and other directives in the <em>httpd.conf</em> file (remember
I've asked you to remember the location of this file at the end of the
previous section?). Use the defaults as suggested, customize only when
you have to. Values that you need to customize are <code>ServerName</code>,
<code>Port</code>, <code>User</code>, <code>Group</code>, <code>ServerAdmin</code>, <code>DocumentRoot</code> and a few
others. You will find helpful hints preceding each directive. Follow
them if in doubt.</p>
<p>When you have edited the configuration file, it's time to start the
server.  One of the ways to start and stop the server is to use the
<code>apachectl</code> utility. You start the server with:</p>
<pre>
  % /usr/local/apache/bin/apachectl start</pre>
<p>And stop it with:</p>
<pre>
  % /usr/local/apache/bin/apachectl stop</pre>
<p>Note that you have to be <em>root</em> when starting the server if the
server is going to listen on port <code>80</code> or another privileged port
(&lt;1024).</p>
<p>After you start the server, check in the <em>error_log</em> file
(<em>/usr/local/apache/logs/error_log</em> is the file's default location)
that the server has indeed started. Don't rely on the status
<code>apachectl</code> reports.  You should see something like this:</p>
<pre>
  [Thu Jun 22 17:14:07 2000] [notice] Apache/1.3.20 (Unix) 
  mod_perl/1.26 configured -- resuming normal operations</pre>
<p>Now point your browser to <em><a href="http://localhost/">http://localhost/</a></em> or
<em><a href="http://your.server.name/">http://your.server.name/</a></em> as configured with the <code>ServerName</code>
directive. If you have set a <code>Port</code> directive with a value different
from <code>80</code>, then apply this port number at the end of the server name. If
you have used port 8080, then test the server with
<em><a href="http://localhost:8080/">http://localhost:8080/</a></em> or <em><a href="http://your.server.name:8080/">http://your.server.name:8080/</a></em>. You
should see the infamous <em>``It worked''</em> page, which is an <code>index.html</code>
file that <code>make install</code> in the Apache source tree installs for you.
If you don't see this page, then something is wrong and you should check
the contents of the <em>error_log</em> file. You will find the path of the
error log file by looking it up in the <code>ErrorLog</code> directive in
<em>httpd.conf</em>.</p>
<p>If everything works as expected, then shut down the server, open
<em>httpd.conf</em> in your favorite editor, and scroll to the end of the
file, where we will add the mod_perl configuration directives (of
course you can place them anywhere in the file).</p>
<p>Assuming that you put all scripts that should be executed by the
mod_perl enabled server in the <em>/home/httpd/perl/</em> directory, add the
following configuration directives:</p>
<pre>
  Alias /perl/ /home/httpd/perl/

  PerlModule Apache::Registry
  &lt;Location /perl&gt;
    SetHandler perl-script
    PerlHandler Apache::Registry
    Options ExecCGI
    PerlSendHeader On
    allow from all
  &lt;/Location&gt;</pre>
<p>Save the modified file.</p>
<p>This configuration causes each URI starting with <em>/perl</em> to be
handled by the Apache mod_perl module. It will use the handler from
the Perl module <code>Apache::Registry</code>.</p>


<h3><a name="preparing the scripts directory">Preparing the Scripts Directory</a></h3>
<p>Now create a <em>/home/httpd/perl/</em> directory if it doesn't yet exist.
In order for you and Apache to be able to read, write and execute
files we have to set correct permissions. You could get away by simply
doing:</p>
<pre>
  % chmod 0777  /home/httpd/perl</pre>
<p>This is very, very insecure and you <strong>should not</strong> follow this approach
on the production machine. This is good enough when you just want to
try things out and want to have as few obstacles as possible. Once you
understand how things work, you should tighten the permissions of
files served by Apache.  In future articles, we will talk about setting
proper file permissions.</p>


<h3><a name="the mod_perl rules apache::registry script">The ``mod_perl rules'' Apache::Registry Script</a></h3>
<p>As you probably know, mod_perl allows you to reuse CGI scripts
written in Perl that were previously used under mod_cgi. Therefore,
our first test script can be as simple as:</p>
<pre>
  mod_perl_rules1.pl
  ------------------
  print &quot;Content-type: text/plain\r\n\r\n&quot;;
  print &quot;mod_perl rules!\n&quot;;</pre>
<p>Save this script in the <em>/home/httpd/perl/mod_perl_rules1.pl</em> file.
Notice that the <em>shebang</em> line is not needed with mod_perl, but you
can keep it if you want. So the following script can be used as well:</p>
<pre>
  mod_perl_rules1.pl
  ------------------
  #!/usr/bin/perl
  print &quot;Content-type: text/plain\r\n\r\n&quot;;
  print &quot;mod_perl rules!\n&quot;;</pre>
<p>Of course you can write the same script using the Apache Perl API:</p>
<pre>
  mod_perl_rules2.pl
  ------------------
  my $r = shift;
  $r-&gt;send_http_header('text/plain');
  $r-&gt;print(&quot;mod_perl rules!\n&quot;);</pre>
<p>Save this script in the <em>/home/httpd/perl/mod_perl_rules2.pl</em> file.</p>
<p>Now make both of the scripts executable and readable by the server.
Remember that when you execute scripts from a shell, they are being
executed by the user-name you are logged with. When instead you try to
run the scripts by issuing requests, Apache needs to be able to read
and execute them. So we make the script readable and executable by
everybody:</p>
<pre>
  % chmod 0755   /home/httpd/perl/mod_perl_rules1.pl \
                 /home/httpd/perl/mod_perl_rules2.pl</pre>
<p>If you don't want other users to be able to read your script, then you
should add yourself into the groupname the Web server is running with
(as defined by the <code>Group</code> directive) and then make the script owned
by that group and tighten the permissions. For example, on
my machine I run the server under the group <em>httpd</em> and I'm the only
one who is in the same group, so I can do the following:</p>
<pre>
  % chown stas.httpd /home/httpd/perl/mod_perl_rules1.pl \
                 /home/httpd/perl/mod_perl_rules2.pl</pre>
<pre>
  % chmod 0750   /home/httpd/perl/mod_perl_rules1.pl \
                 /home/httpd/perl/mod_perl_rules2.pl</pre>
<p>The first command makes the files belong to group <em>httpd</em>, the second
sets the proper execution and read permissions.</p>
<p>That's secure, assuming that you have a dedicated groupname for your
server.</p>
<p>Also, remember that all the directories that lead to the script should
be readable and executable by the server.</p>
<p>You can test <em>mod_perl_rules1.pl</em> from the command line, since it is
essentially a regular Perl script.</p>
<pre>
  % perl /home/httpd/perl/mod_perl_rules1.pl</pre>
<p>You should see the following output:</p>
<pre>
  mod_perl rules!</pre>
<p>You cannot test the second script by executing it from the command
line since it uses the mod_perl API that is available only when run
from within the mod_perl server.</p>
<p>Make sure the server is running and issue these requests using your
favorite browser:</p>
<pre>
  <a href="http://localhost/perl/mod_perl_rules1.pl">http://localhost/perl/mod_perl_rules1.pl</a>
  <a href="http://localhost/perl/mod_perl_rules2.pl">http://localhost/perl/mod_perl_rules2.pl</a></pre>
<p>In both cases you will see on the following response:</p>
<pre>
  mod_perl rules!</pre>
<p>If you see it--<strong>congratulations</strong>! You have a working mod_perl server.</p>
<p>If you're using port 8080 instead of 80, then you should use this number in
the URL:</p>
<pre>
  <a href="http://localhost:8080/perl/mod_perl_rules1.pl">http://localhost:8080/perl/mod_perl_rules1.pl</a>
  <a href="http://localhost:8080/perl/mod_perl_rules2.pl">http://localhost:8080/perl/mod_perl_rules2.pl</a></pre>
<p>The <code>localhost</code> approach will work only if the browser is running on
the same machine as the server.  If not, then use the real server name for
this test. For example:</p>
<pre>
  <a href="http://your.server.name/perl/mod_perl_rules1.pl">http://your.server.name/perl/mod_perl_rules1.pl</a></pre>
<p>If there is any problem, then please refer to the <em>error_log</em> file for the
error reports.</p>
<p>Now it's a time to move your CGI scripts from <em>/somewhere/cgi-bin</em>
directory to <em>/home/httpd/perl/</em> and see them running much much
faster, when requested from the newly configured base URL
(<em>/perl/</em>). If you were accessing the script as <em>/cgi-bin/test.pl</em>,
then it will now be accessed from <em>/perl/test.pl</em>.</p>
<p>Some of your scripts might not work immediately and will require some
minor tweaking or even a partial rewrite to work properly with
mod_perl. Chances are that if you are not practicing sloppy
programming, then the scripts will work without any modifications.</p>
<p>If you have a problem with your scripts, then a good approach is to replace
<code>Apache::Registry</code> with <code>Apache::PerlRun</code> in <em>httpd.conf</em>, as the
latter can execute really badly written scripts. Put the following
configuration directives instead in <em>httpd.conf</em> and restart the
server:</p>
<pre>
  PerlModule Apache::PerlRun
  &lt;Location /perl&gt;
    SetHandler perl-script
    PerlHandler Apache::PerlRun
    Options ExecCGI
    PerlSendHeader On
    allow from all
  &lt;/Location&gt;</pre>
<p>Now your scripts should work, unless there is something in
them mod_perl doesn't accept. We will discuss these nuances in future
articles.</p>


<h3><a name="the mod_perl rules apache perl module">The ``mod_perl rules'' Apache Perl Module</a></h3>
<p>mod_perl is about running both scripts and handlers. Although I have
started to present mod_perl using scripts, because it's easier if you
have written CGI scripts before, the more advanced use of mod_perl is
about writing handlers. But have no fear. As you will see in a moment,
writing handlers is almost as easy as writing scripts.</p>
<p>To create a mod_perl handler module, all I have to do is to wrap the
code I have used for the script into a <code>handler</code> subroutine, add a
statement to return the status to the server when the subroutine has
successfully completed, and append a package declaration at the top of
the code.</p>
<p>Just as with scripts you can use either the CGI API you are probably
used to:</p>
<pre>
  ModPerl/Rules1.pm
  ----------------
  package ModPerl::Rules1;
  use Apache::Constants qw(:common);

  sub handler{
    print &quot;Content-type: text/plain\r\n\r\n&quot;;
    print &quot;mod_perl rules!\n&quot;;
    return OK;
  }
  1; # satisfy require()</pre>
<p>or the Apache Perl API that allows you to interact more intimately
with the Apache core by providing an API unavailable under regular
Perl. Of course, in the simple example that I show, using any of the
approaches is fine, but when you need to use the API, this version of
the code should be used.</p>
<pre>
  ModPerl/Rules2.pm
  ----------------
  package ModPerl::Rules2;
  use Apache::Constants qw(:common);

  sub handler{
    my $r = shift;
    $r-&gt;send_http_header('text/plain');
    print &quot;mod_perl rules!\n&quot;;
    return OK;
  }
  1; # satisfy require()</pre>
<p>Create a directory called <em>ModPerl</em> under one of the directories in
<code>@INC</code> (e.g. <em>/usr/lib/perl5/site_perl/5.005</em>), and put <em>Rules1.pm</em>
<em>Rules2.pm</em> into it, the files should include the code from the above
examples.</p>
<p>To find out what the <code>@INC</code> directories are, execute:</p>
<pre>
  % perl -le 'print join &quot;\n&quot;, @INC'</pre>
<p>On my machine it reports:</p>
<pre>
  /usr/lib/perl5/5.6.1/i386-linux
  /usr/lib/perl5/5.6.1
  /usr/lib/perl5/site_perl/5.6.1/i386-linux
  /usr/lib/perl5/site_perl/5.6.1
  /usr/lib/perl5/site_perl
  .</pre>
<p>Now add the following snippet to <em>httpd.conf</em> to configure mod_perl
to execute the <code>ModPerl::Rules::handler</code> subroutine whenever a
request to <em>mod_perl_rules1</em> is made:</p>
<pre>
  PerlModule ModPerl::Rules1
  &lt;Location /mod_perl_rules1&gt;
    SetHandler perl-script
    PerlHandler ModPerl::Rules1
  &lt;/Location&gt;</pre>
<p>Now you can issue a request to:</p>
<pre>
  <a href="http://localhost/mod_perl_rules1">http://localhost/mod_perl_rules1</a></pre>
<p>and just as with our <em>mod_perl_rules.pl</em> scripts you will see:</p>
<pre>
  mod_perl rules!</pre>
<p>as the response.</p>
<p>To test the second module &lt;ModPerl::Rules2&gt; add the same
configuration, while replacing all 1's with 2's:</p>
<pre>
  PerlModule ModPerl::Rules2
  &lt;Location /mod_perl_rules2&gt;
    SetHandler perl-script
    PerlHandler ModPerl::Rules2
  &lt;/Location&gt;</pre>
<p>And to test use the URI:</p>
<pre>
  <a href="http://localhost/mod_perl_rules2">http://localhost/mod_perl_rules2</a></pre>


<h3><a name="is this all i need to know about mod_perl">Is This All I Need to Know About mod_perl?</a></h3>
<p>Obviously, the next question you'll ask is: <em>``Is this all I need to
know about mod_perl?''</em>.</p>
<p>The answer is: `yes and no.</p>
<p>The <em>yes</em> part:</p>
<ul>
<li>
Just like with Perl, you have to know little about mod_perl to do
really cool stuff. The presented setup allows you to run your visitor
counters and guest book much faster, and amaze your friends, usually
without changing a single line of code.
<p></p></ul>
<p>The <em>No</em> part:</p>
<ul>
<li>
A 50-fold improvement in guest book response times is great, but when
you deploy a heavy service with thousands of concurrent users,
taking into account a high-level competition between similar Web
services, a delay of a few milliseconds might cost you a customer and
probably many of them.
<p>Of course, when you test a single script and you are the only user, you
don't really care about squeezing yet another millisecond from
response time, but it becomes a real issue when these milliseconds add
up at the production site, with hundreds of users concurrently
generating requests to various scripts on your site. Users aren't
merciful nowadays -- if there is another even less fancier site that
provides the same service but a little bit faster, then chances are that
they will go over there.</p>
<p>Testing your scripts on an unloaded machine can be misleading,
Everything might seem so perfect. But when you move them into a
production machine, things don't behave as well as they did on your
development box. Many times you just run out of memory on busy
services. You need to learn how to optimize your code to use less
memory and how to make the memory shared.</p>
<p>Debugging is something people prefer not to talk about, since the
process can be tedious. Learning how to make the
debugging process simpler and efficient is a must if you consider
yourself a Web programmer. This task is especially not so
straightforward when debugging CGI scripts, and even more complicated
with mod_perl -- unless you know how, and then it suddenly becomes easy.</p>
<table width="150" border="0" cellspacing="0" cellpadding="4" align="right">
<tr> 
<td width="150" valign="top" height="4" bgcolor="#006699"></td></tr> 
<tr>
<td bgcolor="#efefef">
<p class="headline" align="center">References
</p>
<p class="smalltext">
The Apache site's URL: <a href="http://www.apache.org/">http://www.apache.org/</a>
<br /><br />
The mod_perl site's URL: <a href="http://perl.apache.org/">http://perl.apache.org/</a>
<br /><br />
CPAN is the Comprehensive Perl Archive Network. The Master site's URL
is <a href="http://cpan.org/">http://cpan.org/</a>. CPAN is mirrored at more than 100 sites
worldwide. (http://cpan.org/SITES.html)</p>


</td></tr> <tr><td width="150" valign="top" height="4" bgcolor="#006699"> </td></tr></table>

<p>mod_perl has many features unavailable under mod_cgi when working with
databases. Among others the most important are persistent connections.</p>
<p>You have to know how to keep your service running nonstop and be able
to recover fast if there are any problems.</p>
<p>Finally, the most important thing is the Apache-Perl API, which allows
you to do anything with a received request, even intervene in every
stage of request processing. This gives you great flexibility and allows
you to create things you couldn't dream about with plain mod_cgi.</p>
<p></p></ul>
<p>There are many more things to learn about mod_perl and Web programming
in general. In future articles, I'll talk in details about all these
issues.</p>

<h4><a name="acknowledgements">Acknowledgements</a></h4>
<p>Many thanks to Eric Cholet for reviewing this article.</p>







        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1270" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/19/dotnet.html" rel="bookmark">A Perl Hacker's Foray into .NET</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2002-03-19T00:00:00-08:00">March 19, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            

    <p>
      No, I haven't sold out; I haven't gone over to the dark side; I
      haven't been bought. I'm one of the last people to be using
      closed-source software by choice. But one of the traits of any
      self-respecting hacker is curiosity, and so when he hears about
      some cool new technology, he's almost obliged to check it out
      and see whether there's anything he can learn from it. So this
      particular Perl hacker took a look at Microsoft's .NET
      Framework, and, well, Mikey, I think he likes it.
    </p>

    <h3>What Is .NET?</h3>

    <p>
      When something's as incredibly hyped as Microsoft's .NET
      project, it's hard to convince people that there's a real
      working technology underneath it. Unfortunately, Microsoft doesn't
      do itself any favors by slapping the .NET moniker on
      anything they can. So let's clarify what we're
      talking about.
    </p>
    <p>
      .NET is applied to anything with the broad notion of "Web
      services" -- from the Passport and Hailstorm automated
      privacy-deprivation services and the Web-service-enabled versions
      of operating systems and application products to the C#
      language and the Common Language Runtime. But there is an underlying theme and it goes like this: The .NET <b>Framework</b> is an environment based on
      the Common Language Runtime and (to some extent) the C#
      language, for creating portable Web services.
    </p>
    <p>
      So for our exploration, the components of the .NET Framework
      that we care about are the Common Language Runtime and the C#
      language. And to nail it down beyond any doubt, these are things
      that you can download and use today. They're real, they exist
      and they work.
    </p>
    <h3>The .NET CLR</h3>
    <p>
      Let's begin with the CLR. The CLR is, in essence, a virtual
      machine for C# much like the Java VM, but which is specifically
      designed to allow a wide variety of languages other than C# to
      run on it. Does this ring any bells with Perl programmers? Yes,
      it's not entirely dissimilar to the idea of the Parrot VM, the
      host VM for Perl 6 but designed to run other languages as well.
    </p>
    <p>
      But that's more or less where the similarity ends. For starters,
      while Parrot is chiefly intended to be ran as an interpreted VM
      but has a "bolted-on" JIT, CLR is expected to be JITted from the
      get-go. Microsoft seems to want to avoid the accusations of
      slowness leveled at Java by effectively requiring JIT compilation.
    </p>
    <p>
      Another "surface" distinction between Parrot and CLR is that the
      languages supported by the CLR are primarily statically typed
      languages such as C#, J#, (a variant of Java) and Visual Basic
      .NET. The languages Parrot aims to support are primarily
      dynamically typed, allowing run-time compilation, symbolic
      variable access, (try doing <code>${"Package::$var"}</code> in
      C#...) closures, and other relatively wacky operations.
    </p>
    

    
    <p>
      To address these sorts of features, the 
<a href="http://research.microsoft.com/project7.net/project_7.htm">Project
      7</a> research project was set up to provide .NET ports for a
      variety of "academic" languages. Unfortunately, it transpires
      that this has highlighted some limitations of the CLR, and so
      almost all of the implementations have had to modify their
      target languages slightly or drop difficult features. For
      instance, the work on <a href="http://www.cs.mu.oz.au/research/mercury/">Mercury</a>
      turned up some deficiencies in CLR's Common Type System that
      would also affect a Perl implementation. We'll discuss these
      deficiencies later when we examine how Perl and the .NET
      Framework can interact.
    </p>
    <p>
      But on the other hand, let's not let this detract from what the
      CLR is good at - it can run a variety of different languages
      relatively efficiently, and it can share data between
      languages. Let's now take a look at C#, the native language of
      the CLR, and then see how we can run .NET executables on our
      favourite free operating systems.
    </p>
    <h3>C#</h3>
    <p>
      C# is Microsoft's new language for the .NET Framework. It shares
      some features with Java, and in fact looks extremely like Java
      at first glance. Here's a piece of C# code:
    </p>
    <pre><code>
using System;

class App {
   public static void Main(string[] args) {
      Console.WriteLine("Hello World");
      foreach (String s in args) {
         Console.WriteLine("Command-line argument: " + s);
      }
   }
}</code>
</pre>


    <p>
      Naturally, the Java-like features are quite obvious to anyone
      who's seen much Java - everything's in a class, and there's an
      explicitly defined <code>Main</code> function. But what's this -
      a Perl-like <code>foreach</code> loop. And that
      <code>using</code> declaration seems strangely familiar.
    </p>
    <p>
      Now, don't get me wrong. I'm not trying to claim that C# is some
      bastard offspring of Perl and Java, or even that C# really has
      that much in common with Perl; it doesn't. But it is a
      well-designed language that does have a bunch of
      "programmer-friendly" language features that traditionally made
      "scripting" languages like Perl or Python faster for rapid code
      prototyping.
    </p>
    <p>
      Here's some more code, which forms part of a game-of-life
      benchmarking tool we used to benchmark the CLR against Parrot.
    </p>
<pre><code>
    static String generate(String input) {
        int cell, neighbours;
        int len = input.Length;
        String output = "";
        cell = 0; 
        do {
            neighbours = 0;
            foreach (int offset in new Int32[] {-16, -15, -14, -1, 1, 14, 15, 16}) {
                int pos = (offset + len + cell) % len;
                if (input.Substring(pos, 1) == "*")
                    neighbours++; 
            }
            if (input.Substring(cell, 1) == "*") {
                output += (neighbours &lt; 2 || neighbours &gt; 3) ? " " : "*";
            } else {
                output += (neighbours == 3) ? "*" : " ";
            } 
        } while (++cell < len); 
        return output;
    }</code>
</pre>
    <p>
      This runs one generation of the <a href="http://www.math.com/students/wonders/life/life.html">game
      of life</a>, taking an input playing field and building an
      output string. What's remarkable about this is that I wrote it
      after a day of looking at C# code, with no prior exposure to
      Java. C# is certainly easy to pick up.
    </p>
    <p>
      What can Perl learn from C#? That's an interesting question,
      especially as the Perl 6 design project is ongoing. Let's have a
      a quick look at some of the innovations in C# and how we might
      apply them to Perl.
    </p>
    <h4>Strong Names</h4>
    <p>
      We'll start with an easy one, since Larry has already said that
      something like this will already be in Perl 6: To avoid
      versioning clashes and interface incompatibilities, .NET has the
      concept of "strong names." Assemblies -- the C# equivalent of
      Java's <code>jar</code> files -- have metadata containing their
      name, version number, md5sum and cryptographic signature,
      meaning you can be sure you're always going to get the
      definitions and behavior you'd expect from any third-party code
      you run. More generally, assemblies support arbitrary metadata
      that you can use to annotate their contents.
    </p>
    <p>
      This approach to versioning and metadata in Perl 6 was
      highlighted in Larry's <a
      href="/pub/a/2001/07/25/onion.html">State of
      the Onion</a> talk this year, and is also the solution used by
      JavaScript 2.0, as described by Waldemar Horwat at his <a
      href="/pub/a/2001/11/21/lightweight.html">LL1
      presentation</a>, so it seems to be the way the language world
      is going.
    </p>
    <h4>Properties</h4>
    <p>
      C# supports properties, which are class fields with explicit
      get/set methods. This is slightly akin to Perl's tying, but
      much, much slicker. Here's an example:
    </p>
    <pre><code>
    private int MyInt;
    public int SomeInt {
        get {
            Console.WriteLine("I was got.\n");
            return MyInt;
        }
        set {
            Console.WriteLine("I was set.\n");
            MyInt = value;
        }
    }</code>
</pre>
    <p>
      Whenever we access <code>SomeInt</code>, the <code>get</code>
      accessor is executed, and returns the value of the underlying
      <code>MyInt</code> variable; when we write to it, the
      corresponding <code>set</code> accessor is called. Here's one
      suggested way we could do something similar in Perl 6:
    </p>
    <pre><code>
      my $myint;
      our $SomeInt :get(sub{ print "I was got!\n"; $myint })
                   :set(sub{ print "I was set!\n"; $myint = $^a });</code>
    </pre>
    <p>
      C# actually takes this idea slightly further, providing
      "indexers", which are essentially tied arrays:
    </p>
    <pre><code>
    private String realString;
    public String substrString[int idx] {
        get {
            return realString.Substring(idx, 1);
        }
        set {
            realString = realString(0, idx) + value + realString(idx+1);
        }
    }

    substrString[12] = "*"; // substr($string, 12, 1) = "*";</code>
</pre>
    <h4>Object-Value Duality</h4>
    <p>
      Within the CLR type system, (CTS) there are two distinct
      types (as it were) of types: reference types and value
      types. Value types are the simple, honest-to-God values:
      integers, floating point numbers, strings, and so on. Reference
      types, on the other hand, are objects, references, pointers and
      the like.
    </p>
    <p>
      Now for the twist: Each value type has an associated reference
      type, and you can convert values between them. So, if you've got
      an <code>int counter;</code>, then you can "box" it as an object like so:
      <code>Object CounterObj = counter</code>. More specifically,
      <code>int</code> corresponds to <code>Int32</code>. This gives
      us the flexibility of objects when we need to, for instance,
      call methods on them, but the speed of fixed values when we're
      doing tight loops on the stack. 
    </p>
    <p>
      While Perl is and needs to remain an essentially untyped
      language, optional explicit typing definitions combined with
      object-value duality could massively up Perl's flexibility as
      well as bringing some potential optimizations.
    </p>











    
    <h4>Chaining Delegates</h4>
    <p>
      Here's an extremely rare thing - a non-obvious use of operator
      overloading that actually makes some sense. In event-driven
      programming, you'll often want to assign callbacks to happen on
      a given event. Here's how C# does it: (The following code adapted
      from <a
      href="http://www.csharphelp.com/archives/archive253.html">Events
      in C#</a> by Sanju)
    </p>
    <pre><code>
delegate void ButtonEventHandler(object source, int clickCount);

class Button {
    public event ButtonEventHandler ButtonClick;

    public void clicked(int count) { // Fire the handler
        if (ButtonClick != null) ButtonClick (this,count);
    }
}

public class Dialog {
    public Dialog() {
        Button b = new Button();

        b.ButtonClick += new ButtonEventHandler(onButtonAction);
        b.clicked(1);
    }
}

public void onButtonAction(object source,int clickCount) {
    //Define the actions to be performed on button-click here.
}</code>
</pre>
    <p>
      Can you see what's going on? The "delegate" type
      <code>ButtonEventHandler</code> is a function signature that we
      can use to handle button click events. Our <code>Button</code>
      class has one of these handlers, <code>ButtonClick</code>, which
      is defined as an <code>event</code>. In the <code>Dialog</code>
      class, we instatiate a new delegate, using the
      <code>onButtonAction</code> function to fulfill the role of a
      <code>ButtonEventHandler</code>.
    </p>
    <p>
      But notice how we assign it to the <code>Button</code>'s
      <code>ButtonClick</code> field - we use addition. We can add
      more handlers in the same way:
    </p>
    <pre><code>
    b.ButtonClick += new ButtonEventHandler(myButtonHandler);
    b.ButtonClick += new ButtonEventHandler(otherButtonHandler);</code>
    </pre>
    <p>
      And now when the button's <code>clicked</code> method fires off
      the delegates, all three of these functions will be called in
      turn. We might decide that we need to get rid of one of them:
    </p>
    <pre><code>
    b.ButtonClick -= new ButtonEventHandler(myButtonHandler);</code>
    </pre>
    <p>
      After that, only the two functions <code>onButtonAction</code>
      and <code>otherButtonHandler</code> are active. Chaining
      delegates like this is something I haven't seen in any other
      language, and makes sense for event-based
      programming; it's something it might be good for Perl 6 to support.
    </p>
    <h3>Mono and Rotor - Running .NET</h3>
    <p>
      OK, enough talk about C#. Let's go run some.
    </p>
    <p>
      Of course, the easiest way to do this at present is to do your
      development on a Windows box. Just grab a copy of the <a
      href="http://msdn.microsoft.com/downloads/default.asp?url=/downloads/sample.asp?url=/msdn-files/027/000/976/msdncompositedoc.xml">.NET
      Framework SDK</a>, (only 137M!) install it, and you have a C#
      compiler at your disposal which can produce .NET executables
      running on the Microsoft CLR. This is how I do my C#
      experimentation - I have a copy of Windows running on a virtual
      machine, sharing a filesystem with my OS X laptop. I do my
      editing in my favourite Unix editor, then pop over to the
      Windows session to run the <code>CSC</code> compiler. 
    </p>
    <p>
      I know that for some of us, however, that's not a great
      solution. Thankfully, the creative monkeys at <a
      href="http://www.ximian.com">Ximian</a> have been feverishly
      working on bringing us an open-sourced .NET Framework
      implementation. The <a href="http://www.go-mono.com">Mono</a>
      project comprises of an implementation of the Common Language
      Runtime plus a C# compiler and other goodies; a very easy way to
      get started with .NET is to pick up a release of Mono, and compile
      and install it.
    </p>
    <p>
      After the usual <code>./configure;make;make install</code>, you
      have three new commands at your disposal: <code>mcs</code> is
      the Mono C# compiler; <code>mint</code> is the CLR Interpreter;
      and <code>mono</code> is its JITted cousin. 
    </p>
    <p>
      And yes, Veronica, you can run .NET <code>EXE</code> files on
      Linux. Let's take the first C# example from the top of this
      article, and run it:
    </p>
    <pre><code>
 % mcs -o hello.exe hello.cs
 % mono hello.exe A Test Program
Hello World
Command-line argument: A
Command-line argument: Test
Command-line argument: Program
RESULT: 0</code>
</pre>
    <p>
      And just to show you we're not messing you around:
    </p>
    <pre><code>
 % file hello.exe
hello.exe: MS Windows PE 32-bit Intel 80386 console executable</code>
</pre>
    <p>
      Mono isn't a particularly quick runtime, nor is it particularly
      complete, but it has a large number of hackers improving its
      base classes every day. It runs a large percentage of the .NET
      executables I throw at it, and the <code>mcs</code> compiler can
      now compile itself, so you can do all your development using
      open source tools.
    </p>
    <p>
      Another option, once it appears, is Microsoft's <a
      href="http://www.oreillynet.com/pub/a/dotnet/2002/03/04/rotor.html">Rotor</a>
      project, a shared source CLR and compiler suite. Rotor aims to
      be the ECMA standard implementation of the .NET Framework;
      Microsoft has submitted the Framework for standardization, but
      in typical style, its own implementations add extra
      functionality not part of the standard. Oh, and in case the
      words "shared source" haven't jumped out at you yet, do not even
      <i>consider</i> looking at Rotor if you may work on Mono at some
      point. However, for the casual user, its comprehensive
      implementation means it will be a better short-term choice for
      .NET experimentation - again, once it's released.
    </p>
    <h3>CLR Architecture</h3>
    <p>
      Before we finish considering how Perl and the .NET Framework
      relate to each other, let's take a more in-depth look at the
      internals of the Common Language Runtime compared to our own Parrot.
    </p>
    <p>
      First, the CLR is a stack-based virtual machine, as opposed
      to Parrot's register approach. I don't know why this approach
      was taken, other than, I imagine, "because everyone else does
      it." CLR runs a bytecode language, which Microsoft calls MS-IL
      when it is talking about their implementation of CLR, and what
      it calls CIL (Common Intermediate Language) to ECMA. It's
      object-oriented assembler, a true horror to behold, but it
      works. Here's a fragment of the IL for our Hello example:
    </p>
    <pre><code>
    .method public static 
           default void Main(string[] args)  cil managed 
    {
        // Method begins at RVA 0x2090
        .entrypoint
        // Code size 78 (0x4e)
        .maxstack 9
        .locals (
                string  V_0,
                string[]        V_1,
                int32   V_2)
        IL_0000: ldstr "Hello World"
        IL_0005: call void System.Console::WriteLine(string)
        IL_000a: ldarg.s 0
     ...</code>
</pre>
    <p>
      In order to optimize CLR for JITting, it imposes a number of
      restrictions on the IL. For instance, the stack may only be used
      to store parameters and return values from operations and calls;
      you can't access arbitrary points in the stack; more
      significantly, the types of values on the stack have to be
      statically determinable and invariant.  That's to say, at a
      given call in the code, you know for sure what types of things
      are on the stack at the time.
    </p>
    <p>
      The types themselves are part of the Common Type System,
      something every language compiling to .NET has to conform to. As
      we have mentioned, CTS types are either value types or reference
      types. There's a smaller subset of CTS called the Common Language
      Specification, CLS. Languages <B>must</b> implement CLS types,
      and may implement their own types as part of the CTS. The CLS
      ought to be used in all "outward-facing" APIs where two
      different languages might meet; the idea being the data passed
      between two languages is guaranteed to have a known meaning and
      semantics. However, this API restriction is not enforced by the
      VM.
    </p>
    <p>
      Types which can appear on the stack are restricted again; you're
      allowed int32, int64, int, float, a reference, a "managed"
      pointer or an unmanaged pointer. "Management" is determined by
      where the pointer comes from (trusted code is managed) and
      influences what it's allowed to see and how it gets GCed. Local
      arguments may live somewhere other than on the main stack - this
      is implementation-defined - in which case they have access to a
      richer set of types; but since you have a reference to an
      object, you should be OK.
    </p>
    <p>
      Other value types include structures and enumerations. Since
      value types are passed around on the stack, you can't really
      have big structures, since you'd be passing loads of
      data. There's also the typed reference, which is a reference
      plus something storing what sort of reference it is. Reference
      types are kept in the heap, managed by garbage collection, and
      are referenced on the stack. This is not unlike what Parrot does
      with PMC and non-PMC registers.
</p>
    <p>
      Like Java, the CLR has a reasonably small number of
      operations. You can load/store constants, local variables,
      arguments, fields and array elements; you can create and
      dereference pointers; you can do arithmetic; you can do
      conversion, casting and truncating; there are branch ops
      (including a built-in lookup-table switch op) and method call
      ops; there's a special tail-recursion method-call op; you can
      throw and handle exceptions; you can box and unbox, converting
      value types to reference types and vice verca; you can
      create an array and find its length; you can handle typed
      references. And that's essentially it. Anything else is outside
      the realm of the CLR, and has to be implemented with external
      methods.
    </p>
    <p>
      An excellent paper comparing the CLR and the JVM has been
      produced by the team working on Component Pascal; they've ported
      CP to both virtual machines, and so are very well-placed to run
      a comparison. See the <a
      href="http://www2.fit.qut.edu.au/CompSci/PLAS//ComponentPascal/">GPCP
      project page</a>.
    </p>
    <h3>Perl and .NET</h3>
    <p>
      How can we connect Perl and .NET? Well, let's look at the
      pieces of work that have already been done in this
      area. ActiveState have been leading research, with their
      experimental <a
      href="http://www.activestate.com/Initiatives/NET/Research.html">Perl
      for .NET Research</a> and <a
      href="http://www.activestate.com/PerlNET/">PerlNET</a> projects.
</p>
    <p>
      Perl for .NET Research was a brave idea; Jan Dubois essentially
      wrote a Perl interpreter in C#, and used the standard Perl
      compilation technique of combining an embedded interpreter with
      a serialized representation of the Perl program. The resulting
      compiler is a C# analog of the <code>B::CC</code> module, and
      then runs the <code>CSC</code> compiler to compile the C#
      representation of the Perl program, linking in the Perl
      interpreter, into an executable. To be honest, I couldn't get
      Perl for .NET Research to produce executables, but I could study
      it enough to see what it was doing.
    </p>
    <p>
      PerlNET, now included with AS's Perl Dev Kit, takes a rather
      different approach. This time the Perl interpreter sits
      "outside" the .NET Framework, communicating with it through
      DLLs. This allows for .NET Framework code to call into Perl, and
      also for Perl to make calls into the .NET Framework library. For
      instance, one may write:
    </p>
    <pre>
    use namespace "System";
    Console->WriteLine("Hello World!");
</pre>
    <p>
      to call the <code>System.Console.WriteLine</code> method in the
      .NET Framework runtime library.
    </p>
    <p>
      However, neither of these initiatives compile Perl to MS-IL in
      the usual sense of the word. This is surprising, since it would
      be an interesting test of the flexibility of the Common Type
      System. 
    </p>
    <p>
      This is one of the possible avenues I'd like to see explored in terms of bringing .NET and Perl closer
      together. Other possibilities include crossover between CLR and
      Parrot - I'd love to see .NET executables run on top of Parrot
      and Parrot bytecode files convertable to .NET; I'd like to see a
      Perl 6 interpreter emit MS-IL; I'd like to see Perl programs
      sharing data and objects with other languages on top of some
      virtual machine. 
    </p>
    <p>
      Like it or not, there's a good chance that the .NET
      Framework is going to be a big part of the technological scene
      in the future. I hope after this brief introduction, you're a
      little more prepared for it when it happens, and we have some
      direction as to how Perl fits into it.
    </p>
    
    <hr size="1" noshade>
    <p class="secondary">For more on .NET, check O'Reilly Network's <a href="http://oreillynet.com/dotnet">.NET DevCenter</a>.





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1268" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/12/axkit.html" rel="bookmark">Introducing AxKit</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Barrie Slaymaker</span> on <abbr class="published" title="2002-03-13T00:00:00-08:00">March 13, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            

<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->
<a name="series_intro" /><h3>Series Introduction</h3>

<p>This article is the first in a series of articles introducing the
AxKit web application platform.  Starting from the basics, this series
explains how to install a basic AxKit server and then explores AxKit's
more powerful capabilities.  Basic familiarity with (or ability to <a
HREF="http://www.google.com/">google</a> for) <a
href="http://www.w3.org/XML/">XML</a>, <a
href="http://httpd.apache.org">Apache</a>, and <a
href="http://perl.apache.org/">mod_perl</a> is assumed but expertise is
not required.  Some <a href="/pub/a/{cs.r.file}?page=3#help">References and Helpful Resources</a>
are provided at the end of this article to help get you started as well.</p>

<a name="axkit" /><h3>AxKit: What is it?</h3>

<p><i>If you already know about AxKit and the wonders of server side XML
processing, you may wish to <a href="/pub/a/{cs.r.file}?page-2#installation">skip to the Basic Installation</a> section.</i>
</p>
<p>AxKit is an application and document server that uses XML processing
pipelines to generate and process content and deliver it to clients in a
wide variety of formats.  It's important to note that AxKit is not
limited to XML source documents; non-XML documents and data sources can
be converted to XML as needed.  A basic AxKit pipeline looks like:</p>

<div>
<img src="/pub/2002/03/12/graphics/basic_pipeline.jpg" alt="Axkit Processing Overview" />
</div>

<p>The source document may be an article, a data set, data returned by a
database query, the output from a Perl routine, mod_perl handler, CGI
script, etc., etc.  This document is fed in to the first processor
("Transform 1") which alters it according to a "stylesheet", which
specifies a set of transforms to apply to the document.  The output from
the first processor is fed to the second, the second to the third, and
so on until the final document is passed to the browser.</p>

<p>Processing techniques available conventional XML processing like <a
href="http://www.xslt.com/">XSLT</a>, advanced processing more suited to
dynamic content (such as Perl versions of <a
href="http://axkit.org/docs/xsp/index.xml">XSP</a> and tag libraries),
and low-level processing in Perl for those occasions where high level
abstractions merely get in the way.</p>

<p>AxKit provides seamless caching (of both code for generating dynamic
content and for transformed documents), compression, and character set
conversion.  AxKit also allows other technologies (CGI scripts, session
management tools, data converters, Perl modules, <a
href="http://theoryx5.uwinnipeg.ca/CPAN/data/Inline/C/C.html">Inline::C</a>,
etc) to be used to extend its capabilities.</p>

<p>The current version (v1.5) is tightly coupled with Apache/mod_perl
and leverages the exceptional configurability and performance of that
platform; work is underway to enable use in other environments like
offline processing, cgi-bin, and standalone servers.</p>

<a name="why_axkit" /><h3>Why AxKit?</h3>

<p>All the hype surrounding in-browser XML processing makes it seem like
there should be little or no need for server-side XML processing.
However, for a variety of reasons, XML in the browser is just not
available everywhere and, when available, has limitations that server
side processing addresses.</p>

<p>Server-side XML processing allows content to be queried, reorganized,
translated, styled, and so on, before sending the "final" HTML, XML, text,
SVG, or other output to the browser.  The server can implement heavy duty data
processing using the most effective and appropriate tools (as opposed to
the rather more limited tools available client-side, even when you can
control the client configuration). The server can then decide to deliver
a formatted document ready for presentation and display or to delegate
presentation formatting (and its attendant processing overhead) to the
client.  In some sense, that's an ideal approach: use the server to
apply heavyweight or unusual transforms and offload the presentation
formatting to the browser.</p>

<p>Some of the advantages of using XML on the server are:</p>

<ul>

<li>XML can be transformed on the server in to a wide variety of content
delivery languages: XML, WML, XHTML, HTML, RTF, PDF, graphics formats,
plain text, etc.
</li>
<li>Presentation can be separated from content and logic so that
transforming the presentation does not mean altering the XML documents
or settings on the authoring tools.  This article demonstrates
separating logic, content and presentation.
</li>
<li>Even using the same delivery language (HTML, say), documents can be
formatted in different ways for differing display media, screen vs.
printer, for instance.
</li>
<li>XML offers support for specifying the character encodings. Source
documents can be transcoded into different character sets depending on
the browser.
</li>
<li>XML documents can be expressed in a natural order for their
"primary" display mode and reordered differently to provide different
views of the data.  Terms in a document's glossary or index are not in
document order, for instance.
</li>
<li>As the content and capabilities of a web site evolves, new XML tags
can be introduced in new content without having to "upgrade" older
articles.  We'll touch on tag libraries (taglibs) in this article and
examine them in more depth in later articles.
</li>
<li>XML related technologies are becoming well known; hiring XML
literate personnel is becomming easier.  With in-house proprietary
formats, you always have to train them yourself.  With third party
proprietary formats, you hope you can get good enough training to do
what you need.
</li>
<li>XML processing tools (XSLT, editors, etc) are becoming commonly
available, so adopting XML outside of the IT department is feasible.
There's still a gap in support for WYSIWYG authoring tools, though some
are now commercially available.
</li>
<li>XML can optionally be transformed on the client for browsers that
offer sufficient features, thus reducing server workload. Be prepared
for slow client-side transforms on larger pages, and you will probably
want to do reordering and subsetting operations on the server.
</li>
<li>XML can provide descriptions of the structure of your web site and
its content in multiple formats. The "Semantic Web" is coming to a
browser near you (<i>real </i> soon now ;-). One of the biggest academic
concerns about the web is the lack of semantic content. When looking at
a page from a book in HTML format, who's to say whether a heading
enclosed by &lt;H1&gt; is a book's author, title, publisher, or even a
chapter or section heading? XML can be used to clarify such issues, and
standards like the Resource Description Framework (RDF, of course) are
gaining ground here.
</li>
<li>XML-based technologies like the RDF Site Summary (RSS) and the more
general Resource Description Framework can be leveraged to allow
automated navigation, syndication, and summarization of a web site by
other web sites. This is especially applicable to portions of a web site
containing current news and press releases; these are often reproduced
on other sites' news summaries and "headlines" pages.
</li>
</ul>

<p>AxKit enables all of this and far more.  Unlike some more insular
environments, AxKit happily bolts up to almost any other technology that
you can load in to an Apache web server or reach using external
requests.</p>














<a name="installation" /><h3>Basic Installation</a></h3>

<p>This section will walk you through a manual installation, but there's
an easier way if you just want to play with AxKit: grab the <a
href="/2002/03/12/examples/axkit_articles-1.0.tar.gz">AxKit demo tarball</a> for this
article, untar it and run the <tt>install</tt> script therein.  The
tarball includes the prerequisites necessary for most modern Unix-like
systems and will be updated new versions and example code with each
article.  If this works for you (it's been tested on both Linux and
FreeBSD), you can skip all of the manual install instructions and jump
to <a href="/pub/a/{cs.r.file}?page=2#testing">Testing AxKit</a>.</p>

<p>AxKit ties together a lot of different technologies and uses a lot of
CPAN modules.  Doing a basic manual install is not difficult if CPAN.pm
(or equivalent; a CPANPLUS is in the works as of this writing) is
working on your system.</p>

<p>The first step in installing AxKit is big, but not usually difficult:
installing Apache and mod_perl 1.x versions (2.x versions are in
development but are not released at the time of this writing).  The <a
href="http://perl.apache.org/guide/">mod_perl Developer's Guide</a>
covers this process in detail.  Here's a quick recipe for a Unix system
"private" (ie non-root) install in <tt>/home/me/axkit_articles-1.0</tt>
(vary the version numbers to suit):</p>

<pre>
$ mkdir axkit_articles-1.0
$ cd axkit_articles-1.0
$ lynx <a
href="http://httpd.apache.org/dist/httpd/">http://httpd.apache.org/dist/httpd/</a>  # Get the latest 1.x version of apache</b>
$ lynx <a href="http://perl.apache.org/dist/">http://perl.apache.org/dist/</a>  # Get the latest 1.x version of mod_perl.</b>
$ gunzip apache_1.3.23.tar.gz
$ tar xf apache_1.3.23.tar
$ gunzip mod_perl-1.26.tar.gz
$ tar xf mod_perl-1.26.tar
$ cd mod_perl-1.26
$ perl Makefile.PL \
>   APACHE_SRC=../apache_1.3.23/src/ \
>   DO_HTTPD=1 \
>   USE_APACI=1 \
>   APACHE_PREFIX=/home/me/axkit_articles-1.0/www \
>   PREFIX=/home/me/axkit_articles-1.0/www \
>   EVERYTHING=1
$ make
$ make test
$ make install
</pre>

<blockquote>It is usually wise to write your AxKit/mod_perl/Apache build
process in to a script so that you can debug it, repeat it, and alter it
as needed.  Servers like these are immensely powerful and configurable;
it's pretty likely that you'll want a reproducable, tweakable build
environment for them.</blockquote>

<p>On Windows, look for the most recent Apache Win32 binary in <a
href="http://www.apache.org/dist/httpd/binaries/win32/">http://httpd.apache.org/dist/binaries/win32/</a>
and then <a href="http://perl.apache.org/win32_binaries.html">use
<tt>PPM</tt> to install a mod_perl binary</a>.  <b>NOTE:</b> it is not
recommended to use Windows for production Apache/mod_perl servers;
Apache/mod_perl 1.x is not able to scale well on this platform;
Apache/mod_perl 2.x is addressing the fundamental architectural
disagreements that cause this.</p>
 
<p>If all went well, running</p>

<pre>
$ <b>www/bin/apachectl start</b>
</pre>


<p>should fire up a (non-AxKit) httpd on port 8080.  In case of
trouble (both packages are mature, so trouble is not frequent), see the
<a href="/pub/a/{cs.r.file}?page=3#help">References and Helpful Resources</a> section at the end
of the article for some places to seek help.</p>

<p>The next part is to install some AxKit prerequisites: the GNOME
project's libxml2 and libxslt will be used by the examples in this
series of articles, though they project's libxml2.  To see if they are
already installed, try:</p>

<pre>
$ <b>xml2-config --version</b>
2.4.13                         # Need >= 2.4.13
$ <b>xslt-config --version</b>
1.0.10                         # Need >= 1.0.10
</pre>

<p>If not, grab them from the source tarball for the article or <a
href="http://download.gnome.org/GNOME/stable/sources/">a random GNOME
mirror</a> and install them using <tt>./configure &amp;&amp; make
&amp;&amp; make install</tt>.  The tarball above installs all of the
prerequisites in the "private" install tree; here we're installing them
in the system's shared locations to keep the manual install easy.  See
the commands generated by the install script if you want private copies.</p>

<blockquote> <b>Please note:</b> libxslt 1.0.10 has a known (very minor)
failure in its test suite which causes <tt>make</tt> to fail on some
systems when testing <tt>tests/exslt/sets/has-same-node.1.xsl</tt>.  The
<tt>install</tt> script provided with this article's source tarball
removes the offending test before running <tt>make</tt>.  </blockquote>

<p>Now that all of the major prerequisites are installed, let's let
<tt>CPAN.pm</tt> install the final pieces:</p>

<pre>
$ <b>su</b>
Password:
# <b>perl -MCPAN -e shell</b>
...
cpan> <b>install XML::LibXSLT</b>
...
cpan> <b>install AxKit::XSP::Util</b>
...
cpan> <b>quit</b>
# <b>exit</b>
</pre>

<p>The AxKit::XSP::Util installation should install AxKit and a number
of other prerequisites.  If CPAN.pm does not work for you, you might
just want to grab the axkit-demo tarball mentioned above and install the
packages you find there by hand.  There are a lot of them, though, so
getting CPAN working is propably the easiest way to do a manual install.</p>

<a name="testing" /><h3>Testing AxKit</a></h3>

<blockquote> All of the relative directories mentioned from now on
assume that you are in the <tt>axkit_articles-x.y</tt> directory unless
otherwise indicated.</blockquote>

<p>Once all of the required modules are installed, tweak the
<tt>www/conf/httpd.conf</tt> file to load AxKit by adding:</p>

<pre>
##
## AxKit Configuration
##

PerlModule AxKit

&lt;Directory "/home/me/axkit_articles-1.0/www/htdocs"&gt;
    Options -All +Indexes +FollowSymLinks

    # Tell mod_dir to translate / to /index.xml or /index.xsp
    DirectoryIndex index.xsp
    AddHandler axkit .xml .xsp

    AxDebugLevel 10

    AxGzipOutput On

    AxAddXSPTaglib AxKit::XSP::Util

    AxAddStyleMap application/x-xsp \
                  Apache::AxKit::Language::XSP
&lt;/Directory&gt;
</pre>

<p>We'll walk through the configuration in a bit, but first
let's add a <tt>www/htdocs/index.xsp</tt> test page that
looks like:

<pre>
&lt;?xml-stylesheet href="NULL" type="application/x-xsp"?&gt;
&lt;xsp:page
    xmlns:xsp="http://www.apache.org/1999/XSP/Core"
    xmlns:util="http://apache.org/xsp/util/v1"
&gt;
  &lt;html&gt;
    &lt;body&gt;
      &lt;p&gt;Hi! It's &lt;util:time format="%H:%M:%S"/&gt;.&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/xsp:page&gt;
</pre>

<p>Now you should be able to restart the server and request the test
page like so (whitespace added for readability and so it can be compared
to <tt>index.xsp</tt> easily):</p>

<pre>
$ <b>www/bin/apachectl restart</b>
$ <b>lynx -source <a href="http://127.0.0.1:8080">http://127.0.0.1:8080/</a></b>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;p&gt;Hi! It's Tue Feb  5 16:26:31 2002.&lt;/p&gt;
  &lt;/body&gt;
&lt;html&gt;
</pre>

<p>Each request should generate a new page with a different time stamp.
You may need to tweak the <tt>Port</tt> directive in
<tt>www/conf/httpd.conf</tt> if something's already running on port
8080.</p>













<a name="how" /><h3>How the example works</a></h3>

<p>Later articles in this series will examine various features of AxKit
in more depth, for now let's take a look at how the example from the
installation section works.</p>

<blockquote>In fact, hopefully by the next article, a new release of
AxKit should have a simple demo facility for each of it's major XML
processing alternatives available.  If so, the tarball accompanying the
next article will contain the new release.</blockquote>

<a name="how-config" /><h4>The Configuration</a></h4>

<p>AxKit integrates quite tightly with the Apache configuration engine.
The Apache configuration engine is far more than a text file parser: it
forms the core of Apache's request handling capabilities and is the key
to Apache's flexibility and extensibility.  The directives added to the
server's configuration above are a mix of native Apache directives and
AxKit directives.  Let's walk through the first part of the request
cycle and see how the Apache configuration directives affect the
request.</p>

<blockquote>The Apache httpd is primarily a configuration engine and a
collection of special-purpose modules.  This discussion glosses over the
fact that several modules other than mod_perl and AxKit are used to
process this request and refers to them all as "Apache".</blockquote>

<p>When the HTTP request arrives, Apache parses it and maps the path
portion of the URL ("/") to a location on the harddrive
(<tt>/home/me/axkit_articles-1.0/www/htdocs</tt>).  The URI maps to a
directory and the Apache directives "<tt>DocumentRoot</tt>" (not shown,
it's part of the default install), "<tt>&lt;Directory&gt;</tt>",
"<tt>Options +Indexes</tt>" and "<tt>DirectoryIndex</tt>" cause Apache
to map this URI to the file <tt>index.xsp</tt>.</p>

<p>Now that the underlying resource has been identified, Apache uses the
<tt>.xsp</tt> extension to figure out what module should deliver the
resource to the browser.  The <tt>AddHandler AxKit .xsp</tt> directive
tells Apache to delegate the response handling to AxKit.  This is very
similar to establishing a mod_perl handler for a URI except that it is
implemented in C and is a bit faster than a standard mod_perl response
handler.</p>

<a name="how-processing" /><h4>The Processing Chain</a></h4>

<p>The test document, <tt>index.xsp</tt> is an example of XSP,
eXtensible Server Pages, one of the several languages that AxKit
supports.  We'll get to how the XSP is processed in a moment.</p>

<p>When AxKit begins the task of handling the response it has already,
through cooperation with Apache's configuration engine processed it's
configuration directives.  These have the following effects:</p>

<dl>

<dt><tt>AxDebugLevel 10</tt>

<dd>Causes quite a lot of output in the <tt>www/logs/error_log</tt>,

<dt><tt>AxGzipOutput On</tt>

<dd>Enables automatic gzip compression (via Compress::Zlib).  This is
only used if the client can accept compressed documents.  AxKit even
goes the extra mile and compresses output for a few clients that can
handle it but don't set the HTTP <tt>Accept-Encoding:</tt> header
properly.

<dt><tt>AxAddStyleMap application/x-xsp Apache::AxKit::Language::XSP</tt>

<dd>Establishes a mapping between the MIME type
"<tt>application/x-xsp</tt>" and the Apache::AxKit::Language::XSP
module.  We'll see shortly how this mapping tells AxKit what module to
use when applying a type of transform.

<dt><tt>AxAddXSPTaglib</tt>

<dd>Notes that the XSP engine needs to load the AxKit::XSP::Util (this
supplies some of the Perl code called by <tt>index.xsp</tt>),

</dl>

<p>The first thing AxKit needs to do when handling a response is to
configure the processing pipeline.  The first place AxKit looks for
directions is in the source document; it scans the source document for
<tt>&lt;?xml-stylesheet...?&gt;</tt> processing instructions like:</p>

<pre>
<tt>&lt;?xml-stylesheet href="NULL" type="application/x-xsp"?&gt;</tt>
</pre>

<blockquote>AxKit has two alternative mechanisms that provide far more
power and flexibility; we'll look at these as we walk through more
advanced configurations in later articles.</blockquote>

<p>The xml-stylesheet PIs specify a list of transforms to apply to the
source document; these are applied in the order that they occur in the
document.  Each processing instruction specifies a stylesheet ("NULL" in
this case: XSP doesn't use them, we'll cover that in a moment), and a
processor type ("application/x-xsp").  The <tt>AxAddStyleMap</tt>
directives specify which Perl modules handle with processor types, and
the one in our example maps <tt>application/x-xsp</tt> to
Apache::AxKit::Language::XSP.</p>

<p>That's all quite complex; here's a diagram that shows how the most
important bits of this example affect the processing pipeline:</p>
<div>
<img src="/pub/2002/03/12/graphics/config_flow.jpg" alt="index.xsp configuration data flow" />
</div>
<p>and the resulting pipeline looks like:</p>
<div>
<img src="/pub/2002/03/12/graphics/index_xsp_pipeline.jpg" alt="index.xsp processing pipeline" />
</div>
<p>As the diagram shows, the source <tt>.xsp</tt> page is read from
disk, then compiled in to Perl source code (using the <tt>util:</tt>
taglib as necessary) and cached on disk.  The resulting source code is
then run to generate the result document for this request, which is
compressed (if the client supports compression), and sent to the client.</p>

<blockquote>You can see the source code in <tt>www/logs/error_log</tt>
when the <tt>AxDebugLevel</tt> is set to at least 10.</blockquote>

<p>Note that AxKit is smart enough to not cache the output document
(there's no cache between the XSP processor and the output); XSP is
intended for dynamic pages and its output documents should not be
cached.</p>

<p>When <tt>index.xsp</tt> is compiled, the resulting code builds the
output document node by node.  The <tt>&lt;util:time .../&gt;</tt> tag
is converted in to a subroutine call that calls perl's
<tt>localtime</tt> function.  See the <tt>error_log</tt> to see the
generated Perl (our <tt>AxDebugLevel</tt> is set to 10, so XSP.pm emits
this to the error log), and see the function <tt>get_date()</tt> in
AxKit::XSP::Util for the <tt>localtime()</tt> call.</p>

<a name="XSP" /><h4>XSP and Taglibs</a></h4>

<p>XSP is unlike most XML processing "languages" in that it does not
actually use stylesheets; instead, XSP pages contain special tags that
are executed each time the page is requested.  In <tt>index.xsp</tt>,
for instance, the <tt>&lt;util:time format="%H:%M:%S"/&gt;</tt> tag is
converted in to Perl code which calls localtime.</p>

<blockquote>Most XML filters apply a transform to the source XML to
generate the result XML.  These transforms are called "stylesheets".  As
mentioned, XSP does not use stylesheets. We will cover stylesheet based
transforms in future articles.</blockquote>

<p>The <tt>util:</tt> portion of the tag is a prefix indicating that the
util taglib will handle that tag.  The <tt>util:</tt> prefix is an <a
href="http://www.jclark.com/xml/xmlns.htm">XML namespace</a> prefix and
is not hard-coded; the <tt>xmlns:util</tt> attribute in the root element
of <tt>index.xsp</tt>:

<pre>
&lt;xsp:page
    xmlns:xsp="http://www.apache.org/1999/XSP/Core"
    <b>xmlns:util="http://apache.org/xsp/util/v1"</b>
&gt;
</pre>

<p>binds the <tt>util:</tt> prefix to the taglib.  The module that
provides the code behind the <tt>util:</tt> taglib, <a
href="http://theoryx5.uwinnipeg.ca/CPAN/data/AxKit-XSP-Util/Util.html">AxKit::XSP::Util</a>,
has the same URI ("<tt>http://apache.org/xsp/util/v1</tt>") hardcoded in
it.  When the <tt>AxAddXSPTaglib</tt> directive is seen in the
<tt>httpd.conf</tt> file, AxKit::XSP::Util registers with the XSP module
to handle all tags in that namespace.</p>

<p>An XSP page may include as many taglib namespaces and tags as it
needs.  CPAN contains a <a
href="http://theoryx5.uwinnipeg.ca/mod_perl/cpan-search?search=AxKit%3A%3AXSP%3A%3A">large
and growing collection</a> of taglibs for use with AxKit's XSP
implementation, and we'll look at two ways of writing taglibs for Apache
in the next two articles.</p>

<p>The taglibs approach is superficially similar to many of the
templating engines on CPAN; indeed, some of the the templating systems
have been extended recently to includ taglibs. There are several
important differences between these and XSP, however.</p>

<ul>

<li>XSP input files must be well formed XML, this makes it impossible to
generate malformed XML.  With templating systems, typos in the content
markup can easily reach the browser with no warnings.</p>

<li>The source document may be transformed before it is handed to the
XSP processor.  This allows you to build simple taglibs as XSLT
transforms deployed upstream of the XSP processor.  Because AxKit's XSP
translates XSP pages in to code and caches the code, these transforms
will not be run each request; they are captured in the cached code.
This can also be used to "capture" static transforms.</p>

<li>XSP encourages content, logic, and presentation to be separated; XSP
pages add logic to content and generate well formed XML that can be (and
usually is) massaged by "real" stylesheets to effect different
presentations.</p>

<li>as with some of the more sophisticated templating systems, XSP is
designed to be extensible; adding a taglib is as simple as configuring
adding an <tt>AxAddXSPTaglib</tt> statement to the <tt>httpd.conf</tt>
file and then referring to it in the source document.  In the test code,
the <tt>&lt;util:time&gt;</tt> tag is provided by the
<tt>Apache::XSP::Util</tt> module, and you may load as many taglibs as
necessary in to the server.</p>

</ul>

<a name="summary" /><h3>Milepost 1 and the Road Ahead</a></h3>

<p>This is the first article in this series, presenting AxKit's
installation and introducing one of AxKit's processing technologies:
XSP.  In the next article we'll see how to chain together filters to
apply stylesheets to both static documents and XSP-generated documents
to allow the same documents to be delivered in different forms.
Following that we'll examine how to write taglibs in Perl (the
recommended approach) using some helper modules, and XSLT.</p>

<a name="help" /><h3>References and Helpful Resources</a></h3>

<p>There are several very helpful places to research problems, ask
questions, and learn more.  Try to find others who have had similar
problems before posting a question, of course, but the user groups
listed here are the place to ask:</p>
<dl>

<dt><A href="http://axkit.org">the AxKit web site</a> (which may have
moved to an <a href="http://xml.apache.org/">xml.apache.org</a> site by
the time you read this)

<dd>The "official" AxKit web site.

<dt><a href="http://www.axkit.org/docs/guide.dkb">The AxKit Guide</a>

<dd>An in-depth introduction to AxKit.

<dt>The axkit-users@axkit.org mailing list.

<dd>Browse the <a
href="http://axkit.org/cgi-bin/ezmlm-cgi/3">archives</a> or <a
href="http://axkit.org/mailinglist.xml">subscribe</a>.  This is the
place to discuss AxKit-specific problems and offer solutions, patches
and success stories.  The mod_perl resources listed here are perfect for
general mod_perl build and support issues as well.

<dt><a
href="http://perl.apache.org/guide/">mod_perl Developer's Guide</a>
<dd>The first place to check for
Apache+mod_perl build advice and debugging tips.

<dt><a
href="http://mathforum.org/epigone/modperl">modperl@perl.apache.org email
archives</a>

<dd>Look here to see if anyone else has had your problems and (usually)
found a solution.  This list is about to move to an @perl.org address at
the time of this writing so I won't point you to a soon-to-be-stale
subscription form.

<dt><a
href="http://aspn.activestate.com/ASPN/Mail/Browse/Threaded/perl-xml">perl-xml@listserv1.ActiveState.com</a>

<dd>A mailing list for general perl and XML questions, including axkit
support. (subscribe at <a
href="http://listserv.activestate.com/mailman/listinfo/perl-xml">http://listserv.activestate.com/mailman/listinfo/perl-xml</a>).

<dt>The <tt>#axkit</tt> IRC channel at <tt>irc.rhizomatic.net</tt>

<dd>A friendly place where you can often get quick advice right from
experienced AxKit users and contributors.

</dl>

<p>As with all online Open Source communities, please do try to pay
forward any help you receive.</p>

<p>Thanks to Martin Oldfield, Kip Hampton and Robin Berjon for their thorough
technical reviews, though I'm sure I managed to sneak some bugs by them.
AxKit and many of the Perl modules it uses are primarily written by
Matt Sergeant with extensive contributions from these good folks and
others, so many thanks to all contributors as well.</p>

<p>Copyright 2002, Robert Barrie Slaymaker, Jr.  All Rights Reserved.</p>








        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1278" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/p6pdigest/20020309.html" rel="bookmark">This Week on Perl 6 (3 -9 Mar 2002)</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bryan Warnock</span> on <abbr class="published" title="2002-03-12T00:00:00-08:00">March 12, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
                  <H3><a name="Notes">Notes</a></H3>

</P>

<P>

Both the email subscription and the web archive are temporarily offline.
This should be remedied shortly.  In the meantime, please send additions, 
submissions, corrections, kudos, and complaints to 
<a href="mailto:bwarnock@capita.com">bwarnock@capita.com</a>.
</P>

<P>
Perl 6 is the major redesign and rewrite of the Perl language.  Parrot is
the virtual machine that Perl 6 (and other languages) will be written for.
For more information on the Perl 6 and Parrot development efforts, visit
<a href="http://dev.perl.org/perl6/">dev.perl.org</a> and
<a href="http://www.parrotcode.org/">parrotcode.org</a>.
</P>

<P>
Last week was extremely light, with just 70 messages across 34 threads, and 29 
authors contributing.
<H3><a name="printf"><code>printf</code></a></H3>

</P>

<P>

Uri Guttman 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg09215.html">cross-posted</a> a thread discussing redesigning 
<CODE>printf</CODE>.  Since 
<CODE>%</CODE> will now be used for all hash accesses, there's a potential ambiguity between
interpolating a hash key, and a format specifier.  Several solutions were
presented, including requiring 
<CODE>$()</CODE> for interpolation, a new quote operator, and replacing the 
<CODE>%</CODE> with something else.  The discussion continues.
<H3><a name="Parrot_004">Parrot 0.0.4</a></H3>

</P>

<P>

The latest version of Parrot is being wrapped up.  The big feature of this release
is the foundation of the garbage collector.  A formal release announcement
will be made, well, when this version is formally released. 
<H3><a name="Multimethod_Dispatch">Multimethod Dispatch</a></H3>

</P>

<P>

Michael Lambert
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08793.html">asked</a> whether Parrot itself should support multimethod dispatch.  Internals head Dan
Sugalski affirmed that it 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08795.html">would</a>, but only for method and subroutine dispatch.  (As with most design decisions,
it's a speed thing.)
<H3><a name="The_Assembler_PDD">The Assembler PDD</a></H3>

</P>

<P>

Simon Cozens 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08803.html">released</a> version 1 of the proposed Assembler PDD.
<H3><a name="The_Parrot_Spotlight">The Parrot Spotlight</a></H3>

</P>

<P>

<a href="http://users.ox.ac.uk/~shug0957/">Alex Gough</a> is a physics student at Oxford with interests ranging from quantum computing 
to DNA simulation.  He uses perl to do more in less time and hopes Parrot and 
Perl 6 will allow cheaper, shorter, one-line solutions to troublesome but 
otherwise irrelevant problems.  He works on the big number and testing 
framework of Parrot.
</P>

<P>
When not at his computer, Alex canoes on foamy rivers, teaches basic 
lifeguarding, and helps mentally disabled children exercise.
</P>

<hr>

<a href="http://members.home.com/bcwarno/Perl6/">Bryan C. Warnock</a>





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1276" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/p6pdigest/20020302.html" rel="bookmark">These Weeks on Perl 6 (10 Feb - 2 Mar 2002)</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Bryan Warnock</span> on <abbr class="published" title="2002-03-06T00:00:00-08:00">March  6, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <h3><a name="Notes">Notes</a></h3>

<p>

Both the email subscription and the web archive are temporarily offline.
This should be remedied shortly.  In the meantime, please send additions, 
submissions, corrections, kudos, and complaints to 
<a href="mailto:bwarnock@capita.com">bwarnock@capita.com</a>.
</p>

<p>
Perl 6 is the major redesign and rewrite of the Perl language.  Parrot is
the virtual machine that Perl 6 (and other languages) will be written for.
For more information on the Perl 6 and Parrot development efforts, visit
<a href="http://dev.perl.org/perl6/">dev.perl.org</a> and
<a href="http://www.parrotcode.org/">parrotcode.org</a>.
</p>

<p>
For the three week period, there were 423 messages across 128 threads, 
with 61 authors contributing.  About half the threads were patch related.
Few of the remaining threads have little meaning outside the active
development circle, so there's little of interest to report on.</p>
<h3><a name="Topicalizers">Topicalizers</a></h3>



<p>

There was a fair amount of discussion, however, on 
<a href="http://archive.develooper.com/perl6-language@perl.org">perl6-language</a> about topicalizers in Perl 6. (Topicalizers are the lexically scoped aliases
 in 
<code>foreach</code> iterators and the new <code>given</code> block.)</p>

<p>
Allison Randal 
<a href="http://archive.develooper.com/perl6-language@perl.org/msg09165.html">asked</a>:
<blockquote>What would be the cost (performance, design or dwim) of making all the
defaulting constructs pay attention to the current topicalizer in
preference to $_?
</blockquote></p>

<p>
Larry Wall
<a href="http://archive.develooper.com/perl6-language@perl.org/msg09170.html">replied</a>:
<blockquote>It's been thought about, but neither accepted nor rejected yet.  It's
one of those things that depends on future decisions.  Certainly Hugo
and Dan will vouch for the fact that I was ruminating about similar
issues last Wednesday, though in this case I was thinking about how a
topic could supply a default to identical parameters of different
subroutine or method calls, and not just as the object of the call.
</blockquote></p>

<p>
Much of the subsequent thread discussed whether 
<code>when</code> should refer to
<a href="http://archive.develooper.com/perl6-language@perl.org/msg09200.html"><code>$_</code></a> or the topicalizer bound to by
<a href="http://archive.develooper.com/perl6-language@perl.org/msg09202.html"><code>given</code></a>.</p>

<h3><a name="Garbage_Collecting">Garbage Collecting</a></h3>


<p>

Dan Sugalski committed his garbage collector framework, including
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08741.html">built-in</a> statistical generation.  (As inspired by some
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08723.html">horrendous performance</a> early on.) The good news is that the performance problems have been cleared up.  The bad
news is that the garbage collector still doesn't collect garbage.</p>

<h3><a name="NET_CLR_and_Parrot">.NET CLR and Parrot</a></h3>


<p>
Simon Cozens 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08641.html">submitted</a> a lot of information on .NET.  Even for the non-Parroteers, this is a good
read.</p>

<h3><a name="PDDs">PDDs</a></h3>

<p>

Simon also
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08519.html">reminded</a> folks that there are Design Documents to write.  He then submitted the
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08523.html">Keys and Indices</a> PDD.  Brent Dax followed up with the
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08528.html">Regular Expression</a> PDD, and Dave Mitchell's 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08555.html">Coding Standards</a> PDD was finally committed.  Alex Gough contributed a 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08618.html">Big Number</a> PDD, while Bryan Warnock fixed some gaping holes in the
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08677.html">PDD</a> PDD.  There's also a PDD for the assembler and the bytecode format on the way.</p>

<h3><a name="Parrot_Magic_Cookie_Assignments">Parrot Magic Cookie Assignments</a></h3>

<p>

Dan Sugalski 
<a href="http://archive.develooper.com/perl6-internals@perl.org/msg08446.html">clarified</a> how PMC assignments should work.  Most of the subsequent discussion was
attempting to mesh Dan's answers with typing, both weak and strong.</p>

<h3><a name="The_Parrot_Spotlight">The Parrot Spotlight</a></h3>

<p>

<a href="http://brentdax.perlmonk.org">Brent Dax</a> is a sixteen-year-old high school junior.  He 
lives in Southern California with his parents, a brother and
sister, and a pet cat.
</p>

<p>
Brent works on a lot of stuff within Parrot.  He has worked on the
Configure system, the regular expression engine, the embedding interface,
warnings, and formatted printing.  He has two
modules on the CPAN, both related to Perl 6.  When he's not
hacking on Parrot, a Perl script, or some other little project, he's
probably handling 
<a href="mailto:brentdax@cpan.org">e-mail</a>, reading a book, doing homework, or watching CNN.  
He's sometimes on PerlMonks, and can usually be found on the developer's
IRC channel
<code>#parrot</code>.
</p>

<hr>

<a href="http://members.home.com/bcwarno/Perl6/">Bryan C. Warnock</a>





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1266" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2002/03/06/spam.html" rel="bookmark">Stopping Spam with SpamAssassin</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2002-03-06T00:00:00-08:00">March  6, 2002 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>
I receive a lot of spam; an absolute massive bucket load of spam. I received more than 100 pieces of spam in the first three days of this month.
I receive so much spam that <a href="http://www.spam.com/">Hormel Foods</a>
sends trucks to take it away. And I'm convinced that things are getting
worse. We're all being bombarded with junk mail more than ever these
days.
</p>
<p>
Well, a couple of days ago, I reached my breaking point, and decided that
the <a
href="/pub/a/2001/07/17/mailfiltering.html">simple
mail filtering</a> I had in place up until now just wasn't up to the
job. It was time to call in an assassin.
</p>
<h3>SpamAssassin</h3>

<p>
<a href="http://www.spamassassin.org">SpamAssassin</a> is a rule-based
spam identification tool. It's written in Perl, and there are several
ways of using it: You can call a client program,
<code>spamassassin</code>, and have it determine whether a given
message is likely to be spam; you can do essentially the same thing but
use a client/server approach so that your client isn't always loading 
and parsing the rules each time mail comes; or, finally, you can use
a Perl module interface to filter spam from a Perl program.
</p>
<p>
SpamAssassin is extremely configurable; you can select which rules you
want to use, change the way the rules contribute to a piece of mail's
"spam score," and add your own rules. We'll look at some of these
features later in the article. First, how do we get SpamAssassin
installed and start using it?
</p>
<p>
If you're using Debian Linux or one of the BSDs, then this couldn't be
easier: just install the appropriate package using <code>apt</code> or
the ports tree respectively. (The BSD port is called
<code>p5-Mail-SpamAssassin</code>)
</p>
<p>
Those less fortunate will have to <a
href="http://www.spamassassin.org/released/Mail-SpamAssassin-2.11.tar.gz">download</a>
the latest version of SpamAssassin, and install it themselves. 
</p>

<h3>Vipul's Razor</h3>


<p>
SpamAssassin uses a variety of ways for testing whether an e-mail is spam, ranging from simple textual checks on the headers
or body and detecting missing or misleading headers to
network-based checks such as <a href="http://www.orbz.org">relay
blackhole lists</a> and an interesting distributed system called <a
href="http://razor.sourceforge.net/">Vipul's Razor</a>.
</p>
<p>
Vipul's Razor takes advantage of the fact that spam is, by its nature,
distributed in bulk. Hence, a lot of the spam that you see, I'm also
going to see at some point. If there were a big clearing-house where you
could report spam and I could see if my incoming mail matches what
you've already reported, then I could have a guaranteed way of
determining whether a given mail is spam. Vipul's Razor is that
clearing-house.
</p>
<p>
Why is it a Razor? Because it's a collaborative system, its strength is
directly derived from the quality of its database, which comes back to
the way it's used by the likes of you and me. If end-users report lots
of real spam, the Razor gets better; if the database gets "poisoned" by
lots of false or misleading reports, then the efficiency of the whole
system drops.
</p>
<p>
Just like any other spam detection mechanism, Razor isn't perfect.
There are two points particularly worth noting. First, while it tries
to completely avoid false positives (saying something's spam when it
isn't) by requiring that spam be reported, it doesn't do anything about
false negatives (saying something's not spam when it is) because it only
knows about the mail in its database.
</p>
<p>
Second, spammers, like all other primitive organisms, are constantly
evolving. Vipul's Razor only works for spam that is delivered in bulk
without modification. Spam that is "personalized" by the addition of
random spaces, letters or the name of the recipient, will produce a
different signature that won't match similar spam messages in the Razor
database.
</p>

<p>
Nevertheless, the Razor is an excellent addition to the spam fighter's
arsenal, since when it marks something as spam, you can be almost
positive it's correct. And just like SpamAssassin, it's all pure Perl.
<code>Mail::Audit</code> has long supported a Razor plugin, but now we
can move to calling Razor as part of a more comprehensive mail filtering
system based on SpamAssasin and <code>Mail::Audit</code>
</p>

<p>
Installing Vipul's Razor is similar to installing SpamAssassin.
Debian and BSD users have packages called "razor" and "razor-clients,"
respectively; and the rest of the world can download and install from
the <a href="http://razor.sourceforge.net">home page</a>. SpamAssassin
will detect whether Razor is available and, by default, use it if so.

<h3>Assassinating Spam With Mail::Audit : The Easy Way </h3>

<p>
So this is the part you've all been waiting for. How do we use these
things to trap spam? For those of you who aren't familiar with
<code>Mail::Audit</code>, the idea is simple: just like with
<code>procmail</code>, you write recipes that determine what happens to
your mail. However, in the case of <code>Mail::Audit</code>, you specify
the recipe in Perl. For instance, here's a recipe to move all mail sent
to <code>perl5-porters@perl.org</code> to another folder:
<pre><code>
    use Mail::Audit;
    my $mail = Mail::Audit-&gt;new();
    if ($mail-&gt;from =~ /perl5-porters\@perl.org/) {
        $mail-&gt;accept("p5p");
    }
    $mail-&gt;accept();</code>
</pre>
For more details on how to construct mail filters with
<code>Mail::Audit</code>, see my 
<a
href="/pub/a/2001/07/17/mailfiltering.html">previous
article</a>.
</p>
<p>
Plugging SpamAssassin into your filters couldn't be simpler. First of
all, you absolutely need the latest version of <code>Mail::Audit</code>,
version 2.1 from <a
href="http://www.cpan.org/authors/id/S/SI/SIMON/">CPAN</a>. Nothing
earlier will do! Now write a filter like this:
<pre><code>
    use Mail::Audit;
    use Mail::SpamAssassin;
    my $mail = Mail::Audit-&gt;new();

    ... the rest of your rules here ...

    my $spamtest = Mail::SpamAssassin-&gt;new();
    my $status = $spamtest-&gt;check($mail);

    if ($status-&gt;is_spam ()) {
        $status-&gt;rewrite_mail() };
        $mail-&gt;accept("spam");
    }
    $mail-&gt;accept();</code>
</pre>

As you might be able to guess, the important thing here is the calls to
<code>check</code> and <code>is_spam</code>. <code>check</code> produces
a "status object" that we can query and use to manipulate the e-mail.
<code>is_spam</code> tells us whether the mail has exceeded the number of
"spam points" required to flag an e-mail as spam.
</p>
<p>
The
<code>rewrite_mail</code> method adds some headers and rewrites the
subject line to include the distinctive string "*****SPAM******". The
additional headers explain why the e-mail was flagged as spam. For
instance:
<pre><code>
X-Spam-Status: Yes, hits=6.1 required=5.0 
tests=SUBJ_HAS_Q_MARK,REPLY_TO_EMPTY,SUBJ_ENDS_IN_Q_MARK version=2.1</code>
</pre>
This message had a question mark in the subject, an empty reply-to, and
the subject ended in a question mark. The mail wasn't actually spam, but
this goes to prove that the technique isn't perfect. Nevertheless, since
installing the spam filter, I've only seen about 10 false positives,
and zero false negatives. I'm happy enough with this solution.
</p>
<p>
One important point to remember, however, is where in the course of your
filtering you should call SpamAssassin's checks. For instance, you want
to do so after your mailing list filtering, because mail sent to mailing
lists may have munged headers that might confuse SpamAssassin. However,
this means that spam sent to mailing lists might slip through the net.
Experiment, and find the best solution for your own e-mail patterns.
</p>
<h3>Assassinating Spam Without Mail::Audit </h3>
<p>

Of course, there are times when it might not be suitable to use
<code>Mail::Audit</code> or you may not want to. Since SpamAssassin is
provided as a command line tool as well as a set of Perl modules, it's
easy enough to integrate it in whatever mail filtering solution you use.
</p>
<p>
For instance, here's a procmail recipe that calls out to
<code>spamassassin</code> to filter out spam:
<pre><code>
:0fw
| spamassassin -P

:0:
* ^X-Spam-Status: Yes
spambox</code>
</pre>
For the speed-conscious, you can run the <code>spamd</code> daemon and
replace calls to <code>spamassassin</code> with <code>spamc</code>; be
aware that this is a TCP/IP daemon that you may want to firewall 
from the rest of the world.
</p>
<p>
Another approach is to call <code>spamassassin</code> in your mail
transport agent, meaning that spam is filtered out before it even
attempts to be delivered to you. There's a Sendmail <a
href="http://savannah.gnu.org/projects/spamass-milt/">milter</a> library
available that allows you to use SpamAssassin, and similar tricks for Exim
and other MTAs are available.
</p>

<h3>Assassinating Spam With Mail::Audit : More Complex Operations </h3>

<p>
The <code>Mail::SpamAssassin</code> module has many other methods
you can use to manipulate e-mail. For instance, if you've identified
something as definitely being spam, then you can use
<pre><code>
    $spamtest-&gt;report_as_spam($mail);</code>
</pre>
to report it to Vipul's Razor. (Take note of this: As we've mentioned
above, the efficiency of the Razor database comes from the fact that
e-mails in it are confirmed as spam by a human. Adding false positives to
the database would degrade its usefulness for everyone. Only submit mail
that you've confirmed personally.)
</p>
<p>
If you're finding that mail checking is taking too long because
SpamAssassin is having to contact the various network-based blacklists
and databases, then you can instruct it to only perform "local" checking:
<pre><code>
    $spamtest = Mail::SpamAssassin-&gt;new({local_tests_only =&gt; 1});</code>
</pre>
</p>
<p>
There is a wealth of other options available. See the
<code>Mail::SpamAssassin</code> documentation for more details, and
happy assassinating!






        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2002/02/">&laquo; February 2002</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2002/04/">April 2002 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
