<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/2002/04/16/axkit.html">
<dc:title>XSP, Taglibs and Pipelines</dc:title>
<dc:description> In the first article in this series, we saw how to install, configure and test AxKit, and we took a look at a simple processing pipeline. In this article, we will see how to write a simple 10-line XSP...</dc:description>
<dc:creator>Barrie Slaymaker</dc:creator>
<dc:date>2002-04-16T00:00:00-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    
    <link rel="prev bookmark" href="/pub/2002/04/10/mod_perl.html" title="Installing mod_perl without superuser privileges" />
    <link rel="next bookmark" href="/pub/2002/04/23/mod_perl.html" title="The Perl You Need To Know" />
    
    
    <title>XSP, Taglibs and Pipelines - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1288" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">XSP, Taglibs and Pipelines</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Barrie Slaymaker</span> on <abbr class="published" title="2002-04-16T00:00:00-08:00">April 16, 2002 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        
<p>In the <a href="/pub/a/2002/03/12/axkit.html">first article</a> in
this series, we saw how to install, configure and test AxKit, and we
took a look at a simple processing pipeline.  In this article, we will
see how to write a simple 10-line XSP taglib and use it in a pipeline
along with XSLT to build dynamic pages in such a way that gets the
systems architects and coders out of the content maintenance business.
Along the way, we'll discuss <a href="#why_pipelines">the pipeline
processing model</a> that makes AxKit so powerful.</p>

<p>First though, let us catch up on some changes in the AxKit world.</p>

<h3>CHANGES</h3>

<p>Matt and company have released AxKit v1.5.1, and 1.5.2 looks as though it
will be out soon.  1.5.1 provides a few improvements and bug fixes,
especially in the XSP engine discussed in this article.  The
biggest additions are the inclusion of a set of demonstration pages that
can be used to test and experiment with AxKit's capabilities, and
another module to help with writing taglibs (Jorge Walter's <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/SimpleTaglib.pm">SimpleTaglib</a>,
which we'll look at in the next article).</p>

<p>There has also been a release policy change: The main AxKit
distributions (AxKit-1.5.1.tar.gz for instance) will no longer contain
the minimal set of prerequisites; these will now be bundled in a
separate tarball.  This policy change enables people to download just
AxKit (when upgrading it, for instance) and recognizes the fact that
AxKit is an <a href="http://xml.apache.org/">Apache project</a> while
the prerequisites aren't.  Until the prerequisite tarball gets
released, the <a href="/2002/04/16/examples/axkit_articles-2.0.tar.gz">source
tarball</a> that accompanies this article contains them all (though it
installs them in a local directory only, for testing purposes).  The
main AxKit tarball still includes all the core AxKit modules.</p>

<h4>XSP and taglibs</h4>

<p>We <a href="/pub/a/2002/03/12/axkit.html?page=3">touched
on</a> eXtensible Server Pages and taglibs in the last article; this
time we'll take a deeper look and try to see how <a href="http://axkit.org/docs/xsp/index.xml">XSP</a>, taglibs and XSLT
can be combined in a powerful and useful way.</p>

<blockquote>A quick taglib refresher: A taglib is a collection of XML tags in an
<a href="http://www.jclark.com/xml/xmlns.htm">XML namespace</a> that act
like conditionals or subroutine calls.
Essentially, taglibs are a way of encoding logic and dynamic content in
to pages without including raw "native" code (Perl, Java, COBOL; any of
the popular Web programming languages) in the page; each taglib provides
a set of related services and multiple taglibs may be used in the same
XSP page.</blockquote>

<p>For our example, we will build a "data driven" processing pipeline
(clicking on a blue icon or arrow will take you to the relevant
documentation or section of this article):</p>

<a name="weather1_flow.png" href="#"></a>
<img src="/pub/2002/04/16/graphics/weather1_flow.png"
    alt="weather1.xsp processing pipeline"
    border="0"
    usemap="#map" /> 
<map name="map">
<!-- #$-:Image Map file created by GIMP Imagemap Plugin -->
<!-- #$-:GIMP Imagemap Plugin by Maurits Rijk -->
<!-- #$-:Please do not edit lines starting with "#$" -->
<!-- #$VERSION:1.3 -->
<!-- #$AUTHOR:barries -->
  <area shape="rect" coords="11,78,60,139" alt="The source XSP document" href="#weather1.xsp" />
  <area shape="rect" coords="192,78,228,206" alt="The first XSLT stylesheet: weather.xsl" href="#weather.xsl" />
  <area shape="rect" coords="239,78,277,206" alt="The second XSLT stylesheet: as_html.xsl" href="#as_html.xsl" />
  <area shape="rect" coords="288,78,336,138" alt="The final document" href="#result_doc" />
  <area shape="rect" coords="181,102,191,114" alt="The output from the XSP processor" href="#XSP_out" />
  <area shape="rect" coords="230,100,239,115" alt="The output from the first XSLT processor" href="#XSLT1_out" />
  <area shape="rect" coords="102,126,150,144" alt="My::Weather code and description" href="#My::WeatherTaglib" />
  <area shape="rect" coords="77,102,126,120" alt="The Util taglib" href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Util-1.5/Util.pm" />
  <area shape="rect" coords="132,102,174,120" href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Param-1.4/Param.pm" alt="" />
</map>

<blockquote><img src="/pub/2002/04/16/graphics/weather1_flow_icon.png" alt="Example icon" border="0" align="right" />
NOTE: A little icon like this will be shown with the description of
each piece of the pipeline with that piece hilighted.  Clicking on those icons
will bring you back to this diagram.</blockquote>

<p>This pipeline has five stages:</p>

<ol>

<li>the XSP document (<a href="#weather1.xsp"><code>weather1.xsp</code></a>) defines what chunks of raw data
(current time and weather readings) are needed for this page in a simple
XML format,
</li>
<li>the XSP processor applies taglibs to assemble the raw data for the
page,
</li>
<li>the first XSLT processor and stylesheet (<a href="weather.xsl"
alt="weather.xsl code"><code>weather.xsl</code></a>)
format the raw data in to usable content,
</li>
<li>the second XSLT processor and stylesheet (<a href="#as_html.xsl"
alt="as_html.xsl code and description"><code>as_html.xsl</code></a>) lays
out and generates the final page ("Result Doc"), and
</li>
<li>the Gzip compressor automatically compresses the output if the
client can comprehend compressed content (even when an older browser is
bashful and does not announce that it can cope with gzip-encoded
content).
</li>
</ol>

<p><a name="mimicry" /></a>This multipass approach mimics those found in real 
  applications; each stage has a specific purpose and can be designed and tested 
  independently of the others.</p>

<p>In a real application, there might well be more filters: Our second
XSLT filter might be tweaked to build document without any "look and feel," and an additional filter could be used to implement the "look and feel" of the presentation after the layout is complete.  This would allow look and feel to be altered independently of the layout.</p>

<blockquote>We call this a "data driven" pipeline because the document
feeding the pipeline defines what data is needed to serve the page; it
does not actually contain any content.  Later stages add the content and
format it.  We'll look at a "document driven" pipeline, which feeds the
pipeline with the document to be served, in the next
article.</blockquote>

<a name="why_pipelines"></a>
<h4>Why pipelines?</h4>

<p>The XML pipeline-processing model used by AxKit is a powerful
approach that brings technical and social advantages to document-processing systems lsuch as Web applications.</p>

<p>On the social side, the concept of a pipeline or assembly line is
simple enough to be taught to and grasped by nonprogrammers.  Some of
the approaches used by HTML-oriented tools (like many on CPAN) are not
exactly designer-friendly: They rely on programmer-friendly concepts
such as abstract data structures, miniature programming languages,
"catch-all" pages and object-oriented techniques such as method dispatch.
To be fair, some designers can and do learn the concepts, and others
have Perl implementors who deploy these tools in simple patterns that
are readily grasped.</p>

<p>The reason that HTML-oriented tools have a hard time something as
simple as a pipeline model is that HTML is a presentation language and
does not lend itself to describing data structures or to incremental
processing.  The advantage of incremental processing is that the number
of stages can be designed to fit the application and organization; with
other tools, there's often a one- or two-stage approach where the first
stage is almost entirely in the realm of the Perl coders ("prepare thedata") and the second is halfway in the realm of the coders and halfway in the designer's realm.</p>

<p>XML can be used both to describe data structures and mark up prose
documents; this allows a pipeline to mingle data and prose in flexible
ways.  Each processing stage is XML-in, XML-out (except for the first
and last, which often consume and generate other formats).  However, the
stages aren't limited to dealing purely with XML: The taglibs we're
using show one way that stages can use Perl code (and, by extension,
many other languages; see the <a href="http://theoryx5.uwinnipeg.ca/mod_perl/cpan-search?search=Inline%3A%3A">Inline</a>
series of modules), external libraries, and almost any non-XML data as
needed.  Not only does My::WeatherTaglib integrate with Perl code, it's
also requesting data over the Internet from a remote site.</p>

<p>The use of XML as the carrier for data between the stages also
allows each stage to be debugged and unit tested.  The documents that
forwarded between the stages are often passed as internal data
structures instead of XML strings for efficiency's sake, but they can be
rendered (like the examples shown in this article) and examined, both
for teaching purposes and debugging purposes.  The uniform look and feel
of XML, whatever it's disadvantages, is at least readily understood by
any competent Web designer.</p>

<p>Pipelines are also handy mechanisms in that the individual stages are
chosen at request time; different stages can be selected to
deliver different views of the same content.  AxKit provides several
powerful mechanisms for configuring pipelines, the
<code>&lt;xml-stylesheet ...&gt;</code> approach used in this article is
merely the simplest; future articles will explore building flexible
pipelines.</p>

<p>Pipelines also make a useful distinction between the manager (AxKit)
and the processing technologies.  Not only does this allow you to mix
and match processing techniques as needed (AxKit ships with nine
"Languages", or types of XML processor, and several "Providers", or data
sources), it also allows new technologies to be incorporated in to
existing sites when a new technology is needed.</p>

<p>Moreover, technologies like XML and XSLT are standardized and are
becoming widely accepted and supported.  This means that most, if not
all the documents in our example pipeline can be handed off to non-Perl
coders without (much) fear of them mangling the code.  When they do
mangle it; tools such as xsltproc (shipped with libxslt, one of the AxKit
XSLT processors) can be used to give the designers a first line of
defense before calling in the programmers.  Even taglibs, nonstandard
though they are, leverage the XML standard to make logic and data
available to noncoders in a (relatively) safe manner.  For instance, <a href="http://www.zvon.org/xxl/XSLTutorial/Output/index.html">here's an
excellent online tutorial</a> provided by <a href="http://www.zvon.org/">ZVON.org</a>.</p>

<p>Mind you, XML and XSLT have their rough spots; the trick is that you
don't need to know all the quirky ins and outs of the XML specification
or use XSLT for things that are painful to do in it.  I mean, really,
when was the last time you dealt with a <a href="http://www.w3.org/TR/REC-xml#Notations">notation declaration</a>?
Most uses of XML use a small subset of the XML specification, and other
tools such as XSP, XPathScript and various schema languages can be used
where XSLT would only make the problem more difficult.</p>

<p>What stages are appropriate depends on the
application's requirements and those of the organization(s) involved in
building, operating and maintaining it.  In the next
article, we'll examine a "document driven" pipeline and a taglib better
suited for this approach that uses different stages.</p>

<p>All that being said there will always be a place for the non-XML and
non-pipelined solutions: XML and pipelines are <i>not</i> panaceas.  I
still use other solutions when the applications or organizations I work
with would not benefit from XML.</p>

<a name="httpd.conf"></a>
<h4><code>httpd.conf</code>: the AxKit
configuration</h4>

<p>Before we start in to the example code, let's glance at the AxKit
configuration.  Feel free to <a href="#My::WeatherTaglib">skip ahead
to the code</a> if you like; otherwise, here's the configuration we'll
use in <code>httpd.conf</code>:</p>

<a name="httpd.conf2"></a>
<pre><code>
    ##
    ## Init the httpd to use our "private install" libraries
    ##
    PerlRequire startup.pl
    
    ##
    ## AxKit Configuration
    ##
    PerlModule AxKit
    
    &lt;Directory /home/me/htdocs"&gt;
	        Options -All +Indexes +FollowSymLinks
    
        # Tell mod_dir to translate / to /index.xml or /index.xsp
        DirectoryIndex index.xml index.xsp
        AddHandler axkit .xml .xsp
    
        AxDebugLevel 10
    
        AxGzipOutput Off
    
        <b>AxAddXSPTaglib AxKit::XSP::Util</b>
        <b>AxAddXSPTaglib AxKit::XSP::Param</b>
        <b>AxAddXSPTaglib My::WeatherTaglib</b>
    
        <b>AxAddStyleMap application/x-xsp
                      Apache::AxKit::Language::XSP</b>
    
        <b>AxAddStyleMap text/xsl
                      Apache::AxKit::Language::LibXSLT</b>
    &lt;/Directory&gt;
</code></pre>

<p>This is the same configuration from the <a href="/pub/a/2002/03/12/axkit.html?page=2#testing">the last
article</a>&#8212;most of the directives and the processing model used
by Apache and AxKit for them are described in detail there.  The two
directives in <b>bold</b> have been added.  The key directives for our
example are <code>AxAddXSPTaglib</code> and <code>AxAddStyleMap</code>.</p>

<p>The <code>AxAddXSPTaglib</code> directives load three tag libraries:
Kip Hampton's <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Util-1.5/Util.pm">Util</a>
and <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Param-1.4/Param.pm">Param</a>
taglibs and our very own <a href="#My::WeatherTaglib">WeatherTaglib</a>.
Util will allow our example to get at the system time; Param will allow it
to parse URLs; and WeatherTaglib will allow us to fetch the current weather
conditions for that zip code.</p>

<p>The two <code>AxAddStyleMap</code> directives map a pair of mime
types to an XSP and an XSLT processor.  Our example source document will
refer to these mime types to configure instances of XSP and XSLT
processors in to the processing pipeline.</p>

<blockquote>We're using Apache::AxKit::Language::LibXSLT to perform XSLT
transforms, which uses the GNOME project's <a href="http://xmlsoft.org/XSLT/">libxslt</a> library under the hood.
Different XSLT engines offer different sets of features.  If you prefer,
then you can also use Apache::AxKit::Language::Sablot for XSLT work.  You can
even use them in the same pipeline by assigning them to different mime
types.  </blockquote>

<a name="My::WeatherTaglib"></a>
<h4>
<a href="#weather1_flow.png"
   name="weather1_flow_weather_taglib.png"><img
     src="/pub/2002/04/16/graphics/weather1_flow_weather_taglib.png"alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right" /></a>
My::WeatherTaglib</h4>

<p>Here's a taglib that uses <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/Geo-Weather/Weather.html">Geo::Weather</a>
module on CPAN to take a zip code and fetch some weather
observations from <a href="http://weather.com/">weather.com</a> and
convert them to XML:</p>

<pre><code>
    package My::WeatherTaglib;
    
    $NS = "<b>http://slaysys.com/axkit_articles/weather/</b>";
    @EXPORT_TAGLIB = ( '<b>report($zip)</b>' );
    
    use strict;
    <b>use Apache::AxKit::Language::XSP::TaglibHelper;</b>
    use Geo::Weather;
    
    sub report { Geo::Weather->new->get_weather( @_ ) }
    
    1;
</code></pre>

<p>This taglib uses Steve Willer's <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm">TaglibHelper</a>
(included with AxKit) to automate the drudgery of dealing with XML.
Because of this, our example taglib distills a lot of power into a few
lines of Perl.  Don't be fooled, though, there's a lot going on behind
the curtains with this module.</p>

<p>When a tag like <code>&lt;weather:report zip="15206"/&gt;</code> is
encountered in an XSP page, it will be translated into a call to
<code>report( "15206" )</code>, the result of the call will be converted
to XML and will replace the original tag in the XSP output document.</p>

<p>The <code>$NS</code> variable sets the <a href="http://www.jclark.com/xml/xmlns.htm">namespace URI</a> for the
taglib; this configures XSP to direct all elements within the namespace
<code>http://slaysys.com/axkit_articles/weather/</code> to
My::WeatherTaglib, as we'll see in a bit.</p>

<blockquote>When used in an XSP page, all XML elements supplied by a
taglib will have a namespace prefix.  For instance, the prefix
<code>weather:</code> is mapped to My::WeatherTaglib's namespace in the
XSP page below.  This prefix is not determined by the taglib&8212;we
could have chosen another; this section assumes that the prefix
<code>weather:</code> is used for the sake of clarity.</blockquote>

<p>The <code>@EXPORT_TAGLIB</code> specifies what functions will be exported as 
  elements in this namespace and what parameters they accept (see <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm">the 
  documentation</a> for details). The <code>report($zip)</code> export specification 
  exports a tag that is invoked like <code>&lt;weather:report zip="..."/&gt;</code> 
  or </p>
<pre><code>
    &lt;weather:report&gt;
        &lt;weather:zip&gt;15206&lt;/weather:zip&gt;
    &lt;/weather:report&gt;
</code></pre>

<p>The words "report" and "zip" in the <code>@TAGLIB_EXPORT</code>
definition are used to determine the taglib element and attribute names;
the order of the parameters in the definition determines the order they
are passed in to the function.  When invoking a taglib, the XML may
specify the parameters in any order in the XML.  The names they are
specified with are not important to or visible from the Perl code by
default (see the <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm#FUNCTION_SPECIFICATIONS">*argument
function specification</a> for how to accept an XML tree if need be).</p>

<p>All that's left for us to do is to write the "body" of the taglib by
<code>use()</code>ing <code>Geo::Weather</code> and writing the
<code>report()</code> subroutine.</p>
<p>There are two major conveniences provided by TaglibHelper. The first
is welding Perl subroutines to XML tags (via the
<code>@EXPORT_TAGLIB</code> definitions).  The second is converting the
Perl data structure returned by <code>report()</code>, a hash reference
like</p>

<pre><code>
    {
      city  =&gt; "Pittsburgh",
      state =&gt; "PA",
      cond  =&gt; "Sunny",
      temp  =&gt; 76,
      pic   =&gt; "http://image.weather.com/web/common/wxicons/52/26.gif",
      url   =&gt; "http://www.weather.com/search/search?where=15206",
      ...
    }
</code></pre>

<p>in to <a href="http://www.w3.org/TR/xml-fragment#defn-well-balanced">well balanced</a> 
  XML like: </p>
<pre><code>
      &lt;city&gt;Pittsburgh&lt;/city&gt;
      &lt;state&gt;PA&lt;/state&gt;
      &lt;cond&gt;Sunny&lt;/cond&gt;
      &lt;temp&gt;76&lt;/temp&gt;
      &lt;pic&gt;http://image.weather.com/web/common/wxicons/52/26.gif&lt;/pic&gt;
      &lt;url&gt;http://www.weather.com/search/search?where=15206&lt;/url&gt;
      ...
</code></pre>

<p>TaglibHelper allows plain strings, data structures and strings of
well-balanced XML to be returned.  By writing a single one-line
subroutine that returns a Perl data structure, we've written a taglib
that requires no Perl expertise to use (any XHTML jock could use it
safely using their favorite XML, HTML or text editor) and that can be
used to serve up "data" responses for XML-RPC-like applications or
"text" documents for human consumption.</p>

<blockquote>The <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/Data-Dumper/Dumper.html">Data::Dumper</a>
module that ships with Perl is a good way to peer inside the data
structures floating around in a request.  Wehn run in AxKit, a quick
<code>warn Dumper( $foo );</code> will dump the data structure referred
to by <code>$foo</code> to the Apache error log.</blockquote>

<p>The output XML from a taglib replaces the orignal tag in the
result document.  In our case, the replacement XML is not too useful
as-is, it's just data that looks a bit XMLish.  Representing data
structures as XML may seem awkward to Perl gurus, but it's quite helpful
if you want to get the Perl code safely out of the way and allow others
to use XML tools to work with the data.</p>

<p>The "data documents" from our XSP processor will upgraded in later
processing stages to content that is presentable to the client; our XSP
page neither knows nor cares how it is to be presented.  Exporting the
raw data as XML here is intended to show how to get the Perl gurus out
of the critical path for content development by allowing site designers
and content authors to do it.</p>

<p>Emitting structured data from XSP pages is just one approach.
Taglibs can return whatever the "best fit" is for a given application,
whether that be raw data, pieces of content or an entire article.</p>

<blockquote><a href="http://xml.apache.org/cocoon/">Cocoon</a>, the
system AxKit was primarily inspired by, uses a different approach to
writing taglibs.  AxKit also supports that approach, but it tends to be
more awkward, so it will be examined in the next article. We'll also
look at Jorge Walter's new <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/SimpleTaglib.pm">SimpleTaglib</a>
module then, which is newer and more flexible, but less portable than
the TaglibHelper module we're looking at here.</blockquote>

<a name="weather1.xsp"></a>
<h4>
<a href="#weather1_flow.png" name="weather1_flow_weather_xsp.png"><img
     src="/pub/2002/04/16/graphics/weather1_flow_weather_xsp.png" alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right"/></a>
<code>weather1.xsp</code>: Using My::WeatherTaglib</h4><br />

<p>Here's a page (<code>weather1.xsp</code>) that uses the My::WeatherTaglib and 
  the "standard" XSP <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Util-1.5/Util.pm">util taglib</a> 
  we used in the previous article</a>: </p>
<pre><code>
    &lt;?xml-stylesheet href="NULL"        type="<b>application/x-xsp</b>"?&gt;
    &lt;?xml-stylesheet href="<b>weather.xsl</b>" type="<b>text/xsl</b>"         ?&gt;
    &lt;?xml-stylesheet href="<b>as_html.xsl</b>" type="<b>text/xsl</b>"         ?&gt;
    
    &lt;xsp:page
        xmlns:xsp="http://www.apache.org/1999/XSP/Core"
        <b>xmlns:util="http://apache.org/xsp/util/v1"</b>
        <b>xmlns:param="http://axkit.org/NS/xsp/param/v1"</b>
        <b>xmlns:weather="http://slaysys.com/axkit_articles/weather/"</b>
    &gt;
    &lt;data&gt;
      &lt;title&gt;&lt;a name="title"/&gt;My weather report&lt;/title&gt;
      &lt;time&gt;
        <b>&lt;util:time format="%H:%M:%S" /&gt;</b>
      &lt;/time&gt;
      &lt;weather&gt;
        <b>&lt;weather:report&gt;
          &lt;!-- Get the ?zip=12345 from the URI and pass it
               to the weather:report tag as a parameter --&gt;
          &lt;weather:zip&gt;&lt;param:zip/&gt;&lt;/weather:zip&gt;
        &lt;/weather:report&gt;</b>
      &lt;/weather&gt;

    &lt;/data&gt;
    &lt;/xsp:page&gt;
</code></pre>

<p>When <code>weather1.xsp</code> is requested, AxKit parses the
<code>&lt;?xml-stylesheet ...?&gt;</code> processing instructions and uses
the <code>AxAddStyleMap</code>
directives to build the processing chain <a href="#weather1_flow.png">shown above</a>.</p>

<p>
<a href="#weather1_flow.png" name="weather1_flow_XSP.png">
<img src="/pub/2002/04/16/graphics/weather1_flow_XSP.png" alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" name="weather1_flow_XSP.png" border="0" align="right" /></a></p>

<p>
The XSP processor is the first processor in the pipeline.  As it parses
the page, it sends all elements with <code>util:</code>,
<code>param:</code> or <code>weather:</code> prefixes to the <a href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Util-1.5/Util.pm">Util</a>,
<a href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-Param-1.4/Param.pm">Param
</a>,
and <a href="#My::WeatherTaglib">WeatherTaglib</a> taglibs.  This
mapping is defined by the <code>xmlns:...</code> attributes and by the
namespace URIs that are hardcoded into each taglib's implementation
(see the <code>$NS</code> variable in <a href="#My::WeatherTaglib">My::WeatherTaglib</a>).</p>

<p>In this page, the <code>&lt;util:time&gt;</code> element results in a
call to Util's <code>get_date()</code> and the value of the
<code>format=</code> attribute is passed in as a parameter.  The string
returned by <code>get_date()</code> is converted to XML and emitted
instead of the <code>&lt;util:time&gt;</code> element in the output
page.  This shows how to pass simple constant parameters to a taglib.</p>

<p>We're getting slightly trickier with the
<code>&lt;weather:report&gt;</code> element: This construct fetches the
zip parameter from the request URI's query string (or form field) and
passes it to WeatherTaglib's <code>report()</code> as the
<code>$zip</code> parameter.  Thanks to Kip Hampton for the help in
using AxKit::XSP::Param in this manner.</p>

<p>Because we have the <code>AxDebugLevel</code> set to <code>10</code>,
you can see these calls the compiled version of
<code>weather1.xsp</code>; the generated Perl code is written to Apache's
error log&#8212;usually <code>$SERVER_ROOT/logs/error_log</code>.</p>

<p>The <code>&lt;a name="title"/&gt;</code> in the
<code>&lt;title&gt;</code> element is a contrivance put in this page to
show off a feature later in the processing chain.  Be glad it's not the
dreaded <code>&lt;blink&gt;</code> tag!</p>

<p><a name="XSP_out" /></a><a href="#weather1_flow.png" name="weather1_flow_XSP_out.png"> 
  <img src="/pub/2002/04/16/graphics/weather1_flow_XSP_out.png"
 alt="My::WeatherTaglib's position in the weather1.xsp processing  pipeline" name="weather1_flow_XSP_out.png" border="0" align="right" /></a> 
</p>
<p>The XML document that is outputted from the XSP processor and fed to the
first XSLT processor looks like (taglib output in <b>bold</b>):</p>

<pre><code>
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;data&gt;
      &lt;title&gt;&lt;a name="title"/&gt;My weather report&lt;/title&gt;
      &lt;time&gt;<b>16:11:55</b>&lt;/time&gt;
      &lt;weather&gt;
        <b>&lt;state&gt;PA&lt;/state&gt;
        &lt;heat&gt;N/A&lt;/heat&gt;
        &lt;page&gt;/search/search?where=15206&lt;/page&gt;
        &lt;wind&gt;From the Southwest at 10&lt;/wind&gt;
        &lt;city&gt;Pittsburgh&lt;/city&gt;
        &lt;temp&gt;76&lt;/temp&gt;
        &lt;cond&gt;Sunny&lt;/cond&gt;
        &lt;uv&gt;2&lt;/uv&gt;
        &lt;visb&gt;Unlimited&lt;/visb&gt;
        &lt;url&gt;http://www.weather.com/search/search?where=15206&lt;/url&gt;
        &lt;dewp&gt;53&lt;/dewp&gt;
        &lt;zip&gt;15206&lt;/zip&gt;
        &lt;baro&gt;29.75&lt;/baro&gt;
        &lt;pic&gt;http://image.weather.com/web/common/wxicons/52/26.gif&lt;/pic&gt;
        &lt;humi&gt;31&lt;/humi&gt;</b>
      &lt;/weather&gt;
    &lt;/data&gt;
</code></pre>

<p>This data is largely presentation-neutral&#8212;kindly overlook the
U.S. centric temperature scale&#8212;it can be styled as needed.</p>

<blockquote>To generate this intermediate document, just commenting out all but
the first <code>&lt;?xml-stylesheet ... ?&gt;</code> processing instruction and
request the page like so:
<pre><code>
    $ <b>lynx -source localhost:8080/02/weather1.xsp?zip=15206 | xmllint --format -</b>
</code></pre>

<p><code>xmllint</code> is installed with the GNOMDE <code>libxsml</code>
library used by various parts of AxKit.</p>

<p>When we cover how to build pipelines in more dynamic ways than using these
stodgy old xml-stylesheet PIs, those techniques can be used to
allow intermediate documents to be shown by varying the request URI.</p>
</blockquote>

<h4>
<a name="weather.xsl"></a><a href="#weather1_flow.png" name="weather1_flow_weather_xsl.png">
<img src="/pub/2002/04/16/graphics/weather1_flow_weather_xsl.png" alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline"
 border="0" align="right"/></a>

<code>weather.xsl</code>: Converting Data to Content</h4><br />

<p>Here's how we can convert the data document emitted by the XSP
processor into more human-readable text.  As described <a href="#mimicry">above</a>, we're taking a two-step approach to simulate
a "real-world" scenario of turning our data into chunks of content in
one (reusable) step and then laying the HTML out in a second step.</p>

<p><code>weather.xsl</code> is an XSLT stylesheet that uses several
templates to convert the XSP output in to something more readable:</p>

<pre><code>
    &lt;xsl:stylesheet 
      version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    &gt;
    
    &lt;xsl:template match="<b>/data/time</b>"&gt;
      <b>&lt;time&gt;Hi! It's &lt;xsl:value-of select="/data/time" /&gt;&lt;/time&gt;</b>
    &lt;/xsl:template&gt;
    
    &lt;xsl:template match="<b>/data/weather</b>"&gt;
      <b>&lt;weather&gt;The weather in
        &lt;xsl:value-of select="/data/weather/city" /&gt;,
        &lt;xsl:value-of select="/data/weather/state"/&gt; is
        &lt;xsl:value-of select="/data/weather/cond" /&gt; and
        &lt;xsl:value-of select="/data/weather/temp" /&gt;F
        (courtesy of &lt;a href="{/data/weather/url}"&gt;The
        Weather Channel&lt;/a&gt;).
      &lt;/weather&gt;</b>
    &lt;/xsl:template&gt;
    
    &lt;xsl:template match="@*|node()"&gt;
      &lt;!-- Copy the rest of the doc verbatim --&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:apply-templates select="@*|node()"/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:template&gt;
    
    &lt;/xsl:stylesheet&gt;
</code></pre>

<p> <a href="#weather1_flow.png" name="weather1_flow_XSLT1.png"><img src="/pub/2002/04/16/graphics/weather1_flow_XSLT1.png" alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right" /></a> 
  This is applied by the first XSLT processor in the pipeline. </p>
<p>The interesting thing here is that we are using <i>two</i> templates
(shown in bold) to process different bits of the source XML.  These
templates "blurbify" the time and weather data in to presentable chunks
and, as a side-effect, throw away unused data from the weather report.</p>

<p>The third template just passes the rest through (XSLT has some
annoying qualities, one of which is that it takes a complex bit of code
to simple pass things through "as is").  However, this is
boilerplate&8212;right from the XSLT specification, in fact&8212;and
need not interfere with designers creating the two templates we actually
want in this stylesheet.</p>

<blockquote>Another annoying quality is that XSLT contructs look
visually similar to the templates themselves.  This violates the
language design principle "different things should look different,"
which is used in Perl and many other languages.  This can be ameliorated
by using an XSLT-aware editor or syntax hilighting to make the
differences between XSLT statements and "payload" XML
clear.</blockquote>

<p><a name="XSLT1_out" /></a><a href="#weather1_flow.png" name="weather1_flow_XSLT1_out.png"> 
  <img src="/pub/2002/04/16/graphics/weather1_flow_XSLT1_out.png"alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right" /></a> 
  The output from the first XSLT processor looks like (template output in <b>bold</b>):</p>

<pre><code>
    &lt;?xml version="1.0"?&gt;
    &lt;data&gt;
      &lt;title&gt;&lt;a name="title"/&gt;My weather report&lt;/title&gt;
      <b>&lt;time&gt;Hi! It's 16:50:36&lt;/time&gt;</b>
      <b>&lt;weather&gt;The weather in
        Pittsburgh,
        PA is
        Sunny and
        76F
        (courtesy of &lt;a href="http://www.weather.com/search/search?where=15206"&gt;The
        Weather Channel&lt;/a&gt;)
      &lt;/weather&gt;</b>
    &lt;/data&gt;
</code></pre>

<p>Now we have a set of chunks that can be placed on a Web page.  This
technique can be used to build sidebars, newspaper headlines, abstracts,
contact lists, navigation cues, links, menus, etc., in a reusable
fashion.</p>

<a name="as_html.xsl"></a>
<h4>
<a href="#weather1_flow.png" name="weather1_flow_as_html_xsl.png">
<img src="/pub/2002/04/16/graphics/weather1_flow_as_html_xsl.png" alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right" /></a>
<code>as_html.xsl</code>: Laying out the page
</h4><br />

<p>The final step in this example is to insert the chunks we've built
into a page of HTML using the <code>as_html.xsl</code>stylesheet:</p>

<pre><code>
    &lt;xsl:stylesheet 
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        version="1.0"&gt;

    &lt;xsl:output method="html" /&gt;

    &lt;xsl:template match="/"&gt;
      &lt;html&gt;
        &lt;head&gt;
          &lt;title&gt;<b>&lt;xsl:value-of select="/data/title" /&gt;</b>&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
          &lt;h1&gt;<b>&lt;xsl:copy-of select="/data/title/node()"   /&gt;</b>&lt;/h1&gt;
          &lt;p &gt;<b>&lt;xsl:copy-of select="/data/time/node()"    /&gt;</b>&lt;/p&gt;
          &lt;p &gt;<b>&lt;xsl:copy-of select="/data/weather/node()" /&gt;</b>&lt;/p&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    &lt;/xsl:template&gt;

    &lt;/xsl:stylesheet&gt;
</code></pre>

<p> <a name="result_doc" /></a> <a href="#weather1_flow.png" name="weather1_flow_result_doc.png"> 
  <img  src="/pub/2002/04/16/graphics/weather1_flow_result_doc.png"alt="My::WeatherTaglib's position in the weather1.xsp processing pipeline" border="0" align="right" /></a> 
  To generate the final HTML:</p>

<pre><code>
    &lt;html&gt;
    &lt;head&gt;
    &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type"&gt;
    &lt;title&gt;<b>My weather report</b>&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1&gt;<b>&lt;a name="title"/&gt;My weather report</b>&lt;/h1&gt;
    &lt;p&gt;<b>Hi! It's 17:05:08</b>&lt;/p&gt;
    &lt;p&gt;<b>The weather in
        Pittsburgh,
        PA is
        Sunny and
        76F
        (courtesy of &lt;a href="http://www.weather.com/search/search?where=15206"&gt;The
        Weather Channel&lt;/a&gt;).</b>
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>


<p>Using the <code>/data/title</code> from the data document in two
places in the result document is a minor example of the benefit of
separating the original data generation from the final presentation.  In
the <code>&lt;title&gt;</code> element, we're using
<code>xsl:value-of</code>, which returns just the textual content; in
the <code>&lt;h1&gt;</code> element, we're using
<code>xsl:copy-of</code>, which copies the tags and the text.  This
allows the title to contain markup that we strip in one place and use in
another.</p>

<p>This is similar to the situation often found in real applications
where things like menus, buttons, location tell-tales ("Home &gt;&gt;
Articles &gt;&gt; Foo" and the like) and links to related pages often
occur in multiple places.  Widgets like these make ideal "chunks" that
the layout page can place as needed.</p>

<p>This is only one example of a "final rendering" stage; different
filters could be used instead to deliver different formats.  For
instance, we could use XSLT to deliver XML, XHTML, and/or plain text
versions, or we could use an AxKit-specific processor, XPathScript, to
convert to things like RTF, nroff, and miscellaneous documentation
formats that XML would otherwise have a hard time delivering.</p>

<blockquote>AxKit optimizes this two-stage XSLT processing by passing
the internal representation used by <code>libxslt</code> directly
between the two stages. This means that output from one stage goes
directly to the next stage without having to be reparsed.</blockquote>

<p> <a name="real_world" /></a></p>
<h4>Relating <code>weather1.xsp</code> to the real
world</h4>

<p>If you squint a little at the code in My::WeatherTaglib, then you can imagine 
  using a <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/DBI/DBI.html">DBI</a> query instead 
  of having Geo::Weather query a remote Web site (Geo::Weather is used instead 
  of DBI in this article to keep the example code and tarball relatively simple). 
</p>
<p>Writing queries and other business logic in to taglibs has several major advantages: 
</p>
<ul>

<li>the XML taglib API puts a designer friendly face on the queries,
allowing the XSP page to be tweaked or maintained by non-Perl literate
folks with their preferred tools, hopefully getting you off the "please
tweak the query parms" critical path.</li>

<li>Since the taglib API is XML, standard XML editors will catch basic
syntax errors without needing to call in the taglib maintainer.
</li>
<li>Schema validators and XSLT tools can also be used to allow the
designers to check the higher-level syntax before pestering the taglib
maintainer.
</li>
<li>The query parameters and output can be touched up with Perl, making
the "high level" XML interface simpler and more idiot-proof.
</li>
<li>The output is XML, so other XML processors can be used to enhance
the content and style.  This allows, for instance, XSLT literate
designers to work on the presentation without needing to learn or even
see (and possibly corrupt) any Perl code or a new language (as is
required with most HTML templating solutions).
</li>
<li>It's quite difficult to accidently generate malformed XML using XSP:
a well-formed XSP usually generates well-formed output.
</li>
<li>The queries are decoupled from the source XML, so they can be
maintained without touching the XSP pages.
</li>
<li>The taglibs can be unit tested, unlike embedded code.
</li>
<li>Taglibs can be wrappers around existing modules, so the same Perl
code can be shared by both the web front end and any other scripts or
tools that need them.
</li>
<li>The plug-in nature of taglibs allows using many public and private
XSP taglibs facilities for rapid prototyping.  CPAN's <a href="http://search.cpan.org/search?mode=module&query=XSP%3A%3A">chock
full of 'em</a>.
</li>
<li>In addition to the "function" tags like the two demostrated above,
you can program "conditional" tags that control whether or not a block
of the XSP page is included; this gives you the ability to respond to
user preferences or rights, for instance.
</li>
</ul>

<p>The <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/DBI/DBI.html">DBI</a>
module lets you work with almost any database ranging from <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/DBD-CSV/DBD/CSV.html">comma
separated value</a> files (with SQL JOIN support no less) through MySQL,
PostgreSQL, Oracle, etc, etc., and returns Perl data structures just
crying out to be returned from a taglib function and turned in to XML.</p>

<p>For quick one-off pages and prototypes, the <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/AxKit-XSP-ESQL/ESQL.html">ESQL</a>
taglib allows you to embed SQL directly in XSP pages.  This is not
recommended practice because it's not efficient enough for heavily
trafficed sites (the database connection is rebuilt each time), and
because mixing programming code in with the XML leads to some pretty
unreadable and hard-to-maintain pages, but it is good for one-off pages
and prototypes.</p>


<a name="help"></a>
<h4>Help and thanks</h4>

<p>In case of trouble, have a look at some of the <a href="/pub/a/2002/03/12/axkit.html?page=3#help">helpful resources we
listed last time</a>.</p>

<p>Thanks to Kip Hampton, Jeremy Mates and Martin Oldfield, for their thorough
reviews, though I'm sure I managed to sneak some bugs by them.  AxKit and many
of the Perl modules it uses are primarily written by Matt Sergeant with
extensive contributions from these good folks and others, so many thanks to all
contributors as well.</p>

<p class="secondary">Copyright 2002, Robert Barrie Slaymaker, Jr. All Rights Reserved. 
</p>
                                    </div>


                                </div>
                                <div class="asset-footer">


                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
