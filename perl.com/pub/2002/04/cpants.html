<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.02" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
    
    <link rel="prev bookmark" href="/pub/2002/04/review.html" title="mod_perl Developer's Cookbook" />
    <link rel="next bookmark" href="/pub/2002/05/mod-perl.html" title="The Perl You Need To Know - Part 2" />
    
    
    <title>Becoming a CPAN Tester with CPANPLUS - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <div id="top_advert"> 
<!-- Put any landscape advert in here -->
<a href="http://www.perlfoundation.org/" target="_new">
<img src="/i/tpf_banner.png" width="468" height="60" /></a>
        </div> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description"></div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1294" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">Becoming a CPAN Tester with CPANPLUS</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Autrijus Tang</span> on <abbr class="published" title="2002-04-30T00:00:00-08:00">April 30, 2002 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        

<blockquote><i>
 &quot;This is a great war long-planned,<br/>
  and we are but one piece in it,<br/>
  whatever pride may say.<br/>
  ... And now, all realms shall be put to the test.&quot;<br/>
                -- Beregond, &lt;&lt;Lord of the Rings&gt;&gt;</i></blockquote>
<h3><a name="introduction">Introduction</a></h3>
<p>In <a href="/pub/a{cs.r.file}?page=2#f1"><em>CPANPLUS -- Like CPAN.pm only better?</em></a>, Jos Boumans recounted
the tale of how his <strong>CPANPLUS</strong> project came to be; one of the original
goals was to provide a modular backend to <em>CPANTS</em>, the CPAN Testing
Service, so modules can be automatically built and tested on multiple
platforms.</p>

<p>Although the initial <strong>CPANPLUS</strong> release did not support testing-related
features, Jos considered them important enough to be listed near the top
of his <em>Current and Future Developments</em> wish list, and quoted Michael
Schwern's opinion on their potential benefits<a href="/pub/a{cs.r.file}?page=2#f2"><sup>*</sup></a>:</p>
<blockquote><i>
 It would alter the way free software is distributed.
 It would get a mark of quality; it would be tested and
 reviewed.  And gosh darnit, it would be good.
 </i></blockquote>
<p>At that time, despite having participated in CPANPLUS's development for
more than four months, I was blissfully unaware of the project's
original vision.  But it seemed like a worthwhile goal to pursue, so I
quickly jotted down several pieces that need to work together:</p>
<ul>
<li>
Check test reports of modules before installation.
<p></p>
<li>
Report <code>make test</code> results to the author, and make them available
for other users to check.
<p></p>
<li>
Tools to batch-test modules with or without human intervention.
<p></p>
<li>
A clean API for other programs to perform tests, reporting and queries.
<p></p></ul>
<p>Today, with the 0.032 release of <strong>CPANPLUS</strong>, all the above pieces are
completed.  This article will show you how to configure and use these
tools, as well as describing some important new features in <strong>CPANPLUS</strong>
that made them possible.</p>
<h3><a name="setting up the environment">Setting Up the Environment</a></h3>
<p>First, you need a copy of <strong>CPANPLUS</strong> 0.032 or above.  I recommend the
tarball automatically built from the <em>distribution branch</em>, available
at <a href="http://egb.elixus.org/cpanplus-dist.tar.gz">http://egb.elixus.org/cpanplus-dist.tar.gz</a>; it should contain
the latest bug-fixes and features marked as <em>stable</em>.</p>
<p>Since Jos' article and README already contain install instructions,
I will not repeat the details.  However, please note that the
dependency detection logic in <em>Makefile.PL</em> has been changed since
Jos' previous article, which means when faced with this prompt:</p>
<pre>
 [CPAN Test reporting]
 - Mail::Send           ...failed! (needs 0.01)
 - File::Temp           ...loaded. (0.13 &gt;= 0.01)
 ==&gt; Do you wish to install the 1 optional module(s)? [n]</pre>
<p>You should generally answer <code>y</code> here, as only modules that can safely
install on your machine are displayed.  The default <code>n</code> does not mean
we don't recommend it; it merely means it isn't mandatory for the
bare-bone <strong>CPANPLUS</strong> to function.</p>
<p>For this article's purpose, you need to answer <code>y</code> to all such
questions, since we will be using <strong>LWP</strong>, <strong>Mail::Send</strong> and <strong>IPC::Run</strong>
extensively in testing-related functions.</p>
<p>After running <em>Makefile.PL</em>, you should run <code>make test</code><a href="/pub/a{cs.r.file}?page=2#f3"><sup>*</sup></a> like every
good user; if any dependent modules were selected in the previous step,
then you will have to run <code>make test</code> as root, so it can fetch and install
these modules automatically before testing itself.</p>
<p>After the comforting <code>All tests successful</code> message appears on your
screen, just do a <code>make install</code>, and we are ready to go.</p>

<h3><a name="why is testing important">Why Is Testing Important?</a></h3>

<p>... or not.  What if, instead of <code>All tests successful</code>, you see a
series of cryptic messages:</p>
<pre>
 % sudo make test
 /usr/bin/perl Makefile.PL --config=-target,skiptest
 --installdeps=Term::Size,0.01
 *** Installing dependencies...
 *** Installing Term::Size...
 Can't bless nonreference value at lib/CPANPLUS/Internals/Module.pm
 line 239.
 Compilation failed in require at Makefile.PL line 20.
 make: *** [installdeps] Error 255</pre>
 
<p>An experienced Perl user will probably take the following steps:</p>
<ul>
<li>
Look at <em>lib/CPANPLUS/Internals/Module.pm</em> and see whether it's a trivial
mistake.  Unfortunately, it is not.</li>

<li>
Search README for the project's mailing list address.  Discovering that
it's hosted in SourceForge, check Geocrawler (or any search engine) for
existing bug reports and discussions.  Unfortunately, there are none.</li>

<li>
Copy-and-paste the error message into a bug-reporting e-mail to the
mailing list, including your operating system name and version, Perl
version, and wait for a fix.
</li></ul>
<p>Apparently, the above is exactly what Juerd Waalboer (the bug's
original reporter) did when he ran into this trouble.  Thanks, Juerd!</p>
<p>However, there are a number of problems with the procedure above.
It might be thwarted at every step:</p>
<ul>
<li>
What if Juerd had been less experienced, and unaware of this
bug-reporting procedure?
<p></p>
<li>
What if he decided to kluge around it by commenting out line 239,
instead of taking the laborious copy-and-paste path to report it?
</li>
<li>
<strong>CPANPLUS</strong> has a mailing list; other modules might not.  Worse, they
may not even have a working contact address -- maybe the author is on
vacation.
</li>
<li>
He might not have the sense to provide adequate debug-related data,
and simply wrote <code>CPANPLUS didn't work! It can't install!#!@#@#!</code>
in red-colored blinking HTML email, wasting bandwidth and causing
developers to ignore his mail completely.
</li>
<li>
Even after a fix was made available, and posted as a patch on the
mailing list, other people about to install <strong>CPANPLUS</strong> 0.03 still
have no way to find out about it beforehand.  Thus, when the same
problem occurs again, they may forget to search in the archives,
resulting in duplicate bug reports, or (worse) more dissatisfied
users.
</li>
<li>
Actually, we had not mentioned the very likely scenario: What if
Juerd didn't run <code>make test</code> at all? If so, the developers will
have no way to know that this bug has ever happened.
</li>
<li>
Finally, while <strong>CPANPLUS</strong> (like most CPAN modules) includes a
regression test suite, some modules may omit their tests altogether.
Users may not feel comfortable to mail the author to request a test
script to accompany the distribution; consequently, bugs will surface
in harder-to-detect ways, and may never get fixed.
</li></ul>

<p>As you can see, both authors and users can certainly benefit a lot
from an improved test reporting system -- one that simplifies the
process of reporting a failed (or successful) installation, and allows
users to check for existing reports before downloading a module.</p>
<p>Such a system already exists; it's called <em>CPAN Testers</em>.</p>
<h3><a name="what is cpan testers">What Is <em>CPAN Testers</em>?</a></h3>
<p>When most people run <code>make test</code>, it's immediately followed by a
<code>make install</code>; that is, people only test modules that they are going
to use.  But they may not have the time or inclination to report the
outcome, for various reasons listed above.</p>
<p><em>CPAN Testers</em> (<a href="http://testers.cpan.org/">http://testers.cpan.org/</a>) is an effort to set up a
<em>Quality Assurance</em> (<em>QA</em>) team for CPAN modules.  As its homepage
states:</p>
<pre>
 The objective of the group is to test as many of the
 distributions on CPAN as possible, on as many platforms
 as possible.</pre>
<pre>
 The ultimate goal is to improve the portability of the
 distributions on CPAN, and provide good feedback to the
 authors.</pre>
<p>Central to its operation is a mailing list, <em><a href="mailto:cpan-testers@perl.org">cpan-testers@perl.org</a></em>,
and a small program, <em>cpantest</em>.  The program is a convenient way to
report a distribution's test result, which is sent to the mailing list
using an uniform format.  For example:</p>
<pre>
 # test passed, send a report automatically (no comments)
 cpantest -g pass -auto -p CPANPLUS-0.032
 # test failed, launch an editor to edit the report, and cc to kane
 cpantest -g fail -p CPANPLUS-0.032 kane@cpan.org</pre>
<p>The argument (<code>pass</code>/<code>fail</code>) after the <strong>-g</strong> option is called the
<em>grade</em> -- the overall result of a test run.  It may also be <code>na</code>
(not available), which means the module is not expected to work on this
platform at all (<strong>Win32::Process</strong> on FreeBSD, for example), and
<code>unknown</code> in the case that no tests are provided in the distribution.</p>
<p>All recent CPAN uploads, as well as all test results, are forwarded
to the <code>cpan-testers</code> mailing list's subscribers -- CPAN testers.
After a distribution's release on CPAN, one or more testers will
pick it up, test it, then feed the result back to the author and to
the list.  The testers don't have to know what the module is about;
all they do is to ensure it's working as advertised.</p>
<p>Test reports on the mailing list are automatically recorded in a
ever-growing database.  <a href="http://testers.cpan.org/search?request=search">http://testers.cpan.org/search</a>
is its search interface, where you can query by distribution name,
version, or the testing platform.</p>
<p>Theoretically, you can query that database before installing any CPAN
module, to see whether it works on your platform, and check for associated
bug reports.  The same information is also present at each module's
page in <a href="http://search.cpan.org/">http://search.cpan.org/</a>, and maybe <a href="http://rt.cpan.org/">http://rt.cpan.org/</a>
in the near future.</p>
<p>Alas, while this system certainly works, it is far from perfect.  Here
are some of its shortcomings:</p>
<ul>
<li>
The integration between Web site and mailing list hadn't extended to the
<em>CPAN.pm</em> shell, so checking for test results requires an additional
step to navigate the Web browser.
</li>
<li>
People who aren't subscribed to the <code>cpan-testers</code> list rarely submit
test reports, so coverage of platforms is limited to a few popular ones;
a heavily used module may still be tested in only two or three platforms,
hardly representing its entire user base.
</li>
<li>
There are no <em>smoking</em> (automatic cross-platform testing) mechanisms;
all testers must manually fetch, extract, test and submit their test
reports, including the same copy-and-paste toil we described earlier.
This entry barrier has seriously limited the number of active volunteer
testers.
</li></ul>
<p>Fortunately, <strong>CPANPLUS</strong> addressed most of these issues, and made it
significantly easier to participate in testing-related activities.
Let's walk through them in the following sections.</p>
<h3><a name="checking test reports">Checking test reports</a></h3>
<p>CPANPLUS offers a straightforward way to check existing reports.
Simply enter <code>cpanp -c ModuleName</code> in the command line:</p>
<pre>
 % cpanp -c CPANPLUS
 [/K/KA/KANE/CPANPLUS-0.032.tar.gz]
 PASS freebsd 4.5-release i386-freebsd</pre>
<p>As you can see, this reports the most recent version of <strong>CPANPLUS</strong>,
which passed its tests on FreeBSD as of this writing.</p>
<p>You can also specify a particular version of some distribution.  For
example, the version Juerd was having problems with is 0.03, so he
can do this:</p>
<pre>
 % cpanp -c CPANPLUS-0.03
 [/K/KA/KANE/CPANPLUS-0.03.tar.gz]
     FAIL freebsd 4.2-stable i386-freebsd (*)
     PASS freebsd 4.5-release i386-freebsd (*)
     PASS linux 2.2.14-5.0 i686-linux
 ==&gt; <a
 href="http://testers.cpan.org/search?request=dist&dist=CPANPLUS">http://testers.cpan.org/search?request=dist&dist=CPANPLUS</A></pre>
<p>As you can see, there are three reports, two of which contain
additional details (marked with <code>*</code>), available at the URL listed
above.  The failed one's says:</p>
<pre>
 This bug seems to be present in machines upgrading to 0.03
 from 0.01/0.02 releases.
 (It has since been fixed in the upcoming 0.031 release.)</pre>
<p>Which exactly addressed Juerd's original problem.</p>
<p>Another useful trick is using the <code>o</code> command in the CPANPLUS
Shell to list newer versions of installed modules on CPAN, and
check on them all with <code>c *</code>:</p>
<pre>
 % cpanp
 CPAN Terminal&gt; o
 1   0.14     0.15   DBD::SQLite        MSERGEANT
 2   2.1011   2.1014 DBD::mysql         JWIED</pre>
<pre>
 CPAN Terminal&gt; c *
 [/M/MS/MSERGEANT/DBD-SQLite-0.15.tar.gz]
     FAIL freebsd 4.5-release i386-freebsd (*)
     PASS linux 2.2.14-5.0 i686-linux
     PASS solaris 2.8 sun4-solaris
 ==&gt; <a href="http://testers.cpan.org/search?request=dist&dist=DBD-SQLite">http://testers.cpan.org/search?request=dist&dist=DBD-SQLite</a></pre>
<pre>
 [/J/JW/JWIED/DBD-mysql-2.1014.tar.gz]
     FAIL freebsd 4.5-release i386-freebsd (*)
     PASS freebsd 4.5-release i386-freebsd
 ==&gt; <a
 href="http://testers.cpan.org/search?request=dist&dist=DBD-mysql">http://testers.cpan.org/search?request=dist&dist=DBD-mysql</a></pre>
<p>This way, you can safely upgrade your modules, confident in the
knowledge that the newer version won't break the system.</p>













<h3><a name="reporting test results">Reporting Test Results</a></h3>
<p>Despite the handy utility of the <code>c</code> command, there will be no reports
if nobody submits them.  <strong>CPANPLUS</strong> allows you to send a report whenever
you've done a <code>make test</code> in the course of installing a module; to
enable this feature, please turn on the <code>cpantest</code> configuration
variable:</p>
<pre>
 CPAN Terminal&gt; s cpantest 1
 CPAN Terminal&gt; s save
 Your CPAN++ configuration info has been saved!</pre>
<p>Afterward, just use CPANPLUS as usual.  You will be prompted during an
installation, like below:</p>
<pre>
 CPAN Terminal&gt; i DBD::SQLite
 Installing: DBD::SQLite
 # ...
 t/30insertfetch....ok
 t/40bindparam......FAILED test 25
     Failed 1/28 tests, 96.43% okay
 t/40blobs..........dubious
     Test returned status 2 (wstat 512, 0x200)
     DIED.  FAILED tests 8-11
     Failed 4/11 tests, 63.64% okay
 Failed 2/19 test scripts, 89.47% okay.
 5/250 subtests failed, 98.00% okay.
 *** Error code 9
 Report DBD-SQLite-0.15's testing result (FAIL)? [y/N]: y</pre>
<p>It always defaults to <code>n</code>, so you won't send out bogus reports by
mistake.  If you enter <code>y</code>, then different actions will happen, depending
on the test's outcome:</p>
<ul>
<li>
For modules that passed their tests, a <code>pass</code> report is sent out
immediately to the <code>cpan-testers</code> list.
</li>
<li>
For modules that didn't define a test, an <code>unknown</code> report is sent to
the author and <code>cpan-testers</code>; the report will include a simple test
script, encourage the module author to include it in the next release,
and contain a URL of Michael Schwern's <strong>Test::Tutorial</strong> manpage.
</li>
<li>
If the module fails at any point (<code>perl Makefile.PL</code>, <code>make</code>, or
<code>make test</code>), then the default editor is launched to edit its <code>fail</code>
report, which includes the point of failure and the captured error
buffer.
<p>You are free to add any text below the <code>Additional comments</code> line;
to cancel a report, just delete everything and save an empty file.</p>
</li></ul>
<p>Before sending out a <code>fail</code> report, be sure to double-check if it is
really the module's problem.  For example, if there's no <em>libgtk</em>
on your system, then please don't send a report about failing to install
<strong>Gtk</strong>.</p>
<p>Also, be prepared to follow up with additional information when asked.
The author may ask you to apply some patches, or to try out an
experimental release; do help the author whenever you can.</p>
<p>
<h3><a name="batch testing and cpansmoke">Batch Testing and <em>cpansmoke</em></a></h3>
<p>While regular users can test modules as they install via the <code>cpantest</code>
option, and often provide important first-hand troubleshooting
information, we still need dedicated testers -- they can broaden the
coverage of available platforms, and may uncover problems previously
unforeseen by the author.  Dedicated testing and regular reports are
complementary to each other.</p>
<p>Historically, CPAN testers would watch for notices of recent <em>PAUSE</em>
uploads posted on the <code>cpan-testers</code> list, grab them, test them
manually, and run the <em>cpantest</em> script, as we've seen in
<a href="#what is i<cpan testers>">What is <em>CPAN Testers</em>?</a>.  That script is bundled with <strong>CPANPLUS</strong>;
please refer to its POD documentation for additional options.  
</p>
However, normally you won't be using it directly, as <b>CPANPLUS</b> offers
the <i>cpansmoke</i> wrapper, which consolidates the <i>download => test => copy buffer => run cpantest => file report</i> procedure into
a single command:
<pre>
 % cpansmoke Mail::Audit Mail::SpamAssassin          # by module
 % cpansmoke Mail-Audit-2.1 Mail-SpamAssassin-2.20   # by distname
 % cpansmoke /S/SI/SIMON/Mail-Audit-2.1.tar.gz       # or full name</pre>
<p>Due to the need of testing new distributions as they are uploaded,
<em>cpansmoke</em> will use <a href="http://www.cpan.org/">http://www.cpan.org/</a> as its primary host,
instead of the local mirror configured in your <strong>CPANPLUS</strong> settings.
This behavior may be overridden with the <strong>-l</strong> flag.</p>
<p>Since <em>cpansmoke</em> will stop right after <code>make test</code> rather than
installing any modules, it can test modules with different versions
than the ones installed on the system.  However, since it won't
resolve prerequisites by default, you'll need to specify the <strong>-p</strong>
flag to test and report them.</p>
<p>The <strong>-d</strong> flag will display previous results before testing each module;
similarly, <strong>-s</strong> will skip testing altogether if the module was already
tested on the same platform.  The latter should only be used with
automated test (to reduce spamming), since the same platform can have
different results.</p>
<p>There are numerous other flags available; please consult <em>cpansmoke</em>'s
manpage for further information.</p>
<h3><a name="automatic testing">Automatic Testing</a></h3>
<p>Besides interactive batch-testing, <em>cpansmoke</em> also provides the
capability of <em>unattended testing</em>; this concept is also covered by
Mozilla Project's <strong>Tinderbox</strong> toolkit, as explained in its homepage:</p>
<pre>
 There is a flock of dedicated build machines that do
 nothing but continually check out the source tree and
 build it, over and over again.</pre>
<p>Essentially, if you have a machine with plenty of hard disk space and
adequate bandwidth, you can set up <em>cpansmoke</em> so it tests each new module as it is uploaded.</p>
<p>The <strong>-a</strong> option lets <em>cpansmoke</em> enter the non-interactive mode.  In
this mode, only failures during <code>make test</code> are reported, because
errors that occured during <code>Makefile.PL</code> or <code>make</code> are more likely
the machine's problem, not the module's.</p>
<p>Additionally, you should specify the <em>-s</em> flag to avoid duplicate
reports, and <em>-p</em> to avoid false-negatives caused by unsatisfied
dependencies.</p>
<p>Setting up an auto-smoking machine is simple, using a mail
filtering mechanism; just join the CPAN Testers list by sending an
empty email to <em><a href="mailto:cpan-testers-subscribe@perl.org">cpan-testers-subscribe@perl.org</a></em>, and add the lines
below to your <A HREF="/pub/a{cs.r.file}?page=2#f4"><strong>Mail::Audit</strong>
filter</A>:</p>
<pre>
 fork || exec(&quot;sleep 40000 &amp;&amp; cpansmoke -aps $1 &gt;/dev/null 2&gt;&amp;1&quot;)
     if $mail-&gt;subject =~ /^CPAN Upload: (.*)$/;</pre>
<p>This rule will fork out a new <em>cpansmoke</em> process for each incoming
mail about a CPAN upload.  Note that it works only if incoming mail
arrives no less than once every hour; otherwise it might fork-bomb your
system to a grinding halt.</p>
<p>In case you're wondering, the <code>sleep 40000</code> line is due to the fact
that a PAUSE upload needs several hours to appear on <em>www.cpan.org</em>.
Michael Schwern suggested that using a <em>smoke queue</em> would be a better
solution, since it allows error-checking and logging; implementations
are welcome.</p>
<p>If you are stuck with <strong>procmail</strong>, then here's the recipe that does the same
(but do consider upgrading to <strong>Mail::Audit</strong>):</p>
<pre>
 :0hc
 * ^Subject: CPAN Upload:
 |sh -c &quot;sleep 40000 &amp;&amp; grep Subject|cut -f4 -d' '|xargs cpansmoke -aps &gt;/dev/null 2&gt;&amp;1&quot;</pre>
<p>If you have suggestions on how to make this work on non-unix systems,
please do let me know.</p>

<h3><a name="testingrelated apis">Testing-Related APIs</a></h3>
<p>A programmable interface is the primary strength of <strong>CPANPLUS</strong>.  All
features listed above are available as separate methods of the
<strong>CPANPLUS::Backend</strong> object.  Since the module's manpage already
contains detailed information, I'll just list some sample snippets
below.</p>
<p>To show all reports of <strong>Acme::*</strong> on FreeBSD:</p>
<pre>
 use CPANPLUS::Backend;
 my $cp = CPANPLUS::Backend-&gt;new;
 my $reports = $cp-&gt;reports( modules =&gt; [ map $_-&gt;{package}, values(
     %{ $cp-&gt;search(type =&gt; 'module', list =&gt; ['^Acme::\b']) }
 ) ] );</pre>
<pre>
 while ( my ($name, $href) = each (%$reports) ) {
     next unless $href;
     my @entries = grep { $_-&gt;{platform} =~ /\bfreebsd\b/ } @$href;
     next unless @entries;</pre>
<pre>
     print &quot;[$name]\n&quot;;
     for my $rv (@entries) {
         printf &quot;%8s %s%s\n&quot;, @{$rv}{'grade', 'platform'},
                              ($rv-&gt;{detail} ? ' (*)' : '');
     }
 }</pre>
<p>To test all <strong>Acme::*</strong> modules, but install all needed prerequisites:</p>
<pre>
 use CPANPLUS::Backend;
 my $cp = CPANPLUS::Backend-&gt;new;
 $cp-&gt;configure_object-&gt;set_conf( cpantest =&gt; 1 );
 $cp-&gt;install(
     modules =&gt; [ map $_-&gt;{package}, values(
         %{ $cp-&gt;search(type =&gt; 'module', list =&gt; ['^Acme::\b']) }
     ) ], 
     target        =&gt; 'test',
     prereq_target =&gt; 'install',
 );</pre>
<p>If you need to fine-tune various aspects during testing (timeout,
prerequisite handling, etc.), then please consult the source code of
<em>cpansmoke</em>; most tricks involved are documented in comments.</p>
<p>Unfortunately, the process of editing and sending out reports
remains as the only non-programmable part, since the <em>cpantest</em>
script doesn't exist as a module.  Although Skud has a
<strong>CPAN::Test::Reporter</strong> on CPAN, its format is sadly out-of-sync
with <em>cpantest</em>, and may generate invalid reports (as of version
<code>0.02</code>).  Any offers to back-port the <em>cpantest</em> script into
that module would be greatly appreciated.</p>

<h3><a name="conclusion">Conclusion</a></h3>
<p>As <a href="#f5"><em>purl</em></a> said, ``CPAN is a cultural mechanism.'' It is not an
abstraction filled with code, but rather depends on people caring enough
to share code, as well as sharing useful feedback in order to improve
each other's code.</p>
<p>With the advent of <a href="#f6">bug-tracking service</a> and automatic testing,
the social collaboration aspect of CPAN is greatly extended, and could
be developed further into a full-featured Tinderbox system, or linked
with each module's source-control repositories.</p>
<p>Also, since <strong>CPANPLUS</strong> is designed to accommodate different package
formats and distribution systems, it provides a solid foundation for
projects like <strong>Module::Build</strong> (<code>make</code>-less installs), <strong>NAPC</strong>
(distributed CPAN) and <strong>ExtUtils::AutoInstall</strong> (feature-based
dependency probing)... the possibilities are staggering, and you
certainly won't be disappointed in finding an interesting project to
work on.  Happy hacking!</p>

<h3><a name="acknowledgements">Acknowledgements</a></h3>
<p>Although I have done some modest work in integrating <strong>CPANPLUS</strong> with
CPAN testing, the work is really built on contributions from several
brilliant individuals:</p>
<p>First, I'd like to dedicate this article to Elaine -HFB- Ashton, for
her tireless efforts on Perl advocacy, and for sponsoring my works as
described in this article.</p>
<p>Thanks also goes to Graham Barr and Chris Nandor, for establishing the
CPAN Testers at the first place, and coming up with two other important
cultural mechanisms: <em>CPAN Search</em> and <em>Use Perl;</em> respectively.</p>
<p>To Jos Boumans, Joshua Boschert, Ann Barcomb and everybody in
the <strong>CPANPLUS</strong> team -- you guys rock!  Special thanks for another
team member, Michael Schwern, for reminding everybody constantly
that <em>Kwalitee Is Job One</em>.</p>
<p>To Paul Schinder, the greatest tester of all time, who submitted
10551 reports by hand out of 23203 to date, and kept CPAN Testers alive
for a long time.  And thanks for every fellow CPAN Tester who have
committed their valuable time -- I hope <em>cpansmoke</em> can shoulder your
burden a little bit.</p>
<p>To Simon Cozens, for his swiss-nuke <strong>Mail::Audit</strong> module, and for
keep asking me to write 'something neat' for <em>perl.com</em>. :-)</p>
<p>To Jarkko Hietaniemi, for establishing <strong>CPAN</strong>; and to Andreas J.
Koenig, for maintaining <strong>PAUSE</strong> and showing us what is possible
with <strong>CPAN.pm</strong>.</p>
<p>Finally, if you decide to follow the steps in this article and
participate in the testing process, then you have my utmost gratitude;
let's make the world a better place.</p>

<h3><a name="footnotes">Footnotes</a></h3>
<ol>
<li><a name="f1">
It's an introductory text for the <strong>CPANPLUS</strong> project, available at
<a href="/pub/a/2002/03/26/cpanplus.html">http://www.perl.com/pub/a/2002/03/26/cpanplus.html</a>.
</li>
<li><a name="f2">
Jos later confessed that these are not exactly Schwern's words; he just
made the quote up for dramatic effect.
</li>
<li><a name="f3">
With ActivePerl on Windows, simply replace all <code>make</code> with <code>nmake</code>.
If you don't have <em>nmake.exe</em> in your <code>%PATH</code>, our <em>Makefile.PL</em> is
 smart enough to fetch and install it for you.
</li>
<li><a name="f5">
Purl, the magnet #perl infobot, is also a cultural mechanism herself;
see <a href="http://www.infobot.org/">http://www.infobot.org/</a> for additional information.
</li>
<li><a name="f6">
That's Jesse Vincent's <a href="http://rt.cpan.org/">http://rt.cpan.org/</a>, which tracks bugs in
every distribution released through CPAN.
</li></ol>

                                    </div>


                                </div>
                                <div class="asset-footer">

    
                                    <div class="entry-categories">
                                        <h4>Categories<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="/pub/cpan/" rel="tag">CPAN</a></li>
                                        </ul>
                                    </div>
    


                                    <div class="entry-tags">
                                        <h4>Tags<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?blog_id=2&amp;tag=CPANPLUS%20testing%20CPANTS%20CPAN&amp;limit=20';return false;" rel="tag">CPANPLUS testing CPANTS CPAN</a></li>
                                        </ul>
                                    </div>

                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2010/07/">July 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.02" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
