<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/2002/07/10/tmo.html">
<dc:title>A Test::MockObject Illustrated Example</dc:title>
<dc:description>Perl&apos;s Test::MockObject CPAN module helps you test troublesome interfaces. Learn how it works!</dc:description>
<dc:creator>chromatic</dc:creator>
<dc:date>2002-07-10T00:00:00-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    
    <link rel="prev bookmark" href="/pub/2002/07/p6pdigest/20020702.html" title="This week on Perl 6 ~(24-30 June 2002)" />
    <link rel="next bookmark" href="/pub/2002/07/p6pdigest/20020714.html" title="This Week on Perl 6 (8 - 14 Jul 2002)" />
    
    
    <title>A Test::MockObject Illustrated Example - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1322" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">A Test::MockObject Illustrated Example</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author"><a class="fn url" href="http://www.modernperlbooks.com/">chromatic</a></span> on <abbr class="published" title="2002-07-10T00:00:00-08:00">July 10, 2002 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->

<p>People like to find excuses to avoid writing tests for their code. One
of the most common goes something like, "It's not feasible to test this,
because it relies on external objects" - CGI code, code using the
<code>Apache</code> request object, TCP/IP servers, and so on.</p>
<p>The <code>Test::MockObject</code> module makes it much easier to isolate code that
uses such objects.  For example, if your code uses a CGI object, then you
<strong>could</strong> fiddle with query strings and faked <code>STDIN</code>, trying to
persuade <code>CGI.pm</code> to produce testable values.  It's easier to use
<code>Test::MockObject</code> to create an object that looks and behaves like
a CGI object -- but that is completely under your control.</p>
<p>This comes in handy in large software projects, where objects encapsulate
tremendous amounts of hidden behavior.  If your application follows good design
principles by hiding complexity behind well-defined interfaces, then you can replace
nearly any component with its interface equivalent.  (The internals, of course,
are free to change.  That's why this is possible.) Often, it's sufficient just
to accept certain arguments and to return specific values.</p>
<p>Using a mock object, you can test whether the code in question uses a particular
interface correctly.  It's possible to do this by hand, but <code>Test::MockObject</code>
has several utility methods to add fake methods and verify calls.  It
integrates with <code>Test::Builder</code>, so it works correctly with <code>Test::Simple</code>,
<code>Test::More</code>, and their cousins.</p>



<h2><a name="the_background_you_need_to_know">The Background You Need to Know</a></h2>
<p>I assume that you are already familiar with <code>Test::More</code>.  Perhaps you've read
<code>Test::Tutorial</code>, which comes with the <code>Test::Simple</code> distribution.  You may also
have read <a HREF="/pub/a/2001/12/04/testing.html">my earlier introduction</a> to the subject.
If not, then you may wish to do so.  (My roommate tried it out of order and hurt his
head.  If you fare any better, then the Perl QA group is interested in your natural
talent!)</p>
<p>My example comes from the unit tests for the <a href="http://everydevel.com/">Everything Engine</a>.  
I chose it for two reasons.  First, it's a
project near and dear to my heart. Second, it needs more users, testers and
developers.  More importantly, it's where I came up with the ideas that led to
<code>Test::MockObject</code>.</p>
<p>My colleague on the Engine, Darrick Brown, devised a clever technique he dubbed
Form Objects.  These are used to bind menu choices to nodes.  (Everything in
Everything is a node.  It's the base unit of data and behavior.)  Form objects
control the creation of HTML widgets, verify submitted data and ultimately
update nodes.  They all inherit strongly from <code>Everything::FormObject</code> and
operate on node objects, so they're an ideal candidate for mock objects.</p>
<p>
</p>
<h3><a name="mock_objects">Mock Objects</a></h3>
<p>This article focuses on white-box unit testing with mock objects.  "White box"
testing means that you're allowed and encouraged to look at the internals of
the thing being tested.  This is scarily possible, with Perl.  By contrast,
"black box" testing happens when you cannot know the internal details: you just
know allowed inputs and the expected outputs.  (If you don't know that, then you
can't do much testing.)</p>
<p>Unit testing, of course, is testing individual components of the program in
isolation, as far as possible.  This is different from integration testing,
which exercises the program as a whole, and acceptance testing, which explores
the desired end-user behavior of the program.  No type of testing is better or
worse than any other.  Done properly, they are complementary: Unit tests are
capable of exploring internal behaviors that are difficult to prove with
acceptance tests;  integration tests demonstrate the interoperability between
different components that unit tests usually cannot guarantee.</p>
<p>The points of a mock object is to isolate the units being tested from their
dependencies, and to give testers more complete control over the testing
environments.  This follows from standard programming principles: If you can
fake the interfaces your unit relies on, then you can control and monitor its
behavior.</p>
<p>Perl makes this particularly easy.</p>














<h1><a name="the_example">The Example</a></h1>
<p>I'm writing a test for <code>Everything::HTML::FormObject::AuthorMenu</code>.  This class
represents an HTML select box used to set the author of a node.  It has two
methods.  <code>genObject()</code> produces the HTML necessary for the select widget.  It
is called when the Engine builds a page to display to the user.  The other
method, <code>cgiVerify()</code>, is called when receiving data from a user submission.
It checks to see whether the requested author exists and has write access to the
node.</p>
<p>
</p>
<h2><a name="looking_inside">Looking Inside</a></h2>
<p>The module begins rather simply:</p>
<pre><code>
        use strict;
        use Everything;
        use Everything::HTML;
        use Everything::HTML::FormObject;

        use vars qw(@ISA);
        @ISA = (&quot;Everything::HTML::FormObject&quot;);</code></pre>
        
<p>Testing this is all very easy.  I'd like to make sure that the module continues
to load all of these modules, so I need some way to catch their use.  (Don't
laugh -- I've forgotten to load important modules before, causing really tricky
errors.  It's better to be precise.  Now you can laugh.)  Because <code>use</code> calls
<code>import()</code> behind the scenes, if I can install my own <code>import()</code> before AuthorMenu
is compiled, then I can test that these modules are actually used.  As a side
benefit, doing so prevents these other classes from loading, making it easier
to mock them.  The test starts:</p>
<pre><code>
        package Everything::HTML::FormObject::AuthorMenu;
        use vars qw( $DB );

        package main;

        use Test::More 'no_plan';</code></pre>

<p>Because I'm faking the other packages, anything the true modules would normally
import will not be imported.  The only thing that really matters at this point
is the <code>$DB</code> object, exported from the Everything package.  (I'm cheating a
little bit.  I know I'll use it later, and I know where it's defined and how
it's used.  At this point, I should probably say, ``The module will fail to
compile unless I fake it here,'' and leave it at that.)</p>
<p>Because I'm not ready to implement <code>$DB</code>, I just switch to the package to be
tested and declare it as a global variable.  When the package is compiled, it's
already there, so it'll compile successfully.  Then I return to the main
package so I don't accidentally clobber anything important and use the testing
module.</p>
<pre><code>
        my @imports;
        for ( 'Everything', 'Everything::HTML',
                'Everything::HTML::FormObject') {
                no strict 'refs';
                *{ $_ . '::import' } = sub {
                        push @imports, $_[0];
                };
                (my $modpath = $_) =~ s!::!/!g;
                $INC{ $modpath . '.pm' } = 1;
        }</code></pre>
        
<p>Here's where it starts to get tricky.  Because I want to ensure that these
three modules are loaded correctly, I have to make Perl think they're already
loaded.  <code>%INC</code> comes to the rescue.  When you <code>use()</code> or <code>require()</code> a
module successfully, Perl adds an entry to <code>%INC</code> with the module pathname,
relative to one of the directories in <code>@INC</code>.  That way, if you <code>use()</code> or
<code>require()</code> the module again, then Perl knows that it's already been loaded.</p>
<p>As mentioned before, my preferred way to check that a module is loaded is to
trap all calls to <code>import()</code>.  That's why I install fake import subroutines.
They simply save the name of the package by which they're identified.  The
tests are simple to write:</p>
<pre><code>
        use_ok( 'Everything::HTML::FormObject::AuthorMenu' );
        
        is( $imports[0], 'Everything', 'Module should use 
        	Everything' );
        is( $imports[1], 'Everything::HTML',
                'Module should use Everything::HTML' );
        is( $imports[2], 'Everything::HTML::FormObject',
                'Module should use 
                     Everything::HTML::FormObject' );
</code></pre>
                
<p>Because <code>use_ok()</code> fires at runtime, it's safe not to wrap this whole section
in a BEGIN block.  (If you're curious about this, see what <em>perlfunc</em> has to
say about <code>use()</code> and its equivalent.)</p>
<p>That works, but it's a little messy and uses some tricks that might scare (or
at least confuse) the average Perl hacker.  One of the goals of the Test::*
modules is to do away with the ``evil black magic'' you'd normally have to use.
So, now I show you a more excellent way.</p>
<p>
</p>
<h2><a name="making_that_last_bit_easier">Making That Last Bit Easier</a></h2>
<p>Having found myself writing that code way too often (at least twice), I added
it to <code>Test::MockObject</code>.  Using the module, the corresponding loop is now:</p>
<pre><code>
        my @imports;
        for ( 'Everything', 'Everything::HTML',
                'Everything::HTML::FormObject') {
                Test::MockObject-&gt;fake_module(
                        $_,
                        import =&gt; sub { push @imports,
                              $_[0] }
                );
        }
</code></pre>

<p>Behind the scenes, the module does exactly what the loop did.  The nice thing
is that you don't have to remember how to fake that a module is loaded or how
to test <code>import()</code>.  It's already done and it's nicely encapsulated in a
module.  (I inadvertently drove this point home to myself when writing this
section.  It turns out that version 0.04 of <code>Test::MockObject</code> populated <code>%ENV</code>
instead of <code>%INC</code>.  I make that typo often.  This time, it was in both the
module and the test.  Get at least version 0.08, as this article has led to
bug fixes and new conveniences. :)</p>
<p>This isn't the most important feature of <code>Test::MockObject</code>, though.  It's just a
convenient addition.  At some point, it should probably be spun off into
<code>Test::MockPackage</code> or <code>Test::MockModule</code>.  (Want to contribute?)</p>














<h2><a name="testing_an_actual_method">Testing an Actual Method</a></h2>
<p>Once the module is loaded and ready, I like to test my methods in the
order in which they appear.  This helps to keep the test suite and the module
somewhat synchronized.  The first method is <code>genObject()</code>.  It's fairly simple:</p>
<pre><code>
        my $this = shift @_;
        my ($query, $bindNode, $field, $name, $default) =
                getParamArray(
                &quot;query, bindNode, field, name, 
                     default&quot;, @_);
        
        $name ||= $field;
        
        my $html = $this-&gt;SUPER::genObject(
                $query, $bindNode, $field, $name) . 
                     &quot;\n&quot;;
        
        if(ref $bindNode)
        {
                my $author = $DB-&gt;getNode($$bindNode{$field});
                if($author &amp;&amp; $author-&gt;isOfType('user'))
                {
                        $default ||= $$author&#123;title&#125;;
                }
                elsif($author)
                {
                        $default ||= &quot;&quot;;
                }
        }

        $html .= $query-&gt;textfield(-name =&gt; $name, 
        	    -default =&gt; $default,
                -size =&gt; 15, -maxlength =&gt; 255,
                -override =&gt; 1) . &quot;\n&quot;;
                
        return $html;
</code></pre>

<p>I can see several spots that need tests.  First, I want to make sure that
<code>getParamArray()</code> is called with the proper arguments.  (This function makes
it possible to pass parameters by position or in <code>name =&gt; value</code> pair
style, similar to
<a href="http://search.cpan.org/search?dist=Sub-NamedParams">Sub::NamedParams</a>.)  Next,
I'll test that <code>SUPER::genObject()</code> is called correctly, with the proper
values.  (This call looks odder than it is, due to the way the Engine handles
node inheritance.  For a good time, read <code>Everything::Node::AUTOLOAD()</code>, or
take up bowling.)  After that, there's the conditional statement.  I'll have to
call the function at least three times to test the branches effectively.  The
function ends with a <code>textfield()</code> call I want to test, and has a return value
where I can check some other things.  It's not as complex as it looks.</p>
<p>One of the side benefits of testing is that you'll start to write smaller and
smaller functions.  This is especially evident if you write tests before you
write code to pass them.  Besides being easier to read and debug, this tends
to produce code that's more flexible and much more powerful.</p>
<p>Having identified several things to test, I next write test names.  These are
short descriptions of the intent of the tests.  When confronted with a piece of
existing code, I usually try to figure out what kinds of things can break, and
what the important behavior really is.  With experience, you can look at a
piece of well-written code and figure it out intuitively.  There's room to be
explicit when you're just starting, though.</p>
<pre><code>
        # genObject() should call getParamArray()
        # ... passing a string of desired parameters
        # ... and its arguments, minus the object
        # ... should call SUPER::genObject()
        # ... passing the important parameters
        # ... and should call textfield()
        # ... with the important parameters
        # ... returning its and its parents results
        # ... if node is bound, should call getNode()
        # ... on bound node field
        # ... checking for an author node
        # ... and setting the default to the author name
        # ... or nothing, if it is not an author node</code></pre>

<p>That's a pretty good rough draft.  Going through the list reveals the need to
make at least two more passes through the code.  Getting this in the right
order takes a little work, but once you know how to set up the mocking
conditions correctly, it's really fast and easy.  The best way I've found to
handle this is just to jump right in.</p>

<pre><code>
        can_ok( 'Everything::HTML::FormObject::AuthorMenu', 
        	'genObject' );</code></pre>

<p>First, I want to make sure this method exists.  Why?  It's part of the ``Do the
simplest thing that could possibly work'' principle.  Whenever I add a method, I
first check to see whether it exists.  It sounds too stupid to have any use, but
this is a thing that <strong>could</strong> possibly break.  First, I've been known to
misspell method names occasionally.  This'll catch that immediately.  Second,
it gives me a place to start and a test that passes with little work.
That's a nice psychological boost that moves me on to the next test.  I've kept
this habit when writing tests for existing code.</p>
<p>Next, I want to test the call to <code>getParamArray()</code>.  Since it's not a method, I
can't use a mock object.  I'll have to mock it sideways.  Though the function
comes from <code>Everything.pm</code>, it would normally be exported into this package.
I'll use a variant of the <code>import()</code>-mockery earlier:</p>

<pre><code>
        my ($gpa, @gpa);
        $mock-&gt;fake_module( $package,
            getParamArray =&gt; sub { push @gpa, \@_; return $gpa }
        );
</code></pre>

<p>I can count the elements of <code>@gpa</code> to see whether it was called, and pull the
arguments out of the array.  <code>$gpa</code> allows me to control the output.  The test
itself is easy to write:</p>

<pre><code>
        my $result = genObject();
        is( @gpa, 1, 'genObject() should call getParamArray' );
</code></pre>

<p>OK, it's a little easier to write than it should have been.  If you're paying
attention, then you should wonder why the <code>genObject()</code> call works, as I'm still in
the main package and the method is in the class.  I've just added a variable
with the tested package name, as well as an <code>AUTOLOAD()</code> function. I'm already
tired of typing the big long package name:</p>

<pre><code>
        # near the start
        use vars qw( $AUTOLOAD );
        my $package = 'Everything::HTML::FormObject::AuthorMenu';
        
        ...
        
        # way down at the end
        sub AUTOLOAD {
                my ($subname) = $AUTOLOAD =~ /([^:]+)$/;
                if (my $sub = UNIVERSAL::can( $package,
                     $subname )) {
                        $sub-&gt;( @_ );
                } else {
                        warn &quot;Cannot call &lt;$subname&gt; 
                             in ($package)\n&quot;;
                }
        }</code></pre>

<p>With all of that infrastructure in place, it's a little disappointing to
realize that the test dies.  Since I'm calling the method as a function,
there's no object on which to call <code>SUPER::genObject()</code>.  This is easily
solved.  Remember that $mock (a mock object) was created earlier?  Here's one
bit of Perl's magic that drives some OO purists crazy, but makes it oh-so-easy
to test.  <em>A method call is a function call with a special first argument.</em> If
<code>$this</code>, inside <code>genObject()</code>, can do everything that an
<code>Everything::HTML::FormObject::AuthorMenu</code> object can do, then it'll just work.
Hooray for polymorphism!</p>














<p>To make the <code>SUPER::genObject()</code> call pass, that call will also have to be
mocked.  The method resolves to <code>Everything::HTML::FormObject::genObject()</code>,
so I'll add a function of the appropriate name and package.  (This test code is
starting to look familiar.  Again, <code>Test::MockModule</code>, anyone?)</p>
<pre><code>
        my @go;
        $mock-&gt;fake_module( 'Everything::HTML::FormObject',
            genObject =&gt; sub { push @go, \@_; 
                 return 'some html' }
        );</code></pre>
<p>Now I modify the <code>genObject()</code> call, passing in my mock object:</p>
<pre><code>
        my $result = genObject( $mock );</code></pre>
<p>I get further before things fail.  Since there's nothing passed in for the
<code>$query</code> variable to hold, the <code>textfield()</code> call fails.  Now I can finally
use my mock object to good effect.  First, I'm going to change what
<code>getParamArray()</code> returns, using <code>$package</code> again to save on typing:</p>
<pre><code>
        my (%gpa, @gpa);
        $mock-&gt;fake_module( $package,
            getParamArray =&gt; sub { push @gpa, \@_; return 
            @gpa{qw( q bn f n d )}}
        );</code></pre>
<p>Since AuthorMenu expects to receive its arguments in order, I'll create a hash
where I can store them.  I might use more descriptive key names, but they seem
to make sense now.  Next, I'll make sure that 'q' returns something
controllable.  In this case, that means that it supports the <code>textfield()</code>
method and returns something sane:</p>
<pre><code>
        $mock-&gt;set_always( 'textfield', 'more html' );
        $gpa{q} = $mock;</code></pre>
<p>I could create a new mock object for this, but since there's no name collision
yet, it's not a big priority.  Whether you do this is a matter of
personal style.</p>
<p>For now, <code>genObject()</code> does not die, and all tests pass.  Whew.  Next up, I
test to see whether the first argument to <code>getParamArray()</code> is correct.</p>
<pre><code>
        is( $gpa[0][0], 'query, bindNode, field, name, default',
            '... requesting the appropriate arguments' );</code></pre>
<p>It is, so I'll make sure that it passes along the rest of the method arguments,
minus the object itself:</p>

<pre><code>
        like( join(' ', @{ $gpa[0] }), qr/1 2 3$/,
                '... with the method arguments' );
        unlike( join(' ', @{ $gpa[0] }), qr/$mock/,
                '... but not the object itself' );</code></pre>

<p>Only the first of these fails, and that's because I'm not passing any other
arguments to the method call.  I'll modify it:</p>
<pre><code>
        my $result = genObject( $mock, 1, 2, 3 );</code></pre>
        
<p>This gives me nine tests that pass.  I'm also following the test names fairly
closely.  (In between writing those and actually writing this code, a couple of
days passed.  Their similarities make me think I'm on the right track.)</p>
<p>Since the next piece of the code tries to load a bound node and I'm not passing
one in, I'll test to see that <code>getNode()</code> is <strong>not</strong> called.  Since the call is
on the <code>$DB</code> object, I'll set it to the mock object.  I'll also use the
<code>called()</code> method to make sure that nothing happens.  For that to happen, I
need to mock <code>getNode()</code>.  The code to implement all of this is pretty simple.
(Note that it must go in various places):</p>
<pre><code>
        $Everything::HTML::FormObject::AuthorMenu::DB = $mock;
        $mock-&gt;set_series( 'getNode', 0, 1, 2 );</code></pre>
<pre><code>
        # genObject() calls skipped in this example...</code></pre>
<pre><code>
        ok( ! $mock-&gt;called( 'getNode' ),
                '... should not fetch bound node without one' );</code></pre>
<p>Two things bear more explanation.  First, since I don't really know what I want
<code>getNode()</code> to return, I'll give it a dummy series.  (I'm pretty sure I'll be
using <code>set_series()</code> on it, because I've done tests like this before.  I can't
explain it much beyond intuitive experience.)  Second, I'm negating the return
value of <code>called()</code> so it will fit with <code>ok()</code>.  This can be a little hard to
see, sometimes.</p>
<p>The last few tests of the first pass all revolve around the <code>textfield()</code> call.
I've already mocked it, so now I'll see whether it was called with the correct
arguments:</p>
<pre><code>
        my ($method, $args) = $mock-&gt;next_call();
        shift @$args;
        my %args = @$args;</code></pre>
<pre><code>
        is( $method, 'textfield', '... and should create 
             a text field' );
        is( join(' ', sort keys %args ),
        join(' ', sort qw( -name -default -size 
             -maxlength -override )), '... passing the 
             essential arguments' );</code></pre>
             
<p>Several bits here stick out.  The <code>next_call()</code> method iterates through
the call stack of mocked methods, in order.  It doesn't track every method
called, just the ones you've added through one of <code>Test::MockObject</code>'s helper
methods.  <code>next_call()</code> returns the name of the method (in scalar context) or
the name of the method an an anonymous array containing the arguments (in list
context).</p>
<p>Since I want to check the arguments passed to <code>textfield()</code>, I call it in list
context.  Because the arguments are passed as key =&gt; value pairs, the most
natural comparison seems to be as a hash.  I use the join-sort idiom quite
often, as I've never quite been comfortable with the list comparison functions
of <code>Test::More</code>.  This test would probably be much simpler if I used them.</p>
<p>I explicitly sort both arrays just so a hardcoded list order won't cause
unnecessary test failures.  (This has bitten me when writing code that ought to
work on EBCDIC machines, not just ASCII ones.  Of course, if you get Everything
up and going on a mainframe, then this is probably the least of your concerns.)</p>
<p>Finally, I test to see whether the returned data is created properly:</p>
<pre><code>
        is( $result, &quot;some html\nmore html\n&quot;,
            '... returning the parent object plus the 
             new textfield html' );</code></pre>
<p>So far, all 13 of the tests succeed.  At this point, I started my second
pass through the method, but noticed that I hadn't yet tested that <code>$name</code>
would get its default value from <code>$field</code>.  I'll add 'field' to %gpa before
the first pass:</p>
<pre><code>
        $gpa{f} = 'field';</code></pre>
<p>This test ought to go before the final test in this pass, so I add it there,
too.  This finishes the first pass:</p>
<pre><code>
        is( $args{-name}, 'field',
                '... and widget name should default 
                to field name' );
</code></pre>















<p>For the second pass, I will test what happens when I provide a node to which to
bind the form object.  In an unmocked Everything, this node comes as an
argument to the function.  In the tests, I <strong>must</strong> return them from the mocked
getParamArray(), so that's where I will start.  I also set the 'field' value
in the mock object to a sentinel value I'll check for later.  Since the value
of <code>$field</code> will be 'field,' it works out nicely.  (There's room to be much
more creative on these names, especially if you're trying to sneak the name of
a friend into your software.)</p>
<pre><code>
        $gpa{bn} = $mock;
        $mock-&gt;{field} = 'bound node';</code></pre>
<p>Because <code>getNode()</code> has a series set on it and hasn't been called before, it
will return 0.  That means that <code>isOfType()</code> won't be called on the author
object, and the default choice won't be modified from its undefined value.
These tests are fairly easy:</p>
<pre><code>
        genObject( $mock );
        
        ($method, $args) = $mock-&gt;next_call();
        isnt( $method, 'isOfType',
        '... not checking bound node type if it is not found' );
        
        shift @$args;
        %args = @$args;
        is( $args{-default}, undef, '... and not modifying 
             default selection' );
            
</code></pre>

<p>As before, <code>next_call()</code> comes in handy.  Since I already know that
<code>textarea()</code> will be the first (and last, for this pass) method called, I can
make sure that <code>isOfType()</code> was <strong>not</strong> called.</p>
<p>Two tests follow.  One ensures that the code checks the node's type.  The other
makes sure that the default value becomes a blank string if the type is
incorrect.  To make this work, I had to modify the existing <code>getNode()</code> series
to return two instances of <code>$mock</code>.</p>
<pre><code>
        $mock-&gt;&#123;title&#125; = 'bound title';
        $mock-&gt;set_series( 'isOfType', 0, 1 );
        
        genObject( $mock );
        
        ($method, $args) = $mock-&gt;next_call( 2 );
        is( $method, 'isOfType', '... if bound node 
            is found, should check type' );
        is( $args-&gt;[1], 'user', '... (the user type)' );
        
        ($method, $args) = $mock-&gt;next_call();
        shift @$args;
        %args = @$args;
        is( $args{-default}, '',
            '... setting default to blank string 
                 if it is not a user' );</code></pre>

<p>The only new idea here is of passing an argument to <code>next_call()</code>.  I know
<code>getNode()</code> is the first mocked method, so I can safely skip it.  These tests
all pass.  The final testable condition is where the bound node exists and
is a 'user' type node.  The <code>set_series()</code> call in the last test block makes
<code>isOfType()</code> return true for this pass:</p>
<pre><code>
        genObject( $mock );
        ($method, $args) = $mock-&gt;next_call( 3 );
        shift @$args;
        %args = @$args;
        is( $args{-default}, 'bound title', '... but using 
             node title if it is' );</code></pre>
<p>I now have 22 successful tests.  My original test name plan had 14 tests, but
that number generally grows as I see more logic branches.  I could add more
tests, making sure that default values are not overwritten, and that the
essential (hardcoded) attributes of the <code>textfield()</code> are set, but I'm
reasonably confident in the tests as they stand.  If something breaks, then I'll add
a test to catch the bug before I fix it, but what's left is simple enough; I
doubt it will break.  (Writing that is a good way to have to eat my words
later.)</p>
<p>
</p>
<h2><a name="testing_another_method_(a_less_detailed_example)">Testing Another Method (A Less Detailed Example)</a></h2>
<p>One method remains for this form Object: <code>cgiVerify()</code>.  When the Engine
processes input from submitted Form Object forms, it must rebuild the objects.
Then, it checks the input against allowed values for the widgets.  This method
does just that.  Its code is slightly longer, and reads:</p>
<pre><code>
        my ($this, $query, $name, $USER) = @_;
        
        my $bindNode = $this-&gt;getBindNode($query, $name);
        my $author = $query-&gt;param($name);
        my $result = {};
        
        if($author)
        {
                my $AUTHOR = $DB-&gt;getNode($author, 'user');
                
                if($AUTHOR)
                {
                        # We have an author!!  Set the CGI param 
                        # so that the
                        # inherited cgiUpdate() will just do 
                        # what it needs to!
                        $query-&gt;param($name, $$AUTHOR{node_id});
                }
                else
                {
                        $$result{failed} = &quot;User '$author' 
                             does not exist!&quot;;
                }
        }
        
        if($bindNode)
        {
                $$result{node} = $bindNode-&gt;getId();
                $$result{failed} = &quot;You do not have permission&quot;
                        unless($bindNode-&gt;hasAccess($USER, 'w'));
        }
        
        return $result;</code></pre>
        
<p>Rather than describing the writing of the tests (and my steps and missteps
therein), I'll just comment on the tests themselves.</p>
<pre><code>
        my $qmock = Test::MockObject-&gt;new();
        $mock-&gt;set_series( 'getBindNode', 0, 0, 0, 
             $mock, $mock );
        $qmock-&gt;set_series( 'param', 0, 'author', 'author' );</code></pre>
<p>Because of the way this method handles things, it's clearer to create another
mock object to pass in as <code>$query</code>.  I'm also setting up the two main series
used for the several passes through this method.  While writing the tests, I
kept adding new values to these series.  This is what remained at the end.
This approach makes more sense to me than setting each mock before each pass,
but it's a matter of style, and either way will work.</p>
<pre><code>
        $result = cgiVerify( $mock, $qmock, 'boundname' );</code></pre>
<pre><code>
        ($method, $args) = $mock-&gt;next_call();
        is( $method, 'getBindNode', 'cgiVerify() should get 
             bound node' );
        is( join(' ', @$args), &quot;$mock $qmock boundname&quot;,
                '... with query object and query 
                     parameter name' );</code></pre>
<p>Here's the reason I used separate mock objects: to tell them apart as arguments
in the <code>getBindNode()</code> call.</p>













<pre><code>
        ($method, $args) = $qmock-&gt;next_call();
        is( $method, 'param', '... fetching parameter' );
        is( $args-&gt;[1], 'boundname', '... by name' );</code></pre>
<pre><code>
        isa_ok( $result, 'HASH', '... and should return a data 
             structure which' );</code></pre>
<p>The weird test name here is another of my little idioms.  <code>isa_ok()</code> adds 'isa
(reference type)' to the end of its test names, and I want them to be as clear
as possible when they're displayed.</p>
<pre><code>
        $mock-&gt;set_series( 'getNode', 0, { node_id =&gt; 
             'node_id' } );
        $result = cgiVerify( $mock, $qmock, 'boundname' );
        
        ($method, $args) = $mock-&gt;next_call( 2 );
        is( $method, 'getNode', '... fetching the node, if an 
             author is found' );
        is( join(' ', @$args), &quot;$mock author user&quot;,
                '... with the author, for the user type' );
                
        is( $result-&gt;{failed}, &quot;User 'author' does not exist!&quot;,
                '... setting a failure message on failure' );</code></pre>
                
<p>I like the approach of joining the arguments in a string and doing an <code>is()</code>
or a <code>like()</code> call on them.  The benefit of <code>like()</code> is that you can ignore
the <code>$self</code> passed as the first argument, because it's the mock object.  I
used <code>is()</code> here to make it more explicit what I'm expecting.</p>
<pre><code>
        $qmock-&gt;clear();
        $result = cgiVerify( $mock, $qmock, 'boundname' );
        ($method, $args) = $qmock-&gt;next_call( 2 );
        is( $method, 'param', '... setting parameters, 
             on success' );
        is( join(' ', @$args), &quot;$qmock boundname node_id&quot;,
             '... with the name and node id' );
        is( $result-&gt;{failed}, undef, 
             '... and no failure message' );</code></pre>
<p>This bit of code gave me trouble until I added the <code>clear()</code> call.  It's worth
remembering that a mock object's stack of mocked calls persists through passes.
I had forgotten that, and was using the first <code>param()</code> call instead of the
second.  Oops.</p>
<p>Another thing worth noting is that I pass 'undef' as the expected result to
<code>is()</code>.  Conveniently, <code>Test::More</code> silently does the right thing.</p>
<pre><code>
        $mock-&gt;set_always( 'getId', 'id' );
        $mock-&gt;set_series( 'hasAccess', 0, 1 );
        $result = cgiVerify( $mock, $qmock, 
             'boundname', 'user' );</code></pre>
<p>Here, I exercise the method's final clause.  These tests are more complex than
the code being tested!  Sometimes, it works out that way.</p>
<pre><code>
        $mock-&gt;called_pos_ok( -2 , 'getId',
                '... should get bound node id, if it exists' );
        is( $result-&gt;{node}, 'id',
                '... setting it in the resulting node field' );
                
        $mock-&gt;called_pos_ok( -1, 'hasAccess', 
             '... checking node access ');
        is( $mock-&gt;call_args_string( -1, ' ' ), 
             &quot;$mock user w&quot;, 
             '... for user with write permission' );
</code></pre>
                
<p>I've moved away from the <code>next_call()</code> approach to the older <code>Test::MockObject</code>
behavior of using positions in the call stack.  I'm still not quite pleased
with the names of these methods, but the negative subscripts are handy.
(Maybe I need to add <code>prev_call()</code>).  All I have to do is remember that
<code>hasAccess()</code> is called last, and that <code>getId()</code> should be called as the
second-to-last method.</p>
<p>The other new method here is <code>call_args_string()</code>, which simply joins the
arguments at the specified call position together.  It saves a bit of typing,
most of which is offset by the long method name.
</p>
<pre><code>

        is( $result-&gt;{failed}, 'You do not have permission',
                '... setting a failure message if user lacks 
                 write permission' );

        $result = cgiVerify( $mock, $qmock, 'boundname', 'user' );
        is( $result-&gt;{failed}, undef, '... and none if the user 
             has it' );</code></pre>

<p>These final two tests demonstrate how, at the end of a long series of tests,
the available options are whittled down.  By the final couple of passes, I'm
generally testing only one thing at a time.  That always seems mathematically
poetic, to me, as if I'm refining with Newton's method.</p>
<p>
</p>
<h2><a name="conclusion">Conclusion</a></h2>
<p>This whole exercise has produced 39 tests.  My next step is to update the test
plan with this information.</p>
<pre><code>
        # way back at the top
        use Test::More tests =&gt; 39;</code></pre>
<p>This makes it easier to see whether too many or too few tests were run.  I get
better results about failures and successes this way, too.  As it turns out,
writing the tests for <code>cgiVerify()</code> took about 20 minutes, give or take some
laundry-related distractions.  That seems about right for 17 tests on code I
haven't read in several months -- about one a minute, when you know what you're
doing.</p>
<p>It's worth noting the features of this module that lead me to consider mock
objects.  Mostly, the process of fetching and building nodes is complex enough
that I didn't really want to hook up a fake database, just so I could go
through all of the code paths required to test that an author is really an
author.  If the code had gone through some simple mathematical or textual
manipulations, then I would probably have used black-box testing.  Code that relies
on a database abstraction layer (as does Everything) generally makes me reach
for <code>Test::MockObject</code>, however.</p>
<p>For more information on what the module can do, please see its documentation.
The current stable version is 0.08, though 0.09 will probably have been
released by the time this article is stable.
</p>

<p><em>chromatic is the author of <a href="http://onyxneon.com/books/modern_perl/">Modern Perl</a>. In his spare time, he has been working on <a href="http://trendshare.org/how-to-invest/">helping novices understand stocks and investing</a>.</em></p>
                                    </div>


                                </div>
                                <div class="asset-footer">


                                    <div class="entry-tags">
                                        <h4>Tags<span class="delimiter">:</span></h4>
                                        <ul>
                                            <li><a href="javascript:void(0)" onclick="location.href='http://www.perl.com/mt-search.cgi?IncludeBlogs=2&amp;tag=oo%20testing&amp;limit=20';return false;" rel="tag">oo testing</a></li>
                                        </ul>
                                    </div>

                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
