<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/2002/07/02/axkit.html">
<dc:title>Taglib TMTOWTDI</dc:title>
<dc:description> As with many Perl systems, AxKit often provides multiple ways of doing things. Developers from other programming cultures may find these choices and freedom a bit bewildering at first but this (hopefully) soon gives way to the realization that...</dc:description>
<dc:creator>Barrie Slaymaker</dc:creator>
<dc:date>2002-07-02T00:00:00-08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    
    <link rel="prev bookmark" href="/pub/2002/06/26/synopsis5.html" title="Synopsis 5" />
    <link rel="next bookmark" href="/pub/2002/07/p6pdigest/20020702.html" title="This week on Perl 6 ~(24-30 June 2002)" />
    
    
    <title>Taglib TMTOWTDI - Perl.com</title>
</head>
<body id="perl-com" class="mt-entry-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1320" class="entry-asset asset hentry">
                                <div class="asset-header">
                                    <h1 id="page-title" class="asset-name entry-title">Taglib TMTOWTDI</h1>
                                    <div class="asset-meta">
                                        <span class="byline">

                                            By <span class="vcard author">Barrie Slaymaker</span> on <abbr class="published" title="2002-07-02T00:00:00-08:00">July  2, 2002 12:00 AM</abbr>

                                        </span>


                                    </div>
                                </div>
                                <div class="asset-content entry-content">

                                    <div class="asset-body">
                                        
<!-- sidebar begins -->
<!-- don't move sidebars -->
<!-- sidebar ends -->
<p>As with many Perl systems, AxKit often provides multiple ways of doing
things.  Developers from other programming cultures may find these choices and
freedom a bit bewildering at first but this (hopefully) soon gives way to the
realization that the options provide power and freedom.  When a
tool set limits your choices too much, you end up doing things like driving
screws with a nailgun.  Of course, too many choices isn't necessarily a good
thing, but it's better than too few.</p>

<p><a href="/pub/a/2002/04/16/axkit.html">Last time</a>, we
saw how to build a weather reporting application by implementing a simple
taglib module, My::WeatherTaglib, in Perl and deploying it in <a
herf="/pub/a/2002/04/16/axkit.html#weather1_flow.png">a
pipeline</a> with other XML filters.  The pipeline approach allows one kind of
flexibility: the freedom to decompose an application in the most appropriate
manner for the requirements at hand and for the supporting organization.</p>



<p>Another kind of flexibility is the freedom to implement filters using
different technologies.  For instance, it is sometimes wise to build taglibs in
different ways.  In this article, we'll see how to build the same taglib using
two other approaches.  The first rebuild uses the technique implemented by the
Cocoon project, <a
href="http://xml.apache.org/cocoon/userdocs/xsp/logicsheet-concepts.html">LogicSheets</a>.
The second uses J&ouml;rg Walter's relatively new <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/SimpleTaglib.pm">SimpleTaglib</a>
in place of the <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm">TaglibHelper</a>
used for My::WeatherTaglib in the previous article. SimpleTaglib is a somewhat
more powerful, and, oddly, more complex module than TaglibHelper (though the
author intends to make it a bit simpler to use in the near future).</p>

<a name="CHANGES" /><h3>CHANGES</h3>

<p>AxKit v1.6 is now out with some nice bug fixes and performance
improvements, mostly by Matt Sergeant and J&ouml;rg Walter, along with several
new advanced features from Kip Hampton which we'll be covering in future
articles. 

<p>Matt has also updated his AxKit compatible <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.6/lib/Apache/AxKit/Language/AxPoint.pm">AxPoint</a>
PowerPoint-like HTML/PDF/etc. presentation system.  If you're going to attend any of the
big Perl conferences this season, then you're likely to see presentations built with
AxPoint. It's a nice system that's also covered in an <a
href="http://www.xml.com/pub/a/2002/06/19/perl-xml.html">XML.com article by Kip
Hampton</a>.</p>

<a name="AxTraceIntermediate" /><h4>AxTraceIntermediate</h4>

<p>The one spiffy new feature I used -- rather more often than I'd like to
admit -- in writing this article is the debugging directive
<code>AxTraceIntermediate</code>, added by J&ouml;rg Walter.  This directive
defines a directory in which AxKit will place a copy each of the intermediate
documents passed between filters in the pipeline.  So a setting like:</p>

<pre><code>    AxTraceIntermediate /home/barries/AxKit/www/axtrace
</code></pre>

<p>will place one file in the <code>axtrace</code> directory for each
intermediate document.  The full set of directives in <code>httpd.conf</code>
used for this article is <a href="/pub/a/2002/07/02/axkit.html?page=2#httpd.conf">shown later</a>.</p>

<p>Here is the axtrace directory after requesting the URIs <code>/</code>
(from the first article), <code>/02/weather1.xsp</code> (from the second
article), <code>/03/weather1.xsp</code> and <code>/03/weather2.xsp</code> (both
from this article):</p>

<pre><code>    |index.xsp.XSP         # Perl source code for /index.xsp
    |index.xsp.0           # Output of XSP filter

    |02|weather1.xsp.XSP   # Perl source code for /02/weather1.xsp
    |02|weather1.xsp.0     # Output of XSP
    |02|weather1.xsp.1     # Output of weather.xsl
    |02|weather1.xsp.2     # Output of as_html.xsl

    |03|weather1.xsp.XSP   # Perl source code for /03/weather1.xsp
    |03|weather1.xsp.0     # Output of XSP
    |03|weather1.xsp.1     # Output of weather.xsl
    |03|weather1.xsp.2     # Output of as_html.xsl

    |03|weather2.xsp.XSP   # Perl source code for /02/weather2.xsp
    |03|weather2.xsp.0     # output of my_weather_taglib.xsl
    |03|weather2.xsp.1     # Output of XSP
    |03|weather2.xsp.2     # Output of weather.xsl
    |03|weather2.xsp.3     # Output of as_html.xsl
</code></pre>

<p>Each filename is the path portion of the URI with the <code>/</code>s
replaced with <code>|</code>s and a step number (or .XSP) appended.  The
numbered files are the intermediate documents and the <code>.XSP</code> files
are the Perl source code for any XSP filters that happened to be compiled for
this request.  Compare the <code>|03|weather2.xsp.*</code> files to the <a
href="#weather2_pipeline.png">the pipeline diagram</a> for the /03/weather2.xsp
request.

<p>Watch those "<code>|</code>" characters: they force you to quote the
filenames in most shells (and thus foil any use of wildcards):</p>

<pre><code>    $ <b>xmllint --format "www/axtrace/|03|weather2.xsp.3"</b>
    &lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;html&gt;
      &lt;head&gt;
        &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/&gt;
        &lt;title&gt;My Weather Report&lt;/title&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h1&gt;&lt;a name="title"/&gt;My Weather Report&lt;/h1&gt;
        &lt;p&gt;Hi! It's 12:43:52&lt;/p&gt;
        &lt;p&gt;The weather in Pittsburgh is Sunny
        ....
</code></pre>

<p><b>NOTE:</b> The <code>.XSP</code> files are only generated if the XSP sheet
is recompiled, so you may need to <code>touch</code> the source document or
restart the server to generate a new one.  Another gotcha is that if an error
occurs halfway down the processing pipeline, then you can end up with stale files.
In this case, the lower-numbered files (those generated by successful filters)
will be from this request, but the higher-numbered files will be stale, left
over from the previous requests.  A slightly different issue can occur when
using dynamic pipeline configurations (which we'll cover in the future): you
can end up with a shorter pipeline that only overwrites the lower-numbered
files and leaves stale higher-numbered files around.</p>

<p>These are pretty minor gotchas when compared to the usefulness of this
feature, you just need to be aware of them to avoid confusion.  When debugging
for this article, I used a Perl script that does something like:</p>

<pre><code>    rm -f www/axtrace/*
    rm www/logs/*
    www/bin/apachectl stop
    sleep 1
    www/bin/apachectl start
    GET http://localhost:8080/03/weather1.xsp
</code></pre>

<p>to start each test run with a clean fileset.</p>

<a name="UnderTheXSPHood" /><h3>Under the XSP Hood</h3>

<p>Before we move on to the examples, let's take a quick peek at how XSP pages
are handled by AxKit.  This will help us understand the tradeoffs inherent in
the different approaches.</p>

<p>AxKit implements XSP filters by compiling the source XSP page into a
<code>handler()</code> function that is called to generate the output page.
This is compiled in to Perl bytecode, which is then run to generate the XSP
output document:</p>

<a name="xsp_compiler.png" /><img src="/pub/2002/07/02/graphics/xsp_compiler.png" alt="XSP architecture" width="340" height="219" />

<p>This means that XSP page is not executed directly, but by running relatively
efficient compiled Perl code.  The bytecode is kept in memory so the overhead
of parsing and code generation is not incurred for each request.</p>

<p>There are three types of Perl code used in building the output
document: code to build the bits of static content, code that was
present verbatim in the source document -- enclosed in tags like
<code>&lt;xsp:logic&gt;</code> and
<code>&lt;xsp:expr&gt;</code> -- and code that implements tags
handled by registered taglib modules like My::WeatherTaglib
from the last article.<p>

<p>Taglib modules hook in to the XSP compiler by registering themselves
as handlers for a namespace and then coughing up snippets of code to be
compiled in to the <code>handler()</code> routine:</p>

<a name="xsp_taglib_hookin.png" /><img src="/pub/2002/07/02/graphics/xsp_taglib_hookin.png" alt="XSP with Taglib Modules Hooking in" width="351" height="372" />

<p>The snippets of code can call back into the taglib module or out to other
modules as needed.  Modules like <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm">TaglibHelper</a>,
which we used to build My::WeatherTaglib and <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/SimpleTaglib.pm">SimpleTaglib</a>,
which we use later in this article for My::SimpleWeatherTaglib, automate the
drudgery of building a taglib module so you don't need to parse XML or even
(usually) generate XML.</p>

<p>You can view the source code that AxKit generates by cranking the
<code>AxDebugLevel</code> up to 10 (which places the code in Apache's ErrorLog)
or using the <code>AxTraceIntermediate</code> directive mentioned above.  Then
you must persuade AxKit to recompile the XSP page by restarting the server and
requesting a page. If either of the necessary directives are already present in
a running server, then simply <code>touch</code>ing the file to update its
modification time will suffice.</p>

<p>This can be useful for getting a <i>really</i> good feel for what's going on
under the hood.  I encourage new taglib authors to do this to see how the code
for your taglib is actually executed.  You'll end up needing to do it to debug
anyway (trust me :).</p>

<a name="XSLT" /><h3>LogicSheets: Upstream Taglibs</h3>

<p>AxKit uses a pipeline processing model and XSP includes tags like
<code>&lt;xsp:logic&gt;</code> and <code>&lt;xsp:expr&gt;</code> that allow you
to embed Perl code in an XSP page.  This allows taglibs to be implemented as XML
filters that are placed upstream of the XSP processor.  These usually use XSLT
to and convert taglib invocations to inline code using XSP tags:</p>

<a name="logic_sheet_pipeline.png" /><img src="/pub/2002/07/02/graphics/logic_sheet_pipeline.png" alt="Upstream LogicSheets feeding the XSP processor" width="420" height="200"/>

<p>In fact, this is how XSP was originally designed to operate and Cocoon uses
this approach exclusively to this day (but with inline Java instead of Perl).
I did not show this approach in the first article because it is considerably
more awkward and less flexible than the taglib module approach offered by
AxKit.</p>

<p>The Cocoon project calls XSLT sheets that implement taglibs <a
href="http://xml.apache.org/cocoon/userdocs/xsp/logicsheet-concepts.html">LogicSheets</a>
a convention I follow in this article (I refer to the all-Perl taglib
implementation as "taglib modules").</p>

<a name="weather2.xsp" /><h4><code>weather2.xsp</code></h4>

<p>Before we look at the logicsheet version of the weather report
taglib, here is the XSP page from the last article updated to use
it:

<pre><code>
<b>&lt;?xml-stylesheet href="my_weather_taglib.xsl" type="text/xsl"?&gt;</b>
&lt;?xml-stylesheet href="NULL"                  type="application/x-xsp"?&gt;
&lt;?xml-stylesheet href="weather.xsl"           type="text/xsl"?&gt;
&lt;?xml-stylesheet href="as_html.xsl"           type="text/xsl"?&gt;

&lt;xsp:page
    xmlns:xsp="<b>http://apache.org/xsp/core/v1</b>"
    xmlns:util="http://apache.org/xsp/util/v1"
    xmlns:param="http://axkit.org/NS/xsp/param/v1"
    xmlns:weather="http://slaysys.com/axkit_articles/weather/"
&gt;
&lt;data&gt;
  &lt;title&gt;&lt;a name="title"/&gt;My Weather Report&lt;/title&gt;
  &lt;time&gt;
    &lt;util:time format="%H:%M:%S" /&gt;
  &lt;/time&gt;
  &lt;weather&gt;
    &lt;weather:report&gt;
      &lt;!-- Get the ?zip=12345 from the URI and pass it
           to the weather:report tag as a parameter --&gt;
      &lt;weather:zip&gt;&lt;param:zip/&gt;&lt;/weather:zip&gt;
    &lt;/weather:report&gt;
  &lt;/weather&gt;
&lt;/data&gt;
&lt;/xsp:page&gt;
</code></pre>

<!--  begin sidebar  -->
<table width="50%" border="0" cellspacing="8" cellpadding="8"  align="right">
<tr><td valign="top" bgcolor="#efefef">
<p class="medlist"><b>In This Series</b></p>
<p class="smalllist"><b>
<a href="/pub/a/2002/03/16/axkit.html">Introducing AxKit</a></b><br />
The first in a series of articles by Barrie Slaymaker on setting up and running AxKit. AxKit is a mod_perl application for dynamically transforming XML. In this first article, we focus on getting started with AxKit.</p>
<p class="smalllist"><b>
<a href="/pub/a/2002/04/16/axkit.html">XSP, Taglibs and Pipelines</a></b><br />
Barrie explains what a "taglib" is, and how to use them to create dynamic pages inside of AxKit.</p>
</td></tr>
</table>
<!--  end sidebar  -->
<p>The <code>&lt;?xml-stylesheet href="my_weather_taglib.xsl"
type="text/xsl"?&gt;</code> processing instruction causes
<code>my_weather_taglib.xsl</code> (which we'll cover next) to be applied to
the <code>weather2.xsp</code> page before the XSP processor sees it.  The other
three PIs are identical to the previous version: the XSP processor is invoked,
followed by the same <a
href="/pub/a/2002/04/16/axkit.html#weather.xsl"
alt="previous article">presentation</a> and <a
href="/pub/a/2002/04/16/axkit.html#as_html.xsl"
alt="previous article">HTMLification</a> XSLT stylesheets that we used last
time.</p>

<p>The only other change from the previous version is that this one uses the
corrent URI for XSP tags.  I accidently used a deprecated URI for XSP tags in
the previous article and ended up tripping over it when I used the up-to-date
URI in the LogicSheet for this one.  Such is the life of a pointy-brackets
geek.</p>

<p>The ability to switch implementations without altering (much) code is one of
XSP's advantages over things like inline Perl code: the implementation is
nicely decoupled from the API (the tags).  The only reason we had to alter
<code>weather1.xsp</code> at all is because we're switching from a more
advanced approach (a taglib module, My::WeatherTaglib) that is configured in
the <code>httpd.conf</code> file to LogicSheets, which need per-document
configuration when using <code>&lt;xml-stylesheet&gt;</code> stylesheet
specifications.  AxKit has more flexible <code>httpd.conf</code>, plugin and
Perl based stylesheet specification mechanisms which we will cover in a future
article; I'm using the processing instructions here because they are simple and
obvious.</p>

<p>The pipeline built by the processing instructions looks like:</p>

<a name="weather2_pipeline.png" /><img src="/pub/2002/07/02/graphics/weather2_pipeline.png" alt="The pipeline for weather2.xsp" width="409" height="197" />

<p>(does not show final compression stage).</p>

<a name="my_weather_taglib.xsl" /><h4><code>my_weather_taglib.xsl</code></h4>

<p>Now that we've seen the source document and the overall pipeline,
here is <a
href="/pub/a/2002/04/16/axkit.html#My::WeatherTaglib">My::WeatherTaglib</a>
recast as a LogicSheet, <code>my_weather_taglib.xsl</code>:

<pre><code>
&lt;xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsp="http://apache.org/xsp/core/v1"
  xmlns:weather="http://slaysys.com/axkit_articles/weather/"
&gt;

&lt;xsl:output indent="yes" /&gt;

&lt;xsl:template match="xsp:page"&gt;
  &lt;xsl:copy&gt;
<b>    &lt;xsp:structure&gt;
      use Geo::Weather;
    &lt;/xsp:structure&gt;</b>
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="weather:report"&gt;
<b>  &lt;xsp:logic&gt;
    my $zip = &lt;xsl:apply-templates select="weather:zip/*" /&gt;;
    my $w = Geo::Weather-&gt;new-&gt;get_weather( $zip );
    die "Could not get weather for zipcode '$zip'\n" unless ref $w;
  &lt;/xsp:logic&gt;</b>
  &lt;state&gt;<b>&lt;xsp:expr&gt;$w-&gt;{state}&lt;/xsp:expr&gt;</b>&lt;/state&gt;
  &lt;heat&gt;<b>&lt;xsp:expr&gt;$w-&gt;{heat}&lt;/xsp:expr&gt;</b>&lt;/heat&gt;
  &lt;page&gt;<b>&lt;xsp:expr&gt;$w-&gt;{page}&lt;/xsp:expr&gt;</b>&lt;/page&gt;
  &lt;wind&gt;<b>&lt;xsp:expr&gt;$w-&gt;{wind}&lt;/xsp:expr&gt;</b>&lt;/wind&gt;
  &lt;city&gt;<b>&lt;xsp:expr&gt;$w-&gt;{city}&lt;/xsp:expr&gt;</b>&lt;/city&gt;
  &lt;cond&gt;<b>&lt;xsp:expr&gt;$w-&gt;{cond}&lt;/xsp:expr&gt;</b>&lt;/cond&gt;
  &lt;temp&gt;<b>&lt;xsp:expr&gt;$w-&gt;{temp}&lt;/xsp:expr&gt;</b>&lt;/temp&gt;
  &lt;uv&gt;<b>&lt;xsp:expr&gt;$w-&gt;{uv}&lt;/xsp:expr&gt;</b>&lt;/uv&gt;
  &lt;visb&gt;<b>&lt;xsp:expr&gt;$w-&gt;{visb}&lt;/xsp:expr&gt;</b>&lt;/visb&gt;
  &lt;url&gt;<b>&lt;xsp:expr&gt;$w-&gt;{url}&lt;/xsp:expr&gt;</b>&lt;/url&gt;
  &lt;dewp&gt;<b>&lt;xsp:expr&gt;$w-&gt;{dewp}&lt;/xsp:expr&gt;</b>&lt;/dewp&gt;
  &lt;zip&gt;<b>&lt;xsp:expr&gt;$w-&gt;{zip}&lt;/xsp:expr&gt;</b>&lt;/zip&gt;
  &lt;baro&gt;<b>&lt;xsp:expr&gt;$w-&gt;{baro}&lt;/xsp:expr&gt;</b>&lt;/baro&gt;
  &lt;pic&gt;<b>&lt;xsp:expr&gt;$w-&gt;{pic}&lt;/xsp:expr&gt;</b>&lt;/pic&gt;
  &lt;humi&gt;<b>&lt;xsp:expr&gt;$w-&gt;{humi}&lt;/xsp:expr&gt;</b>&lt;/humi&gt;</b>
&lt;/xsl:template&gt;

&lt;xsl:template match="@*|node()"&gt;
  &lt;!-- Copy the rest of the doc almost verbatim --&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>

<p>The first <code>&lt;xsl:template&gt;</code> inserts an
<code>&lt;xsp:structure&gt;</code> at the top of the page with some Perl code
to <code>use Geo::Weather;</code> so the Perl code in the later
<code>&lt;xsl:logic&gt;</code> element can refer to it.  You could also preload
Geo::Weather in <code>httpd.conf</code> to share it amongst httpd processes and
simplify this stylesheet, but that would introduce a bit of a maintainance
hassle: keeping the server config and the LogicSheet in synchronization.</p>

<p>The second <code>&lt;xsl:template&gt;</code> replaces all occurences of
<code>&lt;weather:report&gt;</code> (assuming the <code>weather:</code> prefix
happens to map to the taglib URI; see <a
href="http://www.jclark.com/xml/xmlns.htm">James Clark's introduction to
namespace</a> for more details).  In place of the
<code>&lt;weather:report&gt;</code> tag(s) will be some Perl code surrounded by
<code>&lt;xsp:logic&gt;</code> and <code>&lt;xsp:expr&gt;</code> tags.  The
<code>&lt;xsp:logic&gt;</code> tag is used around Perl code that is just logic:
any value the code returns is ignored.  The
<code>&lt;xsp:expr&gt;</code> tags surround Perl code that returns a value to
be emitted as text in the result document.</p>

<p>The <code>get_weather()</code> call returns a hash describing the most
recent weather oberservations somewhere close to a given zip code:</p>

<a name="hash" /><pre><code>    {
      'city'  =&gt; 'Pittsburgh',
      'state' =&gt; 'PA',
      'cond'  =&gt; 'Sunny',
      'temp'  =&gt; '77',
      ...
    };
</code></pre>

<p>All those <code>&lt;xsp:expr&gt;</code> tags extract the values from the hash one by one and build an XML data structure.  The resulting XSP document looks like:

<pre><code>    &lt;?xml version="1.0"?&gt;
    &lt;xsp:page xmlns:xsp="http://apache.org/xsp/core/v1"<br /> xmlns:util="http://apache.org/xsp/util/v1"<br /> xmlns:param="http://axkit.org/NS/xsp/param/v1"<br /> xmlns:weather="http://slaysys.com/axkit_articles/weather/"&gt;
      &lt;xsp:structure&gt;
          use Geo::Weather;
      &lt;/xsp:structure&gt;
      &lt;data&gt;
        &lt;title&gt;&lt;a name="title"/&gt;My Weather Report&lt;/title&gt;
        &lt;time&gt;
          &lt;util:time format="%H:%M:%S"/&gt;
        &lt;/time&gt;
        &lt;weather&gt;
          &lt;xsp:logic&gt;
            my $zip = &lt;param:zip/&gt;;
            my $w = Geo::Weather-&gt;new-&gt;get_weather( $zip );
            die "Could not get weather for zipcode '$zip'\n" unless ref $w;
          &lt;/xsp:logic&gt;
          &lt;state&gt;&lt;xsp:expr&gt;$w-&gt;{state}&lt;/xsp:expr&gt;&lt;/state&gt;
          &lt;heat&gt;&lt;xsp:expr&gt;$w-&gt;{heat}&lt;/xsp:expr&gt;&lt;/heat&gt;
          &lt;page&gt;&lt;xsp:expr&gt;$w-&gt;{page}&lt;/xsp:expr&gt;&lt;/page&gt;
          &lt;wind&gt;&lt;xsp:expr&gt;$w-&gt;{wind}&lt;/xsp:expr&gt;&lt;/wind&gt;
          &lt;city&gt;&lt;xsp:expr&gt;$w-&gt;{city}&lt;/xsp:expr&gt;&lt;/city&gt;
          &lt;cond&gt;&lt;xsp:expr&gt;$w-&gt;{cond}&lt;/xsp:expr&gt;&lt;/cond&gt;
          &lt;temp&gt;&lt;xsp:expr&gt;$w-&gt;{temp}&lt;/xsp:expr&gt;&lt;/temp&gt;
          &lt;uv&gt;&lt;xsp:expr&gt;$w-&gt;{uv}&lt;/xsp:expr&gt;&lt;/uv&gt;
          &lt;visb&gt;&lt;xsp:expr&gt;$w-&gt;{visb}&lt;/xsp:expr&gt;&lt;/visb&gt;
          &lt;url&gt;&lt;xsp:expr&gt;$w-&gt;{url}&lt;/xsp:expr&gt;&lt;/url&gt;
          &lt;dewp&gt;&lt;xsp:expr&gt;$w-&gt;{dewp}&lt;/xsp:expr&gt;&lt;/dewp&gt;
          &lt;zip&gt;&lt;xsp:expr&gt;$w-&gt;{zip}&lt;/xsp:expr&gt;&lt;/zip&gt;
          &lt;baro&gt;&lt;xsp:expr&gt;$w-&gt;{baro}&lt;/xsp:expr&gt;&lt;/baro&gt;
          &lt;pic&gt;&lt;xsp:expr&gt;$w-&gt;{pic}&lt;/xsp:expr&gt;&lt;/pic&gt;
          &lt;humi&gt;&lt;xsp:expr&gt;$w-&gt;{humi}&lt;/xsp:expr&gt;&lt;/humi&gt;
        &lt;/weather&gt;
      &lt;/data&gt;
    &lt;/xsp:page&gt;
</code></pre>

<p>and the output document of that XSP page looks like:</p>

<pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;data&gt;
      &lt;title&gt;&lt;a name="title"/&gt;My Weather Report&lt;/title&gt;
      &lt;time&gt;17:06:15&lt;/time&gt;
      &lt;weather&gt;
        &lt;state&gt;PA&lt;/state&gt;
        &lt;heat&gt;77&lt;/heat&gt;
        &lt;page&gt;/search/search?what=WeatherLocalUndeclared
        &amp;where=15206&lt;/page&gt;
        &lt;wind&gt;From the Northwest at 9 gusting to 16&lt;/wind&gt;
        &lt;city&gt;Pittsburgh&lt;/city&gt;
        &lt;cond&gt;Sunny&lt;/cond&gt;
        &lt;temp&gt;77&lt;/temp&gt;
        &lt;uv&gt;4&lt;/uv&gt;
        &lt;visb&gt;Unlimited miles&lt;/visb&gt;
        &lt;url&gt;http://www.weather.com/search/search?
        what=WeatherLocalUndeclared&amp;where=15206&lt;/url&gt;
        &lt;dewp&gt;59&lt;/dewp&gt;
        &lt;zip&gt;15206&lt;/zip&gt;
        &lt;baro&gt;29.97 inches and steady&lt;/baro&gt;
        &lt;pic&gt;http://image.weather.com/web/common/wxicons/52/30.gif&lt;/pic&gt;
        &lt;humi&gt;54%&lt;/humi&gt;
      &lt;/weather&gt;
    &lt;/data&gt;
</code></pre>

<a name="LogicSheetAdvantages" /><h4>LogicSheet Advantages</h4>

<ul>

  <li>One taglib can generate XML that calls another taglib.  Taglib
  modules may call each other at the Perl level, but taglib modules are
  XSP compiler plugins and do not cascade: The XSP compiler lives in a
  pipeline environment but does not use a pipeline internally.</li>

  <li>No need to add an <code>AxAddXSPTaglib</code> directive and
  restart the Web server each time you write a tag lib.</li>

</ul>

<p>Restarting a Web server just because a taglib has changed can be
awkward in some environments, but this seems to be rare; restarting an
Apache server is usually quick enough in a development environment and
better not be necessary too often in a production environment.</p>

<p>In the Cocoon community, LogicSheets can be registered and shared somewhat
like the Perl community uses CPAN to share modules.  This is an additional
benefit when Cocooning, but does not carry much weight in the Perl world, which
already has CPAN (there are many taglib modules on CPAN).  There is no Java
equivalent to CPAN in wide use, so Cocoon logic sheets need their own
mechanism.</p>

<a name="LogicSheetDisadvantages" /><h4>LogicSheet Disadvantages</h4>

<p>There are two fundamental drwabacks with LogicSheets, each with
several symptoms.  Many of the symptoms are minor, but they add up:

<ol>

  <li>Requires inline code, usually in an XSLT stylesheet.

    <ul>

      <li>Putting Perl code in XML is awkward: You can't easily syntax check
      the code (I happen to like to run <code>perl -cw ThisFile.pm</code> a lot
      while writing Perl code) or take advantage of language-oriented editor
      features such as autoindenting, tags and syntax highlighting.</li>

      <li>The taglib author needs to work in four languages/APIs: XSLT
      (typically), XSP, Perl, and the taglib under development. XSLT and Perl
      are far from trivial, and though XSP is pretty simple, it's easy to trip
      yourself up when context switching between them.</li>

      <li>LogicSheets are far less flexible than taglib modules.  For
      instance, compare the rigidity of 
      <code>my_weather_taglib.xsl</code>'s output structure with the
      that of My::WeatherTaglib or
      My::SimpleWeatherTaglib.  The LogicSheet approach
      requires hardcoding the result values, while the two taglib
      modules simply convert whatever is in the weather report data
      structures to XML.</li>

      <li>XSLT requires a fair amount of extra boilerplate to copy
      non-taglib bits of XSP pages through.  This can usually be set up
      as boilerplate, but boilerplate in a program is just another thing
      to get in the way and require maintainance.</li>

      <li>LogicSheet are inherently single-purpose.  Taglib modules, on
      the other hand, can be used as regular Perl modules.  An
      authentication module can be used both as a taglib and as a
      regular module, for instance.</li>

      <li>LogicSheets need a working Web server for even the most basic
      functional testing since they need to be run in an XSP environment and
      AxKit does not yet support XSP outside a Web server.  Writing taglib
      modules allows simple test suites to be written to vet the taglib's code
      without needing a working Web server.</li>

      <li>Writing LogicSheets works best in an XML editor, otherwise
      you'll need to escape all your <code>&lt;</code> characters, at
      least, and reading / writing XML-escaped Perl and Java code
      can be irksome.</li>

      <li>Embracing and extending a LogicSheet is difficult to do:
      The source XSP page needs to be aware of the fact that the taglib
      it's using is using the base taglib and declare both of their
      namespaces.  With taglib modules, Perl's standard function
      import mechanism can be used to releive XSP authors of this
      duty.</li>

    </ul>
  </li>

  <li>Requires an additional stylesheet to process, usually XSLT.  This
  means:

    <ul>

      <li>A more complex processing chain, which leads to XSP page complexity
      (and thus more likelihood of bugs) because each page must declare both
      the namespace for the taglib tags <b>and</b> a processing instruction to
      run the taglib. As an example of a gotcha in this area, I used an
      outdated version of the XSP namespace URI in <code>weather2.xsp</code>
      and the current URI in <code>my_weather_taglib.xsl</code>.  This
      caused me a bit of confusion, but the <code>AxTraceIntermediate</code>
      directive helped shed some light on it.</li>

      <li>More disk files to check for changes each time an XSP page
      is served.  Since each LogicSheet affects the output, each
      LogicSheet must be <code>stat()</code>ed to see if it has changed
      since the last time the XSP page was compiled.</li>

    </ul>
  
  </li>

</ol>

<p>As you can probably tell, I feel that LogicSheets are a far more awkward and
less flexible approach than writing taglibs as Perl modules using one of the
helper libraries.  Still, using upstream LogicSheets is a valid and perhaps
occasionally useful technique for writing AxKit taglibs.</p>











<a name="UpstreamGoodFor" /><h3>Upstream Filters good for?</h3>

<p>So what is XSLT upstream of an XSP processor good for?  You can do many
things with it other than implementing LogicSheets.  One use is to implement
branding: altering things like logos, site name, and perhaps colors, or other
customization, like administrator's mail addresses on a login page that is
shared by several sub-sites.</p>

<p>A key advantage of doing transformations upstream of the XSP processor is
that the XSP process caches the results of upstream transformations.  XSP
converts whatever document it receives in to Perl bytecode in memory and then
just runs that bytecode if none of the upstream documents have changed.</p>

<p>Another use is to convert source documents that declare what should
be on a page to XSP documents that implement the machinery of a page.
For instance, a survey site might have the source documents declare what
questions to ask:</p>

<pre><code>    &lt;survey&gt;
      &lt;question&gt;
        &lt;text&gt;Have you ever eaten a Balut&lt;/text&gt;
        &lt;response&gt;Yes&lt;/response&gt;
        &lt;response&gt;No&lt;/response&gt;
        &lt;response&gt;Eeeewww&lt;/response&gt;
      &lt;/question&gt;
      &lt;question&gt;
        &lt;text&gt;Ok, then, well how about a nice haggis&lt;/text&gt;
        &lt;response&gt;Yes&lt;/response&gt;
        &lt;response&gt;No&lt;/response&gt;
        &lt;response&gt;Now that's more like it!&lt;/response&gt;
      &lt;/question&gt;
      ...
    &lt;/survey&gt;
</code></pre>

<p>XSLT can be used to transform the survey definition in to an XSP page that
uses the <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-XSP-PerForm-1.6/PerForm.pm">PerForm
taglib</a> to automate form filling, etc.  This approach allows pages to be
defined in terms of what they are instead of how they should work.</p>

<p>You can also use XSLT upstream of the XSP processor to do other things, like
translate from a limited or simpler domain-specific tagset to a more complex or
general purpose taglib written as a taglib module.  This can allow you to
define taglibs that are easier to use in terms of more powerful (but scary!)
taglibs that are loaded in to the XSP processor.</p>

<a name="My::SimpleWeatherTaglib" /><h3>My::SimpleWeatherTaglib</h3>

<p>A new-ish taglib helper module has been bundled in recent AxKit releases:
J&ouml;rg Walter's <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/SimpleTaglib.pm">SimpleTaglib</a>
(the full module name is Apache::AxKit::Language::XSP::SimpleTaglib).  This
module performs roughly the same function as Steve Willer's <a
href="http://search.cpan.org/doc/MSERGEANT/AxKit-1.51/lib/Apache/AxKit/Language/XSP/TaglibHelper.pm">TaglibHelper</a>,
but supports namespaces and uses a feature new to Perl, subroutine attributes,
to specify the parameters and result formatting instead of a string.</p>

<p>Here is My::SimpleWeatherTaglib:

<pre><code>    package My::SimpleWeatherTaglib;

    use Apache::AxKit::Language::XSP::SimpleTaglib;

    $NS = "http://slaysys.com/axkit_articles/weather/";

    package My::SimpleWeatherTaglib::Handlers;

    use strict;
    require Geo::Weather;

    ## Return the whole report for fixup later in the processing pipeline
    sub report :  child(zip) struct({}) {
        return 'Geo::Weather-&gt;new-&gt;get_weather( $attr_zip );'
    }

    1;
</code></pre>

<p>The <code>$NS</code> variable defines the namespace for this taglib.  This
module uses the same namespace as <code>my_weather_taglib.xsl</code> and
My::WeatherTaglib, because all three implement the same taglib (this
repetetiveness is to demonstrate the differences between the approaches).  See
the <a href="#MixingAndMatching">Mixing and Matching Taglibs</a> section to see how My::WeatherTaglib and
My::SimpleWeatherTaglib can both be used in the same server instance.</p>

<p>My::SimpleWeatherTaglib then shifts gears in to a new <code>package</code>,
My::SimpleWeatherTaglib::Handlers to define the subroutines for the taglib
tags.  Using a virgin package like this provides a clean place with which to declare
the tag handlers.  SimpleTaglib looks for the modules in the Foo::Handlers
package if it's <code>use()</code>d in the Foo package (don't use
<code>require</code> for this!).

<p>My::SimpleWeatherTaglib <code>require</code>s Geo::Weather and declares a
single tag, which handles the <code>&lt;weather:report&gt;</code> tag in
<code>weather1.xsp</code> (which we'll show in a moment).</p>

<p>The <code>require Geo::Weather;</code> instead of <code>use
Geo::Weather;</code> is to avoid importing subroutines in to our otherwise
<code>...::Handlers</code> namespace which might look like a handler.</p>

<p>There's something new afoot in the declaration for <code>sub report</code>:
subroutine attributes.  Subroutine attributes are a new feature of Perl (as of
perl5.6) that allow us to hang additional little bits of information on the
subroutine declaration that describe it a bit more.  <a
href="http://search.cpan.org/doc/JHI/perl-5.7.3/pod/perlsub.pod"><code>perldoc
perlsub</code></a> for the details of this syntax.  Some attributes are
predefined by Perl, but modules may define others for their own purposes. In
this case, the SimpleTaglib module defines a handful of attributes, some of
which describe what parameters the taglib tag can take and others which
describe how to convert the result value from the taglib implementation into
XML output.<p>

<p>The <code>child(zip)</code> subroutine attribute tells the SimpleTaglib
module that this handler expects a single child element named <code>zip</code>
in the taglib's namespace.  In <code>weather1.xsp</code>, this ends up looking
like:</p>

<pre><code>
    &lt;weather:report&gt;
      &lt;!-- Get the ?zip=12345 from the URI and pass it
           to the weather:report tag as a parameter --&gt;
      <b>&lt;weather:zip&gt;&lt;param:zip/&gt;&lt;/weather:zip&gt;</b>
    &lt;/weather:report&gt;
</code></pre>

<p>The text from the <code>&lt;weather:zip&gt;</code> element (which will be
filled in from the URI query string using the <code>param:</code> taglib) will
be made available in a variable named <code>$attr_zip</code> at request time.
The fact that the text from an element shows up in a variable beginning with
<code>$attr_</code> is confusing, but it does actually work that way.</p>

<p>The <code>struct({})</code> attribute specifies that the result of this tag
will be returned as a Perl data structure that will be converted into XML.
<code>Geo::Weather-&gt;new-&gt;get_weather( $zip )</code> returns a HASH reference that looks like:</p>

<a name="hash_2" /><pre><code>    {
      'city'  =&gt; 'Pittsburgh',
      'state' =&gt; 'PA',
      'cond'  =&gt; 'Sunny',
      'temp'  =&gt; '77',
      ...
    };
</code></pre>

<p>The <code>struct</code> attribute tells SimpleTaglib to turn this in to XML
like:</p>

<pre><code>
    &lt;city&gt;Pittsburgh&lt;/city&gt;
    &lt;state&gt;PA&lt;/state&gt;
    &lt;cond&gt;Sunny&lt;/cond&gt;
    &lt;temp&gt;77&lt;/temp&gt;
    ....
</code></pre>

<p>The <code>{}</code> in the <code>struct({})</code> attribute specifies that
the result nodes should be not be in a namespace (and thus have no namespace
prefix), just like the static portions of our <code>weather1.xsp</code>
document.  This is one of the advantages that SimpleTaglib has over other
methods: It's easier to emit nodes in different namespaces.  To emit nodes in a
specific namespace, put the namespace URI for that namespace inside the
curlies: <code>struct({http://my.namespace.com/foo/bar})</code>.  The
<code>{}</code> notation is referred to as <a
href="http://www.jclark.com/xml/xmlns.htm">James Clark (or jclark)
notation</a>.<p>

<p>Now, the tricky bit.  Harkening back to our <a
href="/pub/a/2002/07/axkit.html?page=1#UnderTheXSPHood">discussion of how XSP is implemented</a>, remember that
the XSP processor compiles the XSP document into Perl code that is executed
to build the output document.  As XSP compiles the page, it keeps a lookout
for tags in namespaces handled by taglib modules that have been configured in
with <code>AxAddXSPTaglib</code>.  When XSP sees one of these tags, it calls in
to the taglib module--My::SimpleWeatherTaglib here--for that namespace and
requests a chunk of Perl source code to compile in place of the tag.</p>

<p>Taglibs implemented with the SimpleTaglib module covered here declare
handlers for each taglib tag (<code>sub report</code>, for instance).  That
handler subroutine is called at parse time, not at request time.  Its job is to
return the chunk of code that will be compiled and then run
later, at request time, to generate the output.  So <code>report()</code>
returns a string containing a snippet of Perl code that calls
into Geo::Weather.  This Perl code will be compiled once, then
run for each request.</p>

<p>This is a key difference between the TaglibHelper module that
My::WeatherTaglib used in the previous article and the SimpleTaglib module used
here.  SimpleTaglib calls My::SimpleWeatherTaglib's <code>report()</code>
subroutine at compile time whereas TaglibHelper quietly, automatically arranges
to call My::WeatherTaglib's <code>report()</code> subroutine at request time.<p>

<p>This difference makes SimpleTaglib not so simple unless you are used to
writing code that generates code that will be compiled and run later.  On the
other hand, "Programs that write programs are the happiest programs in the
world" (Andrew Hume, according to a few places on the net).  This is true here
because we are able to return whatever code is appropriate for the task at
hand.  In this case, the code is so simple that we can return it directly.  If
the work to be done was more complicated, then we could also return a call to a
subroutine of our own devising.  So, while a good deal less simple than the
approach taken by TaglibHelper, this approach does offer a bit more
flexibility.</p>

<p>SimpleTaglib's author does promise that a new version of SimpleTaglib will
offer the "call this subroutine at request time" API which I (and I suspect
most others) would prefer most of the time.</p>

<p>I will warn you that the documentation for SimpleTaglib does not stand on
its own, so you need to have the source code for an example module or two to put
it all together.  Beyond the overly simple example presented here, the
documentation refers you to a couple of others.  Mind you, I'm casting stones
while in my glass house here, because nobody has ever accused me of fully
documenting my own modules.</p>

<p>For reference, here is the <code>weather1.xsp</code> from the previous
article, which we are reusing verbatim for this example:

<pre><code>    &lt;?xml-stylesheet href="NULL"        type="application/x-xsp"?&gt;
    &lt;?xml-stylesheet href="weather.xsl" type="text/xsl"?&gt;
    &lt;?xml-stylesheet href="as_html.xsl" type="text/xsl"?&gt;

    &lt;xsp:page
        xmlns:xsp="http://www.apache.org/1999/XSP/Core"
        xmlns:util="http://apache.org/xsp/util/v1"
        xmlns:param="http://axkit.org/NS/xsp/param/v1"
        <b>xmlns:weather="http://slaysys.com/axkit_articles/weather/"</b>
    &gt;
    &lt;data&gt;
      &lt;title&gt;&lt;a name="title"/&gt;My Weather Report&lt;/title&gt;
      &lt;time&gt;
        &lt;util:time format="%H:%M:%S" /&gt;
      &lt;/time&gt;
      &lt;weather&gt;
        <b>&lt;weather:report&gt;
          &lt;!-- Get the ?zip=12345 from the URI and pass it
               to the weather:report tag as a parameter --&gt;
          &lt;weather:zip&gt;&lt;param:zip/&gt;&lt;/weather:zip&gt;
        &lt;/weather:report&gt;</b>
      &lt;/weather&gt;
    &lt;/data&gt;
    &lt;/xsp:page&gt;
</code></pre>

<p>The processing pipeline and intermediate files are also identical to those
from the <a
href="/pub/a/2002/04/16/axkit.html">previous article</a>, so we won't repeat them here.

<a name="MixingAndMatching" /><h3>Mixing and Matching Taglibs using
<code>httpd.conf</code></h3>

<p>As detailed in <a href="/pub/a/2002/03/12/axkit.html">the first article</a> in this series, AxKit
integrates tightly with Apache and Apache's configuration engine.
Apache allows different files and directories to have different
configurations applied, including what taglibs are used.  In the real
world, for instance, it is sometimes necessary to have part of a site
to use a new version of a taglib that might break an old portion.</p>

<p>In the server I used to build the examples for this article, for instance,
the <code>02/</code> directory still uses My::WeatherTaglib from the last
article, while the <code>03/</code> directory uses the
<code>my_weather_taglib.xsl</code> for one of this article's examples and
My::SimpleWeatherTaglib for the other. This is done by combining Apache's
<code>&lt;Directory&gt;</code> sections with the <code>AxAddXSPTaglib</code>
directive:</p>

<a name="httpd.conf" /><pre><code>    ##
    ## Init the httpd to use our "private install" libraries
    ##
    PerlRequire startup.pl

    ##
    ## AxKit Configuration
    ##
    PerlModule AxKit

    &lt;Directory "/home/me/htdocs"&gt;
        Options -All +Indexes +FollowSymLinks

        # Tell mod_dir to translate / to /index.xml or /index.xsp
        DirectoryIndex index.xml index.xsp
        AddHandler axkit .xml .xsp

        AxDebugLevel 10

        AxTraceIntermediate /home/me/axtrace

        AxGzipOutput Off

        AxAddXSPTaglib AxKit::XSP::Util
        AxAddXSPTaglib AxKit::XSP::Param

        AxAddStyleMap application/x-xsp \\
                      Apache::AxKit::Language::XSP

        AxAddStyleMap text/xsl \\
                      Apache::AxKit::Language::LibXSLT
    &lt;/Directory&gt;

    &lt;Directory "/home/me/htdocs/02"&gt;
    <b>    AxAddXSPTaglib My::WeatherTaglib</b>
    &lt;/Directory&gt;

    &lt;Directory "/home/me/htdocs/03"&gt;
    <b>    AxAddXSPTaglib My::SimpleWeatherTaglib</b>
    &lt;/Directory&gt;
</code></pre>

<p>See <a href="http://httpd.apache.org/docs/sections.html" alt="Apache
httpd documentation">How
Directory, Location and Files sections work</a> from the apache
httpd documentation (v1.3 or 2.0) for the details of how to use
<a href="http://httpd.apache.org/docs/mod/core.html#directory"
alt="Apache documentation"><code>&lt;Directory&gt;</code></a> and other
httpd.conf sections to do this sort of thing.</p>

<a name="help" /><h3>Help and thanks</h3>

<p>J&ouml;rg Walter as well as Matt Sergeant were of great help in writing this
article, especially since I don't do LogicSheets.  J&ouml;rg also fixed a bug
in absolutely no time and wrote the SimpleTaglib module and the <code>AxTraceIntermediate</code> feature.</p>

<p>In case of trouble, have a look at some of the <a
href="/pub/a/2002/03/12/axkit.html?page=3#help">helpful resources we
listed in the first article</a>.</p>

<p>Copyright 2002, Robert Barrie Slaymaker, Jr.  All Rights Reserved.


                                    </div>


                                </div>
                                <div class="asset-footer">


                                </div>
                            </div>


                    
                    


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
