<P>


<!-- This week on perl5-porters (1--7 May 2000) -->

<br />
<!::field::date::><br /><ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Moderation_is_Imminent">Moderation is Imminent</a>
  <ul>
    <li><a href="#Simons_Guide_to_p5p">Simon's Guide to p5p</a>
  </ul>
  <li><a href="#Big_Discussion_of_perldoc_and_Indexing">Big Discussion of <code>perldoc</code> and Indexing</a>
  <ul>
    <li><a href="#X">X<></a>
    <li><a href="#splitpod"><code>splitpod</code></a>
    <li><a href="#Aliases">Aliases</a>
    <li><a href="#perldoc_Wishlist"><code>perldoc</code> Wishlist</a>
    <li><a href="#Toms_Plan">Tom's Plan</a>
    <li><a href="#Editorial_Opinion_Section">Editorial Opinion Section</a>
    <li><a href="#Mark_Fishers_man_Replacement">Mark Fisher's <code>man</code> Replacement</a>
    <li><a href="#Pod::Parser_Output_Model"><code>Pod::Parser</code> Output Model</a>
    <li><a href="#roffitall"><code>roffitall</code></a>
  </ul>
  <li><a href="#Patches_to_perlre">Patches to <code>perlre</code></a>
  <li><a href="#mktablesPL_Needs_Work"><code>mktables.PL</code> Needs Work</a>
  <li><a href="#Jarkko_is_Still_Trying_to_Give_Away_the_Configure_Pumpkin">Jarkko is Still Trying to Give Away the <code>Configure</code> Pumpkin</a>
  <li><a href="#Pushing_into_Hashes">Pushing into Hashes</a>
  <li><a href="#Damians_Assignment_Overloader">Damian's Assignment Overloader</a>
  <li><a href="#Various">Various</a>
</ul>

</P>

<P>

      <H3><a name="Notes">Notes</a></H3>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>mjd-perl-thisweek-YYYYMM@plover.com</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
<H3><a name="Moderation_is_Imminent">Moderation is Imminent</a></H3>

</P>

<P>

As I mentioned a few weeks ago, Sarathy suggested a light-handed
moderation scheme back in March, in the wake of a number of gigantic
flame wars that resulted in the departure of several important people
from the list.
</P>

<P>
The discussion of Damian Conway's overloading module (see below)
sparked a return to this topic.
</P>

<P>

This is very important, and you be sure to read Sarathy's actual
proposal for the details.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-04/msg00574.html">The proposal.</a></P>

<P>

<a href="http://www.perl.com/pub/2000/04/p5pdigest/THISWEEK-20000423.html#p5p_to_become_Refereed">Earlier summary</a></P>

<P>

Sarathy said that last time he had mentioned it, he had received
suggestions that the following people be referees:
<ul><li>     Nathan Torkington<li>     Kurt Starsinic<li>     Chip Salzenberg<li>     Mark-Jason Dominus<li>     Simon Cozens<li>     Damian Conway<li>     Russ Allbery</ul></P>

<P>

He then asked thse people if they wanted to be referees.  As far as I
know, only Simon and I have accepted so far.
</P>

<P>
There was some discussion of the technical mechanics of the
refereeing, and it looks like it is going to happen.  
</P>

<P>

<H4><a name="Simons_Guide_to_p5p">Simon's Guide to p5p</a></H4>

</P>

<P>
In the course of this, Simon posted a document he had written about
how to use p5p.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00306.html">Simon's guide to p5p.</a></P>

<P>

<H3><a name="Big_Discussion_of_perldoc_and_Indexing">Big Discussion of <code>perldoc</code> and Indexing</a></H3>

</P>

<P>
Forty-eight percent of this week's 350 messages were related to 
<CODE>perldoc</CODE> in one way or another.
</P>

<P>
The discussion started when Johan Vromans suggested that 
<CODE>perldoc</CODE> be extended to do something reasonable with 
<CODE>perldoc -f foreach</CODE>, analogous to the way 
<CODE>perldoc -f print</CODE> is presently treated.  Sarathy agreed with this; Tom Christiansen
objected strenuously.  I 
think that the point of Tom's objection  was that it is very easy to just
grep the entire manual for the term you want to find, that even on
non-unix crippleware platforms, 
<CODE>grep</CODE> can be implemented as a one-line Perl program, and that people whould
be encouraged to understand their own power to search the manuals,
rathern than being encouraged to depend on a canned solution like 
<CODE>perldoc</CODE>.  I think there's something to be said for this, but Tom did not seem
to find much agreement among the other p5pers.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-04/msg01122.html">Root of the thread</a></P>

<P>
Several interesting topics developed from this.  First, Tom announced that
he had been writing a new manual page, 
<CODE>perlrtfm</CODE>, which would explain how the manual was organized and how to use it
effectively. 
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00065.html">Draft version of perlrtfm. </a></P>

<P>
Ilya said that the mapping from keywords to manual sections should not
be hardwired into 
<CODE>perldoc</CODE>, but rather should be in an index file somewhere.  Nick Ing-Simmons
agreed, and I've believed this
for a long time.  
<CODE>grep</CODE> is very nice, and works well much of the time, but as almost any user
 of a web search engine can tell you, sometimes the document you're
 looking for doesn't happen to contain the keyword it should.  I went
 looking for an example of this and found one right away:  If you want
 to find the remainder after division, and grep for 
<CODE>remainder</CODE>, you do <em>not</em> locate the section in 
<CODE>perlop</CODE> about the modulus operator.  A well-constructed index would fix this.
</P>

<P>
Tom pointed out that to construct and maintain an index
would be a tremendous amount of labor.  
</P>

<P>
Ilya talked about the IBM-Book format documents for Perl on OS/2,
which has a command that does a full-text search on the documentation
and yields the best match.
</P>

<P>
Matthias Neeracher said that 'shuck', the Macintosh documentation browser,
made use of an index, and would work better if the index data were
better to begin with.
</P>

<P>
The indexing project needs a champion and an army of volunteers.  
If you're interested in applying for either position, drop me a note
and I'll try to match up interested parties.
<H4><a name="X">X<></a></H4>

</P>

<P>

Pod has always documented an 
<CODE>X<></CODE> tag 'for indexing'.  But the documents never said how it worked or
 what the format of the contents should be, and it was never really used.
In 5.6, it appears exactly twice in the entire documentation set, and
the documentation for 
<CODE>X<></CODE> itself says only:
</P>

</P><PRE>
         X<index>        An index entry
</PRE>

<P>
Tom said that if an index were contructed, it should use the 
<CODE>X<></CODE> tag to mark up the pods with index entries.  I pointed out that the
big downside of that is that if there are many 
<CODE>X<></CODE> tags, they render the pod text itself less readable.  But I don't
 think anyone advanced a better suggestion.  I sent some mail about
 possible semantics for 
<CODE>X<></CODE>, based on my (limited) indexing experience.  (Among other things, I
am writing a book about Perl in a Pod-like markup language and I am
using 
<CODE>X<></CODE> to indicate an index entry.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00033.html">Indexing notes.</a></P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00083.html">More indexing notes.</a></P>

<P>
Tom also pointed out that 
</P>

</P><PRE>
        =for index
</PRE>

<P>
could be used to indicate that the following chunk of text was a
sequence of index entries.
<H4><a name="splitpod"><code>splitpod</code></a></H4>

</P>

<P>

An entry in the software-nobody-knows-about category:  In the
Perl pod directory is a program called 
<CODE>splitpod</CODE> which will break a single pod file into multiple files.  For example, 
</P>

</P><PRE>
        splitpod perlfunc.pod
</PRE>

<P>
creates many pod files named 
<CODE>abs.pod</CODE>, 
<CODE>accept.pod</CODE>, ..., 
<CODE>y.pod</CODE>.  You can then 
<CODE>pod2man</CODE> these separately or whatever.
</P>

<P>

<H4><a name="Aliases">Aliases</a></H4>

</P>

<P>
Ilya suggested that Pod support an alias directive to define a new
escape sequence that would be equivalent to some other escape
sequence.  For example:
</P>

</P><PRE>
        =for macro B <= Y
</PRE>

<P>
makes 
<CODE>Y<some text></CODE> synonymous with 
<CODE>B<some text></CODE>.  That way you could use 
<CODE>Y</CODE> to indicate bold sans-serif text (for example) but the standard
 translators such as 
<CODE>pod2text</CODE> would still know to render it the same as 
<CODE>B<...></CODE>.
<H4><a name="perldoc_Wishlist"><code>perldoc</code> Wishlist</a></H4>

</P>

<P>

Ben Tilly posted a wishlist for Perl's documentation, including that
the output of 
<CODE>perldoc</CODE> should include the name of the file that it had found the
 documentation in.  This would help remind people that the
 documentation is actually in a file somewhere and is not available
 only from the 
<CODE>perldoc</CODE> magic genie.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00086.html">Ben's other wishes</a><H4><a name="Toms_Plan">Tom's Plan</a></H4>

</P>

<P>

While people were posting all sorts of ideas for enhancements to 
<CODE>perldoc</CODE>, Tom Christiansen posted his own ideas about how to solve some of the deeper
underlying problems of Perl's documentation:
<blockquote><p><b>Tom:</b> First, dramatically reorganize the documentation,more or less along the lines that Sarathy has alluded to:reference, tutorials, internals.</p> <p>Second, throw the wholeperldoc code out and start from scratch with a real design specthat does not psychotically deviate from its purpose.</p><p>Third, provide real tools for unrelated things, likeidentifying where Perl finds its standard module path.  Modulesneed tools.</p></blockquote></P>

<P>

He also showed a demonstration of some simpler tools that might replace
the large, bloated 
<CODE>perldoc</CODE>. 
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00123.html">Here's the demo</a></P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00210.html">Later demo</a></P>

<P>
Tom also pointed out later that unlike 
<CODE>perldoc</CODE>, these tools don't have to parse Pod except in a very simple and
rudimentary way.  Brad Appleton put in that the 
<CODE>Pod::Select</CODE>module would do the same sort of parsing, and Tom replied that it was
entirely useless for disgorging documentation, because it is between 
fifty and a hundred times slower than the naive approach, and nobody wants to use
a documentation program that takes ten seconds to cough up
the documentation.  
</P>

<P>
Brad says that 
<CODE>Pod::Parser</CODE> could be made faster, but I wonder if it can really be made faster
enough.  On one of my tests, Tom's little cheap script outperformed 
<CODE>Pod::Select</CODE> by a factor of <b>185</b>.  Brad also asked for help on this; people
 interested in speeding up 
<CODE>Pod::Parser</CODE> should contact him.
</P>

<P>
Brad also asked for help in extending the test suite for these
modules.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00035.html">Brad's call for assistance.</a></P>

<P>

<H4><a name="Editorial_Opinion_Section">Editorial Opinion Section</a></H4>

</P>

<P>
Discussions like this last make me think there's something seriously
wrong with Pod.  It was designed as a simple, readable format.  But if
it takes that long to parse it fully, then the plan has failed,
because the parsing should not be so difficult.
</P>

<P>
The new batch of Pod translating modules that Brad Appleton and Russ
Allbery have been working on have been under development for <em>years</em>.
That shouldn't have happened.  And I don't think it's the fault of
Brad and Russ; I think it's that Pod itself is badly designed, and
turns out to be much harder to handle than it looks at first.  I've
tried on several occasions to write Pod and Pod-like translators, and
that's what I've found.
</P>

<P>
Pod is very nice in some ways, but it has severe problems.  The goal
was to have a documenation system that was easy for people to read,
easy for people to write, and easy for programs to handle and
translate.  It wins on the first two; Pod is much easier to read or
write than anything comparable.  But for algorithmic processing, it
seems that there are two options: You can run quick and dirty and
ignore most of the details, or you can get everything right at the
expense of using a surprisingly large amount of code and running
extremely slowly.
<blockquote><p><b>Ben:</b> <code>perldoc</code> needs anoverhaul.</p> <p><b>Tom:</b> It shall be completely obliterated,replaced by a fa&ccedil;ade.</p> </blockquote></P>

<P>

<H4><a name="Mark_Fishers_man_Replacement">Mark Fisher's <code>man</code> Replacement</a></H4>

</P>

<P>
Mark Fisher announced that he had written a 
<CODE>man</CODE>-like tool for Perl.  Unfortunately, it is not available yet.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00205.html">Mark's announcement</a></P>

<P>
Randal Schwartz suggested that whatever becomes of 
<CODE>perldoc</CODE>, that 
<CODE>perl -man</CODE> invoke the documentation system.  He points out that many corporate
IT folks get the 
<CODE>perl</CODE> binary installed correctly, and omit all the support programs like 
<CODE>perldoc</CODE>.
<H4><a name="Pod::Parser_Output_Model"><code>Pod::Parser</code> Output Model</a></H4>

</P>

<P>

Ton Hospel asked if 
<CODE>Pod::Parser</CODE> was doing all it needed to.  At present, it just parses up the pod at
 the lowselt level and gives you back a list of tags.  Then it is up
 to the translator program to decide what to do with them.  Ton asks
 if perhaps 
<CODE>Pod::Parser</CODE> should be more involved with policy.  For example, consider this:
</P>

<P>

</P>

</P><PRE>
        =begin comment
     
        foo
</PRE>

</P><PRE>
        =head 1
</PRE>

</P><PRE>
        =end comment
</PRE>

<P>

Everything between the 
<CODE>=begin comment</CODE> and 
<CODE>=end comment</CODE> directives is ignored.  Now consider this:
</P>

</P><PRE>
        =begin comment
     
        foo
</PRE>

</P><PRE>
        =cut
</PRE>

</P><PRE>
        sub foo { ... }
</PRE>

</P><PRE>
        =head 1
</PRE>

</P><PRE>
        =end comment
</PRE>

<P>
Does the 
<CODE>comment</CODE> section continue all the way to the 
<CODE>=end comment</CODE> directive, or does it stop at the 
<CODE>=cut</CODE> directive?
</P>

<P>
Ton suggests that 
<CODE>Pod::Parser</CODE> might generate a more abstract data tree representation of the
 document structure, and that the translators would work from that,
 instead of from the current lower-level representation, which is
 essentially a token stream.  That way different translators would not
 make different policy decisions about these sorts of issues.
</P>

<P>
Larry said he had thought for some time that there should be a
canonical Pod-to-XML translator, and said that people kept agreeing to
write one eventually.
<H4><a name="roffitall"><code>roffitall</code></a></H4>

</P>

<P>

A recent change to 
<CODE>Pod::Man</CODE> broke the 
<CODE>roffitall</CODE> program, which is another entry in the software-nobody-knows-about
category.  
<CODE>roffitall</CODE> lives in the 
<CODE>pod/</CODE> directory in the source tree, and when you run it, it 
 takes <em>all</em> the pods and turns them into one monster 1,400-page
 postscript file 
 with all the documentation in the world, including documentation for
 the standard modules, and a table of contents that it generated.
Did you know that?  I didn't.
</P>

<P>
That is the end of the report on the gigantic multithread about 
<CODE>perldoc</CODE> and related matters.
<H3><a name="Patches_to_perlre">Patches to <code>perlre</code></a></H3>

</P>

<P>

Tom Christiansen submitted a major update to 
<CODE>perlre</CODE>. 
</P>

<P>
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-04/msg01128.html">The patch is here.</a></P>



<H3><a name="mktablesPLNeeds_Work"><code>mktables.PL</code> Needs Work</a></H3>

<P>

<CODE>unicode/lib/mktables.PL</CODE> is the program that generates the code-number-to-name mapping tables
 for unicode, so that you can say 
<CODE>\N{BLACK SMILING FACE}</CODE> and get the black smiling face character; it also generates the
 property lists so that you can say 
<CODE>\p{IsUpper}</CODE> to indicate any uppercase unicode character.    Larry identified a
 number of problems with this program that need to be addressed before
 5.6.1.  
</P>

<P>
Nobody replied, so if you're interested in helping, here's a chance to
be a hero.
</P>

<P>

<blockquote><b>Larry:</b> Anyway, anybody have any tuits thisweek?  I don't, and this really needs to get straightened outsoon.  Besides it's Perl hacking, not C hacking, and that'ssupposed to be fun. </blockquote></P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00062.html">Read about it.</a></P>

<P>

<H3><a name="Jarkko_is_Still_Trying_to_Give_Away_the_Configure_Pumpkin">Jarkko is Still Trying to Give Away the <code>Configure</code> Pumpkin</a></H3>

</P>

<P>
Would you like become an Important Person?  Here's your opportunity.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00208.html">Jarkko provides some details about what is required.</a></P>

<P>

<H3><a name="Pushing_into_Hashes">Pushing into Hashes</a></H3>

</P>

<P>
Brett Denner suggested that 
</P>

</P><PRE>
        push %hash, key => value, key2 => value2;
</PRE>

<P>
be allowed. 
</P>

<P>
Response was generally negative.  Some points people brought up: There
is already an easy way to do that:
</P>

</P><PRE>
        @hash{key1, key2} = (value1, value2)
</PRE>

<P>
It creates an unfulfilled expectation that 
<CODE>pop</CODE>, 
<CODE>shift</CODE>, and 
<CODE>unshift</CODE> will also work on hashes.  It creates an unfulfilled expectation that 
</P>

</P><PRE>
        %hash = (apple => 'red');
        push %hash, apple => 'green';
</PRE>

<P>
will <em>not</em> overwrite 
<CODE>'red'</CODE>as in the array case.  Whatever meaning you want it to have is
easily provided by a subroutine:
</P>

</P><PRE>
        sub hashpush(\%@) {
          my $hash = shift;
          while (@_) {
            my $key = shift;
            $hash->{$key} = shift;
          }
        }
</PRE>

<P>
This has come up before, and Yitzchak Scott-Thoennes reminded us that
the outcome then was that
</P>

</P><PRE>
        %hash = (%hash, key => value, ...);
</PRE>

<P>
should be optimized.  Any volunteers?
<H3><a name="Damians_Assignment_Overloader">Damian's Assignment Overloader</a></H3>

</P>

<P>

Damian Conway has a module that is supposed to provide a simple
interface to overloading assignment semantics, and in particular to
provide typed variables by preventing assignment of anything other
than a certain kind of object to a particular variable.  For example:
</P>

</P><PRE>
        use Class::ifiedVars;
</PRE>

</P><PRE>
        classify $var => 'ClassName';
</PRE>

<P>

Now if you try to assign a value to 
<CODE>$var</CODE> that is not an object of type 
<CODE>ClassName</CODE> or one of its subclasses, you get a run-time error.
</P>

<P>
There are a lot of other features also.  Damian plans to change the
name to something less abnormal.
<!-- fucked-up --></P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00272.html">Details here.</a></P>

<P>
Ilya asked how this was different from the 
<CODE>PREPARE</CODE> method of 
</P>

</P><PRE>
        my Dog $snoopy;
</PRE>

<P>
Damian replied that it was orthogonal to it.  For example:
</P>

</P><PRE>
        my Dog $snoopy;
        $snoopy = Alligator->new();
        $snoopy->pat();      # Invokes Alligator::pat
        $snoopy->{age}++;    # Might update the wrong field
</PRE>

<P>
Someone asked where 
<CODE>PREPARE</CODE> was documented.  Ilya replied that due to a bug in 5.6.0, it was
unimplemented.  
</P>

<P>

<a href="http://www.perl.com/pub/1999/12/p5pdigest/THISWEEK-19991226.html#Another_return_of_PREPARE">Previous discussion of <code>PREPARE</code>.</a></P>

<P>
Damian and Ilya got into an extended exchange about whether or not the
module was a good idea.  This resulted in Peter Scott asking when the
refereeing would be put in place.
<H3><a name="Various">Various</a></H3>

</P>

<P>

A large collection of bug reports, bug fixes, non-bug reports,
questions, answers, and a small amaount of flamage and spam. 
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<P>

</P>

<hr>

<a href="mailto:mjd-perl-thisweek-200005+@plover.com">Mark-Jason Dominus</a>


