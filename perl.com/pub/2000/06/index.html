<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: June 2000 Archives</title>


    <link rel="prev" href="/pub/2000/05/" title="May 2000" />
    <link rel="next" href="/pub/2000/07/" title="July 2000" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">June 2000 Archives</h1>





                            
                            <div id="entry-1702" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/p5pdigest/THISWEEK-20000625.html" rel="bookmark">This Week on p5p 2000/06/25</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2000-06-25T00:00:00-08:00">June 25, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            </P>

<P>


<!-- This week on perl5-porters (19-25 Jun 2000) -->

<br />
<br /><ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Method_Lookup_Speedup_">Method Lookup Speedup </a>
  <li><a href="#trCU_and_trUC_Removed"><code>tr///CU</code> and <code>tr///UC</code> Removed</a>
  <li><a href="#is_utf8_string"><code>is_utf8_string</code></a>
  <li><a href="#Byte_Order_Marks_Return">Byte-Order Marks Return</a>
  <li><a href="#packU"><code>pack("U")</code></a>
  <li><a href="#Lexical_variables_and_eval">Lexical variables and <code>eval()</code></a>
  <li><a href="#FILEGV"><code>FILEGV</code></a>
  <li><a href="#perlhacktut"><code>perlhacktut</code></a>
  <li><a href="#perlutilpod"><code>perlutil.pod</code></a>
  <li><a href="#Missing_Methods">Missing Methods</a>
  <li><a href="#Suppress_prototype_mismatch_warnings">Suppress prototype mismatch warnings</a>
  <li><a href="#Autoloaded_Constants_not_Inlined">Autoloaded Constants not Inlined</a>
  <li><a href="#libpm"><code>lib.pm</code></a>
  <li><a href="#use_English"><code>use English</code></a>
  <li><a href="#Numeric_opens_in_IPC::Open3">Numeric opens in <code>IPC::Open3</code></a>
  <li><a href="#Regex_Bug">Regex Bug</a>
  <li><a href="#Foo_isa_Foo"><code>Foo isa Foo</code></a>
  <li><a href="#READMEhpux"><code>README.hpux</code></a>
  <li><a href="#my___PACKAGE___obj_"><code>my __PACKAGE__ $obj</code> ...</a>
  <li><a href="#asdgasdfasd">asdgasdfasd</a>
  <li><a href="#Various">Various</a>
</ul>

      <H3><a name="Notes">Notes</a></H3>


</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>mjd-perl-thisweek-YYYYMM@plover.com</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
</P>

<P>
This week's report is a little late because I went to San
Diego Usenix, and then I went to YAPC in Pittsburgh (probably the only
person on the continent stupid enough to try to do both) and then I
went back to Philadelphia and was driven to Washington DC for a party
and came back on the train.  
</P>

<P>
I was going to say it was a quiet week on the list.  But it wasn't.
It was merely a low-traffic week.  It wasn't quiet at all; all sort of
useful and interesting stuff was posted, and there was an unusually
high signal-to-noise ratio.  
</P>

<P>
This week has been named 'Doug MacEachern and Simon Cozens' week.
Thank you Doug and Simon, and also everyone else who contributed to
the unusually high signal-to-noise ratio this week.
</P>

<P>

<H3><a name="Method_Lookup_Speedup_">Method Lookup Speedup </a></H3>

</P>

<P>
More discussion of Doug's patch of last week. 
</P>

<P>

<a href="/pub/2000/06/p5pdigest/THISWEEK-20000618.html#Method_Call_Speedups">Previous summary</a></P>

<P>
Last week, some people pointed out
that it would fail in the presence of code that modifies 
<CODE>@ISA</CODE> at runtime; Sarathy suggested a pragma that would promise that this
 would not happen.  Nick suggested that 
<CODE>use base</CODE> could do that.
</P>

<P>
Doug submitted an updated patch.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00491.html">Updated patch</a></P>

<P>

</P>

<P>
For your delectation, Simon Cozens wrote up an extensive explanation
of the patch and how it works, including many details about the Perl
internals.  If you are interested in the Perl internals (and you
should be) then this is strongly recommended reading.
</P>

<P>

<a href="/pub/2000/06/dougpatch.html">The explanation.</a></P>

<P>
I would like very much to run other articles of the same type in the
future.  This should be construed as a request for people to
contribute them.  They don't have to be as complete or detailed as
Simon's.
</P>

<P>
Thank you very much, Simon.
</P>

<P>

<H3><a name="trCU_and_trUC_Removed"><code>tr///CU</code> and <code>tr///UC</code> Removed</a></H3>

</P>

<P>
Simon, who has been working on the line discipline feature, got rid
of the nasty 
<CODE>tr///CU</CODE> feature, which Larry had already decided was a bad idea and should be
 eliminated.  
<H3><a name="is_utf8_string"><code>is_utf8_string</code></a></H3>

</P>

<P>

Simon also added a function named 
<CODE>is_utf8_string</CODE> that checks a string to make sure it is valid UTF8.  The plan is that
 if Perl is reading a putatively UTF8 file, it can check the input
 before setting the UTF8 flag on the resulting scalar.
</P>

<P>

<H3><a name="Byte_Order_Marks_Return">Byte-Order Marks Return</a></H3>

</P>

<P>
Simon submitted an improved patch for this.  This one just has the lexer use 
<CODE>tell()</CODE> to see if the putative byte-order mark is at the very beginning of
the file.  
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00466.html">The new patch</a></P>

<P>

<a href="/pub/2000/06/p5pdigest/THISWEEK-20000618.html#Byte_Order_Marks_Continue">Previous summary</a></P>

<P>

<H3><a name="packU"><code>pack("U")</code></a></H3>

</P>

<P>
A few weeks ago there was discussion of what this should do.
</P>

<P>

<a href="/pub/2000/05/p5pdigest/THISWEEK-20000528.html#packU">Previous summary</a></P>

<P>
Simon submitted a patch that implemented an idea of Larry's:  That a 
<CODE>U</CODE> at the beginning of the pack template indicates that the result of 
<CODE>pack</CODE> will be a UTF8 string; anything else indicates a byte string.  THis
 means (for example) that you can put 
<CODE>U0</CODE> at the beginning of any pattern to force it to produce UTF8; if you
 want to start with 
<CODE>U</CODE>  but have the result be bytes, add a do-nothing 
<CODE>C0</CODE> at the beginning instead.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00467.html">The patch.</a><H3><a name="Lexical_variables_and_eval">Lexical variables and <code>eval()</code></a></H3>

</P>

<P>

Yitzchak Scott-Thoennes reported on a number of puzzles related to the
interaction of these features, including:
</P>

</P><PRE>
        { my $x; sub incx { eval '++$x' } }
</PRE>

<P>
Here 
<CODE>incx</CODE> apparently increments the lexical variable; he expected it to
 increment the global variable.  (Rationale:  The lexical variable
 should be optimized away.)
</P>

<P>
Rick Delaney referred to
<a href="http://www.deja.com/[ST_rn=ps]/getdoc.xp?AN=545654855&fmt=text">a relevant article by Ilya in clp.misc.</a></P>

<P>

Yitzchak says that code in a subroutine should not be able to alter
lexical variables in a more outer scope, unless it is a closure, which 
<CODE>incx</CODE> here is not.  Rick presents the following counterexample:
</P>

<P>

</P>

</P><PRE>
        my $Pseudo_global = 2;
</PRE>

</P><PRE>
        sub double {
          my ($x) = @_;
          eval '$x * $Pseudo_global';
        }
</PRE>

<P>
Discussion seemed inconclusive.  No patches were offered.
</P>

<P>
I said that I had done some research a while back about what Scheme
and Common Lisp do in this sort of case, and that I would report back
with a summary, but I have not done so.
</P>

<P>

<H3><a name="FILEGV"><code>FILEGV</code></a></H3>

</P>

<P>
There was some discussion about the 
<CODE>FILEGV</CODE> macro.  When Perl compiles the op tree, the line and file information
 is stored in a GV.  Or rather, it used to be so; now, if you compile
 with ithreads, it just uses strings.  There were some macros, 
<CODE>*FILEGV</CODE>, to access this GV, but according to Sarathy, they was mostly used to
get at the filename, and there is a more straightforward macro family, 
<CODE>*FILE</CODE>, which gets the filename directly.  Doug MacEachern wanted to use the
original macro in 
<CODE>B::Graph</CODE>, although I was not sure why; Sarathy said that probably 
<CODE>B::Graph</CODE> needed to be fixed.
</P>

<P>

<H3><a name="perlhacktut"><code>perlhacktut</code></a></H3>

</P>

<P>
Simon contributed the first half of a document titled 
<CODE>perlhacktut</CODE>, a tutorial on hacking the Perl core.  It talks about how to get
started and what to read, provides an overview of Perl's large
subsystems, and the begining of a discussions of Perl's basic data
types and op trees.
</P>

<P>
If you are interested in the Perl internals (and you should be) then
this is strongly recommended reading.  (Gosh, that sounds familiar.)
</P>

<P>

</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00577.html">First draft.</a></P>

<P>

<H3><a name="perlutilpod"><code>perlutil.pod</code></a></H3>

</P>

<P>

Simon also contributed a document describing the utility programs that cmoe
packaged with Perl, such as 
<CODE>perldoc</CODE>, 
<CODE>pod2html</CODE>, 
<CODE>roffitall</CODE>, and 
<CODE>a2p</CODE>.
</P>

<P>
Quite a busy week for Simon.  
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00505.html"><code>perlutil</code></a></P>

<P>

<H3><a name="Missing_Methods">Missing Methods</a></H3>

</P>

<P>
Martyn Pierce pointed out that if you have code like this:
</P>

</P><PRE>
        Foo->new('...');
</PRE>

<P>
it might fail for two reasons:  because the 
<CODE>Foo</CODE> class does not define that method, or because you forgot to put 
<CODE>use Foo</CODE> in your program.  In both cases the message is 
</P>

</P><PRE>
        Can't locate object method "new" via package "Foo" ...
</PRE>

<P>
Martyn suggested that in the second case, it could add a remark like
</P>

</P><PRE>
        (perhaps you forgot to load module "Foo"?)
</PRE>

<P>
However, he did not provide a patch.
</P>

<P>
I also wonder why it says 'object method' when it is clearly a class
method.  I did not provide a patch either.  This would be an excellent
first patch for someone who wanted to get started patching.  Write to
me if you are interested in looking into it but do not know where to
begin. 
</P>

<P>

<H3><a name="Suppress_prototype_mismatch_warnings">Suppress prototype mismatch warnings</a></H3>

</P>

<P>
Doug MacEachern discovered lots and lots of subroutine declarations in 
<CODE>Socket.pm</CODE> that were there only to predeclare a bunch of autoloaded constants
 like 
<CODE>AF_INET</CODE>.  The only purpose for the declarations was to prevent 'prototype
mismatch' warnings from occurring when the constants were actually
autoloaded at run time.  He then put in a patch to suppress the
warning, if it appears that the subroutine will be autoloaded later,
and removed the 20K of constant sub declarations in 
<CODE>Socket.pm</CODE>.
<H3><a name="Autoloaded_Constants_not_Inlined">Autoloaded Constants not Inlined</a></H3>

</P>

<P>

Doug also discovered that these autoloaded constants' values are not
inlined, because the code that uses them is compiled before the
subroutine is loaded.  Doug produced a patch to 
<CODE>Exporter.pm</CODE> that lets you specify a name with a leading 
<CODE>+</CODE> sign in the 
<CODE>use</CODE> line to indicate that the subroutine should be invoked once (and
 hence autoloaded) immediately, when the module is loaded, so that
 they can be inlined into the following code.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00573.html">The patch.</a></P>

<P>

<H3><a name="libpm"><code>lib.pm</code></a></H3>

</P>

<P>

Doug MacEachern decided that it was a shame that 
<CODE>lib.pm</CODE> has to pull in all of 
<CODE>Config.pm</CODE>, so he recast 
<CODE>lib.pm</CODE> as a script, 
<CODE>lib.pm.PL</CODE>, which generates the real 
<CODE>lib.pm</CODE> at install time, inserting the appropriate values of 
<CODE>$CONFIG</CODE> variables inline.  
</P>

<P>
(Many other utilities, such as 
<CODE>perlcc</CODE> and 
<CODE>pod2html</CODE>, are generated this way at present.  Do 
<CODE>ls */*.PL</CODE> in the source directory to see a list.)
<H3><a name="use_English"><code>use English</code></a></H3>

</P>

<P>

Barrie Slaymaker contributed a patch so that you can now say
</P>

</P><PRE>
        use English '-no_match_english';
</PRE>

<P>
and it will import all the usual long names for the punctuation
variables, 
<em>except</em>  for 
<CODE>$`</CODE>, 
<CODE>$&</CODE>, and 
<CODE>$'</CODE>, which slow down your regexes.  If you don't supply this flag, then
those  variables are separately aliased via an 
<CODE>eval</CODE> statement.
</P>

<P>
This has been a long time coming---I thought it had been done already.
</P>

<P>
There was a long sidetrack from having to do with some unimportant
style issue, which should have been carried out in private email, or
not at all.
<H3><a name="Numeric_opens_in_IPC::Open3">Numeric opens in <code>IPC::Open3</code></a></H3>

</P>

<P>

Frank Tobin submitted a patch that allows the user of 
<CODE>IPC::Open3</CODE> to request that any of the 'files' to be opened be an already open
 file descriptor, analogous to the way 
<CODE>open FH, "<&=3"</CODE> works with regular 
<CODE>open</CODE>. 
</P>

<P>

<H3><a name="Regex_Bug">Regex Bug</a></H3>

</P>

<P>
Ian Flanigan found a very upsetting bug in the regex engine.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00627.html">Read about it.</a><H3><a name="Foo_isa_Foo"><code>Foo isa Foo</code></a></H3>

</P>

<P>

Johan Vromans complained that
</P>

</P><PRE>
        my $r = "Foo";
        UNIVERSAL::isa($r, "Foo::");
</PRE>

<P>
returns true.  Johan does not like that 
<CODE>$r</CODE> (which is a string) 
is reported to be a member of class 
<CODE>Foo</CODE>.  It was pointed out that the manual explicitly says that 
<CODE>UNIVERSAL::isa]</CODE> may be called as a class method, to determine whether one class was a
 subclass of another, in which case it could be invoked as
</P>

</P><PRE>
        Foo->isa('Foo')
</PRE>

<P>
which is essentially the same as Johan's example, and which returns
true because the class 
<CODE>Foo</CODE> is (trivially) 
a subclass of itself.
</P>

<P>
Johan said 'Yuck.'
</P>

<P>

<H3><a name="READMEhpux"><code>README.hpux</code></a></H3>

</P>

<P>
Jeff Okamoto updated it again.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00531.html">Here it is.</a><H3><a name="my___PACKAGE___obj_"><code>my __PACKAGE__ $obj</code> ...</a></H3>

</P>

<P>

Doug MacEachern submitted a patch to enable this.  The patch came in
just barely before the end-of-the week cutoff, and has already been a
lot of discussion of it in the past two days, so I am going to defer
talking about it any more until my next report.
</P>

<P>
Should you want to look at it before then, 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00628.html">here it is.</a></P>

<P>

<H3><a name="asdgasdfasd">asdgasdfasd</a></H3>

</P>

<P>

Some anonymous person running as root submitted a bug report (with 
<CODE>perlbug</CODE>) that only said 'asdgasdfasd'.  Martyn Pearce replied that it was not
a bug, but a feature.
</P>

<P>

<H3><a name="Various">Various</a></H3>

</P>

<P>
A large collection of bug reports, bug fixes, non-bug reports,
questions, answers, and a very small amount and spam.  No serious
flamage however.  
</P>

<P>
This is the end of the month, so I will summarize: I filed 97 messages
in the 
<CODE>junk</CODE> folder, 311 in the 
<CODE>misc</CODE> folder, and 329 messages in 45
various other folders pertaining to particular topics.
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:mjd-perl-thisweek-200006+@plover.com">Mark-Jason Dominus</a>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1700" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/p5pdigest/THISWEEK-20000618.html" rel="bookmark">This Week on p5p 2000/06/18</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2000-06-17T00:00:00-08:00">June 17, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            

<!-- This week on perl5-porters (12-18 June 2000) -->

<br />
<br />
<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Method_Call_Speedups">Method Call Speedups</a>
  <li><a href="#More_Attempts_to_Make_B::Bytecode_Faster">More Attempts to Make <code>B::Bytecode</code> Faster</a>
  <li><a href="#Byte_Order_Marks_Continue">Byte-Order Marks Continue</a>
  <li><a href="#Slurp_Bug">Slurp Bug</a>
  <li><a href="#EPOC_Port">EPOC Port</a>
  <li><a href="#READMEhpux"><code>README.hpux</code></a>
  <li><a href="#Paths_in_MacPerl">Paths in MacPerl</a>
  <li><a href="#Non_destructed_anonymous_functions">Non-destructed anonymous functions</a>
  <li><a href="#Extensions_required_for_regression_tests">Extensions required for regression tests</a>
  <li><a href="#Eudora_Problem">Eudora Problem</a>
  <li><a href="#crypt_docs"><code>crypt</code> docs</a>
  <li><a href="#Magic_Auto_Decrement">Magic Auto-Decrement</a>
  <li><a href="#Various">Various</a>
</ul>


      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>mjd-perl-thisweek-YYYYMM@plover.com</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
</P>

<P>
This week's report is a little early, because I am going to San Diego
Usenix tomorrow.  Next week's report will cover anything I missed this
week, and may be late, since I will just have gotten back from YAPC.
</P>

<P>
A really mixed bag this week.  Great work from Doug McEachern,
Nicholas Clark, and Simon Cozens, and a lot of wasted yakkity yak from
some other people.
</P>

<P>

<H3><a name="Method_Call_Speedups">Method Call Speedups</a></H3>

</P>

<P>
Doug McEachern wrote a patch to implement a compile-time optimization:
Class method calls, and method calls on variables that have a declared
class (as with 
<CODE>my Dog $spot</CODE>) have the code for the method call rewritten as if you had requested
an ordinary subroutine call.  For example, if you have
</P>

</P><PRE>
        my Class $obj = ...;
        $obj->method(...);
</PRE>

<P>
and the 
<CODE>method</CODE> that gets called is actually 
<CODE>Parent::method</CODE>, then Perl will pretend that you actually wrote
</P>

</P><PRE>
        my Class $obj = ...;
        Parent::method($obj, ...)
</PRE>

<P>
instead.  Doug found that the method calls did get much faster---in
some cases faster than regular subroutine calls.  (I don't understand
how this can possibly be the case, however.)  One side benefit (or
maybe it's a malefit?) of Doug's approach is that you can now enable
prototype checking on method calls.
</P>

<P>
A lot of work remains to be done here.  Doug's patch does not actually
speed up method calls; it replaces method calls with regular
subroutine calls.  It would be good to see some work done on actually
making method calls faster.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00441.html">The patch.</a></P>

<P>

</P>

<P>

<H3><a name="More_Attempts_to_Make_B::Bytecode_Faster">More Attempts to Make <code>B::Bytecode</code> Faster</a></H3>

</P>

<P>
The whole point of 
<CODE>B::Bytecode</CODE> is to speed up the startup time of Perl programs.  Two weeks ago Benjamin
 Stuhl reported that bytecoded files are actually 
<em>slower</em> than regular source files, probably because the bytecoded files are
 so big that it takes a lot of time to read them in.
</P>

<P>

<a href="/pub/2000/06/p5pdigest/THISWEEK-20000604.html#B::Bytecode_is_Ineffective">Previous Summary</a></P>

<P>
Nicholas Clark looked into compressing the bytecode files.  He fixed
[Byteloader.xs] so that it was a true filter, and could be installed
atop another filter; in this case one that decompressed gzipped data.  
</P>

<P>
It didn't work; the decompression overhead made the compressed
bytecode files even slower than the uncompressed byecode files.
Time Bunce pointed out that this is a bad test, since a lot of the
modules that the byte compiler and byte loader will load are things
that a larger script would have needed anyway, but that were not
present at all in Nicholas' 
<CODE>hello.pl</CODE> test.
<blockquote><b>Nickolas Clark:</b><ol><li> Currently byte code is far to large compared with its script. (I think someone else mailed the list with improvements that reducethe amount of op tree information saved as bytecode, which should help) <li> For a simple script bytecode is slower than pure perl. <li> Using a general purpose data compression algorithm (zipdeflation) Bytecode only compresses by a factor of 3, which still leaves it much larger than its script. <li> Decompression filters written in perl run very slowly. (butare much easier to write than those in C) <li> Although a decompression filter written in C is much faster, it still  doesn't quite match the speed of reading and parsing thebytecode, let alone the original script (for this example). However, it'sclose to uncompressed bytecode. </ol></blockquote></P>

<P>

Nicholas' message contained many other interesting details about
bytecodes.  
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00403.html">Read about it.</a></P>

<P>

<H3><a name="Byte_Order_Marks_Continue">Byte-Order Marks Continue</a></H3>

</P>

<P>
Simon produced another revision to his patch to make Perl
automatically handle
source code written in various flavors of Unicodings.  He went to a
lot of work to get the lexer to recognize the BOMs only at the very
beginning of the file.  (One startling trivium here:  If you have
</P>

</P><PRE>
        ...some code here...
        #line 1
        #!/usr/bin/perl -wT
        ...more code...
</PRE>

<P>
The 
<CODE>#line 1</CODE> fools the lexer into thinking that what follows is the first line,
and then Perl interprets the `command-line' options on the following
comment even though they're not really on the first line of the file.)
</P>

<P>

<blockquote><b>Simon:</b>Yes, the part in pp_ctl <em>does</em> have to be this complicated and order is important. If you're going to lie to the lexer, you have to be pretty damned convincing.</blockquote></P>

<P>

Apparently Simon later posted a different revision that was simpler
and used 
<CODE>tell</CODE> to see if the BOM was really at the beginning of the file, but it
 didn't appear on p5p.
</P>

<P>

<H3><a name="Slurp_Bug">Slurp Bug</a></H3>

</P>

<P>
Last month Joey Hess reported a bug in Perl's slurping; it was reading
line by line and it shouldn't have been.  
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg00746.html">Original report and test case.</a></P>

<P>

Nobody has investigated this yet, and Sarathy said that was a pity,
which I think whould be interpreted as a hint that someone should have
a look at it.
<H3><a name="EPOC_Port">EPOC Port</a></H3>

</P>

<P>

Olaf Flebbe posted some enhancements to his port for EPOC, 
which is an OS for palmtops and mobile phones.  (See 
<CODE>README.epoc</CODE> in the Perl distribution for more details.)
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00364.html">The patch.</a><H3><a name="READMEhpux"><code>README.hpux</code></a></H3>

</P>

<P>

</P>

<P>
Jeff Okamoto contributed a new one.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00381.html">Here it is.</a></P>

<P>

<H3><a name="Paths_in_MacPerl">Paths in MacPerl</a></H3>

</P>

<P>
Last week Peter Prymmer contributed a large patch 
that attempts to make the test suite 
work better on Macintoshes by replacing a lot of Unix-style pathnames
like 
<CODE>'../lib'</CODE> with constructions of the form 
<CODE>($^O eq 'MacOS') ? '::lib:' : '../lib'</CODE>.  This sparked a discussion about better ways to approach this 
problem.  Chris Nandor suggested a 
<CODE>paths.pl</CODE> file which the suite could retquire that would set up the path
strings correctly.  He pointed out that if this library were in the
same directory as the script that required it, the 
<CODE>require</CODE> would work on any platform.  He also said that having native support
 for path translations was probably a bad idea.  (This would mean that 
<CODE>require 'foo/bar.pm'</CODE> would actually load
<CODE>foo:bar.pm</CODE>, which is the 'right thing' unless what you actually wanted
was to require a file named 
<CODE>foo/bar.pm</CODE>.)
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00325.html">Matthias reported on what he actually does do in MacPerl.</a></P>

<P>

It appeared that the issue about what to do about the test suite went
unresolved.  I do not know yet if Peter's big patch went in.
</P>

<P>

<H3><a name="Non_destructed_anonymous_functions">Non-destructed anonymous functions</a></H3>

</P>

<P>
Last week Rocco Caputo reported that his blessed coderefs were not
being 
<CODE>DESTROY</CODE>ed, even at interpreter shutdown time.  Nick Ing-Simmons produced an
explanation.   I suppose it could be called a feature.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00340.html">The explanation.</a></P>

<P>

<H3><a name="Extensions_required_for_regression_tests">Extensions required for regression tests</a></H3>

</P>

<P>
Nicholas Clark pointed out that if you don't build all the Perl
standard extension modules, some of the regression tests fail, and
that the regression tests shouldn't depend on the extension modules
unless they are explicitly testing the extension modules.
</P>

<P>
For example, the 
<CODE>io/openpid.t</CODE> test file wants to use the 
<CODE>Fcntl</CODE> module; if you decided not to build 
<CODE>Fcntl</CODE>, it barfs.  Nick offered to make a patch, and Sarathy agreed it owuld
be a good idea.  I have not seen the patch appear yet.
</P>

<P>

</P>

<P>

<H3><a name="Eudora_Problem">Eudora Problem</a></H3>

</P>

<P>
The problem with Eudora mangling patch files turns out to be more
complicated than I originally reported.  If you use Eudora, you should
probably read the following discussion.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00290.html">Eudora discussion. </a><H3><a name="crypt_docs"><code>crypt</code> docs</a></H3>

</P>

<P>

Ben Tilly made a trivial change to the documentation for the 
<CODE>crypt</CODE> function that sparked a long and irrelevant discussion about password
security policy.
</P>

<P>

<H3><a name="Magic_Auto_Decrement">Magic Auto-Decrement</a></H3>

</P>

<P>

The idle and pointless magic decrement discussion continued.
</P>

<P>

<H3><a name="Various">Various</a></H3>

</P>

<P>
A large collection of bug reports, bug fixes, non-bug reports,
questions, answers, and a small amount and spam.   I think there was
flamage, but it was in the thread I skipped.
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:mjd-perl-thisweek-200006+@plover.com">Mark-Jason Dominus</a>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1686" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/commify.html" rel="bookmark">Return of Program Repair Shop and Red Flags</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2000-06-17T00:00:00-08:00">June 17, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- Return of Program Repair Shop and Red Flags -->

<br />
<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

 <LI><A HREF="#unprogramming">Unprogramming</A></LI>
 <UL>

  <LI><A HREF="#computing the remainder">Computing the remainder</A></LI>
  <LI><A HREF="#splitting the input into chunks">Splitting the Input Into Chunks</A></LI>
  <LI><A HREF="#assembling the result">Assembling the Result</A></LI>
 </UL>

 <LI><A HREF="#red flags">Red Flags</A></LI>
 <UL>

  <LI><A HREF="#eliminate synthetic code">Eliminate synthetic code</A></LI>
  <LI><A HREF="#beware of special cases in loops">Beware of special cases in loops</A></LI>
  <LI><A HREF="#don't apply string operations to numbers">Don't apply string operations to numbers</A></LI>
 </UL>

</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="unprogramming">Unprogramming</A></H1>
<P>A few weeks ago I got mail from Bruce, a former student who wanted to
take a number like <CODE>12345678</CODE> that had come out of a database, and to
format it with commas for printing in a report, as <CODE>12,345,678</CODE>.  I
referred him to the solution in the <CODE>perlfaq5</CODE> man page, but the
solution there uses a rather bizarre repeated regex, and perhaps
that's why he decided to do it himself.  Here's the code he showed me:</P>
<PRE>
     1  sub conversion
     2  {
     3     $number = shift;
     4     $size = length($number);
     5     $result = ($size / 3);
     6     @commas = split (/\./, $result);
     7     $remain = ($size - ($commas[0] * 3));
     8     $pos = 0;
     9     $next = 0;
    10     $loop = ($size - $remain);
    11     while ($next &lt; $loop)
    12     {
    13        if ($remain &gt; 0)
    14        {
    15           $section[$pos] = substr($number, 0, $remain);
    16           $next = $remain++;
    17           $remain = 0;
    18           $pos++;
    19        }
    20        $section[$pos] = substr($number, $next, 3);
    21        $next = ($next + 3);
    22        $pos++;
    23     } 
    24     $loop = 0;
    25     @con = ();
    26     foreach (@section) 
    27     {
    28        $loop++;
    29        $cell++;
    30        @tens = split (/:/, $_);
    31        $con[$cell] = $tens[0];
    32        if ($loop == $pos)
    33        {
    34           last;
    35        }
    36        $cell++;
    37        $con[$cell] = &quot;,&quot;;
    38     }
    39     return @con;
    40  }</PRE>
<P>Bruce described this as ''Probably pretty crude and bulky.''  I'd have
to agree.  40 lines is pushing the limit for a readable function, and
there's no reason why something this simple should have to be so
large.  Bruce has done a lot of programming work here and produced a
lot of code; let's see if we can unprogram some of this and end up
with less code than we started with.</P>

<P>
<!-- <A NAME="computing the remainder">Computing the remainder</A> -->
<PRE>
    5      $result = ($size / 3);
    6      @commas = split (/\./, $result);
    7      $remain = ($size - ($commas[0] * 3));</PRE>
<P>Right up front is probably the single weirdest piece of code in the
whole program.  I know it's weird because the first time I saw it I
realized what it did right away, but when I revisited the program a
couple of weeks later, I couldn't figure it out at all.  Bruce knows that the digits in the
original number will be divided into groups of three, with a group of
leftover digits at the beginning. He wants to know how many digits,
possibly zero, will be in that first group.  To do that, he needs to divide
by three and find the remainder.</P>

<P>Bruce has done something ingenious here: The code here divides
<CODE>$size</CODE> by 3, and supposes that the result will be a
decimal number.  Then it gets the integer part with
<CODE>split</CODE>, splitting on the decimal point character!</P>
<P>Perl already has a much simpler way to get the remainder: The
<CODE>%</CODE> operator:</P>
<PRE>
        $remain = $size % 3;   # This gets the remainder after division.</PRE>
<P>It's also worth remembering that Perl has an <CODE>int()</CODE> function which
throws away the fractional part of a number and returns the integer
part . This is essentially what the <CODE>split</CODE> was doing here.</P>
<P>A useful rule of thumb is that it's peculiar to treat a number like a
string, and whenever you do pattern matching on a number, you should
be suspicious.  There's almost always a more natural way to get the
same result.  For example</P>
<PRE>
        if ($num =~ /^-/) { it is less than zero }</PRE>
<P>is bizarre and obfuscatory; it should be</P>
<PRE>
        if ($num &lt; 0) { it is less than zero }</PRE>
<P>
<!-- <A NAME="splitting the input into chunks">Splitting the Input Into Chunks</A> -->
<PRE>
     8     $pos = 0;
     9     $next = 0;
    10     $loop = ($size - $remain);
    11     while ($next &lt; $loop)
    12     {
    13        if ($remain &gt; 0)
    14        {
    15           $section[$pos] = substr($number, 0, $remain);
    16           $next = $remain++;
    17           $remain = 0;
    18           $pos++;
    19        }
    20        $section[$pos] = substr($number, $next, 3);
    21        $next = ($next + 3);
    22        $pos++;
    23     }</PRE>
<P>Now here we have a <CODE>while</CODE> loop with an <CODE>if</CODE> condition inside it.
The <CODE>if</CODE> condition is that <CODE>$remain</CODE> be positive.  Inside the <CODE>if</CODE>
block, <CODE>$remain</CODE> is set to 0, and it doesn't change anywhere else in
this section of code.  So we can deduce that the `if' block will only
be executed on the first trip through the loop, because after that,
<CODE>$remain</CODE> will be 0.</P>
<P>That suggests that we should do the <CODE>if</CODE> part <EM>before</EM> we start the
loop, because then we won't have to test <CODE>$remain</CODE> every time.  Then the
structure is simpler, because we can move the <CODE>if</CODE> block out of the
<CODE>while</CODE> block, and even a little shorter because we don't need the
code that manages <CODE>$remain</CODE>:</P>
<PRE>
    $next = 0;
    $pos = 0;
    if ($remain &gt; 0)
    {
       $section[$pos] = substr($number, 0, $remain);
       $next = $remain + 1;
       $pos++;
    }</PRE>
<PRE>
    $loop = ($size - $remain);
    while ($next &lt; $loop)
    {
       $section[$pos] = substr($number, $next, 3);
       $next = ($next + 3);
       $pos++;
    }</PRE>
<P>In the <CODE>while</CODE> loop we see another case of a common beginner error I
pointed out in the last article.  Whenever you have a variable like
<CODE>$pos</CODE> that only exists to keep track of where the end of an array is,
you should get rid of it.  Here, for example, the only use for <CODE>$pos</CODE> is
to add a new element to the end of <CODE>@section</CODE>.  But the <CODE>push</CODE> function
does that already, without needing <CODE>$pos</CODE>.  Whenever you have code that
looks like</P>
<PRE>
        $array[$pos] = SOMETHING;
        $pos++;</PRE>
<P>you should see if it can be replaced with</P>
<PRE>
        push @array, SOMETHING;</PRE>
<P>97% of the time, it <EM>can</EM> be replaced.   Here, the result is:</P>
<PRE>
    $next = 0;
    if ($remain &gt; 0)
    {
       push @section, substr($number, 0, $remain);
       $next = $remain + 1;
    }</PRE>
<PRE>
    $loop = ($size - $remain);
    while ($next &lt; $loop)
    {
       push @section, substr($number, $next, 3);
       $next = ($next + 3);
    }</PRE>
<P>At this point in the code, I had an inspiration.  <CODE>$pos</CODE> was just a
special case of a more general principle at work.  In every program,
there are two kinds of code.  Every bit of code is either naturally
related to the problem at hand, or else it's an accidental side effect
of the fact that you happened to solve the problem using a digital
computer.  This second kind of code is just scaffolding.  The goal of
all programming is to reduce this accidental, synthetic code so that
the natural, essential code is more visible.</P>
<P><CODE>$pos</CODE> is a perfect example of synthetic code.  It has nothing to do
with adding commas to an input.  It's only there because we happened
to use an array to hold the chunks of the original input, and arrays
are indexed by numbers.  Array index variables are almost always
synthetic.</P>
<P>Good languages provide many ways to reduce synthetic code.  Here's an
example.  Suppose you have two variables, <CODE>a</CODE> and <CODE>b</CODE>, and you want
to switch their values.  In C, you would have to declare a third
variable, and then do this:</P>
<PRE>
        c = b;
        b = a;
        a = c;</PRE>
<P>The extra variable here is totally synthetic.  It has nothing at all
to do with what you really want to do, which is switch the values of
<CODE>a</CODE> and <CODE>b</CODE>.  In Perl, you can say</P>
<PRE>
        ($a, $b) = ($b, $a);</PRE>
<P>and omit the synthetic variable.</P>
<P>It's funny how sometimes it can be so much easier to think about
something once you have a name for it.  Once I had this inspiration
about synthetic code, I suddenly started seeing it everywhere.  I
noticed right away that <CODE>$next</CODE> and <CODE>$loop</CODE> were synthetic, and I
started to wonder if I couldn't get rid of them.  Not only are they
both synthetic, but they're used for the same purpose, namely to
control the exiting of the <CODE>while</CODE> loop.   Two variables to
control one loop is excessive; in most cases you only need one
variable to control one loop.  If there are two, as in this case, it's
almost always possible to eliminate one or combine them.
Here it turns out that <CODE>$loop</CODE> is just useless, and we could have been
using <CODE>$size</CODE> instead.  <CODE>$size</CODE> is rather
natural, because it's simply the length of the input, and
using <CODE>length($number)</CODE> is more natural still.</P>
<PRE>
    if ($remain &gt; 0)
    {
       push @section, substr($number, 0, $remain);
    }
    $next = $remain;</PRE>
<PRE>
    while ($next &lt; length($number))
    {
       push @section, substr($number, $next, 3);
       $next += 3;
    }</PRE>
<P>Now the condition on the while loop is much easier to understand,
because there's no peculiar and meaningless <CODE>$loop</CODE> variable: ``While
the current position in the string is not past the end, get another
section.''</P>
<P>I also changed <CODE>$next = $next + 3</CODE> to <CODE>$next += 3</CODE> which is more
concise.</P>
<P>Now we have two variables, <CODE>$next</CODE> and <CODE>$remain</CODE>, which only overlap
at once place, and at that one place (the assignment) they mean the
same thing.  So let's let one variable do the work of two:</P>
<PRE>
    if ($remain &gt; 0)
    {
       push @section, substr($number, 0, $remain);
    }</PRE>
<PRE>
    while ($remain &lt; length($number))
    {
       push @section, substr($number, $remain, 3);
       $remain += 3;
    }</PRE>
<P>The code is not going to get much simpler than this.  We have turned twelve
lines into five.</P>
<P>
<H2><A NAME="assembling the result">Assembling the Result</A></H2>
<PRE>
    24     $loop = 0;
    25     @con = ();
    26     foreach (@section) 
    27     {
    28        $loop++;
    29        $cell++;
    30        @tens = split (/:/, $_);
    31        $con[$cell] = $tens[0];
    32        if ($loop == $pos)
    33        {
    34           last;
    35        }
    36        $cell++;
    37        $con[$cell] = &quot;,&quot;;
    38     }
    39     return @con;
    40  }</PRE>
<P>Here we want to construct the result list, <CODE>@con</CODE>, from the list that
has the sections in it.  I couldn't understand what the <CODE>@tens</CODE> array
is for, or why the code is looking for <CODE>:</CODE> characters, which don't
normally appear in numerals.  The original program turns <CODE>1234:5678</CODE>
into <CODE>123,4,678</CODE>, which I can't believe was what was wanted.  I asked
Bruce what he was up to here, but I didn't have enough context to
understand  his
response---I had the impression that it was an incompletely
implemented feature.  So I took it out and left behind a comment.</P>
<P><CODE>$cell</CODE> is another variable whose only purpose is to track the length
of an array, so we can eliminate it by using <CODE>push</CODE> the same way we
did before:</P>
<PRE>
    foreach (@section) 
    {
       $loop++;
       push @con, $_;
       # Warning: no longer handles ':' characters

       if ($loop == $pos)
       {
          last;
       }
       push @con, ',' ;
    }
    return @con;</PRE>
<P>Now the only use of the <CODE>$loop</CODE> variable is to escape the loop before
adding a comma to the last element.  Let's simply get rid of it.  Then
when we leave the loop, there is an extra comma at the end of the
array, but it's easier to clean up the extra comma afterwards than it
was to keep track of the loop:</P>
<PRE>
    foreach (@section) 
    {
       push @con, $_, ',';
    }
    pop @con;
    return @con;</PRE>
<P>Again, I don't think this loop is going to get much smaller.</P>
<P>What we have now looks like this:</P>
<PRE>
    # Warning: No longer handles ':' characters
    sub conversion 
    { 
      my ($number) = @_;
      my $remain = length($number) % 3;

      if ($remain &gt; 0)
      {
         @section = (substr($number, 0, $remain));
      }

      while ($remain &lt; length $number)
      {
         push @section, substr($number, $remain, 3);
         $remain += 3;
      }

      foreach (@section) 
      {
         push @con, $_, ',';
      }
      pop @con;
      return @con;
    }
</PRE>
<P>This is a big improvement already, but more improvement is possible.
<CODE>@section</CODE> is a synthetic variable; it's only there so we can loop
over it, and then we throw it away at the end.  It would be better to
construct <CODE>@con</CODE> directly, without having to build <CODE>@section</CODE> first.
Now that the code is so simple, it's much easier to see how to do
this.  In the original program, one loop breaks the input into chunks,
and the other loop inserts commas.  We can replace these two loops
with a single loop that does both tasks, so that this:</P>
<PRE>
      while ($remain &lt; $size)
      {
         push @section, substr($number, $remain, 3);
         $remain += 3;
      } 

      foreach (@section) 
      {
         push @con, $_, ',';
      }</PRE>
<P>Becomes this:</P>
<PRE>
      while ($remain &lt; $size)
      {
         push @con, substr($number, $remain, 3), ',';
         $remain += 3;
      }
</PRE>
<P>Eliminating the second loop means that the special case <CODE>if</CODE> block at
the beginning must insert its own comma if it is exercised:</P>
<PRE>
      if ($remain &gt; 0)
      {
         push @con, substr($number, 0, $remain), ',';
      }</PRE>
<P>Eliminating the second loop also has the pleasant side effect of
making the function faster, since it no longer has to make two passes
over the input.  The finished version of the function looks like this:</P>
<PRE>
    # Warning: No longer handles ':' characters
    sub conversion 
    { 
      my ($number) = @_;
      my $size = length($number);
      my $remain = $size % 3;
      my @con = ();

      if ($remain &gt; 0)
      {
         push @con, substr($number, 0, $remain), ',';
      }

      while ($remain &lt; $size)
      {
         push @con, substr($number, $remain, 3), ',';
         $remain += 3;
      }

      pop @con;
      return @con;
    }
</PRE>
<P>This is a big win.  A 30-line function has turned into a 12-line function.
Formerly, it had nine scalar variables and four arrays; now it has
three scalars and one array.  If we wanted, we could reduce it more by
eliminating <CODE>$size</CODE>, which is somewhat synthetic, and using
<CODE>length($number)</CODE> in the rest of the function instead.
The gain seemed smaller, so I didn't choose to do it.</P>
<P>In good code, the structure of the program is in harmony with the
structure of the data.  Here the structure of the code corresponds
directly to the structure of the result we are trying to produce.  We
wanted to turn an input like <CODE>12345678</CODE> into an output like <CODE>12 ,
345 , 678</CODE>.  There is a single <CODE>if</CODE> block up front to handle the
special case of the initial digit group, which might be different from
the other groups, and then there is a single <CODE>while</CODE> loop to handle
the rest of the groups.</P>
<P>The really funny thing about this code is that I hardly had to use any
of Perl's special features at all.  The cleanup came entirely from
reorganizing the existing code and removing unnecessary items.  Of
course, Perl features like <CODE>push</CODE> made it easy to eliminate synthetic
variables and other code that would have been necessary in other
languages.</P>
<P>For a more 'Perlish' (and unfortunately obfuscated) solution to this
problem see the FAQ.</P>
<P>
<HR>
<H1><A NAME="red flags">Red Flags</A></H1>
<P>A red flag is a warning sign that something is wrong. When you see a
red flag, you should immediately consider whether you have an
opportunity to make the code cleaner. I liked this program because it
raised many red flags.</P>
<P>
<H2><A NAME="eliminate synthetic code">Eliminate synthetic code</A></H2>
<P>Some parts of your program relate directly to the problem you are
trying to solve.  This is natural code.  But some parts of the program
relate only to other parts of the program; this is synthetic code.  An
example is a loop control variable.  You can tell from its name that
it's synthetic.  It's not there to solve your problem; it's there to
control a loop, and the <EM>loop</EM> is there to help solve the
problem.  You might care about the loop, but the control variable is
an inconvenience, only there for bookkeeping.</P>

<P>
<H2><A NAME="beware of special cases in loops">Beware of special cases in loops</A></H2>
<P>If you have a loop with a special test to do something on the first or
last iteration, you may be able to get rid of it.  First-iteration
code can often be hoisted out of the loop into a separate
initialization section.  Last-iteration code can often be hoisted down
and performed after the loop is finished.  If the loop runs a little
too much code, undoing the extra is often simpler than trying to
escape the loop prematurely.</P>


<P>
<H2><A NAME="don't apply string operations to numbers">Don't apply string operations to numbers</A></H2>
<P>Treating a number as a string of digits is a bizarre thing to do,
because the digits themselves don't really have much to do with the
value of the number.  Doing so creates a string version of the numeric
quantity, which usually means you went down the wrong path, because
Perl numbers are stored internally in a numeric form that should
support all the numeric operations you should want.</P>
<P>If you used a regex, or <CODE>split</CODE>, <CODE>substr</CODE>, <CODE>index</CODE>, <CODE>length</CODE>, or
any other string function on a number, that is a red flag.  Stop and
consider whether there might be a more natural and robust way to do
the same thing using only numeric operations.  For example, this is
bizarre:</P>
<PRE>
        if (length($number) &gt; 3) { large number }</PRE>
<P>It is more natural to write this instead:</P>
<PRE>
        if ($number &gt;= 1000)      { large number }</PRE>

<P>An exception to this is when you really are treating a number as a
string, such as when you're writing it into a fixed-width field.
Examples of both cases occur in the program in this article.
In the original, using <code>split</code> to
compute the modulus operator was unnatural.
In the final version, we do indeed apply <code>length()</code> and <code>substr()</code>
to <code>$number</code>, but that's because we really do want to treat the
number as a digit string, splitting it up into groups of three digits
and inserting commas.</p>

<p>  Still, the red flag is there, and so we should
see what happens if we heed it, and try to replace <code>length()</code> and
<code>substr()</code> with truly numeric operations.  The result:</p>

<pre>
        # Warning: No longer handles ':' characters.
        sub convert {
          my ($number) = shift;
          my @result;
          while ($number) {
            push @result, ($number % 1000) , ',';
            $number = int($number/1000);
          }
          pop @result;      # Remove trailing comma
          return reverse @result;
        }
</Pre>

<p>Notice again how it's easier to pop an extra comma off the end of
<CODE>@result</CODE> afterwards than it is to special-case the first
iteration of the loop to avoid adding the comma in the first place.
The code now has eight lines, one scalar, and one array.  I think
this qualifies as a win!  The lesson to learn here is:  When in doubt,
try writing it
both ways!</p>

</BODY>

</HTML>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1698" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/p5pdigest/THISWEEK-20000611.html" rel="bookmark">This Week on p5p 2000/06/11</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2000-06-13T00:00:00-08:00">June 13, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- This week on perl5-porters (5-11 June 2000) -->

<br />
<br /><ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Byte_Order_Marks">Byte-Order Marks</a>
  <li><a href="#Magic_Auto_Decrement">Magic Auto-Decrement</a>
  <li><a href="#Bug_Reports">Bug Reports</a>
  <ul>
  <li><a href="#Core_Dump_I">Core Dump I</a>
  <li><a href="#Core_Dump_II">Core Dump II</a>
 <!--  <li><a href="#Exit_status_obliterated_by_system_after_exit">Exit status obliterated by <code>system()</code> after <code>exit()</code></a>-->
  <li><a href="#Class::Struct_objects_misbehave_with__gt;isa"><code>Class::Struct</code> objects misbehave with </code>-&gt;isa()</code></a>
  <li><a href="#Data::Dumper_Weirdness"><code>Data::Dumper</code> Weirdness</a>
  <li><a href="#Blessed_coderefs_never_DESTROYed">Blessed coderefs never <code>DESTROY</code>ed</a>
  <li><a href="#Code_compiled_incorrectly">Code compiled incorrectly</a>
  </ul>
  <li><a href="#MacPerl_Test_Suite_Patches">MacPerl Test Suite Patches</a>
  <li><a href="#Why__is_not_ignored_in_comments_in_x_constructions">Why <code>/</code> is not ignored in comments in <code>/.../x</code> constructions</a>
  <li><a href="#Various">Various</a>
</ul>

      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>mjd-perl-thisweek-YYYYMM@plover.com</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
</P>

<P>
Next week's report will be late, since I will be bending space and
time to attend both San Diego Usenix 
<em>and</em> YAPC.  If the fabric of the universe survives my ill-advised meddling,
the reports should resume the following week.
</P>

<P>
This was the quietest week I can remember.    Very little seemed to happen.
<H3><a name="Byte_Order_Marks">Byte-Order Marks</a></H3>

</P>

<P>

Unicode files may  begin with  the special Unicode character U+FEFF.
That is so that if the byte order gets reversed somehow (as with a
big-endian to little-endian transformation) you can recognize that
that has happened because the initial character will be U+FFFE, which
is guaranteed to never be assigned.
</P>

<P>
Tim Burlowski saved a Perl program file with the UTF8 encoding
under windows, 
and when he tried to run the script, Perl complained about the initial
U+FEFF.  (
<CODE>Unrecognized character \xEF...</CODE>, because U+FEFF encodes to 
<CODE>"\xEF\xBB\xBF"</CODE> under UTF-8.)  Tim asked if Perl shouldn't know to ignore this.
Sarathy agreed, and Simon provided a patch, which also enables Perl to
read a UTF-16-encoded source code file.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00193.html">The patch. </a><H3><a name="Magic_Auto_Decrement">Magic Auto-Decrement</a></H3>

</P>

<P>

Someone asked why there isn't one.  This sparked a long discussion of
how it might work.  (What is 
<CODE>'a'--</CODE>?  What is 
<CODE>'aAa00'--</CODE>?)
</P>

<P>
There was a lot of idle discussion, and no patch, so probably nobody
really cares.
<H3><a name="Bug_Reports">Bug Reports</a></H3>

</P>

<P>

Richard Foley coughed up a lot of bug reports that had gotten lost
somehow.  So there was a lot of miscellaneous stuff.  Some of the bug
reports related to configuration errors, and some were genuine.  Some
attracted patches, others did not.  It seemed to me that this batch of
bug reoprts contained more than the usual number of weird oddities.
For example:
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00182.html">Weird oddity.</a></P>

<P>
Some of the non-oddities that remain unfixed follow.  In an attempt to
encourage more people to try to fix bugs, I tried here to
select some bugs that seemed not too difficult to solve. 
So if you have ever wanted to become a Perl core hacker and you wanted
a not-too-hard task to start on, the following bugs might be good
things to work on.
</P>

<P>
If you are interested in trying to fix one of these, and you need
help, or you don't know how to start, please do send me email and I
will try to assist you.
<H4><a name="Core_Dump_I">Core Dump I</a></H4>

</P>

<P>

Here is a bug that makes Perl dump core.  Sarathy reduced
Wolfgang Laun's small test case to a very small test case. 
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00145.html">Test Case.</a></P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00262.html">Another Test Case.</a><H4><a name="Core_Dump_II">Core Dump II</a></H4>

</P>

<P>

Here is another  core dump, this one on an improper pseudohash reference.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00126.html">Test Case.</a>

<!--
<H4><a name="Exit_status_obliterated_by_system_after_exit">Exit status obliterated by <code>system()</code> after <code>exit()</code></a></H4>

</P>


<P>
If you call 
<CODE>system()</CODE> in an 
<CODE>END</CODE> block or in a 
<CODE>DESTROY</CODE> call during final destruction, the program's exit status (as supplied
 to 
<CODE>exit</CODE>) is destroyed.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00172.html">Test Case.</a>
-->

<H4><a name="Class::Struct_objects_misbehave_with__gt;isa"><code>Class::Struct</code> objects misbehave with </code>-&amp;gt;isa()</code></a></H4>

</P>

<P>

If 
<CODE>$foo</CODE> is a 
<CODE>Class:Struct</CODE> object, and you call 
<CODE>->isa('UNIVERSAL')</CODE> on it, you get the correct answer (true) the first time, and the
 wrong answer (false) on subsequent calls.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00191.html">Test Case.</a></P>

<P>

<H4><a name="Data::Dumper_Weirdness"><code>Data::Dumper</code> Weirdness</a></H4>

</P>

<P>
Victor Insogna got weird output from 
<CODE>Data::Dumper</CODE>.  The test cae is very simple but it's not entirely clear to me
whether the bug is in 
<CODE>Data::Dumper</CODE> itself or if Perl is actually constructing a bizarre value.  
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00214.html">Test Case.</a></P>

<P>

<H4><a name="Blessed_coderefs_never_DESTROYed">Blessed coderefs never <code>DESTROY</code>ed</a></H4>

</P>

<P>

</P>

<P>
Rocco Caputo reported that if you bless a coderef into a package with
a destructor function, the destructor is never called, not even at
program termination.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00276.html">Test Case.</a></P>

<P>

<H4><a name="Code_compiled_incorrectly">Code compiled incorrectly</a></H4>

</P>

<P>
Barrie Slaymaker reported that in 5.6.0,
</P>

</P><PRE>
        1 while ( $a = ( $b ? 1 : 0 ) )
</PRE>

<P>
appears to be compiled as if you had written 
</P>

</P><PRE>
        '???' while defined($a = $b ? 1 : 0)
</PRE>

<P>
apparently as an incorrect application of the same transformation that
makes
</P>

</P><PRE>
        while (readdir D) 
</PRE>

<P>
into 
</P>

</P><PRE>
        while (defined(readdir D))
</PRE>

<P>

<H3><a name="MacPerl_Test_Suite_Patches">MacPerl Test Suite Patches</a></H3>

</P>

<P>
Peter Prymmer sent a big patch that attempts to make the test suite
work better on Macintoshes by replacing a lot of Unix-style pathnames
like 
<CODE>'../lib'</CODE> with constructions of the form 
<CODE>($^O eq 'MacOS') ? '::lib:' : '../lib'</CODE>.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00258.html">The patch.</a></P>

<P>
 
<H3><a name="Why__is_not_ignored_in_comments_in_x_constructions">Why <code>/</code> is not ignored in comments in <code>/.../x</code> constructions</a></H3>

</P>

<P>
People are often surprised that 
</P>

</P><PRE>
        $string =~ m/a+
                     foo  # some comment here that mentions /
                     w{3}
                    /x;
</PRE>

<P>
is a syntax error; the 
<CODE>/</CODE> in the 'comment' terminates the regex prematurely.  They expected it
to be ignored, since it is in a comment. 
</P>

<P>
The way Perl handles 
<CODE>/.../x</CODE> is that it parses the regex as usual, and locates the terminating
slash as usual, and then hands off the regex to the regex engine for
parsing,  with a flag saying 'by the way, this regex was marked with
the 
<CODE>/x</CODE> modifier.  The regex is then parsed accordingly.  But The main Perl
 parser is totally unaware of the meaning of 
<CODE>/x</CODE> and in particular it uses the same old logic to determine where the
 end of the regex is, and doesn't realize that it is supposed to
 ignore the 'comment'.  In other words, the comment is a comment for
 the regex compiler, but not for the Perl parser.
</P>

<P>
This is well-known to many people, and I mention it here because Ben
Tilly came up with a really nice example of why this problem can't be
'fixed'.  Here it is:
</P>

</P><PRE>
        if ($foo =~ /#/) {
          # Do something
        }
        # Time passes
        print "eg.  In DOS you would use /x instead of -x\n";
</PRE>

<P>

</P>

<P>
Now, where does that regex end?
<H3><a name="Various">Various</a></H3>

</P>

<P>

A large collection of bug reports, and a small collection of bug
fixes, non-bug reports, questions, answers, and spam.  No flames and
little discussion.
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:mjd-perl-thisweek-200006+@plover.com">Mark-Jason Dominus</a>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1690" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/perlwhirl.html" rel="bookmark">Adventures on Perl Whirl 2000</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Adam Turoff</span> on <abbr class="published" title="2000-06-13T00:00:00-08:00">June 13, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- <A NAME="adventures on perl whirl 2000">Adventures on Perl Whirl 2000</A> -->

<br />
<br />
<P>Can a tech conference on a luxury cruise boat possibly be legitimate?
Sure it is, and then some.</P>

<P>This past Memorial Day, I joined about 200 attendees on Perl Whirl
2000, the inaugural Geek Cruise.  All in all, we found that not
only was there a mind-blowingly good set of tutorials available,
but there was more time to meet and chat with fellow Perl hackers
than there is at most conferences.</P>

<P>Honestly, I knew I was going on the Perl Whirl, but the idea
took a while to set in.  When I received my tickets, it still
seemed unreal.  When I started packing my bags, it seemed like
just another conference.  When I boarded the plane, it was just
another trip.  When I arrived at my hotel in Vancouver, reality
began to set in: I'm going on a Cruise.  To Alaska.  Talking
about Perl all along the way.  Soon, we would board Holland America's
m.s. Volendam and kick off Perl Whirl 2000.</P>

<P>From the very beginning, the cruise exuded a palpable air of calm.
Gone was the normal harried conference mentality where every minute
is either spent agonizing over which great presentation to attend
or which great conversation to continue in the hall.  From the
moment we left the harbor, everyone had a laid-back attitude, as
if to say ``I can find you later, we have a week together and plenty
of time to talk''.  And that made all the difference.</P>

<P>Anyone who thought this wasn't a serious conference was in for a
big surprise.  Although there were many social events, sometimes
starting at 10 or 11 PM, the tutorials started at 8:30am and continued
until 5 PM.  (The schedule was just packed, and I'm not the only
one who was hurting around 8am, especially when we had to adjust
our clocks into and out of Alaska Time.)  Three full days of tutorials
were offered across three to five tracks, with the middle day being
split into two half-day chunks.  Ten extra hours of conference
programming were available in roughly ninety-minute chunks before
dinner on some nights.  Then there was the B-Movie marathon.  Then there
were the cocktail parties.  Then there were all of the other 
events organized by the ship's cruise director.  Yes, the schedule
was truly packed.</P>

<P>Even with such a dense schedule, there was plenty of time to
unwind.  We could all eat a nice long, lingering dinner in the main
dining room (or take dinner on the Lido deck in shorts and T-shirts,
or just order room service), and gradually reconvene in the Crow's
Nest after dinner for a few drinks (or not), and lots of after-dinner
conversation until the dusk finally gave way to pre-dawn twilight
around 3am.</P>

<P>What were the seminars themselves like?  Some of the presenters
were incredibly popular, like Mark-Jason Dominus, Tom Christiansen,
Tim Bray and Lincoln Stein.  The bits and pieces I sat through were
simply stellar, without exception.  Many people I talked to echoed
the common conference complaint, ``there's too much good stuff to
see, and too many great presentations conflict with each other''.  
Sadly, every conference organizer heard this before, and such
conflicts are bound to appear as soon as a schedule is produced.</P>

<P>While I didn't sit through most of the seminar program, I did sit
through the entire pre-dinner program.  Here attendees got to hear
some great things people are doing with Perl.  The first pre-dinner
talk was by Steven Roberts who talked about his Microship project.
Some people may remember Steve as the man behind Behemoth, the
recumbent bicycle and trailer with more computing power than an
average dentist's office.  Steve's current project is a pair of
boats with similar amounts of computing power that will soon travel
the inland and coastal waters of the United States.  Steve's team
recently realized that projects such as this live and die on
volunteer effort, and while it is quite easy to find Perl hackers
to write and upgrade Perl CGI programs, it is quite difficult to
find  NewtonScript programmers willing to donate their time to a
project like this.  This observation drove Steve and his team to
replace a Newton-based management console with a simple web browser
running against an on-board linux-based web server.</P>

<P>Steve's talk went over incredibly well, and I was among a small
group of people on the boat who couldn't stop talking about it all
week.  The enthusiasm behind this ninety minute presentation was so much
more than expected that it helped everyone involved with GeekCruises
realize that we never set aside any time for BOFs (``birds of a
feather'' sessions).  Once again, the unharried, laid-back atmosphere
came back to help us, and we found a block of time that didn't
conflict with any other programming and just met beside the pool
(conveniently placed near a totally unhealthy amount of dessert).</P>

<P>Two nights later, we were privileged to hear John Clutterbuck
discuss how Perl saved the Land Registry System in Scotland,
displacing Java, cross-platform toolkits and 4GL environments in
the process.  The crux of John's talk was about implementing a
typical n-tier client-server system.  Instead of using a more
``traditional'' tool like Java, Visual Basic or other such
environments, John's team used Perl/TK to create graphical client
programs.  One of the major reasons why Perl was a good choice for
this project was that Perl was already in use internally to munge
incoming data feeds.  When it was time to implement this project,
Perl/TK was not another new skill requiring downtime and retraining;
it was just another library to use alongside the DBI.</P>

<P>There were other great non-seminar presentations.  Tim Bray talked
about standards, standards organizations, and encouraged everyone
to complain loudly when our vendors don't implement standards that
matter to us, implement them poorly, or misimplement them
intentionally.  The next night, Larry Wall guest-hosted Jon Orwant's
Internet Quiz show, which was quite fun.  The cruise program wound up
about a day later, when Larry was available for an open-ended question
and answer session.  This Q&amp;A was quite refreshing, because the
questions were frequently deep, often thought-provoking, and always
brought out an honest, uncensored answer from Larry (unless his 
wife Gloria pre-empted him).</P>

<P>Oh, did I mention that this was a cruise?  With all these Perl-ish
events all week, it was easy to forget at times that we were in the
midst of some of the most beautiful parts of North America.  While we
were cruising north, we witnessed an endless parade of tree-lined
mountains of British Columbia and Alaska.  Our itinerary also brought
us into Glacier Bay, where we saw the big ice break apart in the morning
and watched for whales in the afternoon.</P>

<P>And what's the point of cruising to Alaska if you're not going to
get off the boat and actually see Alaska?  Our itinerary offered
three ports of call.   Our first port was Juneau, the largest city
in southeast Alaska.  Although Juneau may be too small to have a
Kinko's, it is plenty large enough to have one of the finest
breweries in North America.  Around forty Perl Whirl passengers
gathered together to go on a Pub Crawl over Juneau while we were
docked.  Our first stop was the Alaska Brewing Company, voted best
brewery in America three years running at the Great American Beer
Festival (they are now enshrined in the GABF's ``Hall of Foam'').
After leaving the brewery, we visited some other local watering
holes and passed by the wondrous Mendenhall Glacier.  Our crawl
ended up near the dock at the Mt. Roberts tram.  At the top of Mt.
Roberts, we found ourselves in bright sunlight at 9 PM on the last
day in May, making snowballs behind the observation deck.  When
life gives you a chance to make snowballs in Alaska when it's warm
enough to wear shorts and sandals, it's best to take advantage 
of the opportunity.</P>

<P>The next day, we found ourselves in Skagway, a small town north of
Juneau where the main industry is obviously tourism.  The helicopter
pad at the end of the dock says so loud and clear.  At this point
in our travels, I must admit that I welcomed a quiet day wandering
through this small town, perhaps reading a bit of the Cryptonomicon
on a sunny patch of turf.  After a quick stroll, I bumped into Tom
Christiansen, who asked me if I was up for a little walk.  I
briefly forgot that Tom lives in Boulder, Colorado; when he says
``little walk'', most other people interpret that as ``a hike in the
woods''.  I joined Tom, and we had a wonderful afternoon wandering
through a lush green trail that started at the edge of Skagway.
When we reached our destination, we were surrounded by on all sides
by the largest fjord in North America.  All in all, it was the most
enjoyable day I spent on the cruise.</P>

<P>After our wanderings through Glacier Bay, we wound up in Ketchikan,
our last port of call.  I decided it was time wander aimlessly with
my friends Monty and Julie Taylor.  Julie peeled off early that
morning and would later catch a 34-inch salmon on a fishing excursion.
Monty and I were up for some local flavor and eventually found
Anabelle's, a great little restaurant that serves a stunningly good
seafood chowder and beer-battered halibut and chips.  Paired with a
fresh pint or two of Alaskan Amber, and this is easily the best meal
I had all week, and the chefs on board the Volendam provided some
stiff competition.  If I ever return to Ketchikan, you can find me at
Anabelle's.</P>

<P>Speaking of excursions, I didn't sign up for any mountain bike
rides, helicopter rides, sea-plane tours, hikes or fishing.  Lots
of people did, but I'm a city boy who likes meandering through
town, and the occasional hike in the woods.  And I had a great time
doing just that.</P>

<P>All in all, I had a wonderful time on Perl Whirl 2000.  The Perl
was great and Alaska was too (or maybe the other way around).  Will
I return to Alaska again?  Perhaps.  Will I return to Alaska on a
future Perl Whirl?  Just try and stop me.</P>

<HR>

<!-- Editor's Notes -->

<ul>

<li>If you haven't seen it already, you might want to check out
<a
href="http://www.oreillynet.com/pub/a/network/2000/06/06/geekcruise.html">the
31 things Tim Bray learned on the cruise</a>.  It has pictures,
including one of Larry in one of his many tuxedos.

<li>It turns out to be surprisingly easy to keep up an 8 AM - 11 PM
schedule when the sun doesn't start setting until 9 PM and then comes
up again at 3 AM.  

<li>I can attest to the laid-back attitude on the cruise.  Everyone I
met was kind and friendly, which isn't always the case at shorter
conferences in less delightful venues.  

<li>In Glacier Bay, if you were quiet, you could hear the glacier
creaking and popping as it slid into the sea.  I had heard stories of
glaciers calving, which is when a piece breaks off and falls into the
water.  (This is where icebergs come from.)  I had always imagined
that this was a comparatively rare event, that if you watched the
glacier every moment for a whole day, you might, if you were lucky,
see a piece break off.  Wrong!  Stuff is breaking off the glacier all
the time and you only have to watch for a few minutes before something
happens.  

<li>Downsides of the cruise ship: Sometimes other cruise activities
interfered with the conference.  For example, Dori Smith's Javascript
class was held in a small room just off the main dining room, where a
wine-tasting session was in progress, and it was hard to hear Dori
over the amplified voice of the wine expert.  Similarly, one of my
classes was in the room immediately adjacent to the
casino---fortunately there was a door I could use to shut out the slot
machine racket.

<li>My favorite cruise story: I got to interrupt my regex class so that we
could rush over to the windows and look at the whales off the side of
the ship.

<li>Finally:  Adam says it was easy to forget  that we were in the
midst of some of the most beautiful parts of North America.  It wasn't
easy for me to forget, and I spent most of my free time just staring
out of various windows.

</ul>

<p><i>--Mark Dominus</i></p>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1692" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/rosler.html" rel="bookmark">ANSI Standard Perl?</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Joe Johnston</span> on <abbr class="published" title="2000-06-06T00:00:00-08:00">June  6, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- ANSI Standard Perl? -->
<h3>An Interview with HP's Larry Rosler</h3>

<br />
<br />

<P><I>Larry Rosler was both editor of the draft standard and 
chairman of the Language Subcommittee for X3J11. He helped put 'ANSI' 
in front of C. He is also just another Perl hacker. Larry recently took time
out of his busy schedule to share his thoughts on the value of standards, 
how Sun ought to handle Java and optimizing Perl code.   
</I></P>

<P><B>What's your background? How did you get interested in computers?</B></P>

<P><B>LR</B>: 
My formal education was in physics; my research field was
experimental nuclear physics.  However, I soon learned that I was more
interested in the equipment used to gather and analyze the data than in the
physics.  The equipment was essentially a digital computer, but there
were no degrees in computer science in those days.</P>

<P>In my first major job, with Bell Labs in New Jersey, I worked on
solid-state devices.  I found that simulation was faster
than building and measuring test devices.  When others began to use the
programs I wrote, I realized that my greatest professional satisfaction
would be as a software 'toolmaker'.
So I switched to building tools such as graphical design
terminals, and then focused on programming languages and libraries.</P>

<P><B> I was taught by several "hardware" guys who got into 
       programming somewhat reluctantly. Do you feel that 
       novice programmers lose an important perspective without 
       knowing what goes on under the hood?
</B></P>

<P><B>LR</B>:
I taught the first course on C at Bell Labs, using a draft of K&R, which
helped vet the exercises.  The students were hardware engineers who
were being induced to learn programming.  They found C (which is
'portable assembly language') much to their liking.  Essentials such as
pointers are very clear if you have a machine model in mind.</P>

<P>Perl is at a higher level of abstraction, so the machine model isn't as
necessary <I>at first</I>.  But when you get to complex data structures, which
require references (which are like pointers in C, but much safer), a grounding in
addressing becomes useful.</P>

<P>In an ideal world, a student would first learn an abstract assembly
language such as MIX (see Knuth, Vol. 1), do some useful exercises, then
take on a higher-level language with the machine model in the back of
the head.</P>

<P><B>  When did you run into Perl? What did you think of the language
 the first time you saw it?</B></P>

<P><B>LR</B>: I am a relative latecomer to Perl.  
I was experimenting with CGI programming
using shell scripts (!) because they were better for rapid prototyping than
C.  Soon I discovered that Perl offered
advantages similar to the shell, but was much more expressive (particularly in
the manipulation of data structures) and much faster to execute.</P>

<P>Because of my familiarity with Unix commands such as 'sed', which made heavy
use of regular expressions, and because of my C experience, I was quite
comfortable with Perl syntax.  The hardest adjustment was to learn to write
code with as few Perl operations as possible, because of the costs of
dispatching each instruction.  The Benchmark module became the most
important tool I used to learn how to write efficient (and hence, sometimes
elegant) Perl.  I also learned a lot from the newsgroup comp.lang.perl.misc,
to which I eventually became able to contribute.</P>

<P><B> Often Perl claims to be efficient in the scarce resource of the
       programmer's time. It isn't often that people tune scripts for 
       optimum performance. Are there a few tips you can give to new 
       Perl programmers on how squeak out a little better runtime performance?
</B></P>

<P><B>LR</B>:
'Script' <code>ne</code> 'program'.  
When dealing with data sets that will grow (one hopes and expects),
performance becomes important.
I proposed a tutorial to Perl Conference 4.0 this year on this subject,
but it wasn't accepted.  Maybe next year.</P>

<UL>
<LI>0.  Don't optimize prematurely!

<LI>1.  Don't use an external command where Perl can do a task internally.

<LI>2.  Refine the data structures and algorithms.  References:  The
Practice of Programming (Kernighan and Pike), Programming Pearls
(Bentley), Algorithms with Perl (Orwant et al).

<LI>3.  After these are optimal, identify the remaining hot spots.
(Judicious use of the time() and times() functions, or the Benchmark
module.)

<LI>4.  Try to improve the hot spots by using functions such as map()
and grep() instead of explicit loops; make regexes more explicit to
minimize backtracking; cache intermediate results to avoid unnecessary
recalculation (memoization), ...
</UL>

<P><B> 
What's your favorite part of programming? Design or implementation (or
other)?
</B></P>

<P><B>LR</B>:
  Happy users.
</P>


<P><B>  I understand you were the Chairman of the ANSI C committee. 
 How did that come about?
</B></P>

<P><B>LR</B>:
Not the chairman -- that was primarily an administrative function, and what
I did was more technical.  I was the chairman of one of the three major
subcommittees (Language; the others were Library and Environment), and --
most important -- I was the editor of the Draft Standard.  The hand that
holds the pen controls the direction of the work and the results.  
<code>:-)</code></P>

<P>This all happened because at Bell Labs I was one of the managers of the
effort to turn C from a research vehicle to a commercially useful language,
which began with internal standardization.  Because of the demands of some
major users, such as the US Government, commercialization required the
development of a formal standard.  My colleague Dennis Ritchie (who created
C) didn't want to participate personally, but he was always active behind
the scenes in reviewing and improving my efforts.  He was quite satisfied
with the final results.</P>

<P>A few years later, now working at Hewlett Packard, I found myself in the
same position regarding C++.  I persuaded Bjarne Stroustrup, the creator of
C++, to support standardization, as a prerequisite for successful
commercialization.  He agreed, and took a very active role.
</P>

<P><B>  There's certainly no ANSI Perl. Does Perl need the same 
  kind of official standardization that C got?
</B></P>

<P><B>LR</B>:
I believe that it does, in order to increase its acceptability.  Many
organizations either cannot or will not endorse the use of unstandardized
languages in their business-critical activities.</P>

<P>The current situation with Perl is better than it was with the other two
languages I mentioned.  Perl has one official open source for its
implementation, whereas the others had multiple proprietary implementations,
leading to different semantics for many language features.  But this single
'official' Perl semantics has never been adequately characterized
independent of the implementation, so is subject to arbitrary change.</P>

<P>Building on quicksand is acceptable for 'scripts' of limited longevity and
applicability.  It is not acceptable for 'programs' of significant
commercial value.  I think the lack of a firm, stable, well-defined
foundation is the major inhibitor for the continuing commercial evolution of
Perl.  Of the major contributors to Perl, Ilya Zakharevitch is most
outspoken in his view that Perl is not (yet?) a 'programming' language!</P>

<P>Many of the people who contribute their efforts to the Perl community are
interested in adding features, perhaps to overflowing.  More people should
devote their attention to firming up the semantics and making sure that the
implementation conforms to those semantics, rather than the other way
around.</P>

<P><B>
 Your point is well taken about focusing future Perl development on
 producing consistent semantics. I'm a bit surprised that you see this
 as a barrier to greater Perl acceptance. Some might suggest the
 interpretive nature of the language is a greater barrier 
 ("Why can't I get a hello.pl.exe?"). <BR>
 Or point to Perl's endearingly unique syntax. <BR>
 Or to Perl's charmingly permissive OO implementation. <BR>
 Are there particular areas of Perl's semantics in which the 
 inconsistencies are glaring?
</B></P>

<P><B>LR</B>:
I am less concerned about individual programmers' decisions for their
own projects and more concerned about major corporations or government
agencies that reject Perl because of lack of formal support and lack of
standardization.</P>

<P>An example of excellent work that is long overdue is Ilya's
document 'perlnumber', new in Perl 5.6.0, which specifies for the first
time the semantics of Perl's string-to-number conversions.</P>

<P><B>
 I'm curious how one would standardize Perl when the language changes
 so quickly and committees move so slowly. Consider that three years ago,
 Perl was not threaded. Now, threads are standard, but their interface
 may change in the near future. Mr. Zakharevich continues to pull new regex
 constructs from head of Zeus. Even more striking, Perl supports
 unicode.  Is there some way to stage the standardization so that it isn't
 painfully out-of-date? Would standardization necessarily slow down perl
 development?
</B></P>

<P><B>LR</B>:
Sometimes standardization speeds up development, by forcing
convergence on a specified way of doing things.  Sometimes features
are characterized and implemented during standardization (wide-character
types for C, for example;  the Standard Template Library and many other
features for C++).</P>

<P>One way to view it is re Samuel Johnson's famous mot: "When a man knows
he is to be hanged in a fortnight, it concentrates his mind
wonderfully."</P>


<P><B>  Are you following the debate amongst programmers who
 favor Sun lessening their control over Java (especially
  after Sun withdrew it from the <a href="http://www.zdnet.com/eweek/stories/general/0,11011,2405787,00.html">independent 
  standardization process</a>)?
  Do you feel Java might benefit from a more open/chaotic
  development model (ala Perl), should it follow the C
  path of getting independent standardization, or is Sun
  doing the best thing for the language by keeping it 
  "in-house"? </B></P>

<P><B>LR</B>:
My prejudice should be clear from what I have already written.  AT&T handed
control over C and C++ to ANSI/ISO technical committees, while keeping an
active leadership role to ensure that the goals of the originators of the
languages were met.  Sun should do the same.</P>

<P>On the other hand, Microsoft's desire to 'embrace and extend' Java should be
doomed by standardization, just as they failed to subvert the target
independence of C and C++.</P>

<P><B> 
My understanding is that Microsoft is 'embracing' ActiveState's Perl.
They will be shipping Perl with their "Services for UNIX 2.0". Do you see
any chance for Perl to compete on a Windows Platform as a replacement for
Visual Basic? In particular, as application "glue"?
</B></P>

<P><B>LR</B>:
Why not?  Perl is superior to Visual Basic in every way imaginable.</P>

<P>Maybe a push from Microsoft will help overcome the barrier of
acceptability that I focused on above.</P>

<P><B> 
Back to Java for a moment. 
Because they are both "web technologies", Perl
and Java are often seen as competitors. There have been attempts, like
Larry Wall's JPL, to provide better integration between these two beasties.
What sort of utility do you see in such a marriage?
</B></P>

<P><B>LR</B>:
Hard for me to say.  Java forces OO programming from the beginning, and
I have never needed to write an object in any program.  This may be for
me a conceptual hurdle that I need not overcome.</P>

<P>C++ provides sweetened C syntax and semantics (particularly toward bits
and bytes), generic programming (templates), and OO if you want it.  This can all be done with almost the
efficiency of C.</P>

<P>Perl provides higher-level syntax and semantics (particularly toward
strings and complex data structures), and OO if you want it.  I know how to write efficient Perl
when I have to.</P>

<P>Java, in my opinion, fills a much-needed gap between those two
approaches.  <CODE>:-)</CODE></P>

<P><B> Speaking of competitors, Python is making a big splash this year.
Although it seems to satisfy many of the same itches Perl does, 
its proponents point to its cleaner syntax and more tradition 
OO implementation as making it a "better Perl". 
What are your thoughts on Python?
</B></P>

<P><B>LR</B>:
Whatever improvements Python may offer are not sufficient to give it a
critical mass of programmers and programming support relative to Perl.
There is an order-of-magnitude difference in this metric (programmers,
modules, books, ...), and I don't think significant inroads are being
made.  And, as I said, to me OO is a big yawner.</P>

<P><B>
 What five people would you like to see learn Perl?
</B></P>

<P><B>LR</B>:
Hah!  Some colleagues are now trying to convince me to move on to Python.  <code>:-)</code>
</P>

<P><B>
 Have you had the chance to read Mr. Conway's _Object Oriented Perl_? I
found I learned more about general Perl from it than OO techniques (which 
by no means is to say book is inadequate in the latter department).
</B></P>

<P><B>LR</B>:
Yes.  It is a fine book.  But
it still didn't convince me about the necessity of objects.  All I see
is the performance-damaging complexity of the interfaces.</P>

<P><B> How much longer do you see the "Internet Goldrush" continuing?
</B></P>

<P><B>LR</B>:
Judging by the recent performance of the NASDAQ, it may be over already.
</P>

<P><B>
You presented a paper at TPC on efficient sorting with Uri Guttman, a
fellow Boston Perl Monger. How did you two meet?</B></P>

<P><B>LR</B>:
We met in comp.lang.perl.misc in March 1998 (soon after I began to post
questions to the newsgroup).  Uri educated me on 'hash slices', which he
eventually turned into a tutorial.  That July, I spotted his and his
wife's names in the credits at the end of a movie, which exposed a
common non-Perl interest (in Jews and Buddhism, to be specific).  We met for
the first time at TPC2 in San Jose that August.</P>

<P>The paper on sorting was developed entirely by email.  The next time we
met in person -- together with Damian Conway and our wives -- was at TPC3 in
Monterey.  We will meet again there at TPC4 this summer.
Each of us is working on the Perl Golf tournament, which Uri organized.</P>

<P><B> Do you have any tips for new programmers dealing with management?
</B></P>

<P><B>LR</B>:
  Agree on useful metrics for progress and
completion.  Never report that your code is 90% complete, 90 days from
completion, because that tends to be a steady-state description.</P>

<P>  Never estimate more than about half your time actually working on the
project, because other things will always happen.</P>

<P><B>
 Has this
 rapid web development trampled on software quality control
 irreparably?
</B></P>

<P><B>LR</B>:
Not only the web -- Microsoft.  Who would have imagined that the world would tolerate an
environment with the dismal quality of Windows?
So now every company, even those such as Hewlett Packard with long-standing reputations for high quality,
has to compromise in order to compete in a timely way.
</P>

<P><B> 
Since you've in the business for a respectable number of years, what
are your five biggest pet peeves about programming?
</B></P>

<P><B>LR</B>:
That's a toughie.  How about four, in no particular order:</P>

<UL>
<LI>  Extracting from the potential user a complete and useful specification
of a problem.

<LI>  Coping with buggy or inadequately documented tools.

<LI>  Keeping things functioning as operating environments evolve.
     (No one wants anything to change except the things that that person
wants changed.  <code>:-)</code>

<LI>  As I said above, evaporating expectations of quality.<BR>
     (1980's paradigm:  If it's worth implementing once, it's worth
     implementing twice.<BR>
      1990's paradigm:  Ship the prototype!<BR>
      2000's paradigm:  Ship the idea!)<BR>
</UL>
</P>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1696" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/06/p5pdigest/THISWEEK-20000604.html" rel="bookmark">This Week on p5p 2000/06/04</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Mark-Jason Dominus</span> on <abbr class="published" title="2000-06-04T00:00:00-08:00">June  4, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <P>



<br />
<br /></P>



<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Ilya_Quits">Ilya Quits</a>
  <li><a href="#B::Bytecode_is_Ineffective"><code>B::Bytecode</code> is Ineffective</a>
  <li><a href="#Bens_map_Patch">Ben's <code>map</code> Patch</a>
  <li><a href="#split_Oddities"><code>split</code> Oddities</a>
  <li><a href="#scalar_Operator_Doesnt"><code>scalar</code> Operator Doesn't</a>
  <li><a href="#perlmodlib"><code>perlmodlib</code></a>
  <li><a href="#perlnewmod"><code>perlnewmod</code></a>
  <li><a href="#Method_Lookup_Caching">Method Lookup Caching</a>
  <li><a href="#Perl_in_Russia">Perl in Russia</a>
  <li><a href="#Eudora_Problem">Eudora Problem</a>
  <li><a href="#h2xs_Backward_Compatibility"><code>h2xs</code> Backward Compatibility</a>
  <li><a href="#Various">Various</a>
</ul>
      <H3><a name="Notes">Notes</a></H3>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>mjd-perl-thisweek-YYYYMM@plover.com</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
</P>

<P>
This week's report is late because I got back from Vancouver very
early Thursday morning.  Fortunately there were only 166 messages last
week.
<H3><a name="Ilya_Quits">Ilya Quits</a></H3>

</P>

<P>

At the end of the week, Ilya announced that he was departing p5p.
This is a terrible loss to the Perl community.
</P>

<P>
Thank you, Ilya, for your tremendous contributions over the years and
for all your hard work.  Good luck in the future.
<H3><a name="B::Bytecode_is_Ineffective"><code>B::Bytecode</code> is Ineffective</a></H3>

</P>

<P>

Benjamin Stuhl reported that he had been working on 
<CODE>B::Bytecode</CODE>, but that it yielded a negative performance win.  He says:
<blockquote><b>Benjamin:</b> The costs of having to do 3-4 times as much I/O  (<code>Math::Complex</code> compiles to 300+ K from 80K) more than outweigh the costs of  parsing the code.<p> To put it bluntly, I have serious doubts about the utility of <code>B::Bytecode</code>. </blockquote> </P>

<P>

Nick Ing-Simmons said that had had similar doubts for some time.  But
he also pointed out that with 
<CODE>B::Bytecode</CODE> you can compile all your source files into one bytecode file and ship
 it in one piece.
<blockquote><b>Nick:</b> I have a low-tech <code>B::Script</code> module which collects all the <code>*.pm</code> files used  by a "script" into one file and adds a wrapper which overrides <code>require</code> so that text is read from embedded hash rather than file system. </blockquote></P>

<P>

Tim Bunce suggested compresing the bytecode.  Stephen Zander recalled
that Nicholas Clark had posted an almost-complete solution in October,
1998.  Nicholas suggested that the final problems might be soluble
once line disciplines are implemented.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg01109.html">Root of this thread</a></P>

<P>

In other 
<CODE>B::Bytecode</CODE> news, Benjamin Stuhl posted a patch that adds several features and
 generates smaller bytecodes.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00057.html">Patch.</a></P>

<P>

</P>

<P>

<H3><a name="Bens_map_Patch">Ben's <code>map</code> Patch</a></H3>

</P>

<P>
Back in April Ben Tilly submitted a patch for 
<CODE>map</CODE> that was intended to make it perform better in the common case where
the result was larger than the input.  Sarathy said that he thought a
better solution was possible, and provided some details about how it
might work.  The question is when to extend the stack to accomodate
the results of each iteration of the 
<CODE>map</CODE>, and when to relocate the new items (which are placed at the top of
the stack) to below the remaining arguments (which need to be at the
top of the stack at the beginning of each iteration.)
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg01154.html">Sarathy's message.</a></P>

<P>
Ben Tilly disagreed; he said that he had subsequently decided that his
patch was doing the best possible thing, and that he had considered
Sarathy's approches and decided that there was no good improvement,
because the overhead of keeping track of extra information would be at
least as big as the gain from not copying as many stack items.
</P>

<P>
Ilya said that Sarathy's solution seemed too complicated:  The
simplest thing to do is to pre-extend the stack at the beginning,
leave all the result items on the top, and move them all down at once
when the 
<CODE>map</CODE> is finished.
</P>

<P>
Sarathy ended the discussion by saying:
<blockquote><b>Sarathy:</b> Anyway, I think the best way tosettle the question is by implementing  it.  Anyone up for it?</blockquote> </P>

<P>

If you're interested in trying, but you don't know how to get started,
send me a note and I'll try to help.
<H3><a name="split_Oddities"><code>split</code> Oddities</a></H3>

</P>

<P>

Yitzchak Scott-Thoennes reported two bugs in 
<CODE>split</CODE>: First, if you use the 
<CODE>?...?</CODE> delimiters, it is supposed to split to 
<CODE>@_</CODE> even in list context, but does not.  Mike Guy reported that this
 worked in Perl 4 but apparently broken in Perl 5.000.    He submitted
 a documentation patch to announce that the feature has been
discontinued.  Then some discussion followed concerning use of 
<CODE>split</CODE> in scalar context, which is useful, because it delivers the number of
 fields, but which produces an annoying warning.  Ilya pointed out
 that he had submitted a patch to fix this but it was ignored.
</P>

<P>
Yitzchak's second bug was that the following construction does not
deliver the 
<CODE>Use of implicit split to @_ is deprecated</CODE> warning as you would expect:
</P>

</P><PRE>
        eval "split //, '1:2:3'; 1";
</PRE>

<P>
Apparently the key here is that the 
<CODE>eval</CODE> is in void context.  There was no discussion and no patch.
<H3><a name="scalar_Operator_Doesnt"><code>scalar</code> Operator Doesn't</a></H3>

</P>

<P>

Yitzchak also pointed out that if you use the 
<CODE>scalar</CODE> operator in void context, it provides void context to its argument,
 not scalar context.  Ilya said this was not a bug, because a void
 context is a special case of scalar context.  Simon Cozens disagreed
 and provided a patch.
<H3><a name="perlmodlib"><code>perlmodlib</code></a></H3>

</P>

<P>

Simon Cozens sent in a program to generate the 
<CODE>perlmodlib</CODE> man page automatically.
<H3><a name="perlnewmod"><code>perlnewmod</code></a></H3>

</P>

<P>

Simon also sent in a new
<CODE>perlnewmod</CODE> manual page, which explains how to write a module and submit it to
 CPAN.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg01095.html">Read it.</a></P>

<P>
If you have suggestions about 
<CODE>perlnewmod</CODE>, please mail Simon.
</P>

<P>

<H3><a name="Method_Lookup_Caching">Method Lookup Caching</a></H3>

</P>

<P>
Ben Tilly sent a long note about how to speed up inheritance and
method lookups, but Sarathy replied that adding more solution hacks
would be premature, since at present nobody knows why method calls are
actually slow.  Someone should have investigated this a long time ago.
If you are interested in investigating this but do not know how to
begin, please send me email.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-05/msg01102.html">Read about it.</a></P>

<P>

<H3><a name="Perl_in_Russia">Perl in Russia</a></H3>

</P>

<P>
Alexander S. Tereschenko posted on 
<CODE>comp.lang.perl.misc</CODE> that he and his team would translate most of the Perl 
documentation set into Russian; the article was forwarded to p5p. 
<H3><a name="Eudora_Problem">Eudora Problem</a></H3>

</P>

<P>

Apparently Eudora has a clever feature that inserts extra spaces at
the beginning of some lines when you compose a message in word-wrap
mode.  This means if you use Eudora to send in a patch, there is a good
chance that the patch will not work.
</P>

<P>
If you use Eudora to send patches, make sure the word-wrap setting is
turned off.
<H3><a name="h2xs_Backward_Compatibility"><code>h2xs</code> Backward Compatibility</a></H3>

</P>

<P>

Robert Spier pointed out that the 5.6 version of 
<CODE>h2xs</CODE> is not usable with any earlier version of Perl, because it generates 
<CODE>our</CODE> declarations and 
<CODE>use warnings</CODE> declarations.  It makes sense to use the 5.6 
<CODE>h2xs</CODE> with an earlier Perl, because  the new release of 
<CODE>h2xs</CODE> has been so improved.  Robert later provided a patch (which he
subsequently revised) that adds a 
<CODE>-b</CODE> backward-compatibility flag to 
<CODE>h2xs</CODE>.
</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-06/msg00147.html">The patch.</a></P>

<P>

<H3><a name="Various">Various</a></H3>

</P>

<P>
A medium-sized collection of bug reports, bug fixes, non-bug reports,
questions, answers, and a small amount of spam.   No flames.
</P>

<P>
Until next week I remain, your humble and obedient servant,
</P>

<P>

</P>

<P>

</P>

<hr>

<a href="mailto:mjd-perl-thisweek-200006+@plover.com">Mark-Jason Dominus</a>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2000/05/">&laquo; May 2000</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2000/07/">July 2000 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
