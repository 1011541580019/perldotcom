<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: December 2000 Archives</title>


    <link rel="prev" href="/pub/2000/11/" title="November 2000" />
    <link rel="next" href="/pub/2001/01/" title="January 2001" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">December 2000 Archives</h1>





                            
                            <div id="entry-1778" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/p5pdigest/THISWEEK-20001225.html" rel="bookmark">This Week on p5p 2000/12/24</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2000-12-27T00:00:00-08:00">December 27, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- This week on perl5-porters (18-25 Dec 2000) -->

<br /> 
<ul> <li><a   href="#Notes">Notes</a> <li><a   href="#561_Trial_is_out">5.6.1 
  Trial is out!</a> <li><a 
  href="#Profiling">Profiling</a> <li><a 
  href="#Solaris_and_Sockets">Solaris 
  and Sockets</a> <li><a 
  href="#strtoul">strtoul</a> <li><a 
  href="#Language_sensitive_editors">Language-sensitive 
  editors</a> <li><a 
  href="#Numeric_conversion_on_HPUX">Numeric 
  conversion on HPUX</a> <li><a 
  href="#Various">Various</a> <li><a 
  href="#Repository_browser">Repository 
  browser</a> <li><a 
  href="#Dependency_checker">Dependency 
  checker</a> <li><a 
  href="#Unicode_task">Unicode 
  task</a> <li><a 
  href="#use_constant_Updates">use 
  constant Updates</a> <li><a 
  href="#Miscellany">Miscellany</a> </li></ul> <h3><a name=notes>Notes</a></h3>  <p>You can subscribe to an email version of this summary by sending an empty 
message to <a 
href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></p> 

<p>Please send corrections and additions to 
<code>perl-thisweek-YYYYMM@simon-cozens.org</code> where <code>YYYYMM</code> is 
the current year and month. </p> <p>You'd think this week would be pretty quiet, but we saw the usual 300 or so 
messages. Don't you all have homes to go to?</p> 

<h3><a name=561_trial_is_out>5.6.1 Trial is out!</a></h3>  

<p>The big news this week is that the long-awaited first trial release of Perl 
5.6.1 is out, and available for download from CPAN: get the patch against 5.6.0 
from your nearest CPAN <a 
href="/CPAN/authors/id/G/GS/GSAR/perl-5.6.1-TRIAL1.patch.gz">here.</a> (Don't forget you'll also need to get the <a 
href="/CPAN/authors/id/G/GS/GSAR/perl-5.6.0.tar.gz">5.6.0 
source </a>as well) </p> 

<p>Please test it out thoroughly, run your favourite bugs through it and see if 
they've been fixed, and above all, <b>tell us</b> if it works or if itdoesn't. 
Use the <code>perlbug</code> utility to get in touch, and the <code>make 
ok</code> or <code>make nok</code> Makefile targets to send build success and 
failure reports.</p> 

<h3><a name=profiling>Profiling</a></h3>  

<p>Both Alan and I have been doing some work with profilers recently, and 
looking at <code>perl</code>'s hotspots. They seem to have been in surprising 
places; Alan found a lot of time was spent setting up and destroying objects, 
and also dealing with <code>sigsetjmp</code>; these are all things that Ilya 
looked at last week, but Alan said he only saw a 6% speedup with Ilya's patches, 
which was a little less than we were expecting. </p> 

<p>Nick suggested a couple of optimizations, including the rearrangement of 
<code>pp_hot.c</code>. This might cause people to wonder what the whole business 
about <code>pp_hot.c</code> is, anyway. "PP code" are the functions in perl 
which implement the interpreter's operations: as a simplification, they're the 
source code to things like <code>print</code> and <code>+</code>. They're called 
"PP code" because most of their work consists of Pushing and Popping things on 
and off the argument stack. The idea behind <code>pp_hot.c</code> is that all 
the frequently used functionality goes in that one file, which means that the 
object code can be cached by the processor. At least, that's what we hope will 
happen. So, we need to check that the functions we have in there actually are 
the most frequently used operations, which means we need to periodically profile 
and reorganise it. However, since processor caches vary wildly between machines, 
it's very hard to do the cache tuning accurately. <a 
href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01052.html">Read 
about it.</a></p>  

<h3><a name=solaris_and_sockets>Solaris and Sockets</a></h3> 

<p>Stephen Potter brought up an old bug related to sockets on Solaris, which 
Alan diagnosed as a change in Solaris' behaviour with respect to restarting 
interrupted system calls - specifically, the restarting of <code>accept()</code> and <code>connect()</code> after a child signal was caught. While this wasn't a 
bug in Perl, per se, it raised the question of how to shield the user from this 
sort of operating system change. Things like POSIX don't specify whether or not 
system calls should be restarted, so it's all down, essentially, to tradition. 
To make things worse, when the system call was interrupted, 
<code>IO::Socket</code> hadn't been catching the error, and carried on working, 
which created a dead filehandle - this in turn generated "bad filehandle" errors 
instead of "interrupted system call" errors, masking the true problem. And maybe 
<code>IO::Socket</code> should restart the interrupted operation as well, since 
that's usually what people want. </p>

<p>Either way, a fix to <code>IO::Socket</code> is needed, which nobody seems to 
have come up with yet. If you want to do this, you'll want to <a 
href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01160.html">read 
the whole thread.</a></p> 

<h3><a name=strtoul>strtoul</a></h3>  

<p>The two Nicks discovered that Perl is being slowed down by the fact that it 
calls <code>atol</code>, (which is sometimes <code>strtoul</code> in disguise) 
and this performs lots of integer division - a computationally expensive process 
which is quite unnecessary when you're dealing with base-ten integers. </p>

<p>Nicholas Clark suggested that it would be a lot more efficient if Perl 
implemented <code>strtoul</code> itself as part of the 
<code>looks_like_number</code> routine, the code called every time Perl wants to 
convert a string to a number. The only worry was locale-based grouping: the C 
library sometimes lets you turn <code>"123,456"</code> into <code>123456</code>. 
(assuming that commas are your local thousands separator) We would lose this 
ability by doing the conversion as part of <code>looks_like_number</code>. But 
Nick Ing-Simmons pointed out that this is a red herring, since Perl won't pass 
non-digits through to <code>strtoul</code> anyway: <code>$a = "123,456"; print 
0+$a</code> will give you <code>123</code>. The only other dispute was to 
whether this should be done for Perl 5.7 or Perl 6; we'll see whether or not it 
gets done - and, of course, how much it helps. </p> 

<h3><a name=language_sensitive_editors>Language-sensitive editors</a></h3> 

<p>The section in the Perl FAQ on Perl-aware editors and IDEs has been updated, 
thanks to a very complete survey by Peter Primmer and others. Here's what it 
looks like now: 
<blockquote><p>PerlBuilder (http://www.solutionsoft.com/perl.htm) is an integrated 
  development environment for Windows that supports Perl development. PerlDevKit 
  (http://www.activestate.com/Products/Perl_Dev_Kit/index.html) is an IDE from 
  ActiveState supporting the ActivePerl. (VisualPerl, a Visual Studio (or 
  Studio.NET, in time) component is currently (late 2000) in beta). The 
  visiPerl+ IDE is available from Help Consulting 
  (http://helpconsulting.net/visiperl/). Perl code magic is another IDE 
  (http://www.petes-place.com/codemagic.html). CodeMagicCD 
  (http://www.codemagiccd.com/) is a commercial IDE. The Object System 
  (http://www.castlelink.co.uk/object_system/) is a Perl web applications 
  development IDE. </p> 
  
  <p>Perl programs are just plain text, though, so you could download GNU Emacs 
  (http://www.gnu.org/software/emacs/windows/ntemacs.html) or XEmacs 
  (http://www.xemacs.org/Download/index.html), or a vi clone such as Elvis 
  (ftp://ftp.cs.pdx.edu/pub/elvis/, see also http://www.fh-wedel.de/elvis/), nvi 
  (http://www.bostic.com/vi/, or available from CPAN in src/misc/), or Vile 
  (http://www.clark.net/pub/dickey/vile/vile.html), or vim (http://www.vim.org/) 
  (win32: http://www.cs.vu.nl/~tmgil/vi.html). (For vi lovers in general: 
  http://www.thomer.com/thomer/vi/vi.html) </p> 
  
  <p>The following are Win32 multilanguage editor/IDESs that support Perl: 
  Codewright (http://www.starbase.com/), MultiEdit (http://www.MultiEdit.com/), 
  SlickEdit (http://www.slickedit.com/). </p> 
  
  <p>There is also a toyedit Text widget based editor written in Perl that is 
  distributed with the Tk module on CPAN. The ptkdb 
  (http://world.std.com/~aep/ptkdb/) is a Perl/tk based debugger that acts as a 
  development environment of sorts. Perl Composer 
  (http://perlcomposer.sourceforge.net/vperl.html) is an IDE for Perl/Tk GUI 
  creation. </p> 
  
  <p>In addition to an editor/IDE you might be interested in a more powerful 
  shell environment for Win32. Your options include the Bash from the Cygwin 
  package (http://sources.redhat.com/cygwin/), or the Ksh from the MKS Toolkit 
  (http://www.mks.com/), or the Bourne shell of the U/WIN environment 
  (http://www.research.att.com/sw/tools/uwin/), or the Tcsh 
  (ftp://ftp.astron.com/pub/tcsh/, see also 
  http://www.primate.wisc.edu/software/csh-tcsh-book/), or the Zsh 
  (ftp://ftp.blarg.net/users/amol/zsh/, see also http://www.zsh.org/). MKS and 
  U/WIN are commercial (U/WIN is free for educational and research purposes), 
  Cygwin is covered by the GNU Public License (but that shouldn't matter for 
  Perl use). The Cygwin, MKS, and U/WIN all contain (in addition to the shells) 
  a comprehensive set of standard UNIX toolkit utilities. </p></blockquote> 
  
<h3><a name=numeric_conversion_on_hpux>Numeric conversion on HPUX</a></h3> 

<p>Merijn and Nicholas Clark went through twelve rounds with the HPUX compiler 
this week; it seems to have won. It all started with some innocent-looking 
<code>numconvert.t</code> test failures. (Well, all right, nothing about 
<code>numconvert.t</code> looks innocent, but let's not let that spoil the 
narrative.) </p> 

<p>Then we discovered that the problem was in edge cases: 
<code>"4294967296"</code> was getting wrapped around to 0 when used as a UV. 
Nick thought this was a problem with casting, so had Merijn remove Perl's trust 
in the compiler's casting abilities - this still didn't help. Then Nick thought 
it was something to do with <code>sv_2nv</code>, but then we found out it was 
something to do with addition and writing back the value: <code>$a += 0</code> was giving the wrong answer, but <code>$a+0</code> was fine. </p> 

<p>By now, it's time to go through the usual routine of blaming the optimiser 
and the compiler, but turning off optimisation didn't help. Nick had a 
brainwave, and tried testing earlier versions of Perl - all gave the same 
result, thankfully ruling out his recent UV-preservation code. But when he tried 
a simple C program to do the same thing, he found that C gets it wrong on 
FreeBSD x86, but Perl gets it right! Nick's gone away on holiday, but we can 
expect him to be vigorously scratching his head about this one all the while... 

<h3><a name=various>Various</a></h3> 

<p>Lots of fun little things happened this week. 

<h4><a name=repository_browser>Repository browser</a></h4> 

<p>I announced the repository browser, at <a 
href="http://the.earth.li/~simon/cgi-bin/repository">http://the.earth.li/~simon/cgi-bin/repository</a>; 
this allows you to grab files and patches from the repository, look at what 
patches affect a file, and get a <code>cvs annotate</code>-style blamelog of a 
file. 
<h4><a name=dependency_checker>Dependency checker</a></h4> 

<p>Rocco Caputo's distribution dependency checker is up at <a 
href="http://poe.perl.org/poedown/deptest-0.1201.tar.gz">http://poe.perl.org/poedown/deptest-0.1201.tar.gz</a> - run it in the root of a module distribution, and it'll tell you what 
dependencies that module has. 
<h4><a name=unicode_task>Unicode task</a></h4> 

<p>Jarkko has a task for someone: 
<blockquote> 

<p>Here's a little something that someone might consider doing over the 
  holiday season, a nice way to get to know UTF-8 if someone feels the urge or 
  interest to do so. </p></blockquote> 
  
<p>If that's you, see <a 
href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01192.html">Read 
about it.</a> <h4><a name=use_constant_updates>use constant Updates</a></h4> <p></p> <p>Casey Tweten has hacked around the <code>constant</code> pragma so that you 
can now declare multiple constants at once, which is pretty cool, but there's 
been no word on whether or not this is going in the tree. 
<h4><a name=miscellany>Miscellany</a></h4> 

<p>The usual contingent of "OK" messages, test results, new bugs, old bugs 
(thanks to Stephen Potter for dredging up still-active old bugs) and non-bugs. 
And a few thanks messages - thanks for them! </p> 

<p>So, that's all for now; enjoy the holidays, set <code>$|=1</code> on the 
appropriate filehandle, and have yourselves a merry little Christmas. </p> 

<p>Until next millennium I remain, your humble and obedient servant, </p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1768" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/net.html" rel="bookmark">What every Perl programmer needs to know about .NET</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Nathan Torkington</span> on <abbr class="published" title="2000-12-19T00:00:00-08:00">December 19, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- What Every Perl Programmer Needs to Know About .NET -->


<p>.NET is the latest hype blitz from Microsoft (and you thought it was
just a domain).  If your eyes are glazing over or you're tempted to write
it off as marketing speak, read on.</p>

<p>Although Microsoft is loath to admit it, .NET is really their
answer to Sun.  The Java language, the Java virtual machine and
CORBA have proved to be a threat.  .NET is the umbrella name for Microsoft's attempt to better Sun.</p>

<p>Whereas Java is the programming language for Sun's "computer is the
network" effort, Microsoft has given us C# ("C sharp").  It's derived
from C, and attempts to avoid some of the pitfalls of Java and C++.
And much as Java compiles down to Java Virtual Machine (JVM)
instructions, C# compiles down to Intermediate Language (IL).</p>

<p>Where Microsoft betters Sun is that while Java is the only real
language that compiles to the JVM (<a href="#note">see update below</a>,) Microsoft intends IL to be
cross-language.  That is, Perl, Visual Basic and C# can  be
compiled down to IL.  The idea is to make it possible to
integrate multiple languages into one system.</p>

<p>Sun chose CORBA as its distributed application platform, but Microsoft
has gone with SOAP (Simple Object Access Protocol).  In my opinion,
SOAP has one huge benefit over CORBA: mere mortals can implement it!
Soap uses HTTP to send XML-encoded instance and method calls on
remotely defined objects and receive return values.  The umbrella term
for SOAP and its cousin XML-RPC is "Web Services."  There are already
SOAP and XML-RPC modules for Perl.</p>

<p>While it's still early days for .NET, and there's still considerable
potential for it all to turn out to be vaporware, Microsoft has begun
to release .NET components.  And it's not just Microsoft - a number of
people are using SOAP to give concrete APIs to their Web-based
systems.  Think of all the times you've tried to parse HTML to extract
information - the SOAP way of the future is for that information to be
directly accessible through SOAP calls.  As I said, this is already
happening.</p>

<p>I've heard .NET described as "Microsoft's tacit admission that most
shops are not 100 percent Microsoft, so Microsoft products need to work
better with other platforms."  There are many places for Perl in this
new world:</p>

<ul>
<li> <p>In the back-end, serving data through SOAP.  Be warned that even
   <code>SOAP::Lite</code> has a bit of a learning curve, but there are already
   solid modules for this:</p>

<p><a href="http://www.cpan.org/modules/by-module/SOAP/">http://www.cpan.org/modules/by-module/SOAP/</a></p>

<li> <p>In the front-end, compiling down to IL.  Jan Dubois of Activestate
   has a research project related to this:</p>

        <p><a href="http://www.activestate.com/Products/NET/Perl.html">http://www.activestate.com/Products/NET/Perl.html</a></p>
</ul>

<h3>More Information</h3>

<p>So where can you learn more?  Microsoft has a lot of information about
.NET, of course.</p>

  <p><a href="http://www.microsoft.com/net/default.asp">http://www.microsoft.com/net/default.asp</a></p>

<p>There's an introduction from the Windows point of view (covering
the plans for COM and ADO and all the other Windowsy things I didn't
mention):</p>

  <p><a href="http://www.vbxml.com/xml/articles/dotnetintro/default.asp">http://www.vbxml.com/xml/articles/dotnetintro/default.asp</a></p>

<p>Your best bet for things you can use now, though, are the SOAP and
XML-RPC modules.  Be warned: The SOAP modules are hard to get into.</p>

<dL>
<dt>  XML-RPC via the Frontier::RPC module
<dd>        <p><a href="http://bitsko.slc.ut.us/~ken/xml-rpc/">http://bitsko.slc.ut.us/~ken/xml-rpc/</a></p>
<dt>  SOAP Modules:
<dd>        <p><a href="http://www.cpan.org/modules/by-module/SOAP/">http://www.cpan.org/modules/by-module/SOAP/</a></p>
</dl>

<p>Here are some references for Web services:
<ul>
  <LI><p><a href="http://www.xml-rpc.com">http://www.xml-rpc.com</a></p>
  <LI><p><a href="http://www.soaprpc.com">http://www.soaprpc.com</a></p>
  <LI><p><a href="http://www.soaplite.com/">http://www.soaplite.com/</a></p>
  <LI><p><a href="http://www.techmetrix.com/trendmarkers/tmk1200/tmk1200-3.php3">http://www.techmetrix.com/trendmarkers/tmk1200/tmk1200-3.php3</a></p>
</ul>

<hr>

<a name="note">
<p><font size="-1">
I meant that while Microsoft is funding and encouraging other
languages to compile down to the IL, Sun never seemed to do that with
the JVM. As far as I could tell (and I am the first to admit that I am
on the fringe of the Java world), their main push was to have Java be
The Language. I'm interested to hear whether they really did encourage
other languages to compile to the JVM.</font></p></a>

<p><font size="-1"> Poor choice of words on my part, sorry for the
confusion. See <a
href="http://grunge.cs.tu-berlin.de/~tolk/vmlanguages.html">
http://grunge.cs.tu-berlin.de/~tolk/vmlanguages.html for a list of
languages that compile to the JVM</a>.</font></p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1766" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/begperl5.html" rel="bookmark">Beginners Intro to Perl - Part 5</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Doug Sheppard</span> on <abbr class="published" title="2000-12-18T00:00:00-08:00">December 18, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- Beginners Intro to Perl - Part 5:<br /><a name="objects and modules">Objects and Modules</a> -->
<!- :field::id-author::before=by+::>

<p><em>Editor's note: this venerable series is undergoing updates.  You might be interested in the newer versions, available at:</em></p>

<ul>
<li><a href="/pub/a/2008/04/23/a-beginners-introduction-to-perl-510.html">A Beginner's Introduction to Perl 5.10</a>
<li><a href="/pub/a/2008/05/07/beginners-introduction-to-perl-510-part-2.html">A
Beginner's Introduction to Files and Strings with Perl 5.10</a>
<li><a href="http://news.oreilly.com/2008/06/a-beginners-introduction-to-pe.html">A
Beginner's Introduction to Regular Expressions with Perl 5.10</a></li>
<li><a href="http://broadcast.oreilly.com/2008/09/a-beginners-introduction-to-pe.html">A Beginner's Introduction to Perl Web Programming</a></li>

</ul>

<p><table width="180" cellspacing="0" cellpadding="4" align="right" border="1">
<tr>
<td align="center" valign="top" bgcolor="#6699cc">
<font color="#ffffff"><b>Beginners Intro to Perl</b></td>
</tr>

<tr>
<td>
<p class="fine">
&#149;<b><a href="/pub/2000/10/begperl1.html">Part 1 of this series</a></b><br />
&#149;<b><a href="/pub/2000/11/begperl2.html">Part 2 of this series</a></b><br />
&#149;<b><a href="/pub/2000/11/begperl3.html">Part 3 of this series</a></b><br />
&#149;<b><a href="/pub/2000/12/begperl4.html">Part 4 of this series</a></b><br />
&#149;<b><a href="/pub/a/2001/01/begperl6.html">Part 6 of this series</a></b><br /><br />

&#149;<a href="#what is an object">What Is an Object?</a><br />
&#149;<a href="#our goal">Our Goal</a><br />
  &#149;<a href="#starting off">Starting Off</a><br />
  &#149;<a href="#what does our object do">What Does Our Object Do?</a><br />
  &#149;<a href="#our goal, part 2">Our Goal, Part 2</a><br />
  &#149;<a href="#encapsulation">Encapsulation</a><br />
  &#149;<a href="#play around!">Play Around!</a><br />


</td>
</tr>
</p>
</table> 
<p>So far, we've mostly stuck to writing everything for our programs ourselves.
One of the big advantages of Perl is that you don't need to do this.
More than 1,000 people worldwide have contributed more than
5,000 utility packages, or <em>modules</em>, for common tasks.</p>
<p>In this installment, we'll learn how modules work by building one,
and along the way we'll learn a bit about <em>object-oriented programming</em>
in Perl.</p>
<p>
<h3><a name="what is an object">What Is an Object?</a></h3>
<p>Think back to the first article in this series, when we discussed the two
basic data types in Perl, strings and numbers.  There's a third basic data
type: the <em>object</em>.</p>
<p>Objects are a convenient way of packaging information with the
things you actually <em>do</em> with that information.  The information
an object contains is called its <em>properties</em>, and the things you can do
with that information are called <em>methods</em>.</p>
<p>For example, you might have an <code>AddressEntry</code> object for an address book
program - this object would contain <em>properties</em> that store a person's
name, mailing address, phone number and e-mail address; and <em>methods</em> that
print a nicely formatted mailing label or allow you to change the person's
phone number.</p>
<p>During the course of this article, we'll build a small, but useful,
class: a container for configuration file information.</p>
<p>
<h3><a name="our goal">Our Goal</a></h3>
<p>So far, we've put the code for setting various options in our programs
directly in the program's source code.  This isn't a good approach.  You
may want to install a program and allow multiple users to run it, each
with their own preferences, or you may want to store common sets of
options for later.  What you need is a configuration file to store these
options.</p>
<p>We'll use a simple plain-text format, where name and value pairs
are grouped in sections, and sections are indicated by a header name
in brackets.  When we want to refer to the value of a specific key
in our configuration file, we call the key <code>section.name</code>.  For instance,
the value of <em>author.firstname</em> in this simple file is ``Doug:''</p>
<pre>
   [author]
   firstname=Doug
   lastname=Sheppard

   [site]
   name=Perl.com
   url=http://www.perl.com/
</pre>
<p>(If you used Windows in the ancient days when versions had numbers, not years,
you'll recognize this as being similar to the format of INI files.)</p>
<p>Now that we know the real-world purpose of our module, we need to think
about what <em>properties</em> and <em>methods</em> it will have: What do
<code>TutorialConfig</code> objects store, and what can we do with them?</p>
<p>The first part is simple: We want the object's properties to be the
values in our configuration file.</p>
<p>The second part is a little more complex.  Let's start by doing
the two things we <em>need</em> to do: read a configuration file, and get a
value from it.  We'll call these two methods <code>read</code> and <code>get</code>.  Finally,
we'll add another method that will allow us to set or change a value from
within our program, which we'll call <code>set</code>.  These three methods will
cover nearly everything we want to do.</p>
<p>
<h3><a name="starting off">Starting Off</a></h3>
<p>We'll use the name <code>TutorialConfig</code> for our configuration file class.
(Class names are normally named in this InterCapitalized style.)  Since
Perl looks for a module by its filename, this means we'll call our module
file <code>TutorialConfig.pm</code>.</p>
<p>Put the following into a file called <code>TutorialConfig.pm</code>:</p>
<pre>
    package TutorialConfig;

    warn &quot;TutorialConfig is successfully loaded!\n&quot;;
    1;</pre>
<p>(I'll be sprinkling debugging statements throughout the code.  You can
take them out in practice.  The <code>warn</code> keyword is useful for warnings -
things that you want to bring to the user's attention without ending
the program the way <code>die</code> would.)</p>
<p>The <code>package</code> keyword tells Perl the name of the class you're defining.
This is generally the same as the module name.  (It doesn't <em>have</em> to
be, but it's a good idea!)  The <code>1;</code> will return a true value to Perl,
which indicates that the module was loaded successfully.</p>
<p>You now have a simple module called <code>TutorialConfig</code>, which you can use
in your code with the <code>use</code> keyword.  Put the following into a very
simple, one-line program:</p>
<pre>
    use TutorialConfig;</pre>
<p>When we run this program, we see the following:</p>
<pre>
    TutorialConfig is successfully loaded!
</pre>
<p>
<h3><a name="what does our object do">What Does Our Object Do?</a></h3>
<p>Before we can create an object, we need to know <em>how</em> to create it.
That means we must write a method called <code>new</code> that will set up an
object and return it to us.  This is also where you put any special
initialization code that you might need to run for each object when
it is created.</p>
<p>The <code>new</code> method for our <code>TutorialConfig</code> class looks like this, and
goes into <code>TutorialConfig.pm</code> right after the package declaration:</p>
<pre>
    sub new {
        my ($class_name) = @_;

        my ($self) = {};
        warn &quot;We just created our new variable...\n &quot;;

        bless ($self, $class_name);
        warn &quot;and now it's a $class_name object!\n&quot;;

        $self-&gt;{'_created'} = 1;
        return $self;
    }</pre>
<p>(Again, you won't need those <code>warn</code> statements in actual practice.)</p>
<p>Let's break this down line by line.</p>
<p>First, notice that we define methods by using <code>sub</code>.  (All methods
are really just a special sort of sub.)  When we call <code>new</code>, we pass
it one parameter: the <em>type</em> of object we want to create.  We store this
in a private variable called <code>$class_name</code>.  (You can also pass extra
parameters to <code>new</code> if you want.  Some modules use this for special
initialization routines.)</p>
<p>Next, we tell Perl that <code>$self</code> is a hash.  The syntax <code>my ($self) = {};</code>
is a special idiom that's used mostly in Perl object programming, and we'll
see how it works in some of our methods.  (The technical term is that
<code>$self</code> is an <em>anonymous hash</em>, if you want to read more about it elsewhere.)</p>
<p>Third, we use the <code>bless</code> function.  You give this function two parameters:
a variable that you want to make into an object, and the type of object you
want it to be.  This is the line that makes the magic happen!</p>
<p>Fourth, we'll set a <em>property</em> called ``_created''.  This property isn't
really that useful, but it does show the syntax for accessing the
contents of an object:  <em>$object_name-&gt;{property_name}</em>.</p>
<p>Finally, now that we've made <code>$self</code> into a new <code>TutorialConfig</code> object,
we <code>return</code> it.</p>
<p>Our program to create a <code>TutorialConfig</code> object looks like this:</p>
<pre>
    use TutorialConfig;
    $tut = new TutorialConfig;</pre>
<p>(You don't need to use parentheses here, unless your object's <code>new</code>
method takes any extra parameters.  But if you feel more comfortable writing
<code>$tut = new TutorialConfig();</code>, it'll work just as well.)</p>
<p>When you run this code, you'll see:</p>
<pre>
    TutorialConfig is successfully loaded!
    We just created the variable ...
    and now it's a TutorialConfig object!
</pre>
<p>Now that we have a class and we can create objects with it, let's make our class <em>do</em> something!</p>
<p>
<h3><a name="our goal, part 2">Our Goal, Part 2</a></h3>
<p>Look at our goals again.  We need to write three methods for our
<code>TutorialConfig</code> module: <code>read</code>, <code>get</code> and <code>set</code>.</p>
<p>The first method, <code>read</code>, obviously requires that we tell it what
file we want to read.  Notice that when we write the source code
for this method, we must give it <em>two</em> parameters.  The first parameter
is the object we're using, and the second is the filename we want to use.
We'll use <code>return</code> to indicate whether the file was successfully
read.</p>
<pre>
   sub read {
      my ($self, $file) = @_;
      my ($line, $section);

      open (CONFIGFILE, $file) or return 0;

      # We'll set a special property 
      # that tells what filename we just read.
      $self-&gt;{'_filename'} = $file;



      while ($line = &lt;CONFIGFILE&gt;) {

         # Are we entering a new section?
         if ($line =~ /^\[(.*)\]/) {
            $section = $1;
         } elsif ($line =~ /^([^=]+)=(.*)/) {
            my ($config_name, $config_val) = ($1, $2);
            if ($section) {
               $self-&gt;{&quot;$section.$config_name&quot;} = $config_val;
            } else {
               $self-&gt;{$config_name} = $config_val;
            }
         }
      }

      close CONFIGFILE;
      return 1;
   }</pre>
<p>Now that we've read a configuration file, we need to  look at the
values we just read.   We'll call this method <code>get</code>, and it doesn't have to
be complex:
</p>
<pre>

    sub get {
        my ($self, $key) = @_;

        return $self-&gt;{$key};
    }</pre>
<p>These two methods are really all we need to begin experimenting with our
<code>TutorialConfig</code> object.  Take the module and sample configuration file from above (or <a href="/2000/12/tutc.txt">download the configuration file here</a> and <a href="/2000/12/TutorialConfig.pm">the module here</a>),
put it in a file called <code>tutc.txt</code>, and then run <a href="/2000/12/sample.pl">this simple program</a>:
</p>
<pre>

    use TutorialConfig;

    $tut = new TutorialConfig;
    $tut-&gt;read('tutc.txt') or die &quot;Couldn't read config file: $!&quot;;

    print &quot;The author's first name is &quot;, 
             $tut-&gt;get('author.firstname'), 
             &quot;.\n&quot;;</pre>
<p>(Notice the syntax for calling an object's methods:
<code>$object-&gt;method(parameters)</code>.)
</p>

When you run this program, you'll see something like this:

<pre>

    TutorialConfig has been successfully loaded!
    We just created the variable... 
    and now it's a TutorialConfig object!
    The author's first name is Doug.
</pre>
<p>We now have an object that will read configuration files and show us values
inside those files.  This is good enough, but we've decided to make it better by writing a <code>set</code> method that allows us to add or change
configuration values from within our program:</p>
<pre>
    sub set {
        my ($self, $key, $value) = @_;

        $self-&gt;{$key} = $value;
    }</pre>
<p>Now let's test it out:</p>
<pre>
    use TutorialConfig;
    $tut = new TutorialConfig;

    $tut-&gt;read('tutc.txt') or die &quot;Can't read config file: $!&quot;;
    $tut-&gt;set('author.country', 'Canada');

    print $tut-&gt;get('author.firstname'), &quot; lives in &quot;,
          $tut-&gt;get('author.country'), &quot;.\n&quot;;</pre>
<p>These three methods (<code>read</code>, <code>get</code> and <code>set</code>) are everything we'll need
for our <code>TutorialConfig.pm</code> module.  More complex modules might have
dozens of methods!</p>
<p>
<h3><a name="encapsulation">Encapsulation</a></h3>
<p>You may be wondering why we have <code>get</code> and <code>set</code> methods at all.  Why
are we using <code>$tut-&gt;set('author.country', 'Canada')</code> when we could use
<code>$tut-&gt;{'author.country'} = 'Canada'</code> instead?  There are two reasons
to use methods instead of playing directly with an object's properties.</p>
<p>First, you can generally trust that a module won't change its methods,
no matter how much their implementation changes.  Someday, we might want to
switch from using text files to hold configuration information to using a
database like MySQL or Postgres.  Our new <code>TutorialConfig.pm</code> module
might have <code>new</code>, <code>read</code>, <code>get</code> and <code>set</code> methods that look like this:</p>
<pre>
      sub new {
          my ($class) = @_;
          my ($self) = {};
          bless $self, $class;
          return $self;
      }

      sub read {
          my ($self, $file) = @_;
          my ($db) = database_connect($file);
          if ($db) {
              $self-&gt;{_db} = $db;
              return $db;
          }
          return 0;
      }

      sub get {
          my ($self, $key) = @_;
          my ($db) = $self-&gt;{_db};

          my ($value) = database_lookup($db, $key);
          return $value;
      }

      sub set {
          my ($self, $key, $value) = @_;
          my ($db) = $self-&gt;{_db};

          my ($status) = database_set($db, $key, $value);
          return $status;
      }</pre>
<p>(Our module would define the <code>database_connect</code>, <code>database_lookup</code> and
<code>database_set</code> routines elsewhere.)</p>
<p>Even though the entire module's source code has changed, all of
our methods still have the same names and syntax.  Code that uses these
methods will continue working just fine, but code that directly
manipulates properties will break!</p>
<p>For instance, let's say you have some code that contains this line to
set a configuration value:</p>
<pre>
     $tut-&gt;{'author.country'} = 'Canada';</pre>
<p>This works fine with the original <code>TutorialConfig.pm</code> module,
because when you call <code>$tut-&gt;get('author.country')</code>, it looks in the
object's properties and returns ``Canada'' just like you expected.  So far, so
good.  However, when you upgrade to the new version that uses databases, the
code will no longer return the correct result.  Instead of <code>get()</code> looking
in the object's properties, it'll go to the database, which won't contain the
correct value for ``author.country''!  If you'd used
<code>$tut-&gt;set('author.country', 'Canada')</code> all along, things would work fine.</p>
<p>As a module author, writing methods will let you make changes
(bug fixes, enhancements, or even complete rewrites) without requiring your module's users to rewrite any of their code.</p>
<p>Second, using methods lets you avoid impossible values.  You might
have an object that takes a person's age as a property.  A person's age
must be a positive number (you can't be -2 years old!), so the
<code>age()</code> method for this object will reject negative numbers.  If you
bypass the method and directly manipulate <code>$obj-&gt;{'age'}</code>, you
may cause problems elsewhere in the code (a routine to calculate
the person's birth year, for example, might fail or produce an odd result).</p>
<p>As a module author, you can use methods to help programmers who use
your module write better software.  You can write a good error-checking
routine once, and it will be used many times.</p>
<p>(Some languages, by the way, <em>enforce</em> encapsulation, by giving you the
ability to make certain properties private.  Perl doesn't do this.
In Perl, encapsulation isn't the law, it's just a very good idea.)</p>
<p>
<h3><a name="play around!">Play Around!</a></h3>
<p>1.  Our <code>TutorialConfig.pm</code> module could use a method that will write
a new configuration file to any filename you desire.  Write your own
<code>write()</code> method (use <code>keys %$self</code> to get the keys of the object's
properties).  Be sure to use <code>or</code> to warn if the file couldn't be
opened!</p>
<p>2.  Write a <code>BankAccount.pm</code> module.  Your <code>BankAccount</code> object should have
<code>deposit</code>, <code>withdraw</code>, and <code>balance</code> methods.  Make the <code>withdraw</code>
method fail if you try to withdraw more money than you  have,
or deposit or withdraw a negative amount of money.</p>
<p>3.  <code>CGI.pm</code> also lets you use objects if you want.  (Each object
represents a single CGI query.)  The method names are the same as the CGI
functions we used in the last article:</p>
<pre>
    use CGI;
    $cgi = new CGI;

    print $cgi-&gt;header(), $cgi-&gt;start_html();
    print &quot;The 'name' parameter is &quot;, $cgi-&gt;param('name'), &quot;.\n&quot;;
    print $cgi-&gt;end_html();</pre>
<p>Try rewriting one of your CGI programs to use <code>CGI</code> objects instead of
the CGI functions.</p>
<p>4.  A big advantage of using CGI objects is that you can store and retrieve
queries on disk.  Take a look in the <code>CGI.pm</code> documentation to learn
how to use the <code>save()</code> method to store queries, and how to pass
a filehandle to <code>new</code> to read them from disk.  Try writing a CGI
program that saves recently used queries for easy retrieval.</p>

<hr>
<ul>
  <li><a href="/2000/12/TutorialConfig.pm">Complete <code>TutorialConfig.pm</code> module</a>
  <li><a href="/2000/12/sample.pl">Demo program</a>
  <li><a href="/2000/12/tutc.txt">Sample configuration file</a>
</ul>





        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1776" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/p5pdigest/THISWEEK-20001217.html" rel="bookmark">This Week on p5p 2000/12/17</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2000-12-17T00:00:00-08:00">December 17, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            </P>

<P>


<!-- This week on perl5-porters (10-17 Dec 2000) -->

<br />
<br /><ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Object_creation_and_destruction">Object creation and destruction</a>
  <li><a href="#More_cool_PerlIO_stuff">More cool PerlIO stuff</a>
  <li><a href="#What_to_do_with_bugs">What to do with bugs</a>
  <li><a href="#UV_Preserving_Arithmetic">UV Preserving Arithmetic</a>
  <li><a href="#Code_checkers">Code checkers</a>
  <li><a href="#Precedence">Precedence</a>
  <li><a href="#Reminder_about_the_FAQ">Reminder about the FAQ</a>
  <li><a href="#Various">Various</a>
</ul>

      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an email version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>perl-thisweek-YYYYMM@simon-cozens.org</CODE> where 
<CODE>YYYYMM</CODE> is the current year and month.
<H3><a name="Object_creation_and_destruction">Object creation and destruction</a></H3>

</P>

<P>

Ilya came up with 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00800.html">another startling patch </a> this week, but this one was a
little more complex: he estimates, however, that it &quot;decreases the
overhead of creation/destruction of objects 3-4 times&quot;. It does this by
applying the same &quot;handler&quot; mechanism that operator overloading uses to 
<CODE>DESTROY</CODE> methods. He also says that &quot;other handlers can be easily done the same
 way&quot;, which (I think) means that similar speed-ups are possible in 
<CODE>BEGIN</CODE> and 
<CODE>END</CODE> blocks.
<H3><a name="More_cool_PerlIO_stuff">More cool PerlIO stuff</a></H3>

</P>

<P>

Nick has been working his magic yet again; you can now say
</P>

</P><PRE>
    use Encode;
    open($fh,"&lt;encoding(iso8859-7)",$greek) 
      || die "Cannot open $greek:$!";
</PRE>

<P>
This makes me ecstatically happy. 
</P>

<P>
He also suggested it should be possible to use a scalar as data to be
read from a filehandle, something I imagine every programmer's wanted to
do at least once in their life. That is:
</P>

</P><PRE>
    $data = "...";
    open FH, "<", \$data or die "This really can't happen";
    while (&lt;FH>) {
        ...
    }
</PRE>

<P>
While he hasn't coded this yet, it shouldn't be very difficult, and
would be a nice general solution to all sorts of problems.
<H3><a name="What_to_do_with_bugs">What to do with bugs</a></H3>

</P>

<P>

Jarkko pointed out that there was a problem in the bug process, in that
bugs can very easily be forgotten about without a trace, and there's no
feedback between us and the bug reporter. We obviously want to fix this,
so there's communication with the reporter, and so we make sure that
every bug is dealt with and doesn't get forgotten.
</P>

<P>
Richard Foley suggested sending out a reminder of open bugs to the bug
admins and p5p; there was then some wonderful set theory mathematics
about which categories of currently open bugs we should start the ball
rolling with and how many there were. This process will definitely
happen with bugs submitted from now on, though.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00274.html">Read about it.</a></P>

<P>

<H3><a name="UV_Preserving_Arithmetic">UV Preserving Arithmetic</a></H3>

</P>

<P>

Nicholas Clark's great work with UV/IV preserving arithmetic (You know,
so that 
<CODE>$a=3; $b=5; $a + $b</CODE> results in an IV, not an NV) seems to have collapsed around his feet.
 It seemed like everything was going well, after a couple of 70-odd K patches
starting 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00499.html">this thread</a> managed to get the whole thing working quickly and accurately, but then
 Jarkko discovered it was giving nasty results on some platforms. Helmut
 Jarausch found it
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00800.html">failing on Irix</a>, and Jarkko was having it cause strange problems on Digital Unix. The
patches have been pulled out of the repository temporarily, and Nick is
reportedly looking for access to &quot;something slightly more esoteric than 
FreeBSD&quot;.
</P>

<P>
STOP PRESS! This from Nick:
<blockquote></P>

<P>
Jarkko and I worked hard at hammering out the problems - I was relying
on strtoul behaviour when presented with a number with leading &quot;-&quot;
working everywhere the way it does on FreeBSD, linux (and Irix Jarkko
reports) but it didn't work that way on Digital Unix, and that's where
his nasty problems came from. I re-wrote that bit of code in sv.c to
avoid even passing in the string with the leading &quot;-&quot; and with this
solution it works everywhere we've tested, and seems to be in the
repository as of yesterday (Saturday)
</blockquote><H3><a name="Code_checkers">Code checkers</a></H3>

</P>

<P>

<a href="/pub/2000/12/p5pdigest/THISWEEK-20001203.html">Last time</a> I asked: 
<blockquote></P>

<P>
   (Hey, maybe someone would like to try writing a program that
  automatically extracts example code from the documentation and
  makes sure it compiles?)
</blockquote></P>

<P>
Well, Tels did it, and produced 
<CODE>Pod::Checker::Code</CODE>; initially, it checked the synopsis and examples sections of module
documentation, but I suggested it should be extended to the example code
in 
<CODE>/pod</CODE>. Tels duly did that, but this raised another question: how to mark up
the code appropriately so that it can be checked? Various ideas were
raised, the most promising being
</P>

</P><PRE>
    =code perl
</PRE>

</P><PRE>
    =back
</PRE>

<P>
I don't think anything was actually decided; check the 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00640.html">rest of the thread</a> for details.
<H3><a name="Precedence">Precedence</a></H3>

</P>

<P>

Jeff Pinyan reminded us again that the output of
</P>

</P><PRE>
    $x = 10;
    print ++$x / $x;
</PRE>

<P>
is not what you might expect; Johan Vromans trumped this with
</P>

</P><PRE>
    $i = 1; @a = ($i++, $i++, $i++, $i++, $i++);
    $i = 0; @b = (++$i, ++$i, ++$i, ++$i, ++$i);
    print "@a\n@b\n";
</PRE>

<P>
Now, we all know that if you do things with multiple side-effects at the
same time, Weird Things occur. However, there was some argument as to
whether this ought to be the case. Johan said:
<blockquote></P>

<P>
I expect
</P>

<P>
   $x = 10; print ++$x / $x--;
</P>

<P>
to produce the same output as:
</P>

<P>
   $x = 10;
   $x1 = sub { ++$x };
   $x2 = sub { $x-- };
   print $x1-&gt;() / $x2-&gt;();
</P>

<P>
If not, it's a bug, or we'd better have a _good_
explanation.
</blockquote></P>

<P>
Various people disagreed; it's not just a question of side-effects, but
also a question of the order of evaluation of operands. C leaves the
order of evaluation undefined, but do we want Perl to go this way?
Nicholas Clark maintained that keeping the order undefined allows for
flexibility in the implementation: if we promise a certain evaluation
order, but then someone comes up with a huge speed increase hack which
jiggles the evaluation order, we can't use it. John Peacock summed it up
rather differently: &quot;Doctor, it hurts when I do this!&quot;.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00443.html">Read about it.</a></P>

<P>

<H3><a name="Reminder_about_the_FAQ">Reminder about the FAQ</a></H3>

</P>

<P>
Daniel Stutz asked how to get the latest development sources, (Answer:
read perlhack, it tells you - well, the perlhack in the latest
development sources does...) and also complained that &quot;it's very hard to
find information about P5P&quot;. Various people pointed out that P5P is
mentioned in the first part of the Perl FAQ, and I finally remembered to
post the FAQ. 
</P>

<P>
Do you know about the P5P FAQ? You should. Email 
<CODE>perl5-porters-faq@perl.org</CODE> for a copy, or read it 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg00835.html">here.</a><H3><a name="Various">Various</a></H3>

</P>

<P>

Until next week I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:simon@brecon.co.uk">Simon Cozens</a>


        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1764" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/begperl4.html" rel="bookmark">Beginners Intro to Perl - Part 4</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Doug Sheppard</span> on <abbr class="published" title="2000-12-06T00:00:00-08:00">December  6, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- Beginner's Introduction to Perl - Part 4 -->
<!- :field::id-author::before=by+::>

<p><em>Editor's note: this venerable series is undergoing updates.  You might be interested in the newer versions, available at:</em></p>

<ul>
<li><a href="/pub/a/2008/04/23/a-beginners-introduction-to-perl-510.html">A Beginner's Introduction to Perl 5.10</a>
<li><a href="/pub/a/2008/05/07/beginners-introduction-to-perl-510-part-2.html">A
Beginner's Introduction to Files and Strings with Perl 5.10</a>
<li><a href="http://news.oreilly.com/2008/06/a-beginners-introduction-to-pe.html">A
Beginner's Introduction to Regular Expressions with Perl 5.10</a></li>
<li><a href="http://broadcast.oreilly.com/2008/09/a-beginners-introduction-to-pe.html">A Beginner's Introduction to Perl Web Programming</a></li>

</ul>

<h3>It's CGI time</h3>

<p><table width="180" cellspacing="0" cellpadding="4" align="right" border="1">
<tr>
<td align="center" valign="top" bgcolor="#6699cc">
<font color="#ffffff"><b>Beginners Intro to Perl</b></td>
</tr>

<tr>
<td>
<p class="fine">
&#149;<b><a href="/pub/2000/10/begperl1.html">Part 1 of this series</a></b><br />
&#149;<b><a href="/pub/2000/11/begperl2.html">Part 2 of this series</a></b><br />
&#149;<b><a href="/pub/2000/11/begperl3.html">Part 3 of this series</a></b><br />
&#149;<b><a href="/pub/2000/12/begperl5.html">Part 5 of this series</a></b><br />
&#149;<b><a href="/pub/a/2001/01/begperl6.html">Part 6 of this series</a></b><br /><br />

&#149;<a href="#cgi">What is CGI?</a><br />
&#149;<a href="#cgi_program">A Real CGI Program</a><br />
&#149;<a href="#uhoh">Uh-Oh!</a><br />

&#149;<a href="#second_script">Our Second Script</a><br />

&#149;<a href="#sorting">Sorting</a><br />


&#149;<a href="#trust">Trust No One</a><br />

&#149;<a href="#play_around">Play Around!</a>


</td>
</tr>
</p>
</table>

<p>So far, we've talked about Perl as a language for mangling numbers, strings,
and files - the original purpose of the language.  Now it's time to talk
about what Perl does on the Web.  In this installment, we're going
to talk about CGI programming.</p>


<h3><a name="cgi">What is CGI?</a></h3>

<p>The Web is based on a client-server model: your browser (the client) making
requests to a Web server.  Most of these are simple requests for
documents or images, which the server delivers to the browser for display.

</p><p>Of course, sometimes you want the server to do more than just dump the
contents of a file.  You'd like to do something with a server-side program -
whether that "something" is using Web-based e-mail, looking up a phone number in
a database or ordering a copy of <i>Evil Geniuses in a Nutshell</i> for your
favorite techie.  This means the browser must be able to send
information (an e-mail address, a name to look up, shipping information for
a book) to the server, and the server must be able to use that information
and return the results to the user.

</p><p>The standard for communication between a user's Web browser and a server-side
program running on the Web server is called <b>CGI</b>, or Common Gateway
Interface.  It is supported by all popular Web server software.
To get the most out of this article, you will need to have a server that
supports CGI.  This may be a server running on your desktop machine or
an account with your ISP (though probably not a free Web-page service).  If
you don't know whether you have CGI capabilities, ask your ISP or a local
sysadmin how to set things up.

</p><p>Notice that I haven't described how CGI works; that's because you
don't <i>need</i> to know.  There's a standard Perl module
called <code>CGI.pm</code> that will handle the CGI protocol for you.  CGI.pm is part of
the core Perl distribution, and any properly installed Perl should have it
available.

</p><p>Telling your CGI program that you want to use the CGI module is as simple
as this:</p>
<pre><code>use CGI ':standard';</code></pre>
<p>The <code>use CGI ':standard';</code> statement tells Perl that you want to use the
CGI.pm module in your program.  This will load the module and make a set
of CGI functions available for your code.  
</p>

<h3><a name="cgi_program">A Real CGI Program</a></h3>

<p>Let's write our first real CGI program.  Instead of doing something complex,
we'll write something that will simply throw back whatever we throw
at it.  We'll call this script <code>backatcha.cgi</code>:</p>

<pre><code>#!/usr/local/bin/perl

use CGI ':standard';

print header();
print start_html();

for $i (param()) {
    print "&lt;b>", $i, "&lt;/b>: ", param($i), "&lt;br>\n";
}

print end_html();</code></pre>

<p>If you've never used HTML, the pair of &lt;b> and &lt;/b> tags mean
"begin bold" and "end bold", respectively, and the &lt;br> tag means "line
break."  (A good paper reference to HTML is O'Reilly's <i>HTML & XHTML: The
Definitive Guide</i>, and online, I like <A HREF="http://www.htmlhelp.com/">the
Web Design Group</A>.)

</p><p>Install this program on your server and do a test run.  (If you
don't have a Web server of your own, we've put a copy online for you
<a href="/cgi-bin/backatcha.pl">here</a>.)  Here's a short list of what
you do to install a CGI program:

<ol>
<li>Make sure the program is placed where your Web server will
recognize it as a CGI script.  This may be a special <code>cgi-bin</code> directory
or making sure the program's filename ends in <code>.pl</code> or <code>.cgi</code>.
If you don't know where to place the program, your ISP or sysadmin should.</li>

<li>Make sure the program can be run by the server.  If you are
using a Unix system, you may have to give the Web-server user read and
execute permission for the program.  It's easiest to give these permissions
to everybody by using <code>chmod <i>filename</i> 755</code>.</li>

<li>Make a note of the program's URL, which will probably be something like
http://<i>server name</i>/cgi-bin/backatcha.cgi) and go to that URL in your 
browser.  (Take a guess what you should do if you don't know what the URL
of the program is.  Hint: It involves the words "ask," "your" and "ISP.")</li>
</ol>
</p><p>If this works, you will see in your browser ... a blank page!
Don't worry, this is what is <i>supposed</i> to happen.  The <code>backatcha.cgi</code>
script throws back what you throw at it, and we haven't thrown anything at it
yet.  We'll give it something to show us in a moment.

</p><p>If it <i>didn't</i> work, you probably saw either an error message or
the source code of the script.  We'll try to diagnose these problems in
the next section.</p>

<h3><a name="uhoh">Uh-Oh!</a></h3>

<p>If you saw an error message, your Web server had a problem running
the CGI program.  This may be a problem with the program or the file permissions.

</p><p>First, are you <i>sure</i> the program has the correct file permissions?  Did
you set the file permissions on your program to 755?  If not, do it now. 
(Windows Web servers will have a different way of doing this.)  Try it again;
if you see a blank page now, you're good.

</p><p>Second, are you <i>sure</i> the program actually works?  (Don't worry,
it happens to the best of us.)  Change the <code>use CGI</code> line in the program
to read:</p>
<pre><code>use CGI ':standard', '-debug';</code></pre>
<p>Now run the program from the command line.  You should see the following:</p>
<pre><code>(offline mode: enter name=value pairs on standard input)</code></pre>
<p>This message indicates that you're <i>testing</i> the script.  You can now
press Ctrl-D to tell the script to continue running without telling
it any form items.

</p><p>If Perl reports any errors in the script, you can fix them now.

</p><p>(The <code>-debug</code> option is incredibly useful.  Use it whenever you have
problems with a CGI program, and ignore it at your peril.)

</p><p>The other common problem is that you're seeing the source code of your
program, not the result of running your program.  There are two simple
problems that can cause this.

</p><p>First, are you <i>sure</i> you're going through your Web server?  If you
use your browser's "load local file" option (to look at something like
<code>/etc/httpd/cgi-bin/backatcha.cgi</code> instead of something like
<code>http://localhost/cgi-bin/backatcha.cgi</code>), you aren't even touching the
Web server!  Your browser is doing what you "wanted" to do: loading the
contents of a local file and displaying them.

</p><p>Second, are you <i>sure</i> the Web server knows it's a CGI program?
Most Web server software will have a special way of designating a file
as a CGI program, whether it's a special <code>cgi-bin</code> directory, the <code>.cgi</code> or <code>.pl</code> extension on a file, or something else.  Unless you
live up to these expectations, the Web server will think the program is
a text file, and serve up your program's source code in plain-text form.
Ask your ISP for help.

</p><p>CGI programs are unruly beasts at the best of times; don't worry if it
takes a bit of work to make them run properly.
</p>

<h3>Making the Form Talk Back</h3>

<p>At this point, you should have a working copy of <code>backatcha.cgi</code> 
spitting out blank pages from a Web server.  Let's make it actually tell
us something.  Take the following HTML code and put it in a file:</p>
<pre><code>&lt;FORM ACTION="putyourURLhere" METHOD=GET>
    &lt;P>What is your favorite color? &lt;INPUT NAME="favcolor">&lt;/P>
&lt;INPUT TYPE=submit VALUE="Send form">
lt;/FORM></code></pre>
<p>
Be sure to replace <code>putyourURLhere</code> with the actual URL of your copy of
<code>backatcha.cgi</code>!  If you want, you can use the <a href="/cgi-bin/backatcha.pl">copy installed here</a> at
Perl.com.

</p><p>This is a simple form.  It will show a text box where you can enter
your favorite color and a "submit" button that sends your information
to the server.  Load this form in your browser and submit a favorite color.
You should see this returned from the server:</p>
<pre><code>favcolor: green</code></pre>
<h3>CGI functions</h3>

<p>The CGI.pm module loads several special CGI functions for you.  What are
these functions?

</p><p>The first one, <code>header()</code>, is used to output any necessary HTTP headers
before the script can display HTML output.  Try taking this line out;
you'll get an error from the Web server when you try to run it.  This
is <i>another</i> common source of bugs!

</p><p>The <code>start_html()</code> function is there for convenience.  It returns a simple
HTML header for you.  You can pass parameters to it by using a hash, like this:</p>
<pre><code>print $cgi->start_html( -title => "My document" );</code></pre>
<p>(The <code>end_html()</code> method is similar, but outputs the footers for your
page.)

</p><p>Finally, the most important CGI function is <code>param()</code>.  Call it with the
name of a form item, and a list of all the values
of that form item will be returned.  (If you ask for a scalar, you'll only get the
first value, no matter how many there are in the list.)</p>

<pre><code>$yourname = param("firstname");
print "&lt;P>Hi, $yourname!&lt;/P>\n";</code></pre>

<p>If you call <code>param()</code> without giving it the name of a form item, it will
return a list of <i>all</i> the form items that are available.  This form
of <code>param()</code> is the core of our backatcha script:</p>
<pre><code>for $i (param()) {
    print "&lt;b>$i&lt;/b>: ", param($i), "&lt;br>\n";
}</code></pre>
<p>Remember, a single form item can have more than one value.  You might encounter
code like this on the Web site of a pizza place that takes orders over
the Web:</p>
<pre>
    &lt;P>Pick your toppings!&lt;BR>
       &lt;INPUT TYPE=checkbox NAME=top VALUE=pepperoni> Pepperoni &lt;BR>
       &lt;INPUT TYPE=checkbox NAME=top VALUE=mushrooms> Mushrooms &lt;BR>
       &lt;INPUT TYPE=checkbox NAME=top VALUE=ham> Ham &lt;BR>
    &lt;/P>
</pre>
<p>Someone who wants all three toppings would submit a form where the form
item <code>top</code> has three values: "pepperoni," "mushrooms" and "ham."  The
server-side code might include this:</p>
<pre>
    print "&lt;P>You asked for the following pizza toppings: ";
    @top = param("top");
    for $i (@top) {
        print $i, ". ";
    }
    print "&lt;/P>";
</pre>

<p>Now, here's something to watch out for.  Take another look at the pizza-topping HTML code.  Try pasting that little fragment into the backatcha form,
just above the <code>&lt;INPUT TYPE=submit...></code> tag.  Enter a favorite color, and check
all three toppings.  You'll see this:</p>
<pre>
    favcolor: burnt sienna
    top: pepperonimushroomsham
</pre>
<p>Why did this happens?  When you call <code>param('name')</code>, you get back
a <i>list</i> of all of the values for that form item.  This could be considered
a bug in the <code>backatcha.cgi</code> script, but it's easily fixed - use <code>join()</code> to
separate the item values:</p>
<pre>
    print "&lt;b>$i&lt;/b>: ", join(', ', param($i)), "&lt;br>\n";
</pre>
<p>or call C&lt;param()> in a scalar context first to get only the first value:</p>
<pre>
    $j = param($i);
    print "&lt;b>$i&lt;/b>: $j<br>\n";
</pre>
<p>Always keep in mind that form items can have more than one value!
</p>

<h3><a name="second_script">Our Second Script</a></h3>

<p>So now we know how to build a CGI program, and we've seen a simple example.
Let's write something useful.  In the last article, we wrote a
pretty good HTTP log analyzer.  Why not Web-enable it?  This will allow you
to look at your usage figures from anywhere you can get to a browser.

<p><a href="/2000/12/httpreport.pl">Download the source code for the HTTP log analyzer</a></p>

</p><p>First, let's decide what we want to do with our analyzer.  Instead of
showing all of the reports we generate at once, we'll show only those
the user selects.  Second, we'll let the user choose whether each report
shows the entire list of items, or the top 10, 20 or 50 sorted by
access count.</p>

<p>We'll use a form such as this for our user interface:</p>
<pre>
    &lt;FORM ACTION="/cgi-bin/http-report.pl" METHOD=POST>
        &lt;P>Select the reports you want to see:&lt;/P>

 &lt;P>&lt;INPUT TYPE=checkbox NAME=report VALUE=url>URLs requested&lt;BR>
    &lt;INPUT TYPE=checkbox NAME=report VALUE=status>Status codes&lt;BR>
    &lt;INPUT TYPE=checkbox NAME=report VALUE=hour>Requests by hour&lt;BR>
    &lt;INPUT TYPE=checkbox NAME=report VALUE=type>File types
 &lt;/P>

 &lt;P>&lt;SELECT NAME="number">
     &lt;OPTION VALUE="ALL">Show all
     &lt;OPTION VALUE="10">Show top 10
     &lt;OPTION VALUE="20">Show top 20
     &lt;OPTION VALUE="50">Show top 50
 &lt;/SELECT>&lt;/P>

 &lt;INPUT TYPE=submit VALUE="Show report">
    &lt;/FORM>
</pre>
<p>(Remember that you may need to change the URL!)

</p><p>We're sending two different types of form item in this HTML page.
One is a series of checkbox widgets, which set values for the form
item <code>report</code>.  The other is a single drop-down list which will
assign a single value to <code>number</code>: either ALL, 10, 20 or 50.

</p><p>Take a look at the original HTTP log analyzer.  We'll start with two
simple changes.  First, the original program gets the filename of the
usage log from a command-line argument:</p>
<pre>
      # We will use a command line argument to determine the log filename.
      $logfile = $ARGV[0];
</pre>
<p>We obviously can't do that now, since the Web server won't allow us to enter
a command line for our CGI program!  Instead, we'll hard-code the
value of <code>$logfile</code>.  I'll use "/var/log/httpd/access_log" as a sample
value.</p>
<pre>
      $logfile = "/var/log/httpd/access_log";
</pre>
<p>Second, we must make sure that we output all the necessary headers to
our Web server before we print anything else:</p>
<pre>
      print header();
      print start_html( -title => "HTTP Log report" );
</pre>
<p>Now look at the <code>report()</code> sub from our original program.  It has
one problem, relative to our new goals: It outputs all the reports instead
of only the ones we've selected.  We'll rewrite <code>report()</code> so that it will
cycle through all the values of the <code>report</code> form item and show the
appropriate report for each.</p>
<pre>
 sub report {
    for $i (param('report')) {
 if ($i eq 'url') {
     report_section("URL requests", %url_requests);
 } elsif ($i eq 'status') {
     report_section("Status code requests", %status_requests);
 } elsif ($i eq 'hour') {
     report_section("Requests by hour", %hour_requests);
 } elsif ($i eq 'type') {
     report_section("Requests by file type", %type_requests);
 }
    }
 }
</pre>
<p>Finally, we rewrite the <code>report_section()</code> sub to output HTML instead
of plain text.  (We'll discuss the new way we're using <code>sort</code> in a moment.)</p>
<pre>
    sub report_section {
 my ($header, %type) = @_;
 my (@type_keys);

 # Are we sorting by the KEY, or by the NUMBER of accesses?
 if (param('number') ne 'ALL') {
     @type_keys = sort { $type{$b} <=> $type{$a}; } keys %type;

     # Chop the list if we have too many results
     if ($#type_keys > param('number') - 1) {
         $#type_keys = param('number') - 1;
     }
 } else {
     @type_keys = sort keys %type;
 }

 # Begin a HTML table
 print "&lt;TABLE>\n";

 # Print a table row containing a header for the table
 print "&lt;TR>&lt;TH COLSPAN=2>", $header, "&lt;/TH>&lt;/TR>\n";

 # Print a table row containing each item and its value
 for $i (@type_keys) {
     print "&lt;TR>&lt;TD>", $i, "&lt;/TD>&lt;TD>", $type{$i}, "&lt;/TD>&lt;/TR>\n";
 }

 # Finish the table
 print "&lt;/TABLE>\n";
    }
</pre>
<h3><a name="sorting">Sorting</a></h3>

<p>Perl allows you to sort lists with the <code>sort</code> keyword.
By default, the sort will happen alphanumerically: numbers before letters,
uppercase before lowercase.  This is sufficient 99 percent of the time.  The
other 1 percent of the time, you can write a custom sorting routine for Perl to use.

</p><p>This sorting routine is just like a small sub.  In it, you compare
two special variables, <code>$a</code> and <code>$b</code>, and return one of three values
depending on how you want them to show up in the list.  Returning
-1 means "<code>$a</code> should come before <code>$b</code> in the sorted list," 1 means
"<code>$b</code> should come before <code>$a</code> in the sorted list" and 0 means
"they're equal, so I don't care which comes first."  Perl will run this
routine to compare each pair of items in your list and produce the sorted
result.
</p><p>
For example, if you have a hash called <code>%type</code>, here's how you might sort
its keys in descending order of their <i>values</i> in the hash.</p>
<pre>
    sort {
        if ($type{$b} > $type{$a}) { return 1; }
 if ($type{$b} &lt; $type{$a}) { return -1; }
 return 0;
    } keys %type;
</pre>
<p>In fact, numeric sorting happens so often, Perl gives you a convenient
shorthand for it: the &lt;=> operator.  This operator will perform the above
comparison between two values for you and return the appropriate value.
That means we can rewrite that test as:</p>
<pre>
    sort { $type{$b} &lt;=> $type{$a}; } keys %type
</pre>
<p>(And this, in fact, is what we use in our log analyzer.)

</p><p>You can also compare strings with <code>sort</code>.  The <code>lt</code> and <code>gt</code> operators
are the string equivalents of <code>&lt;</code> and <code>&gt;</code>, and <code>cmp</code> will perform
the same test as <code>&lt;=&gt;</code>.  (Remember, string comparisons will sort
numbers before letters and uppercase before lowercase.)

</p><p>For example, you have a list of names and phone numbers in the
format "John Doe 555-1212."  You want to sort this list by the person's
last name, and sort by first name when the last names are the same.
This is a job made for <code>cmp</code>!</p>
<pre>
     @sorted = sort {
         ($c) = ($a =~ / (\w+)/);
  ($d) = ($b =~ / (\w+)/);
  if ($c eq $d) {   # Last names are the same, sort on first name
      ($c) = ($a =~ /^(\w+)/);
      ($d) = ($b =~ /^(\w+)/);
      return $c cmp $d;
  } else {
      return $c cmp $d;
  }
     } @phone_numbers;
     for $i (@sorted) { print $i, "\n"; }
</pre>
<h3><a name="trust">Trust No One</a></h3>

<p>Now that we know how CGI programs can do what you want, let's make sure
they won't do what you <i>don't</i> want.  This is harder than it looks,
because you can't trust anyone to do what you expect.

</p><p>Here's a simple example: You want to make sure the HTTP log analyzer
will never show more than 50 items per report, because it takes too long to
send larger reports to the user.  The easy thing to do would be to eliminate
the "ALL" line from our HTML form, so that the only remaining options
are 10, 20 and 50.  It would be very easy - and wrong.

<p><a href="/2000/12/httpsecured.pl">Download the source code for the HTTP analyzer with security enhancements</a>.</p>

</p><p>We saw that you can modify HTML forms when we pasted the pizza-topping
sample code into our backatcha page.  You can also use the URL
to pass form items to a script - try going to
<code>http://www.perl.com/2000/12/backatcha.cgi?itemsource=URL&amp;typedby=you</code>
in your browser.  Obviously, if someone can do this with the backatcha script,
they can also do it with your log analyzer and stick any value for <code>number</code>
in that they want: "ALL" or "25000", or "four score and seven years ago."

</p><p>Your form doesn't allow this, you say.  Who cares?  People will write custom
HTML forms to exploit weaknesses in your programs, or will just pass bad form
items to your script directly.  You cannot trust anything users or
their browsers tell you.

</p><p>You eliminate these problems by knowing what you expect from the user, and
<i>disallowing</i> everything else.  Whatever you do not expressly permit is
totally forbidden.  Secure CGI programs consider everything guilty until it
is <i>made</i> innocent.

</p><p>For example, we want to limit the size of reports from our HTTP log analyzer.
We decide that means the <code>number</code> form item must have a value that is
between 10 and 50.  We'll verify it like this:</p>
<pre>
    # Make sure that the "number" form item has a reasonable value
    ($number) = (param('number') =~ /(\d+)/);
    if ($number &lt; 10) {
        $number = 10;
    } elsif ($number > 50) {
        $number = 50;
    }
</pre>
<p>Of course, we also have to change the <code>report_section()</code> sub so it uses
the <code>$number</code> variable.  Now, whether your user tries to tell your log analyzer that the value of
<code>number</code> is "10," "200," "432023," "ALL" or "redrum," your program
will restrict it to a reasonable value.

</p><p>We don't need to do anything with <code>report</code>, because we only act when one
of its values is something we expected.  If the user tries to enter something
other than our expressly permitted values ("url," "status," "hour" or "type"),
we just ignore it.

</p><p>Use this sort of logic everywhere you know what the user <i>should</i>
enter.  You might use <code>s/\D//g</code> to remove non-numeric characters from items
that should be numbers (and then test to make sure what's left is
within your range of allowable numbers!), or <code>/^\w+$/</code> to make sure
that the user entered a single word.

</p><p>All of this has two significant benefits.  First, you simplify your
error-handling code, because you make sure as early in your program as
possible that you're working with valid data.  Second, you increase
security by reducing the number of "impossible" values that might help
an attacker compromise your system or mess with other users of your Web
server.

</p><p>Don't just take my word for it, though.  The <A HREF="http://www.w3.org/Security/Faq/">CGI Security FAQ</A>
has more information about safe CGI programming in Perl than you ever
thought could possibly exist, including a section listing some
<A HREF="http://www.w3.org/Security/Faq/wwwsf4.html#Q35">security holes</A> in real CGI programs.
</p>

<h3><a name="play_around">Play Around!</a></h3>

<p>You should now know enough about CGI programming to write a useful Web
application.  (Oh, and you learned a little bit more about sorting
and comparison.)
<ol>
<li>Write the quintessential CGI program: a guestbook.  Users enter
their name, e-mail address and a short message, which is appended to
an HTML file for all to see.

<p>Be careful!  Never trust the user!  A good beginning precaution is to
<i>disallow all HTML</i> by either removing &lt; and > characters from all of the
user's information or replacing them with the <code>&lt;</code> and <code>&gt;</code> character
entities.

<p>Use <code>substr()</code>, too, to cut anything the user enters down to
a reasonable size.  Asking for a "short" message will do nothing to prevent
the user dumping a 500k file into the message field!</li>

<li>Write a program that plays tic-tac-toe against the user.  Be sure that
the computer AI is in a sub so it can be easily upgraded.  (You'll probably
need to study HTML a bit to see how to output the tic-tac-toe board.)
</li>
</ol>









        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1772" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/12/p5pdigest/THISWEEK-20001203.html" rel="bookmark">This Week on p5p 2000/12/03</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Simon Cozens</span> on <abbr class="published" title="2000-12-04T00:00:00-08:00">December  4, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            </P>

<P>


<!-- This week on perl5-porters (28 Nov-03 Dec 2000) -->

<br />
<br />
<ul>
  <li><a href="#Notes">Notes</a>
  <li><a href="#Tests">Tests</a>
  <li><a href="#Charnames">Charnames</a>
  <li><a href="#Regular_expression_bug">Regular Expression Bug</a>
  <li><a href="#xsubpp">xsubpp</a>
  <li><a href="#perlipc_examples_buggy">Perlipc Examples Buggy</a>
  <li><a href="#PerlIO_news">PerlIO news</a>
  <li><a href="#Dodgy_function_names">Dodgy Function Names</a>
  <li><a href="#Lvalue_subs">Lvalue Subs</a>
  <li><a href="#Various">Various</a>
</ul>


      <H3><a name="Notes">Notes</a></H3>

</P>

<P>

You can subscribe to an e-mail version of this summary by sending an
empty message to 
<a href="mailto:p5p-digest-subscribe@plover.com"><tt>p5p-digest-subscribe@plover.com</tt>.</a></P>

<P>
Please send corrections and additions to 
<CODE>simon@cozens.net</CODE>.

<H3><a name="Tests">Tests</a></H3>

</P>

<P>

I opted not to mention this last week, but Casey Tweten pointed out that
it was quite important for module authors: regression tests. You write
regression tests, right? Of course, you do. The problem is that there are
umpteen gazillion ways to write regression tests, which makes it
horrible to debug them and find out what's really happening when a test
fails. There's a core module called 
<CODE>Test</CODE> that gives a neat framework for writing tests. There was some
noise on perl5-porters to the effect that people wanted the core
regression tests to use 
<CODE>Test</CODE>, but the counter-argument was that the core tests should be kept as
free from outside interference as possible - the 
<CODE>Test</CODE> module may contain some constructs that the core tests are trying to
test. It's no good loading a module to help with your tests if one of
your tests is whether you can load a module or not! Nevertheless, it
would be nice if some of the more advanced tests were converted to the  
<CODE>Test</CODE> interface. (That was a hint, by the way, for anyone who fancies
doing that.)
</P>

<P>
The real outcome of this was a patch by Casey to convert the standard
module template generated by 
<CODE>h2xs</CODE> to use the 
<CODE>Test</CODE> module, and to encourage (i.e. force) module authors to use it. So, module
authors, if you don't know about 
<CODE>Test.pm</CODE>, you will soon.
<H3><a name="Charnames">Charnames</a></H3>

</P>

<P>

<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01394.html">This patch</a> from Ilya took me a while to get my head around, but now I have and I
think it's beautiful. When doing Unicode testing and entering Unicode
data without a Unicode editor, we have to resort to things like
</P>

</P><PRE>
    $x =
    "\x{395}\x{3CD}\x{3B1}\x{3B3}\x{3B3}\x{3B5}\x{3BB}\x{3CA}\x{3B1}";
</PRE>

<P>
or
</P>

</P><PRE>
    $x =
    v917.973.945.947.947.949.955.970.945;
</PRE>

<P>
or even
</P>

</P><PRE>
    $x = 
    "\N{GREEK CAPITAL LETTER EPSILON}\N{GREEK SMALL LETTER UPSILON}...";
</PRE>

<P>
This is a nightmare.
</P>

<P>
Ilya's solution allows you to enter Unicode texts in foreign languages
as Latin transliterations. He gives a module that provides Russian
transliterations, so with Ilya's module you can now do:
</P>

</P><PRE>
    use Charnames qw(cyrillic);
    $x = "\N{Il'ya Zakharevich}";
</PRE>

<P>
and Perl will do the right thing. The suggestion is to have a few
transliteration modules in the core for testing and to have
less-commonly used ones on CPAN. 
</P>

<P>
However, in many non-Latin languages, transliteration to the Latin
alphabet is vague at best, and there are usually several different
methods of doing so; worse, the mappings are sometimes nonreversable
and/or non-one-to-one. Ilya's module for Russian is neat, but
doesn't cover everything.
<H3><a name="Regular_expression_bug">Regular Expression Bug</a></H3>

</P>

<P>

Jarkko has been turning up all sorts of wonders with his experiments in
UTF8 regular-expression land. This time, he has found that
</P>

</P><PRE>
    use utf8; @a=("b" =~ /(.)/)
</PRE>

<P>
will cause a segmentation fault, which is horrid. Worse, this only seems
to fail on 64-bit platforms, regardless of the setting of 
<CODE>use64bitint</CODE>, which suggested some hidden assumption. Eventually, it was traced to a
careless read in 
<CODE>sv_utf8_downgrade</CODE>; Jarkko says:
</P>

</P>
<blockquote>
        Why the different platforms behave so differently (core dump vs.
        no core dump) on this bug is a but of a mystery, but if I had to
        guess I would mumble something like 'alignment.'
</blockquote>

<P>
This is why being the Configure pumpkin is such a demanding job.
</P>

<P>
Another core dump came from
</P>

</P><PRE>
    use utf8; "," =~ /([^,]*,)*/
</PRE>

<P>
and another from
</P>

</P><PRE>
    use utf8; 
    $x = $^R = 67;
    "foot" =~ /foo(?{ $^R + 12 })((?{ +$x = 12; $^R + 17 })[xy])?/;
</PRE>

<P>
which was traced to a failure to save and restore the parantheses count.
Again, the symptoms were confusingly different on different machines.
<H3><a name="xsubpp">xsubpp</a></H3>

</P>

<P>

Ilya produced a patch for 
<CODE>xsubpp</CODE> that allows the 
<CODE>OUT</CODE> and 
<CODE>IN_OUT</CODE> keywords; this is in addition to the old 
<CODE>IN_OUTLIST</CODE> and 
<CODE>OUTLIST</CODE> keywords. 
</P>

<P>
These are somewhat confusing, but here's my understanding of what they
do: A parameter in a C function marked 
<CODE>OUTLIST</CODE> will have its value at the end of the function added to the list of return 
values to Perl. A parameter labeled 
<CODE>IN_OUT</CODE> will be read from a Perl variable
at the beginning of the C function, and the value of the C variable at the
end of the C function will be put back into the Perl variable. In effect, 
<CODE>IN_OUT</CODE> gives you a pointer to write through, which is &quot;tied&quot; to a Perl variable. 
[IN_OUTLIST] does the same, but instead of writing the value back to the
Perl variable, it goes onto the list of return values. 
</P>

<P>
An 
<CODE>OUT</CODE> value is set to the return value of the C function - I think.
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01402.html">Decide for yourself.</a></P>

<P>

<H3><a name="perlipc_examples_buggy">Perlipc Examples Buggy</a></H3>

</P>

<P>
Nicholas Clark gave what I shall call an &quot;impassioned appeal&quot; about the
state of the 
<CODE>perlipc</CODE> documentation; some of the examples didn't even compile, much less do
 what they claimed to do. This also turned up a problem with 
<CODE>Net::hostent</CODE>, which was particularly embarrassing since 
<CODE>Net::hostent</CODE> didn't have a regression test. Nicholas wiped up the worst of the 
<CODE>perlipc</CODE> bugs, and provided a basic regression test, which Robert Spier 
expanded. As Jarkko pointed out, writing a portable test for it is
tricky, but any test is better than none ... .
</P>

<P>
(Hey, maybe someone would like to try writing a program that
automatically extracts example code from the documentation and makes
sure it compiles?)
<H3><a name="PerlIO_news">PerlIO news</a></H3>

</P>

<P>

Using my magic crystal ball, I found that this week saw 500 patches to
the Perl repository. Naturally, the bulk of them - a massive 400 - were
the development main line, 32 were Sarathy integrating bunches of
patches into 5.6.1-to-be, but the remaining 67 were Nick beavering away on
the PerlIO branch. This should remind you that most of the PerlIO
improvements happen without much advertisement, and it's easy to be
unaware of exactly how much work is going on there. 
</P>

<P>
Here's what Nick says about how PerlIO is going:
<BLOCKQUOTE><CODE>-Duseperlio</CODE> now works as a replacement for stdio on UNIX platforms. As of last weekend, it was also working in &quot;same functions as before&quot;
   mode
   on Win32 in Win32's &quot;simple&quot; configuration.
   There has been some progress, but not success, in getting OS/2 in
   line.
   (Nothing on VMS yet.)
</P>

<P>
   This week's target is the 
<CODE>PERL_IMPLICIT_SYS</CODE> scheme on Win32 that is needed for 
<CODE>fork()</CODE> emulation. Once that is built, the plan is to
   replace low-level pseudo-unix 
<CODE>read()</CODE> on Win32 with our own version.</P>

<P>

   The other area of work is to turn on use of PerlIO to allow
   files to be read/written as utf8 under programmer control.
</P>

<P>
   Once that works, then we hook PerlIO to Encode - and we are &quot;done&quot; ;-)
   (This is actually a bit messy right now as PerlIO is deep under the
   core, and Encode.pm is an external XS module.)
</BLOCKQUOTE></P>

<P>

Since Nick is going to be allowing layers to be accessible under
programmer control, we need to know what layers ought to do, and this
was Nick's question: &quot;So would anyone care to remind me what the Unicode
issues were that we want to solve?&quot;
</P>

<P>
Briefly, we want to be able to read in UTF8-encoded text into
UTF8-encoded SVs, and have the same output. One of the other uses of layers
would be the CRLF translation magic used on DOS-derived systems and to
replace the source filter mechanism. 
<H3><a name="Dodgy_function_names">Dodgy Function Names</a></H3>

</P>

<P>

This causes a syntax error:
</P>

</P><PRE>
    sub f {}
    $x-f($y);
</PRE>

<P>
This is because Perl assumes that 
<CODE>-f</CODE> is a file-test operator, and wonders what it's doing next to a
variable with no binary operator in the middle. Some people, including
Jarkko, thought that was silly; if I define a sub 
<CODE>f</CODE>, Perl should know that I'm trying to call that subroutine. 
</P>

<P>
This naturally applies not just for the file tests, but any other
operators that look like functions, such as 
<CODE>y</CODE> and 
<CODE>s</CODE>. Several solutions were proposed, such as forcing Perl to use the
subroutine, or outlawing subroutines with &quot;reserved&quot; names. In the end, 
Jarkko produced a patch for the file tests that spits out a warning
in the above case - I think the 
<CODE>y</CODE>,  
<CODE>m</CODE>, and other cases are still on the loose. 
<a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-12/msg01574.html">The whole thread </a>
 (36 messages) is worth reading, if only so you can get an idea of what nefarious things
Perl porters get up to when syntax goes bad.
<H3><a name="Lvalue_subs">Lvalue subs</a></H3>

</P>

<P>

Casey asked for more useful lvalue subroutines. At the moment, you can
say things like:
</P>

<PRE>
  package Person;
  sub new { bless { name =&gt; $name }, shift }
  sub name : lvalue { $_[0]-&gt;{name} }

  package main;

  my $p    = Person-&gt;new;
  $p-&gt;name = &quot;casey&quot;;
  print $p-&gt;name . &quot;\n&quot;;
</PRE>

<P>
Note that 
<CODE>$p->name</CODE> on the left-hand side of that assignment is actually a method call returning
an lvalue. Cool, huh?
</P>

<P>
Casey mentioned that he'd really like some way of getting at the
right-hand side of the assignment as well, in order to do things like 
implementing 
<CODE>substr</CODE> in pure Perl. Rick Delaney suggested that you could return a tied lvalue, 
but Casey replied that that was slow; the alternative was yet another 
global. Piers appealed for a faster tie system, which is fine, but someone has
to design it, code it and make it better than the current
one while doing all the same things.
</P>

<P>
Yitzchak pointed out that there's more to lvalues than just the assignment
context, and having a way to get at the rvalue would probably break in 
nonassignment cases. 
<H3><a name="Various">Various</a></H3>

</P>

<P>

Yes, floating-point numbers are imprecise. We know. However, thanks to Nick
Clarke, there's now far fewer of them.
</P>

<P>
Until next week, I remain, your humble and obedient servant,
</P>

<hr>

<a href="mailto:simon@brecon.co.uk">Simon Cozens</a>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/2000/11/">&laquo; November 2000</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2001/01/">January 2001 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
