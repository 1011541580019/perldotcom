<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type Pro 5.13-en" />
<link rel="stylesheet" href="/pub/styles.css" type="text/css" />
<link rel="start" href="/pub/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/pub/atom.xml" />
<script type="text/javascript" src="/pub/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="/pub/">
<dc:title>Perl.com</dc:title>
<dc:description>news and views of the Perl programming language</dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<script type="text/javascript">

 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-50555-22']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type =
   'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
   'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0];
   s.parentNode.insertBefore(ga, s);
 })();

</script>
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'></script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-4136420132070439");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-4136420132070439", "Perl_728x90");
</script>
<script type='text/javascript'>GA_googleFetchAds();</script>
    <title>Perl.com: January 2000 Archives</title>


    <link rel="prev" href="/pub/1999/12/" title="December 1999" />
    <link rel="next" href="/pub/2000/02/" title="February 2000" />

</head>
<body id="perl-com" class="mt-archive-listing mt-datebased-monthly-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">
        <span id="top_advert"> 
<!-- Put any landscape advert in here -->
<!-- Perl_728x90 -->
<script type='text/javascript'>
GA_googleFillSlot("Perl_728x90");
</script>
        </span> 



            <div id="header-name"><a href="/pub/" accesskey="1">Perl.com</a></div>
            <div id="header-description">news and views of the Perl programming language</div>




        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">January 2000 Archives</h1>





                            
                            <div id="entry-1656" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/01/rss.html" rel="bookmark">RSS and You</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Chris Nandor</span> on <abbr class="published" title="2000-01-25T00:00:00-08:00">January 25, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!-- RSS and You -->

<br />
<br />
<H3><A NAME="RSS_is_Born">RSS is Born</A></H3>
<P>
<!-- INDEX BEGIN -->

<table width="175" cellspacing="0" cellpadding="6" align="right" bgcolor="#cccccc">
<tr>
<td valign="top">
<b>Contents:</b><br />
&#149; <A HREF="#RSS_is_Born">RSS is Born</A><br />
&#149; <A HREF="#XML_RSS">XML::RSS</A><br />
&#149; <A HREF="#My_Portal">my_portal</A><br />
&#149; <A HREF="#Future_of_My_Portal">Future of my_portal</A><br /><br /></td>
</tr>
</table>
<!-- INDEX END -->
Netscape had one of the first "portals" on the Web, a place where users could go to get most of their information needs fulfilled: search engines, news, email, and more.  But Netscape soon wanted a portal that was more customizable by the user and contained content from any site that wanted to contribute. Hence 
<a href="http://my.netscape.com/">My Netscape
Network</a> (MNN) was born.

<P>
At MNN, the user can choose what content to put on their own
page&#151;the latest headlines on
<A HREF="http://slashdot.org/">Slashdot</A>,
recently uploaded files at
<A HREF="http://www.freshmeat.net/">freshmeat</A>,
or the most recent posts to a bulletin board at
<A HREF="http://network54.com/">Network54</A>.
Each <em>channel</em>, as Netscape calls
them, can also include information to display an image for that channel and a text input box for searching the channel's site.


<P>
The channels are described with formatted text files that are updated either at regular intervals, or whenever the site's content changes.  The Netscape servers periodically download the updated channel files from the various sites providing them, and that information is then made immediately available to the users.

<P>
In addition to the list of items and associated hyperlinks,
the channel files can also contain information to display a text box for a form, 
and an image link, as well as metadata about the site.

<P>
In order to do all this, a universal way for developers to describe their sites was needed. 
Netscape developed the RDF Site Summary (RSS) format, which uses XML and the 
<a href="http://www.w3.org/RDF/">Resource Description Framework</a> (RDF), 
a hierarchical data model used primarily for describing web-based metadata.
<A HREF="http://my.netscape.com/publish/help/quickstart.html">RSS 0.90</A>
was the first version, released in March 1999.  
RSS is very simple to work with, and because it is XML, it is both human-readable and 
easily parsed by many different languages and programs.

<P>
The fundamental container for the RSS data is the
<em>channel</em>. Properties within the channel include
<em>title</em>, <em>link</em>, and <em>description</em>, most of which are optional. Optional containers inside the channel are <em>image</em> and <em>textinput</em>, each with their own properties. At least one (and up to 15) <em>item</em> is included in the channel.  

<a
href="http://www.news.perl.org/perl-news-short.rdf">The Perl News RSS
file</a> is a typical example:
<p>

<TABLE width="450" CELLPADDING="8" BORDER="1" CELLSPACING="0">
<tr>
<TD valign="top" ALIGN="CENTER" >
<P><A HREF="http://www.news.perl.org/"><IMG SRC="http://www.news.perl.org/perl-news-small.gif" BORDER="0" ALT="Perl News" HEIGHT="30" WIDTH="119"></A></P>
</td>

 <td valign="top" rowspan="2">
<pre>

...

&lt;channel&gt;
&lt;title&gt;Perl News&lt;/title&gt;
&lt;link&gt;http://www.news.perl.org/&lt;/link&gt;
&lt;description&gt;News for the Perl Community&lt;/description&gt;
&lt;language&gt;en&lt;/language&gt;
&lt;copyright&gt;Copyright 1999, Chris Nandor&lt;/copyright&gt;
&lt;pubDate&gt;Sun, 02 Jan 2000 10:58:39 EST&lt;/pubDate&gt;
&lt;lastBuildDate&gt;Sun, 02 Jan 2000 10:58:39 EST&lt;/lastBuildDate&gt;
&lt;managingEditor&gt;news@perl.org&lt;/managingEditor&gt;
&lt;webMaster&gt;news@perl.org&lt;/webMaster&gt;

...

&lt;item&gt;
&lt;title&gt;Perl Conference Papers Deadline Extended Two Days&lt;/title&gt;
&lt;link&gt;http://www.news.perl.org/perl-news.cgi?item=947976240|9809&lt;/link&gt;
&lt;/item&gt;

&lt;item&gt;
&lt;title&gt;Robert Writes in Defense of Coding Standards&lt;/title&gt;
&lt;link&gt;http://www.news.perl.org/perl-news.cgi?item=947976265|9810&lt;/link&gt;
&lt;/item&gt;

...

&lt;textinput&gt;
&lt;title&gt;Search Perl News&lt;/title&gt;
&lt;description&gt;Search the Perl News database&lt;/description&gt;
&lt;name&gt;text&lt;/name&gt;
&lt;link&gt;http://www.news.perl.org/perl-news.cgi&lt;/link&gt;
&lt;/textinput&gt;

&lt;/channel&gt;
&lt;/rss&gt;
</pre>
</td>

<tr>
<td valign="top" bgcolor="#cccccc">
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947976240|9809">Perl Conference Papers Deadline Extended Two Days</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947976265|9810">Robert Writes in Defense of Coding Standards</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947976272|9812">Netizen Releases Training Materials</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947976279|9813">New Modules 10-14 January 2000</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947555023|5039">PerlMonth Issue 8 Now Available</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947555033|5040">New Modules  5-9 January 2000</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947093003|13831">Linux Magazine Publishes Wall's Uncultured Perl</A><BR>
<IMG SRC="http://www.news.perl.org/my_portal/bullet.gif" ALIGN="top" HEIGHT="10" WIDTH="10" ALT=" * "><A HREF="http://www.news.perl.org/perl-news.cgi?item=947093012|13833">New Modules  4 January 2000</A><BR>
<FORM ACTION="http://www.news.perl.org/perl-news.cgi" METHOD="GET"><P>
Search Perl News <INPUT TYPE="text" NAME="text">
</P></FORM>
</p>
<P><EM CLASS="small" STYLE="font-size: small; text-align: left">January 15, 2000, 17:45 EST</EM></P></TD>
</tr>
</table>
</p>

<P>

RSS files like this are now used by thousands of sites on
the Web.  And Netscape is not the only one providing all of this content. UserLand, which had been using its own channel description format (called <i>scriptingNews</i>) since late 1997, was one of the early adopters of RSS for 
<a href="http://my.userland.com/">My UserLand</a>. The
important features of its scriptingNews format were integrated into
<A HREF="http://my.netscape.com/publish/help/mnn20/quickstart.html">RSS 0.91</A>.

<P>
The distribution of content via channels resembles the distribution of content via cable TV in that not 
all channels are carried by all providers.  A site that
carries RSS channels related to freedom of speech might not carry the Perl News channel.  
Netscape carries any type of
channel.  UserLand carries news channels only. Slashdot (which has its own RSS channel) also allows users to customize their personal Slashdot page with other channels, which they call <em>Slashboxes</em>. But Slashdot has a much narrower focus than My UserLand and MNN, carrying
only channels that relate to free software and hackers.
<a href="http://www.xmltree.com/">xmlTree</a> attempts to categorize as much of the XML content available on the Web as possible, much of which is RSS content.


<P>
<HR>
<H3><A NAME="XML_RSS">XML::RSS</A></H3>
<P>
Jonathan Eisenzopf, who has worked on a lot of XML projects for Perl and who runs 
<a href="http://perlxml.com/">the <CODE>perlxml.com</CODE> web site</a>, wrote 
<a href="http://search.cpan.org/search?module=XML::RSS">the <CODE>XML::RSS</CODE>
module</a>. It is based on <CODE>XML::Parser</CODE>, as most XML modules are, and uses an object-oriented
syntax. It makes creation and parsing of RSS files easy.

<P>
To create an RSS channel, you first create an <CODE>XML::RSS</CODE> object:

<P>
<PRE>
    use XML::RSS;
    my $rss = new XML::RSS;
</PRE>
<P>
Then call any of the four primary methods: <CODE>channel(),</CODE>
<CODE>image(),</CODE> <CODE>textinput(),</CODE> or <CODE>add_item().</CODE>
The <CODE>channel()</CODE> method sets up information about the channel (not all the options are included here):

<P>
<PRE>
    $rss-&gt;channel(
        title           =&gt; 'Perl News',
        'link'          =&gt; 'http://www.news.perl.org/',
        description     =&gt; 'News for the Perl Community',
    );
</PRE>
<P>
Then you can call the optional <CODE>textinput()</CODE> and <CODE>image()</CODE> methods.  The image data will tell the site that uses the channel where to get the image and what to link it to.  The textinput data describes the action, the
submit button value, and the name of the text input box so that a form can be presented to the user.

<P>
<PRE>
    $rss-&gt;image(
        title   =&gt; 'Perl News',
        url     =&gt; 'http://www.news.perl.org/perl-news-small.gif',
    );
</PRE>
<P>
<PRE>
    $rdf-&gt;textinput(
        title       =&gt; 'Search Perl News',
        description =&gt; 'Search the Perl News database',
        name        =&gt; 'text',
        'link'      =&gt; 'http://www.news.perl.org/perl-news.cgi',
    );
</PRE>
<P>
And then, for each item to add to the channel, call the
<CODE>add_item()</CODE> method:

<P>
<PRE>
    for my $i (keys %items) {
        $rss-&gt;add_item(
            title   =&gt; $items{$i},
            'link'  =&gt; &quot;http://www.news.perl.org/perl-news.cgi?item=$i&quot;,
        );
    }
</PRE>
<P>
The final step is to save it. You can either get the data with the <CODE>as_string()</CODE> method and then save it, or just save it directly with the <CODE>save()</CODE> method.

<P>
<PRE>
    my $data = $rss-&gt;as_string;             # or ...
    $rss-&gt;save(&quot;$dir/$channel.rss&quot;);
</PRE>
<P>

For an example of using <CODE>XML::RSS</CODE> to create RSS, see 
<a href="http://www.news.perl.org/perl-news.plx">the source for the program that generates Perl News</a>.  The program that generates the HTML for the Perl News main page generates the RSS file at the same time.

<P>
It seems that, as with HTML, many (if not most) RSS files are created by hand, or at least using a 
template from a program. That is fine to do, but using <CODE>XML::RSS</CODE> has the advantage 
of creating valid, well-formed data (which is exceedingly important with XML); and, of course, as the 
RSS format evolves,the module can evolve with it. 
It's simply easier, in many cases.

<P>
<HR>
<H3><A NAME="My_Portal">my_portal</A></H3>
<P>
While it was pretty cool that RSS channels were being created for most of the sites I frequented, I was getting frustrated that the content providers out there did not provide all of the channels I wanted, or they weren't in the
layout I wanted, or they just did something I didn't like. I wanted to control the content myself. That's the whole point, right? So I finally got around to doing something about it, and wrote a program for a new site I call
<a href="http://www.news.perl.org/my_portal/"><CODE>my_portal</CODE></a>.

<P>
The purpose of the project was to let me view the content 
I wanted from the sites I wanted in the format I wanted. And, of course, I wanted others to be able to do the same thing, because I was pretty sure that I was not the only one with this dilemma (and the feedback I've received confirms this).
So I made a basic, lightweight program using
Eisenzopf's <CODE>XML::RSS</CODE>. The program only does a few things: it fetches RSS channels, and it displays them on the Web.


<P>
To display the RSS channels, I need to parse them.  <CODE>XML::RSS</CODE>
and <CODE>XML::Parser</CODE> come to the rescue again, with the
<CODE>parse()</CODE> and <CODE>parse_file() methods:</CODE>

<P>
<PRE>
    $rss-&gt;parse($data);                     # or ...
    $rss-&gt;parsefile(&quot;$dir/$channel.rss&quot;);
</PRE>
<P>
<CODE>$rss</CODE> is a hashref, and I extract the elements as with any complex data structure:

<P>
<PRE>
    print qq{&lt;A HREF=&quot;$rss-&gt;{channel}{'link'}&quot;&gt;$rss-&gt;{channel}{title}&lt;/A&gt;};
</PRE>
<P>
<PRE>
    for my $i (@{$rss-&gt;{items}}) {
        print qq{&lt;A HREF="$i-&gt;{'link'}"&gt;$i-&gt;{title}&lt;/A&gt;};
    }
</PRE>
<P>
<PRE>
    print qq{&lt;FORM METHOD="GET" ACTION="$rss-&gt;{textinput}{'link'}"&gt;
             &lt;INPUT TYPE="TEXT" NAME="$rss-&gt;{textinput}{name}"&gt;
             &lt;/FORM&gt;};
</PRE>


<P>
When the data structure gets confusing, I'll often print it out with <CODE>Data::Dumper</CODE> to get a good look at it:

<P>
<PRE>
    use Data::Dumper;
    print Dumper $rss;
</PRE>



<P>
The program's interface is fairly simple. From the command line, I can add a channel by typing its name and the URL of the RSS file. The channel is added to a DBM file, and then its RSS file is downloaded (and so is the image from the RSS file, if available). I can update each channel
individually, or all at once. I set a cron job to download new data every time the big hand is on the twelve or the six, so the content is updated all day long. Using the LWP::Simple module's <CODE>mirror()</CODE> function, a new RSS file and image are only downloaded if the remote server
says they have been modified.

<P>
The fact that <CODE>my_portal</CODE> was designed primarily for my own use has not dissuaded people from requesting features for it, or me from trying to provide some of them. First, there was user configurability. A configure screen presents a form where a user can choose which channels to view, and in what order. Just for kicks, the user can also select the colors of the page. All of these things have my personal choices as the default, but the user can change them at will. The data for these preferences is stored in another DBM, and remembered through cookies. Because some users wanted to use more than one computer or browser, I went ahead and added usernames and passwords so that they
could log in and use the same configuration from anywhere.

<P>
I also worked to make sure that <code>my_portal</code> constructs valid HTML. I am really annoyed by sites that don't work in certain browsers, or look bad in some, so I made sure to use valid HTML 4.0 for the entire site. It looks just fine in all browsers from Lynx to Mozilla. However, because the program pulls in content from other sources, it is possible that a page will be produced containing invalid HTML. Someone may try to embed
incorrect HTML tags or entities in their RSS, or neglect to encode entities that need to be encoded.

<P>
Normally, <CODE>XML::Parser</CODE> will croak on many of these common problems, so they will never get to your HTML page anyway. If an item's title is <em>Amazon.com
Sues Barnes &amp; Noble</em>, the ampersand will cause an exception, because it needs to be turned into an encoded entity (such as <CODE>&amp;amp;</CODE>).
Another problem I've run into is RSS files in Mac OS text format (using CRs instead of LFs or CRLFs), which for some odd reason were making the parser choke. So I wrote some filters that process the RSS files after <CODE>LWP::Simple::mirror()</CODE>
downloads them, before they are passed to <CODE>XML::RSS</CODE>.
A simple regex converts CRs and CRLFs to LFs, and then any ampersand that is not followed by
<CODE>[a-zA-Z0-9]+;</CODE> or <CODE>#\d+;</CODE> is converted into <CODE>&amp;amp;</CODE>.

<P>
<PRE>
    {
        my @time = (stat $file)[8,9];
        local $^I = '.bak';
        local @ARGV = $file;
        while (&lt;&gt;) {
            s/\015\012?/\012/g;
            s/&amp;(?!(?:[a-zA-Z0-9]+|#\d+);))/&amp;amp;/g;
            print;
        }
        # continued below 
        ...
    }
</PRE>

<P>
I need to do one more thing before I am done with the filtered file.  An optional property in the channel data notes the time when the channel was published (lastBuildDate), and <CODE>my_portal</CODE> prints it on the web page, so users have some idea of how recently updated the channel is. If that optional data is not in the RSS file, the program uses the modification time of the RSS file on disk, which <CODE>LWP::Simple::mirror()</CODE> sets to whatever the remote server says the modification time of the remote file is. So before touching the original file, we use <CODE>stat()</CODE> to get the access and modification time. After saving the new file, we use
<CODE>utime()</CODE> to set those values to the newly saved file, so the modification time of the file is preserved.

<P>
<PRE>
    {
        ...
        # continued from above
        utime @time, $file;
        unlink &quot;$file.bak&quot;;
    }
</PRE>
<P>
You probably won't be able to construct filters to fix all potential problems with the RSS files&#151;if they are totally broken, and your computer doesn't happen to have artificial intelligence, then there is nothing you can do&#151;so make sure you catch exceptions when parsing XML:

<P>
<PRE>
    for my $channel (@channels) {
        eval { $rss-&gt;parse(&quot;$dir/$channel.rss&quot;) }
        warn &quot;XML for channel $channel not well formed:\n$@&quot;
            and last if $@;
</PRE>
<P>
<PRE>
        # do something with $rss data ...
    }
</PRE>
<P>
<HR>
<H3><A NAME="Future_of_My_Portal">Future of <CODE>my_portal</CODE></A></H3>
<P>
There are some features that <CODE>my_portal</CODE>, because of its limited design scope, won't accommodate in its current form. One suggestion was that users be able to add arbitrary RSS channels to their personal page through
an external link ("click here to add Foo News to Your Portal!"). This is a fine idea, but it doesn't fit the scheme and scope of the project; the interface and backend would need to be rethunk to do something like this. It may happen in the future, though.

<P>
Also, <CODE>my_portal</CODE> currently does not support locking for the user's or channel DBMs. For the channel DBM, this is not a serious problem, since only one person would likely be changing that DBM anyway. 
<p>

For the user's DBM, this could be a problem. Moving the data to MySQL first would solve the problem. Otherwise, locking may be added eventually. My bet is on moving
to MySQL first.

<P>
The <CODE>my_portal</CODE> program is also a little bit slow; each time it displays the channel, it executes, reads in the user database to find the user, and then reads in all of the appropriate channels. If <CODE>my_portal</CODE> were to be extended for widespread use, the best thing to do would probably be to make it into a mod_perl process that uses MySQL. That would solve or significantly
alleviate the speed problems and the data problems, since it would always be loaded in, have persistence to the database connection, handle simultaneous accesses, and so on. 

<P>
Since it suits my personal purposes fine as it is, and since I don't get paid to work on it, I may or may not get to these and other changes in the near future. But the program is, after all, open source and available at
<a href="http://www.news.perl.org/my_portal/my_portal.plx"
><CODE>http://www.news.perl.org/my_portal/my_portal.plx</CODE></a>. Patches welcome!

<P>



        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1654" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="/pub/2000/01/CodingStandards.html" rel="bookmark">In Defense of Coding Standards</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author">Kirrily &quot;&quot;Skud&quot;&quot; Robert</span> on <abbr class="published" title="2000-01-12T00:00:00-08:00">January 12, 2000 12:00 AM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <!-- In Defense of Coding Standards -->
<h3>How to Create Coding Standards that Work</h3>

<p>One of the things that we love most about Perl is its flexibility, itssimilarity to natural language, and the fact that There's More Than One Way
To Do It. Of course, when I say ``we'' I mean Perl hackers; the implicit
``them'' in this case is management, people who prefer other languages, or
people who have to maintain someone else's line noise.
</p>
<p>
<table width="200" cellspacing="12" cellpadding="12" align="right" border="0">
<tr>
<td valign="top">
<font size="+1"><b>"Just because there are bad coding standards out there, doesn't mean that all coding standards are bad."</b></font></td>
</tr>
</table>
</p>
<p>
Perl programmers tend to rebel at the idea of coding standards, or at
having their creativity limited by arbitrary rules -- otherwise, they'd be
coding in Python :). But I think that sometimes a little bit of
consistency can be a good thing.  
</p>

<p>
As Larry himself said in one of his State of the Onion talks, 
three virtues of coding are Diligence, Patience and Humility. Diligence (the opposite
of Laziness, if you're paying attention) is necessary when you're working
with other programmers. You can't afford to name your variables <code>$foo</code>, <code>$bar</code>, and <code>$stimps_is_a_sex_goddess</code> if someone has to come along after you and figure out what the hell you
meant. This is where coding standards come in handy.
</p>

<p>
Let me tell you about my recent experiences writing coding standards.
</p>

<p>
I work in a small company with about half a dozen coders on staff. We code
in languages such as Perl, Python, and C, with occasional excursions into
things like SQL and non-programming-languages like HTML.
</p>

<p>
We'd been working together a few months when it was decided that some
development standards (slightly broader than coding standards, but mostly
related to coding) would be a good idea. The difficulties we wanted to
address were:

<ul>
<li>
program design, 
</li>

<li>
naming conventions, 
</li>

<li>
formatting conventions, 
</li>

<li>
documentation, and
</li>

<li>
licensing. 
</li>
</ul>
</p>

<p>
All these issues had popped up already in our few short months of working
with each other, especially when one person handed a project over to
another. We needed to create some standards to ensure that all our work was
consistent enough for other people to follow, but we didn't want to do this
at the expense of individuality or creativity. And we didn't want to insult
our coders' intelligence by dictating every little thing to them.
</p>

<p>
Being the person who tends to write things in our company, I took it upon
myself to put together some standards with the help of the developers. From
the beginning, my plan was to set some general ground rules, then to expand
on them language by language where necessary. I wanted the standards to be
as brief as possible, while still conveying enough information for a
hypothetical new hire to read and understand without having to guess at
anything.
</p>

<p>
Here's what we came up with as our general rules:

<ol>
<li>
The verbosity of all names should be proportional to the scope of their use

<li>
The plurality of a variable name should reflect the plurality of the data
it contains. In Perl, <code>$name</code> is a single name, while <code>@names</code> is an array of names

<li>
In general, follow the language's conventions in variable naming and other
things. If the language uses <code>variable_names_like_this</code>, you should too. If it uses <code>ThisKindOfName</code>, follow that.

<li>
Failing that, use <code>UPPER_CASE</code> for globals, <code>StudlyCaps</code> for classes, and
<code>lower_case</code> for most other things. Note the distinction between words by using either
underscores or StudlyCaps.

<li>
Function or subroutine names should be verbs or verb clauses. It is
unnecessary to start a function name with <code>do_</code>.

<li>
Filenames should contain underscores between words, except where they are
executables in <code>$PATH</code>. Filenames should be all lower case, except for class files which maybe in
StudlyCaps if the language's common usage dictates it.
</ol>
</p>

<p>
That's it. That's the core of our coding standards.
</p>

<p>
Those rules were developed during a one-hour meeting with all development
staff. There's nothing there that anyone disagrees on at all, and I think
that's because the rules are basically common sense.
</p>

<p>
Our standards then go on to give a few extra guidelines for each language.
For Perl, we have the following standards:
</p>

<p>
1. Read 
<a href="/pub/doc/manual/html/pod/perlstyle.html"><code>perldoc perlstyle</code></a>
 and follow all suggestions contained therein, except where they disagree
with the general coding standards, which take precedence.
</p>

<p>
2. Use the <code>-w</code> command line flag and the <code>strict</code> pragma at all times, and <code>-T</code> (taint checking) where appropriate.
</p>

<p>
3. Name Perl scripts with a <code>.pl</code> extension, and CGI scripts with a
<code>.cgi</code> extension. One exception: Perl scripts in <code>$PATH</code> may omit the <code>.pl</code>.
</p>

<p>
... and a few more, about one printed page in total. For instance, we have
a couple of regexp-related guidelines, a couple of points about references
and complex data structures (including when not to use them), and a list of
our favourite modules that we recommend developers use 
(<code>CGI</code>, <code>DBI</code>, <code>Text::Template</code>, etc.).
</p>

<p>
Our documentation standards say to include at least a <code>README</code>,
<code>INSTALL</code> and <code>LICENSE</code> file with each piece of software; that each source code file should include
the name, author, description, version and copyright information; that any
function that needs more than two lines of comments to explain what it does
needs to be written more clearly; and that any more detailed documentation
should be handed to professional technical writers.
</p>

<p>
Coding standards needn't be onerous. Just because there are bad coding
standards out there, doesn't mean that all coding standards are bad.
</p>

<p>
I think the way to a good coding standard is to be as minimalist as
possible. Anything more than a couple of pages long, or which deviates too
far from common practice, will frustrate developers and won't be followed.
And standards that are too detailed may obscure the fact that the code has deeper problems.
</p>

<p>
Here's a second rule: standardise early! Don't try to impose complex
standards on a project or team that's been going for a long time -- the
effort to bring existing code up to standard will be too great. If your
standards are minimal and based on common sense, there's no reason to wait
for the project to take shape or the team's preferences to become known.
</p>

<p>
If you do set standards late, don't set out on a
crusade to bring existing code up to scratch. Either fix things as you come
to them, or (better) rewrite from scratch. Chances are that what you had
was pretty messy anyway, and could do with reworking.
</p>

<p>
Third rule? I suppose three rules is a good number. The third rule is to
encourage a culture in which standards are followed, not because Standards
Must Be Obeyed, but because everyone realises that things work better that
way. Imagine what would happen if, for instance, mail transport agents
didn't follow RFC822. MTAs don't follow RFC822 because they're forced to,
but because Internet email just wouldn't work without it. The thought of
writing an MTA which was non-compliant is perverse (or Microsoft policy,
one or the other).
</p>

<p>
If your development team understands that standards do make things
easier and result in higher quality, more maintainable code, then the
effort of enforcement will be small.
</p>

<p>
Damn, I seem to have found a fourth rule. Oh well.
</p>

<p>
Fourth rule: don't expect coders to document. Don't expect coders to do
architecture or high-level design. Don't expect coders to have an eye for
user interface. If they do, that's great, but no matter how many standards
or methodologies you lay down, there's no way to change the fact that
coding skill is not necessarily related to, and in fact may be inversely
proportional to, those other necessary skills. Don't let a set of standards
be your crutch when you really need to hire designers or documentors.
</p>

        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="/pub/1999/12/">&laquo; December 1999</a> |
                                <a href="/pub/">Main Index</a> |
                                <a href="/pub/archives.html">Archives</a>
                                | <a href="/pub/2000/02/">February 2000 &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-what-is-perl widget">
    <div class="widget-content widget-content-what-is-perl">
       Visit the home of the  Perl programming language: <a href="http://www.perl.org/">Perl.org</a
    </div>
</div>
<div class="widget-find-out-more widget-archives widget">
    <div class="widget-content">
        <ul>
            <li><a href="http://www.perl.org/get.html">Download</a></li>
            <li><a href="http://perldoc.perl.org/">Documentation</a></li>
            <li><a href="http://blogs.perl.org/">Perl Bloggers</a></li>
            <li><a href="http://news.perlfoundation.org/">Foundation News</a></li>
        </ul>
    </div>
</div><div class="widget-tcpc widget">
<h3 class="widget-header">Sponsored by</h3>
    <div class="widget-content">
        <a href="http://training.perl.com/" alt="Perl Training" target="_blank"><img src="/i/tcpc.png" width="150" height="50"></a>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="/pub/atom.xml">Subscribe to this website's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="/pub/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="/pub/2014/02/">February 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2014/01/">January 2014 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/10/">October 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2013/01/">January 2013 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/12/">December 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/11/">November 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2012/10/">October 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/08/">August 2012 (2)</a></li>
        
    
        
            <li><a href="/pub/2012/06/">June 2012 (11)</a></li>
        
    
        
            <li><a href="/pub/2012/05/">May 2012 (18)</a></li>
        
    
        
            <li><a href="/pub/2012/04/">April 2012 (17)</a></li>
        
    
        
            <li><a href="/pub/2012/02/">February 2012 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/12/">December 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/09/">September 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/08/">August 2011 (2)</a></li>
        
    
        
            <li><a href="/pub/2011/06/">June 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/05/">May 2011 (3)</a></li>
        
    
        
            <li><a href="/pub/2011/04/">April 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/03/">March 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/02/">February 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2011/01/">January 2011 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/11/">November 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/10/">October 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/09/">September 2010 (1)</a></li>
        
    
        
            <li><a href="/pub/2010/08/">August 2010 (3)</a></li>
        
    
        
            <li><a href="/pub/2010/07/">July 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/04/">April 2010 (2)</a></li>
        
    
        
            <li><a href="/pub/2010/03/">March 2010 (4)</a></li>
        
    
        
            <li><a href="/pub/2008/05/">May 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/04/">April 2008 (2)</a></li>
        
    
        
            <li><a href="/pub/2008/03/">March 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/02/">February 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2008/01/">January 2008 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/12/">December 2007 (2)</a></li>
        
    
        
            <li><a href="/pub/2007/09/">September 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/08/">August 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/06/">June 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/05/">May 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/04/">April 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/03/">March 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/02/">February 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2007/01/">January 2007 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/12/">December 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/11/">November 2006 (2)</a></li>
        
    
        
            <li><a href="/pub/2006/10/">October 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/09/">September 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/08/">August 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/07/">July 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/06/">June 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/05/">May 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/03/">March 2006 (1)</a></li>
        
    
        
            <li><a href="/pub/2006/02/">February 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2006/01/">January 2006 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/12/">December 2005 (4)</a></li>
        
    
        
            <li><a href="/pub/2005/11/">November 2005 (3)</a></li>
        
    
        
            <li><a href="/pub/2005/10/">October 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/09/">September 2005 (2)</a></li>
        
    
        
            <li><a href="/pub/2005/08/">August 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/07/">July 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/06/">June 2005 (9)</a></li>
        
    
        
            <li><a href="/pub/2005/05/">May 2005 (8)</a></li>
        
    
        
            <li><a href="/pub/2005/04/">April 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/03/">March 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2005/02/">February 2005 (7)</a></li>
        
    
        
            <li><a href="/pub/2005/01/">January 2005 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/12/">December 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/11/">November 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/10/">October 2004 (5)</a></li>
        
    
        
            <li><a href="/pub/2004/09/">September 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/08/">August 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/07/">July 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/06/">June 2004 (6)</a></li>
        
    
        
            <li><a href="/pub/2004/05/">May 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2004/04/">April 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/03/">March 2004 (8)</a></li>
        
    
        
            <li><a href="/pub/2004/02/">February 2004 (9)</a></li>
        
    
        
            <li><a href="/pub/2004/01/">January 2004 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/12/">December 2003 (4)</a></li>
        
    
        
            <li><a href="/pub/2003/11/">November 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/10/">October 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/09/">September 2003 (6)</a></li>
        
    
        
            <li><a href="/pub/2003/08/">August 2003 (7)</a></li>
        
    
        
            <li><a href="/pub/2003/07/">July 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/06/">June 2003 (9)</a></li>
        
    
        
            <li><a href="/pub/2003/05/">May 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/04/">April 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/03/">March 2003 (10)</a></li>
        
    
        
            <li><a href="/pub/2003/02/">February 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2003/01/">January 2003 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/12/">December 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/11/">November 2002 (9)</a></li>
        
    
        
            <li><a href="/pub/2002/10/">October 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/09/">September 2002 (11)</a></li>
        
    
        
            <li><a href="/pub/2002/08/">August 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/07/">July 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2002/06/">June 2002 (4)</a></li>
        
    
        
            <li><a href="/pub/2002/05/">May 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/04/">April 2002 (6)</a></li>
        
    
        
            <li><a href="/pub/2002/03/">March 2002 (7)</a></li>
        
    
        
            <li><a href="/pub/2002/02/">February 2002 (5)</a></li>
        
    
        
            <li><a href="/pub/2002/01/">January 2002 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/12/">December 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/11/">November 2001 (5)</a></li>
        
    
        
            <li><a href="/pub/2001/10/">October 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/09/">September 2001 (7)</a></li>
        
    
        
            <li><a href="/pub/2001/08/">August 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/07/">July 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/06/">June 2001 (13)</a></li>
        
    
        
            <li><a href="/pub/2001/05/">May 2001 (11)</a></li>
        
    
        
            <li><a href="/pub/2001/04/">April 2001 (9)</a></li>
        
    
        
            <li><a href="/pub/2001/03/">March 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/02/">February 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2001/01/">January 2001 (8)</a></li>
        
    
        
            <li><a href="/pub/2000/12/">December 2000 (6)</a></li>
        
    
        
            <li><a href="/pub/2000/11/">November 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/10/">October 2000 (10)</a></li>
        
    
        
            <li><a href="/pub/2000/09/">September 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/08/">August 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/07/">July 2000 (5)</a></li>
        
    
        
            <li><a href="/pub/2000/06/">June 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/05/">May 2000 (7)</a></li>
        
    
        
            <li><a href="/pub/2000/04/">April 2000 (3)</a></li>
        
    
        
            <li><a href="/pub/2000/03/">March 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/02/">February 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/2000/01/">January 2000 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/12/">December 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/11/">November 1999 (6)</a></li>
        
    
        
            <li><a href="/pub/1999/10/">October 1999 (5)</a></li>
        
    
        
            <li><a href="/pub/1999/09/">September 1999 (4)</a></li>
        
    
        
            <li><a href="/pub/1999/08/">August 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/07/">July 1999 (2)</a></li>
        
    
        
            <li><a href="/pub/1999/06/">June 1999 (3)</a></li>
        
    
        
            <li><a href="/pub/1999/04/">April 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/03/">March 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1999/01/">January 1999 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/12/">December 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/11/">November 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/07/">July 1998 (2)</a></li>
        
    
        
            <li><a href="/pub/1998/06/">June 1998 (1)</a></li>
        
    
        
            <li><a href="/pub/1998/03/">March 1998 (1)</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.13-en" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.com/" rel="generator">Movable Type Pro</a>
                </div>
            </div>

            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
